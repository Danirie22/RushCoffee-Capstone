const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/HomePage-BWZQv-zI.js","assets/clock-BJsCdelt.js","assets/wallet-HLVfU1vW.js","assets/users-DlmmOuI8.js","assets/bell-BLhnndW8.js","assets/ForgotPasswordPage-Bk_s_0ds.js","assets/Input-DucRJv8d.js","assets/MenuPage-CrLAhPtD.js","assets/star-BMpTKGLE.js","assets/sparkles-Bb2hbwQN.js","assets/ProductCardSkeleton-C-83rx_i.js","assets/ProductCustomizeModal-COuyqgZa.js","assets/seedCustomizationOptions-pnAppNLB.js","assets/mockCustomizationOptions-CwPUP-Xn.js","assets/search-RroXiLLy.js","assets/arrow-up-down-CBWy3oW7.js","assets/CheckoutPage-BQ7w1Crp.js","assets/banknote-BfvjhGAE.js","assets/mockAvailableRewards-2NOuBi-T.js","assets/shopping-bag-Bdetsmow.js","assets/arrow-left-AzRhAqFQ.js","assets/coffee-DpDfGjMK.js","assets/message-square-JY8Arfsg.js","assets/QueuePage-CO4aCqz9.js","assets/Button-C_EsrJzi.js","assets/DigitalReceipt-l5GaKqe7.js","assets/thumbs-up-CV9B2TJK.js","assets/award-D-YS_SwU.js","assets/trending-up-D1ifxG5G.js","assets/RewardsPage-BfFY8Ui3.js","assets/history-BFa4MHAw.js","assets/format-BoV-TgZi.js","assets/en-US-wfBU2YNu.js","assets/calendar-Cyb_9kt5.js","assets/ProfilePage-BTGQz1vT.js","assets/save-Cxy8r0LN.js","assets/refresh-cw-C8ZdiIrV.js","assets/StarRating-CTgtAV-W.js","assets/send-Dhc4xh4w.js","assets/settings-CgW470E9.js","assets/square-pen-CxBXmChK.js","assets/AboutPage-D8fi1FXL.js","assets/zap-BbkN9RiD.js","assets/ContactPage-C6BMd3Eg.js","assets/Textarea-BOAWQlIs.js","assets/FAQPage-BLFZU60G.js","assets/TermsPage-CXXSo_fY.js","assets/file-text-5H3YSLpr.js","assets/credit-card-BjCgG5gW.js","assets/PrivacyPolicyPage-DPRH50ZP.js","assets/circle-check-CbH5p863.js","assets/CookiePolicyPage-CoSkJRuO.js","assets/chart-column-BVwtwnHx.js","assets/AdminLayout-CdCndSLW.js","assets/ConfirmLogoutModal-BHkHBwlT.js","assets/package-4NRos7sG.js","assets/AdminDashboardPage-Cym-D3QQ.js","assets/SalesOverview-DvUWbH6z.js","assets/dollar-sign-BPB6GueR.js","assets/AdminQueuePage-Plhj6cS0.js","assets/inventoryDeduction-D2lG7a3v.js","assets/AdminInventoryPage-FmKFpIgX.js","assets/snowflake-D9WJAxl2.js","assets/AdminProductsPage-DtzORaM3.js","assets/AdminAnalyticsPage-DaZTruDz.js","assets/AdminFeedbackPage-C93aJLCv.js","assets/funnel-B9HHaNMv.js","assets/AdminSettingsPage-Bz7OSiOi.js","assets/store-CB88GPXy.js","assets/AdminOrdersHistoryPage-Bo6wjOX3.js","assets/AdminUsersPage-D0TxHaF-.js","assets/EmployeeLayout-CZ4S_2X4.js","assets/POSDashboard-sP90MDWs.js","assets/POSPage-DjGxwM_m.js"])))=>i.map(i=>d[i]);
function i4(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in t)){const s=Object.getOwnPropertyDescriptor(i,r);s&&Object.defineProperty(t,r,s.get?s:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();function qx(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Hx={exports:{}},bp={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r4=Symbol.for("react.transitional.element"),s4=Symbol.for("react.fragment");function Gx(t,e,n){var i=null;if(n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),"key"in e){n={};for(var r in e)r!=="key"&&(n[r]=e[r])}else n=e;return e=n.ref,{$$typeof:r4,type:t,key:i,ref:e!==void 0?e:null,props:n}}bp.Fragment=s4;bp.jsx=Gx;bp.jsxs=Gx;Hx.exports=bp;var y=Hx.exports,$x={exports:{}},ae={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var O0=Symbol.for("react.transitional.element"),a4=Symbol.for("react.portal"),o4=Symbol.for("react.fragment"),l4=Symbol.for("react.strict_mode"),c4=Symbol.for("react.profiler"),u4=Symbol.for("react.consumer"),h4=Symbol.for("react.context"),d4=Symbol.for("react.forward_ref"),f4=Symbol.for("react.suspense"),m4=Symbol.for("react.memo"),Kx=Symbol.for("react.lazy"),p4=Symbol.for("react.activity"),gA=Symbol.iterator;function g4(t){return t===null||typeof t!="object"?null:(t=gA&&t[gA]||t["@@iterator"],typeof t=="function"?t:null)}var Qx={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Wx=Object.assign,Yx={};function ic(t,e,n){this.props=t,this.context=e,this.refs=Yx,this.updater=n||Qx}ic.prototype.isReactComponent={};ic.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ic.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Xx(){}Xx.prototype=ic.prototype;function M0(t,e,n){this.props=t,this.context=e,this.refs=Yx,this.updater=n||Qx}var L0=M0.prototype=new Xx;L0.constructor=M0;Wx(L0,ic.prototype);L0.isPureReactComponent=!0;var yA=Array.isArray;function C_(){}var qe={H:null,A:null,T:null,S:null},Jx=Object.prototype.hasOwnProperty;function U0(t,e,n){var i=n.ref;return{$$typeof:O0,type:t,key:e,ref:i!==void 0?i:null,props:n}}function y4(t,e){return U0(t.type,e,t.props)}function z0(t){return typeof t=="object"&&t!==null&&t.$$typeof===O0}function _4(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var _A=/\/+/g;function ly(t,e){return typeof t=="object"&&t!==null&&t.key!=null?_4(""+t.key):e.toString(36)}function v4(t){switch(t.status){case"fulfilled":return t.value;case"rejected":throw t.reason;default:switch(typeof t.status=="string"?t.then(C_,C_):(t.status="pending",t.then(function(e){t.status==="pending"&&(t.status="fulfilled",t.value=e)},function(e){t.status==="pending"&&(t.status="rejected",t.reason=e)})),t.status){case"fulfilled":return t.value;case"rejected":throw t.reason}}throw t}function Vo(t,e,n,i,r){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(s){case"bigint":case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case O0:case a4:a=!0;break;case Kx:return a=t._init,Vo(a(t._payload),e,n,i,r)}}if(a)return r=r(t),a=i===""?"."+ly(t,0):i,yA(r)?(n="",a!=null&&(n=a.replace(_A,"$&/")+"/"),Vo(r,e,n,"",function(c){return c})):r!=null&&(z0(r)&&(r=y4(r,n+(r.key==null||t&&t.key===r.key?"":(""+r.key).replace(_A,"$&/")+"/")+a)),e.push(r)),1;a=0;var o=i===""?".":i+":";if(yA(t))for(var l=0;l<t.length;l++)i=t[l],s=o+ly(i,l),a+=Vo(i,e,n,s,r);else if(l=g4(t),typeof l=="function")for(t=l.call(t),l=0;!(i=t.next()).done;)i=i.value,s=o+ly(i,l++),a+=Vo(i,e,n,s,r);else if(s==="object"){if(typeof t.then=="function")return Vo(v4(t),e,n,i,r);throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.")}return a}function Wd(t,e,n){if(t==null)return t;var i=[],r=0;return Vo(t,i,"","",function(s){return e.call(n,s,r++)}),i}function T4(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var vA=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},w4={map:Wd,forEach:function(t,e,n){Wd(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Wd(t,function(){e++}),e},toArray:function(t){return Wd(t,function(e){return e})||[]},only:function(t){if(!z0(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ae.Activity=p4;ae.Children=w4;ae.Component=ic;ae.Fragment=o4;ae.Profiler=c4;ae.PureComponent=M0;ae.StrictMode=l4;ae.Suspense=f4;ae.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=qe;ae.__COMPILER_RUNTIME={__proto__:null,c:function(t){return qe.H.useMemoCache(t)}};ae.cache=function(t){return function(){return t.apply(null,arguments)}};ae.cacheSignal=function(){return null};ae.cloneElement=function(t,e,n){if(t==null)throw Error("The argument must be a React element, but you passed "+t+".");var i=Wx({},t.props),r=t.key;if(e!=null)for(s in e.key!==void 0&&(r=""+e.key),e)!Jx.call(e,s)||s==="key"||s==="__self"||s==="__source"||s==="ref"&&e.ref===void 0||(i[s]=e[s]);var s=arguments.length-2;if(s===1)i.children=n;else if(1<s){for(var a=Array(s),o=0;o<s;o++)a[o]=arguments[o+2];i.children=a}return U0(t.type,r,i)};ae.createContext=function(t){return t={$$typeof:h4,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null},t.Provider=t,t.Consumer={$$typeof:u4,_context:t},t};ae.createElement=function(t,e,n){var i,r={},s=null;if(e!=null)for(i in e.key!==void 0&&(s=""+e.key),e)Jx.call(e,i)&&i!=="key"&&i!=="__self"&&i!=="__source"&&(r[i]=e[i]);var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){for(var o=Array(a),l=0;l<a;l++)o[l]=arguments[l+2];r.children=o}if(t&&t.defaultProps)for(i in a=t.defaultProps,a)r[i]===void 0&&(r[i]=a[i]);return U0(t,s,r)};ae.createRef=function(){return{current:null}};ae.forwardRef=function(t){return{$$typeof:d4,render:t}};ae.isValidElement=z0;ae.lazy=function(t){return{$$typeof:Kx,_payload:{_status:-1,_result:t},_init:T4}};ae.memo=function(t,e){return{$$typeof:m4,type:t,compare:e===void 0?null:e}};ae.startTransition=function(t){var e=qe.T,n={};qe.T=n;try{var i=t(),r=qe.S;r!==null&&r(n,i),typeof i=="object"&&i!==null&&typeof i.then=="function"&&i.then(C_,vA)}catch(s){vA(s)}finally{e!==null&&n.types!==null&&(e.types=n.types),qe.T=e}};ae.unstable_useCacheRefresh=function(){return qe.H.useCacheRefresh()};ae.use=function(t){return qe.H.use(t)};ae.useActionState=function(t,e,n){return qe.H.useActionState(t,e,n)};ae.useCallback=function(t,e){return qe.H.useCallback(t,e)};ae.useContext=function(t){return qe.H.useContext(t)};ae.useDebugValue=function(){};ae.useDeferredValue=function(t,e){return qe.H.useDeferredValue(t,e)};ae.useEffect=function(t,e){return qe.H.useEffect(t,e)};ae.useEffectEvent=function(t){return qe.H.useEffectEvent(t)};ae.useId=function(){return qe.H.useId()};ae.useImperativeHandle=function(t,e,n){return qe.H.useImperativeHandle(t,e,n)};ae.useInsertionEffect=function(t,e){return qe.H.useInsertionEffect(t,e)};ae.useLayoutEffect=function(t,e){return qe.H.useLayoutEffect(t,e)};ae.useMemo=function(t,e){return qe.H.useMemo(t,e)};ae.useOptimistic=function(t,e){return qe.H.useOptimistic(t,e)};ae.useReducer=function(t,e,n){return qe.H.useReducer(t,e,n)};ae.useRef=function(t){return qe.H.useRef(t)};ae.useState=function(t){return qe.H.useState(t)};ae.useSyncExternalStore=function(t,e,n){return qe.H.useSyncExternalStore(t,e,n)};ae.useTransition=function(){return qe.H.useTransition()};ae.version="19.2.0";$x.exports=ae;var x=$x.exports;const hm=qx(x),zZ=i4({__proto__:null,default:hm},[x]);var Zx={exports:{}},Ep={},eC={exports:{}},tC={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(G,Y){var B=G.length;G.push(Y);e:for(;0<B;){var te=B-1>>>1,oe=G[te];if(0<r(oe,Y))G[te]=Y,G[B]=oe,B=te;else break e}}function n(G){return G.length===0?null:G[0]}function i(G){if(G.length===0)return null;var Y=G[0],B=G.pop();if(B!==Y){G[0]=B;e:for(var te=0,oe=G.length,$n=oe>>>1;te<$n;){var In=2*(te+1)-1,Kn=G[In],Qn=In+1,Fr=G[Qn];if(0>r(Kn,B))Qn<oe&&0>r(Fr,Kn)?(G[te]=Fr,G[Qn]=B,te=Qn):(G[te]=Kn,G[In]=B,te=In);else if(Qn<oe&&0>r(Fr,B))G[te]=Fr,G[Qn]=B,te=Qn;else break e}}return Y}function r(G,Y){var B=G.sortIndex-Y.sortIndex;return B!==0?B:G.id-Y.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();t.unstable_now=function(){return a.now()-o}}var l=[],c=[],h=1,d=null,f=3,p=!1,w=!1,E=!1,A=!1,T=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;function C(G){for(var Y=n(c);Y!==null;){if(Y.callback===null)i(c);else if(Y.startTime<=G)i(c),Y.sortIndex=Y.expirationTime,e(l,Y);else break;Y=n(c)}}function V(G){if(E=!1,C(G),!w)if(n(l)!==null)w=!0,O||(O=!0,k());else{var Y=n(c);Y!==null&&ee(V,Y.startTime-G)}}var O=!1,S=-1,b=5,R=-1;function D(){return A?!0:!(t.unstable_now()-R<b)}function N(){if(A=!1,O){var G=t.unstable_now();R=G;var Y=!0;try{e:{w=!1,E&&(E=!1,v(S),S=-1),p=!0;var B=f;try{t:{for(C(G),d=n(l);d!==null&&!(d.expirationTime>G&&D());){var te=d.callback;if(typeof te=="function"){d.callback=null,f=d.priorityLevel;var oe=te(d.expirationTime<=G);if(G=t.unstable_now(),typeof oe=="function"){d.callback=oe,C(G),Y=!0;break t}d===n(l)&&i(l),C(G)}else i(l);d=n(l)}if(d!==null)Y=!0;else{var $n=n(c);$n!==null&&ee(V,$n.startTime-G),Y=!1}}break e}finally{d=null,f=B,p=!1}Y=void 0}}finally{Y?k():O=!1}}}var k;if(typeof _=="function")k=function(){_(N)};else if(typeof MessageChannel<"u"){var P=new MessageChannel,ie=P.port2;P.port1.onmessage=N,k=function(){ie.postMessage(null)}}else k=function(){T(N,0)};function ee(G,Y){S=T(function(){G(t.unstable_now())},Y)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(G){G.callback=null},t.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<G?Math.floor(1e3/G):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_next=function(G){switch(f){case 1:case 2:case 3:var Y=3;break;default:Y=f}var B=f;f=Y;try{return G()}finally{f=B}},t.unstable_requestPaint=function(){A=!0},t.unstable_runWithPriority=function(G,Y){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var B=f;f=G;try{return Y()}finally{f=B}},t.unstable_scheduleCallback=function(G,Y,B){var te=t.unstable_now();switch(typeof B=="object"&&B!==null?(B=B.delay,B=typeof B=="number"&&0<B?te+B:te):B=te,G){case 1:var oe=-1;break;case 2:oe=250;break;case 5:oe=1073741823;break;case 4:oe=1e4;break;default:oe=5e3}return oe=B+oe,G={id:h++,callback:Y,priorityLevel:G,startTime:B,expirationTime:oe,sortIndex:-1},B>te?(G.sortIndex=B,e(c,G),n(l)===null&&G===n(c)&&(E?(v(S),S=-1):E=!0,ee(V,B-te))):(G.sortIndex=oe,e(l,G),w||p||(w=!0,O||(O=!0,k()))),G},t.unstable_shouldYield=D,t.unstable_wrapCallback=function(G){var Y=f;return function(){var B=f;f=Y;try{return G.apply(this,arguments)}finally{f=B}}}})(tC);eC.exports=tC;var b4=eC.exports,nC={exports:{}},fn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var E4=x;function iC(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function Wr(){}var un={d:{f:Wr,r:function(){throw Error(iC(522))},D:Wr,C:Wr,L:Wr,m:Wr,X:Wr,S:Wr,M:Wr},p:0,findDOMNode:null},A4=Symbol.for("react.portal");function S4(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:A4,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}var Ru=E4.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function Ap(t,e){if(t==="font")return"";if(typeof e=="string")return e==="use-credentials"?e:""}fn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=un;fn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)throw Error(iC(299));return S4(t,e,null,n)};fn.flushSync=function(t){var e=Ru.T,n=un.p;try{if(Ru.T=null,un.p=2,t)return t()}finally{Ru.T=e,un.p=n,un.d.f()}};fn.preconnect=function(t,e){typeof t=="string"&&(e?(e=e.crossOrigin,e=typeof e=="string"?e==="use-credentials"?e:"":void 0):e=null,un.d.C(t,e))};fn.prefetchDNS=function(t){typeof t=="string"&&un.d.D(t)};fn.preinit=function(t,e){if(typeof t=="string"&&e&&typeof e.as=="string"){var n=e.as,i=Ap(n,e.crossOrigin),r=typeof e.integrity=="string"?e.integrity:void 0,s=typeof e.fetchPriority=="string"?e.fetchPriority:void 0;n==="style"?un.d.S(t,typeof e.precedence=="string"?e.precedence:void 0,{crossOrigin:i,integrity:r,fetchPriority:s}):n==="script"&&un.d.X(t,{crossOrigin:i,integrity:r,fetchPriority:s,nonce:typeof e.nonce=="string"?e.nonce:void 0})}};fn.preinitModule=function(t,e){if(typeof t=="string")if(typeof e=="object"&&e!==null){if(e.as==null||e.as==="script"){var n=Ap(e.as,e.crossOrigin);un.d.M(t,{crossOrigin:n,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0})}}else e==null&&un.d.M(t)};fn.preload=function(t,e){if(typeof t=="string"&&typeof e=="object"&&e!==null&&typeof e.as=="string"){var n=e.as,i=Ap(n,e.crossOrigin);un.d.L(t,n,{crossOrigin:i,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0,type:typeof e.type=="string"?e.type:void 0,fetchPriority:typeof e.fetchPriority=="string"?e.fetchPriority:void 0,referrerPolicy:typeof e.referrerPolicy=="string"?e.referrerPolicy:void 0,imageSrcSet:typeof e.imageSrcSet=="string"?e.imageSrcSet:void 0,imageSizes:typeof e.imageSizes=="string"?e.imageSizes:void 0,media:typeof e.media=="string"?e.media:void 0})}};fn.preloadModule=function(t,e){if(typeof t=="string")if(e){var n=Ap(e.as,e.crossOrigin);un.d.m(t,{as:typeof e.as=="string"&&e.as!=="script"?e.as:void 0,crossOrigin:n,integrity:typeof e.integrity=="string"?e.integrity:void 0})}else un.d.m(t)};fn.requestFormReset=function(t){un.d.r(t)};fn.unstable_batchedUpdates=function(t,e){return t(e)};fn.useFormState=function(t,e,n){return Ru.H.useFormState(t,e,n)};fn.useFormStatus=function(){return Ru.H.useHostTransitionStatus()};fn.version="19.2.0";function rC(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(rC)}catch(t){console.error(t)}}rC(),nC.exports=fn;var sC=nC.exports;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var It=b4,aC=x,I4=sC;function j(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function oC(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Xh(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function lC(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function cC(t){if(t.tag===31){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function TA(t){if(Xh(t)!==t)throw Error(j(188))}function R4(t){var e=t.alternate;if(!e){if(e=Xh(t),e===null)throw Error(j(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===n)return TA(r),t;if(s===i)return TA(r),e;s=s.sibling}throw Error(j(188))}if(n.return!==i.return)n=r,i=s;else{for(var a=!1,o=r.child;o;){if(o===n){a=!0,n=r,i=s;break}if(o===i){a=!0,i=r,n=s;break}o=o.sibling}if(!a){for(o=s.child;o;){if(o===n){a=!0,n=s,i=r;break}if(o===i){a=!0,i=s,n=r;break}o=o.sibling}if(!a)throw Error(j(189))}}if(n.alternate!==i)throw Error(j(190))}if(n.tag!==3)throw Error(j(188));return n.stateNode.current===n?t:e}function uC(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t;for(t=t.child;t!==null;){if(e=uC(t),e!==null)return e;t=t.sibling}return null}var Ge=Object.assign,x4=Symbol.for("react.element"),Yd=Symbol.for("react.transitional.element"),hu=Symbol.for("react.portal"),Fo=Symbol.for("react.fragment"),hC=Symbol.for("react.strict_mode"),P_=Symbol.for("react.profiler"),dC=Symbol.for("react.consumer"),lr=Symbol.for("react.context"),j0=Symbol.for("react.forward_ref"),D_=Symbol.for("react.suspense"),N_=Symbol.for("react.suspense_list"),B0=Symbol.for("react.memo"),ns=Symbol.for("react.lazy"),k_=Symbol.for("react.activity"),C4=Symbol.for("react.memo_cache_sentinel"),wA=Symbol.iterator;function $c(t){return t===null||typeof t!="object"?null:(t=wA&&t[wA]||t["@@iterator"],typeof t=="function"?t:null)}var P4=Symbol.for("react.client.reference");function V_(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===P4?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Fo:return"Fragment";case P_:return"Profiler";case hC:return"StrictMode";case D_:return"Suspense";case N_:return"SuspenseList";case k_:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case hu:return"Portal";case lr:return t.displayName||"Context";case dC:return(t._context.displayName||"Context")+".Consumer";case j0:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case B0:return e=t.displayName||null,e!==null?e:V_(t.type)||"Memo";case ns:e=t._payload,t=t._init;try{return V_(t(e))}catch{}}return null}var du=Array.isArray,re=aC.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ee=I4.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ka={pending:!1,data:null,method:null,action:null},O_=[],qo=-1;function Xi(t){return{current:t}}function kt(t){0>qo||(t.current=O_[qo],O_[qo]=null,qo--)}function Oe(t,e){qo++,O_[qo]=t.current,t.current=e}var Bi=Xi(null),oh=Xi(null),ys=Xi(null),dm=Xi(null);function fm(t,e){switch(Oe(ys,e),Oe(oh,t),Oe(Bi,null),e.nodeType){case 9:case 11:t=(t=e.documentElement)&&(t=t.namespaceURI)?RS(t):0;break;default:if(t=e.tagName,e=e.namespaceURI)e=RS(e),t=ND(e,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}kt(Bi),Oe(Bi,t)}function Tl(){kt(Bi),kt(oh),kt(ys)}function M_(t){t.memoizedState!==null&&Oe(dm,t);var e=Bi.current,n=ND(e,t.type);e!==n&&(Oe(oh,t),Oe(Bi,n))}function mm(t){oh.current===t&&(kt(Bi),kt(oh)),dm.current===t&&(kt(dm),_h._currentValue=ka)}var cy,bA;function ma(t){if(cy===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);cy=e&&e[1]||"",bA=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+cy+t+bA}var uy=!1;function hy(t,e){if(!t||uy)return"";uy=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var i={DetermineComponentFrameRoot:function(){try{if(e){var d=function(){throw Error()};if(Object.defineProperty(d.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(d,[])}catch(p){var f=p}Reflect.construct(t,[],d)}else{try{d.call()}catch(p){f=p}t.call(d.prototype)}}else{try{throw Error()}catch(p){f=p}(d=t())&&typeof d.catch=="function"&&d.catch(function(){})}}catch(p){if(p&&f&&typeof p.stack=="string")return[p.stack,f.stack]}return[null,null]}};i.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var r=Object.getOwnPropertyDescriptor(i.DetermineComponentFrameRoot,"name");r&&r.configurable&&Object.defineProperty(i.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var s=i.DetermineComponentFrameRoot(),a=s[0],o=s[1];if(a&&o){var l=a.split(`
`),c=o.split(`
`);for(r=i=0;i<l.length&&!l[i].includes("DetermineComponentFrameRoot");)i++;for(;r<c.length&&!c[r].includes("DetermineComponentFrameRoot");)r++;if(i===l.length||r===c.length)for(i=l.length-1,r=c.length-1;1<=i&&0<=r&&l[i]!==c[r];)r--;for(;1<=i&&0<=r;i--,r--)if(l[i]!==c[r]){if(i!==1||r!==1)do if(i--,r--,0>r||l[i]!==c[r]){var h=`
`+l[i].replace(" at new "," at ");return t.displayName&&h.includes("<anonymous>")&&(h=h.replace("<anonymous>",t.displayName)),h}while(1<=i&&0<=r);break}}}finally{uy=!1,Error.prepareStackTrace=n}return(n=t?t.displayName||t.name:"")?ma(n):""}function D4(t,e){switch(t.tag){case 26:case 27:case 5:return ma(t.type);case 16:return ma("Lazy");case 13:return t.child!==e&&e!==null?ma("Suspense Fallback"):ma("Suspense");case 19:return ma("SuspenseList");case 0:case 15:return hy(t.type,!1);case 11:return hy(t.type.render,!1);case 1:return hy(t.type,!0);case 31:return ma("Activity");default:return""}}function EA(t){try{var e="",n=null;do e+=D4(t,n),n=t,t=t.return;while(t);return e}catch(i){return`
Error generating stack: `+i.message+`
`+i.stack}}var L_=Object.prototype.hasOwnProperty,F0=It.unstable_scheduleCallback,dy=It.unstable_cancelCallback,N4=It.unstable_shouldYield,k4=It.unstable_requestPaint,On=It.unstable_now,V4=It.unstable_getCurrentPriorityLevel,fC=It.unstable_ImmediatePriority,mC=It.unstable_UserBlockingPriority,pm=It.unstable_NormalPriority,O4=It.unstable_LowPriority,pC=It.unstable_IdlePriority,M4=It.log,L4=It.unstable_setDisableYieldValue,Jh=null,Mn=null;function cs(t){if(typeof M4=="function"&&L4(t),Mn&&typeof Mn.setStrictMode=="function")try{Mn.setStrictMode(Jh,t)}catch{}}var Ln=Math.clz32?Math.clz32:j4,U4=Math.log,z4=Math.LN2;function j4(t){return t>>>=0,t===0?32:31-(U4(t)/z4|0)|0}var Xd=256,Jd=262144,Zd=4194304;function pa(t){var e=t&42;if(e!==0)return e;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Sp(t,e,n){var i=t.pendingLanes;if(i===0)return 0;var r=0,s=t.suspendedLanes,a=t.pingedLanes;t=t.warmLanes;var o=i&134217727;return o!==0?(i=o&~s,i!==0?r=pa(i):(a&=o,a!==0?r=pa(a):n||(n=o&~t,n!==0&&(r=pa(n))))):(o=i&~s,o!==0?r=pa(o):a!==0?r=pa(a):n||(n=i&~t,n!==0&&(r=pa(n)))),r===0?0:e!==0&&e!==r&&!(e&s)&&(s=r&-r,n=e&-e,s>=n||s===32&&(n&4194048)!==0)?e:r}function Zh(t,e){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&e)===0}function B4(t,e){switch(t){case 1:case 2:case 4:case 8:case 64:return e+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function gC(){var t=Zd;return Zd<<=1,!(Zd&62914560)&&(Zd=4194304),t}function fy(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ed(t,e){t.pendingLanes|=e,e!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function F4(t,e,n,i,r,s){var a=t.pendingLanes;t.pendingLanes=n,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=n,t.entangledLanes&=n,t.errorRecoveryDisabledLanes&=n,t.shellSuspendCounter=0;var o=t.entanglements,l=t.expirationTimes,c=t.hiddenUpdates;for(n=a&~n;0<n;){var h=31-Ln(n),d=1<<h;o[h]=0,l[h]=-1;var f=c[h];if(f!==null)for(c[h]=null,h=0;h<f.length;h++){var p=f[h];p!==null&&(p.lane&=-536870913)}n&=~d}i!==0&&yC(t,i,0),s!==0&&r===0&&t.tag!==0&&(t.suspendedLanes|=s&~(a&~e))}function yC(t,e,n){t.pendingLanes|=e,t.suspendedLanes&=~e;var i=31-Ln(e);t.entangledLanes|=e,t.entanglements[i]=t.entanglements[i]|1073741824|n&261930}function _C(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-Ln(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}function vC(t,e){var n=e&-e;return n=n&42?1:q0(n),n&(t.suspendedLanes|e)?0:n}function q0(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function H0(t){return t&=-t,2<t?8<t?t&134217727?32:268435456:8:2}function TC(){var t=Ee.p;return t!==0?t:(t=window.event,t===void 0?32:qD(t.type))}function AA(t,e){var n=Ee.p;try{return Ee.p=t,e()}finally{Ee.p=n}}var Ws=Math.random().toString(36).slice(2),Ut="__reactFiber$"+Ws,En="__reactProps$"+Ws,rc="__reactContainer$"+Ws,U_="__reactEvents$"+Ws,q4="__reactListeners$"+Ws,H4="__reactHandles$"+Ws,SA="__reactResources$"+Ws,td="__reactMarker$"+Ws;function G0(t){delete t[Ut],delete t[En],delete t[U_],delete t[q4],delete t[H4]}function Ho(t){var e=t[Ut];if(e)return e;for(var n=t.parentNode;n;){if(e=n[rc]||n[Ut]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=NS(t);t!==null;){if(n=t[Ut])return n;t=NS(t)}return e}t=n,n=t.parentNode}return null}function sc(t){if(t=t[Ut]||t[rc]){var e=t.tag;if(e===5||e===6||e===13||e===31||e===26||e===27||e===3)return t}return null}function fu(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t.stateNode;throw Error(j(33))}function al(t){var e=t[SA];return e||(e=t[SA]={hoistableStyles:new Map,hoistableScripts:new Map}),e}function Nt(t){t[td]=!0}var wC=new Set,bC={};function oo(t,e){wl(t,e),wl(t+"Capture",e)}function wl(t,e){for(bC[t]=e,t=0;t<e.length;t++)wC.add(e[t])}var G4=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),IA={},RA={};function $4(t){return L_.call(RA,t)?!0:L_.call(IA,t)?!1:G4.test(t)?RA[t]=!0:(IA[t]=!0,!1)}function Pf(t,e,n){if($4(e))if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":t.removeAttribute(e);return;case"boolean":var i=e.toLowerCase().slice(0,5);if(i!=="data-"&&i!=="aria-"){t.removeAttribute(e);return}}t.setAttribute(e,""+n)}}function ef(t,e,n){if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(e);return}t.setAttribute(e,""+n)}}function Zi(t,e,n,i){if(i===null)t.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(n);return}t.setAttributeNS(e,n,""+i)}}function Zn(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function EC(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function K4(t,e,n){var i=Object.getOwnPropertyDescriptor(t.constructor.prototype,e);if(!t.hasOwnProperty(e)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var r=i.get,s=i.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(a){n=""+a,s.call(this,a)}}),Object.defineProperty(t,e,{enumerable:i.enumerable}),{getValue:function(){return n},setValue:function(a){n=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function z_(t){if(!t._valueTracker){var e=EC(t)?"checked":"value";t._valueTracker=K4(t,e,""+t[e])}}function AC(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=EC(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function gm(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Q4=/[\n"\\]/g;function ni(t){return t.replace(Q4,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function j_(t,e,n,i,r,s,a,o){t.name="",a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"?t.type=a:t.removeAttribute("type"),e!=null?a==="number"?(e===0&&t.value===""||t.value!=e)&&(t.value=""+Zn(e)):t.value!==""+Zn(e)&&(t.value=""+Zn(e)):a!=="submit"&&a!=="reset"||t.removeAttribute("value"),e!=null?B_(t,a,Zn(e)):n!=null?B_(t,a,Zn(n)):i!=null&&t.removeAttribute("value"),r==null&&s!=null&&(t.defaultChecked=!!s),r!=null&&(t.checked=r&&typeof r!="function"&&typeof r!="symbol"),o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"?t.name=""+Zn(o):t.removeAttribute("name")}function SC(t,e,n,i,r,s,a,o){if(s!=null&&typeof s!="function"&&typeof s!="symbol"&&typeof s!="boolean"&&(t.type=s),e!=null||n!=null){if(!(s!=="submit"&&s!=="reset"||e!=null)){z_(t);return}n=n!=null?""+Zn(n):"",e=e!=null?""+Zn(e):n,o||e===t.value||(t.value=e),t.defaultValue=e}i=i??r,i=typeof i!="function"&&typeof i!="symbol"&&!!i,t.checked=o?t.checked:!!i,t.defaultChecked=!!i,a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"&&(t.name=a),z_(t)}function B_(t,e,n){e==="number"&&gm(t.ownerDocument)===t||t.defaultValue===""+n||(t.defaultValue=""+n)}function ol(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+Zn(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,i&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function IC(t,e,n){if(e!=null&&(e=""+Zn(e),e!==t.value&&(t.value=e),n==null)){t.defaultValue!==e&&(t.defaultValue=e);return}t.defaultValue=n!=null?""+Zn(n):""}function RC(t,e,n,i){if(e==null){if(i!=null){if(n!=null)throw Error(j(92));if(du(i)){if(1<i.length)throw Error(j(93));i=i[0]}n=i}n==null&&(n=""),e=n}n=Zn(e),t.defaultValue=n,i=t.textContent,i===n&&i!==""&&i!==null&&(t.value=i),z_(t)}function bl(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var W4=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function xA(t,e,n){var i=e.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?i?t.setProperty(e,""):e==="float"?t.cssFloat="":t[e]="":i?t.setProperty(e,n):typeof n!="number"||n===0||W4.has(e)?e==="float"?t.cssFloat=n:t[e]=(""+n).trim():t[e]=n+"px"}function xC(t,e,n){if(e!=null&&typeof e!="object")throw Error(j(62));if(t=t.style,n!=null){for(var i in n)!n.hasOwnProperty(i)||e!=null&&e.hasOwnProperty(i)||(i.indexOf("--")===0?t.setProperty(i,""):i==="float"?t.cssFloat="":t[i]="");for(var r in e)i=e[r],e.hasOwnProperty(r)&&n[r]!==i&&xA(t,r,i)}else for(var s in e)e.hasOwnProperty(s)&&xA(t,s,e[s])}function $0(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Y4=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),X4=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Df(t){return X4.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function cr(){}var F_=null;function K0(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Go=null,ll=null;function CA(t){var e=sc(t);if(e&&(t=e.stateNode)){var n=t[En]||null;e:switch(t=e.stateNode,e.type){case"input":if(j_(t,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+ni(""+e)+'"][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=i[En]||null;if(!r)throw Error(j(90));j_(i,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name)}}for(e=0;e<n.length;e++)i=n[e],i.form===t.form&&AC(i)}break e;case"textarea":IC(t,n.value,n.defaultValue);break e;case"select":e=n.value,e!=null&&ol(t,!!n.multiple,e,!1)}}}var my=!1;function CC(t,e,n){if(my)return t(e,n);my=!0;try{var i=t(e);return i}finally{if(my=!1,(Go!==null||ll!==null)&&(Lp(),Go&&(e=Go,t=ll,ll=Go=null,CA(e),t)))for(e=0;e<t.length;e++)CA(t[e])}}function lh(t,e){var n=t.stateNode;if(n===null)return null;var i=n[En]||null;if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(j(231,e,typeof n));return n}var wr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),q_=!1;if(wr)try{var Kc={};Object.defineProperty(Kc,"passive",{get:function(){q_=!0}}),window.addEventListener("test",Kc,Kc),window.removeEventListener("test",Kc,Kc)}catch{q_=!1}var us=null,Q0=null,Nf=null;function PC(){if(Nf)return Nf;var t,e=Q0,n=e.length,i,r="value"in us?us.value:us.textContent,s=r.length;for(t=0;t<n&&e[t]===r[t];t++);var a=n-t;for(i=1;i<=a&&e[n-i]===r[s-i];i++);return Nf=r.slice(t,1<i?1-i:void 0)}function kf(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function tf(){return!0}function PA(){return!1}function Sn(t){function e(n,i,r,s,a){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(n=t[o],this[o]=n?n(s):s[o]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?tf:PA,this.isPropagationStopped=PA,this}return Ge(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=tf)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=tf)},persist:function(){},isPersistent:tf}),e}var lo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ip=Sn(lo),nd=Ge({},lo,{view:0,detail:0}),J4=Sn(nd),py,gy,Qc,Rp=Ge({},nd,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:W0,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Qc&&(Qc&&t.type==="mousemove"?(py=t.screenX-Qc.screenX,gy=t.screenY-Qc.screenY):gy=py=0,Qc=t),py)},movementY:function(t){return"movementY"in t?t.movementY:gy}}),DA=Sn(Rp),Z4=Ge({},Rp,{dataTransfer:0}),eU=Sn(Z4),tU=Ge({},nd,{relatedTarget:0}),yy=Sn(tU),nU=Ge({},lo,{animationName:0,elapsedTime:0,pseudoElement:0}),iU=Sn(nU),rU=Ge({},lo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),sU=Sn(rU),aU=Ge({},lo,{data:0}),NA=Sn(aU),oU={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},lU={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},cU={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function uU(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=cU[t])?!!e[t]:!1}function W0(){return uU}var hU=Ge({},nd,{key:function(t){if(t.key){var e=oU[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=kf(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?lU[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:W0,charCode:function(t){return t.type==="keypress"?kf(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?kf(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),dU=Sn(hU),fU=Ge({},Rp,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),kA=Sn(fU),mU=Ge({},nd,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:W0}),pU=Sn(mU),gU=Ge({},lo,{propertyName:0,elapsedTime:0,pseudoElement:0}),yU=Sn(gU),_U=Ge({},Rp,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),vU=Sn(_U),TU=Ge({},lo,{newState:0,oldState:0}),wU=Sn(TU),bU=[9,13,27,32],Y0=wr&&"CompositionEvent"in window,xu=null;wr&&"documentMode"in document&&(xu=document.documentMode);var EU=wr&&"TextEvent"in window&&!xu,DC=wr&&(!Y0||xu&&8<xu&&11>=xu),VA=" ",OA=!1;function NC(t,e){switch(t){case"keyup":return bU.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function kC(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var $o=!1;function AU(t,e){switch(t){case"compositionend":return kC(e);case"keypress":return e.which!==32?null:(OA=!0,VA);case"textInput":return t=e.data,t===VA&&OA?null:t;default:return null}}function SU(t,e){if($o)return t==="compositionend"||!Y0&&NC(t,e)?(t=PC(),Nf=Q0=us=null,$o=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return DC&&e.locale!=="ko"?null:e.data;default:return null}}var IU={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function MA(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!IU[t.type]:e==="textarea"}function VC(t,e,n,i){Go?ll?ll.push(i):ll=[i]:Go=i,e=Vm(e,"onChange"),0<e.length&&(n=new Ip("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var Cu=null,ch=null;function RU(t){CD(t,0)}function xp(t){var e=fu(t);if(AC(e))return t}function LA(t,e){if(t==="change")return e}var OC=!1;if(wr){var _y;if(wr){var vy="oninput"in document;if(!vy){var UA=document.createElement("div");UA.setAttribute("oninput","return;"),vy=typeof UA.oninput=="function"}_y=vy}else _y=!1;OC=_y&&(!document.documentMode||9<document.documentMode)}function zA(){Cu&&(Cu.detachEvent("onpropertychange",MC),ch=Cu=null)}function MC(t){if(t.propertyName==="value"&&xp(ch)){var e=[];VC(e,ch,t,K0(t)),CC(RU,e)}}function xU(t,e,n){t==="focusin"?(zA(),Cu=e,ch=n,Cu.attachEvent("onpropertychange",MC)):t==="focusout"&&zA()}function CU(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return xp(ch)}function PU(t,e){if(t==="click")return xp(e)}function DU(t,e){if(t==="input"||t==="change")return xp(e)}function NU(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Fn=typeof Object.is=="function"?Object.is:NU;function uh(t,e){if(Fn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!L_.call(e,r)||!Fn(t[r],e[r]))return!1}return!0}function jA(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function BA(t,e){var n=jA(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=jA(n)}}function LC(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?LC(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function UC(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var e=gm(t.document);e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=gm(t.document)}return e}function X0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}var kU=wr&&"documentMode"in document&&11>=document.documentMode,Ko=null,H_=null,Pu=null,G_=!1;function FA(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;G_||Ko==null||Ko!==gm(i)||(i=Ko,"selectionStart"in i&&X0(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Pu&&uh(Pu,i)||(Pu=i,i=Vm(H_,"onSelect"),0<i.length&&(e=new Ip("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=Ko)))}function ha(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Qo={animationend:ha("Animation","AnimationEnd"),animationiteration:ha("Animation","AnimationIteration"),animationstart:ha("Animation","AnimationStart"),transitionrun:ha("Transition","TransitionRun"),transitionstart:ha("Transition","TransitionStart"),transitioncancel:ha("Transition","TransitionCancel"),transitionend:ha("Transition","TransitionEnd")},Ty={},zC={};wr&&(zC=document.createElement("div").style,"AnimationEvent"in window||(delete Qo.animationend.animation,delete Qo.animationiteration.animation,delete Qo.animationstart.animation),"TransitionEvent"in window||delete Qo.transitionend.transition);function co(t){if(Ty[t])return Ty[t];if(!Qo[t])return t;var e=Qo[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in zC)return Ty[t]=e[n];return t}var jC=co("animationend"),BC=co("animationiteration"),FC=co("animationstart"),VU=co("transitionrun"),OU=co("transitionstart"),MU=co("transitioncancel"),qC=co("transitionend"),HC=new Map,$_="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");$_.push("scrollEnd");function Ei(t,e){HC.set(t,e),oo(e,[t])}var ym=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},Jn=[],Wo=0,J0=0;function Cp(){for(var t=Wo,e=J0=Wo=0;e<t;){var n=Jn[e];Jn[e++]=null;var i=Jn[e];Jn[e++]=null;var r=Jn[e];Jn[e++]=null;var s=Jn[e];if(Jn[e++]=null,i!==null&&r!==null){var a=i.pending;a===null?r.next=r:(r.next=a.next,a.next=r),i.pending=r}s!==0&&GC(n,r,s)}}function Pp(t,e,n,i){Jn[Wo++]=t,Jn[Wo++]=e,Jn[Wo++]=n,Jn[Wo++]=i,J0|=i,t.lanes|=i,t=t.alternate,t!==null&&(t.lanes|=i)}function Z0(t,e,n,i){return Pp(t,e,n,i),_m(t)}function uo(t,e){return Pp(t,null,null,e),_m(t)}function GC(t,e,n){t.lanes|=n;var i=t.alternate;i!==null&&(i.lanes|=n);for(var r=!1,s=t.return;s!==null;)s.childLanes|=n,i=s.alternate,i!==null&&(i.childLanes|=n),s.tag===22&&(t=s.stateNode,t===null||t._visibility&1||(r=!0)),t=s,s=s.return;return t.tag===3?(s=t.stateNode,r&&e!==null&&(r=31-Ln(n),t=s.hiddenUpdates,i=t[r],i===null?t[r]=[e]:i.push(e),e.lane=n|536870912),s):null}function _m(t){if(50<zu)throw zu=0,fv=null,Error(j(185));for(var e=t.return;e!==null;)t=e,e=t.return;return t.tag===3?t.stateNode:null}var Yo={};function LU(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Nn(t,e,n,i){return new LU(t,e,n,i)}function eT(t){return t=t.prototype,!(!t||!t.isReactComponent)}function fr(t,e){var n=t.alternate;return n===null?(n=Nn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&65011712,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n.refCleanup=t.refCleanup,n}function $C(t,e){t.flags&=65011714;var n=t.alternate;return n===null?(t.childLanes=0,t.lanes=e,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,t.type=n.type,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),t}function Vf(t,e,n,i,r,s){var a=0;if(i=t,typeof t=="function")eT(t)&&(a=1);else if(typeof t=="string")a=F6(t,n,Bi.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case k_:return t=Nn(31,n,e,r),t.elementType=k_,t.lanes=s,t;case Fo:return Va(n.children,r,s,e);case hC:a=8,r|=24;break;case P_:return t=Nn(12,n,e,r|2),t.elementType=P_,t.lanes=s,t;case D_:return t=Nn(13,n,e,r),t.elementType=D_,t.lanes=s,t;case N_:return t=Nn(19,n,e,r),t.elementType=N_,t.lanes=s,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case lr:a=10;break e;case dC:a=9;break e;case j0:a=11;break e;case B0:a=14;break e;case ns:a=16,i=null;break e}a=29,n=Error(j(130,t===null?"null":typeof t,"")),i=null}return e=Nn(a,n,e,r),e.elementType=t,e.type=i,e.lanes=s,e}function Va(t,e,n,i){return t=Nn(7,t,i,e),t.lanes=n,t}function wy(t,e,n){return t=Nn(6,t,null,e),t.lanes=n,t}function KC(t){var e=Nn(18,null,null,0);return e.stateNode=t,e}function by(t,e,n){return e=Nn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}var qA=new WeakMap;function ii(t,e){if(typeof t=="object"&&t!==null){var n=qA.get(t);return n!==void 0?n:(e={value:t,source:e,stack:EA(e)},qA.set(t,e),e)}return{value:t,source:e,stack:EA(e)}}var Xo=[],Jo=0,vm=null,hh=0,ei=[],ti=0,Ds=null,Oi=1,Mi="";function sr(t,e){Xo[Jo++]=hh,Xo[Jo++]=vm,vm=t,hh=e}function QC(t,e,n){ei[ti++]=Oi,ei[ti++]=Mi,ei[ti++]=Ds,Ds=t;var i=Oi;t=Mi;var r=32-Ln(i)-1;i&=~(1<<r),n+=1;var s=32-Ln(e)+r;if(30<s){var a=r-r%5;s=(i&(1<<a)-1).toString(32),i>>=a,r-=a,Oi=1<<32-Ln(e)+r|n<<r|i,Mi=s+t}else Oi=1<<s|n<<r|i,Mi=t}function tT(t){t.return!==null&&(sr(t,1),QC(t,1,0))}function nT(t){for(;t===vm;)vm=Xo[--Jo],Xo[Jo]=null,hh=Xo[--Jo],Xo[Jo]=null;for(;t===Ds;)Ds=ei[--ti],ei[ti]=null,Mi=ei[--ti],ei[ti]=null,Oi=ei[--ti],ei[ti]=null}function WC(t,e){ei[ti++]=Oi,ei[ti++]=Mi,ei[ti++]=Ds,Oi=e.id,Mi=e.overflow,Ds=t}var zt=null,je=null,ve=!1,_s=null,ri=!1,K_=Error(j(519));function Ns(t){var e=Error(j(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw dh(ii(e,t)),K_}function HA(t){var e=t.stateNode,n=t.type,i=t.memoizedProps;switch(e[Ut]=t,e[En]=i,n){case"dialog":de("cancel",e),de("close",e);break;case"iframe":case"object":case"embed":de("load",e);break;case"video":case"audio":for(n=0;n<gh.length;n++)de(gh[n],e);break;case"source":de("error",e);break;case"img":case"image":case"link":de("error",e),de("load",e);break;case"details":de("toggle",e);break;case"input":de("invalid",e),SC(e,i.value,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name,!0);break;case"select":de("invalid",e);break;case"textarea":de("invalid",e),RC(e,i.value,i.defaultValue,i.children)}n=i.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||e.textContent===""+n||i.suppressHydrationWarning===!0||DD(e.textContent,n)?(i.popover!=null&&(de("beforetoggle",e),de("toggle",e)),i.onScroll!=null&&de("scroll",e),i.onScrollEnd!=null&&de("scrollend",e),i.onClick!=null&&(e.onclick=cr),e=!0):e=!1,e||Ns(t,!0)}function GA(t){for(zt=t.return;zt;)switch(zt.tag){case 5:case 31:case 13:ri=!1;return;case 27:case 3:ri=!0;return;default:zt=zt.return}}function Ao(t){if(t!==zt)return!1;if(!ve)return GA(t),ve=!0,!1;var e=t.tag,n;if((n=e!==3&&e!==27)&&((n=e===5)&&(n=t.type,n=!(n!=="form"&&n!=="button")||_v(t.type,t.memoizedProps)),n=!n),n&&je&&Ns(t),GA(t),e===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(j(317));je=DS(t)}else if(e===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(j(317));je=DS(t)}else e===27?(e=je,Ys(t.type)?(t=bv,bv=null,je=t):je=e):je=zt?li(t.stateNode.nextSibling):null;return!0}function qa(){je=zt=null,ve=!1}function Ey(){var t=_s;return t!==null&&(yn===null?yn=t:yn.push.apply(yn,t),_s=null),t}function dh(t){_s===null?_s=[t]:_s.push(t)}var Q_=Xi(null),ho=null,ur=null;function rs(t,e,n){Oe(Q_,e._currentValue),e._currentValue=n}function mr(t){t._currentValue=Q_.current,kt(Q_)}function W_(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function Y_(t,e,n,i){var r=t.child;for(r!==null&&(r.return=t);r!==null;){var s=r.dependencies;if(s!==null){var a=r.child;s=s.firstContext;e:for(;s!==null;){var o=s;s=r;for(var l=0;l<e.length;l++)if(o.context===e[l]){s.lanes|=n,o=s.alternate,o!==null&&(o.lanes|=n),W_(s.return,n,t),i||(a=null);break e}s=o.next}}else if(r.tag===18){if(a=r.return,a===null)throw Error(j(341));a.lanes|=n,s=a.alternate,s!==null&&(s.lanes|=n),W_(a,n,t),a=null}else a=r.child;if(a!==null)a.return=r;else for(a=r;a!==null;){if(a===t){a=null;break}if(r=a.sibling,r!==null){r.return=a.return,a=r;break}a=a.return}r=a}}function ac(t,e,n,i){t=null;for(var r=e,s=!1;r!==null;){if(!s){if(r.flags&524288)s=!0;else if(r.flags&262144)break}if(r.tag===10){var a=r.alternate;if(a===null)throw Error(j(387));if(a=a.memoizedProps,a!==null){var o=r.type;Fn(r.pendingProps.value,a.value)||(t!==null?t.push(o):t=[o])}}else if(r===dm.current){if(a=r.alternate,a===null)throw Error(j(387));a.memoizedState.memoizedState!==r.memoizedState.memoizedState&&(t!==null?t.push(_h):t=[_h])}r=r.return}t!==null&&Y_(e,t,n,i),e.flags|=262144}function Tm(t){for(t=t.firstContext;t!==null;){if(!Fn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Ha(t){ho=t,ur=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Bt(t){return YC(ho,t)}function nf(t,e){return ho===null&&Ha(t),YC(t,e)}function YC(t,e){var n=e._currentValue;if(e={context:e,memoizedValue:n,next:null},ur===null){if(t===null)throw Error(j(308));ur=e,t.dependencies={lanes:0,firstContext:e},t.flags|=524288}else ur=ur.next=e;return n}var UU=typeof AbortController<"u"?AbortController:function(){var t=[],e=this.signal={aborted:!1,addEventListener:function(n,i){t.push(i)}};this.abort=function(){e.aborted=!0,t.forEach(function(n){return n()})}},zU=It.unstable_scheduleCallback,jU=It.unstable_NormalPriority,Tt={$$typeof:lr,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function iT(){return{controller:new UU,data:new Map,refCount:0}}function id(t){t.refCount--,t.refCount===0&&zU(jU,function(){t.controller.abort()})}var Du=null,X_=0,El=0,cl=null;function BU(t,e){if(Du===null){var n=Du=[];X_=0,El=xT(),cl={status:"pending",value:void 0,then:function(i){n.push(i)}}}return X_++,e.then($A,$A),e}function $A(){if(--X_===0&&Du!==null){cl!==null&&(cl.status="fulfilled");var t=Du;Du=null,El=0,cl=null;for(var e=0;e<t.length;e++)(0,t[e])()}}function FU(t,e){var n=[],i={status:"pending",value:null,reason:null,then:function(r){n.push(r)}};return t.then(function(){i.status="fulfilled",i.value=e;for(var r=0;r<n.length;r++)(0,n[r])(e)},function(r){for(i.status="rejected",i.reason=r,r=0;r<n.length;r++)(0,n[r])(void 0)}),i}var KA=re.S;re.S=function(t,e){uD=On(),typeof e=="object"&&e!==null&&typeof e.then=="function"&&BU(t,e),KA!==null&&KA(t,e)};var Oa=Xi(null);function rT(){var t=Oa.current;return t!==null?t:Ve.pooledCache}function Of(t,e){e===null?Oe(Oa,Oa.current):Oe(Oa,e.pool)}function XC(){var t=rT();return t===null?null:{parent:Tt._currentValue,pool:t}}var oc=Error(j(460)),sT=Error(j(474)),Dp=Error(j(542)),wm={then:function(){}};function QA(t){return t=t.status,t==="fulfilled"||t==="rejected"}function JC(t,e,n){switch(n=t[n],n===void 0?t.push(e):n!==e&&(e.then(cr,cr),e=n),e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,YA(t),t;default:if(typeof e.status=="string")e.then(cr,cr);else{if(t=Ve,t!==null&&100<t.shellSuspendCounter)throw Error(j(482));t=e,t.status="pending",t.then(function(i){if(e.status==="pending"){var r=e;r.status="fulfilled",r.value=i}},function(i){if(e.status==="pending"){var r=e;r.status="rejected",r.reason=i}})}switch(e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,YA(t),t}throw Ma=e,oc}}function ga(t){try{var e=t._init;return e(t._payload)}catch(n){throw n!==null&&typeof n=="object"&&typeof n.then=="function"?(Ma=n,oc):n}}var Ma=null;function WA(){if(Ma===null)throw Error(j(459));var t=Ma;return Ma=null,t}function YA(t){if(t===oc||t===Dp)throw Error(j(483))}var ul=null,fh=0;function rf(t){var e=fh;return fh+=1,ul===null&&(ul=[]),JC(ul,t,e)}function Wc(t,e){e=e.props.ref,t.ref=e!==void 0?e:null}function sf(t,e){throw e.$$typeof===x4?Error(j(525)):(t=Object.prototype.toString.call(e),Error(j(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)))}function ZC(t){function e(T,v){if(t){var _=T.deletions;_===null?(T.deletions=[v],T.flags|=16):_.push(v)}}function n(T,v){if(!t)return null;for(;v!==null;)e(T,v),v=v.sibling;return null}function i(T){for(var v=new Map;T!==null;)T.key!==null?v.set(T.key,T):v.set(T.index,T),T=T.sibling;return v}function r(T,v){return T=fr(T,v),T.index=0,T.sibling=null,T}function s(T,v,_){return T.index=_,t?(_=T.alternate,_!==null?(_=_.index,_<v?(T.flags|=67108866,v):_):(T.flags|=67108866,v)):(T.flags|=1048576,v)}function a(T){return t&&T.alternate===null&&(T.flags|=67108866),T}function o(T,v,_,C){return v===null||v.tag!==6?(v=wy(_,T.mode,C),v.return=T,v):(v=r(v,_),v.return=T,v)}function l(T,v,_,C){var V=_.type;return V===Fo?h(T,v,_.props.children,C,_.key):v!==null&&(v.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===ns&&ga(V)===v.type)?(v=r(v,_.props),Wc(v,_),v.return=T,v):(v=Vf(_.type,_.key,_.props,null,T.mode,C),Wc(v,_),v.return=T,v)}function c(T,v,_,C){return v===null||v.tag!==4||v.stateNode.containerInfo!==_.containerInfo||v.stateNode.implementation!==_.implementation?(v=by(_,T.mode,C),v.return=T,v):(v=r(v,_.children||[]),v.return=T,v)}function h(T,v,_,C,V){return v===null||v.tag!==7?(v=Va(_,T.mode,C,V),v.return=T,v):(v=r(v,_),v.return=T,v)}function d(T,v,_){if(typeof v=="string"&&v!==""||typeof v=="number"||typeof v=="bigint")return v=wy(""+v,T.mode,_),v.return=T,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Yd:return _=Vf(v.type,v.key,v.props,null,T.mode,_),Wc(_,v),_.return=T,_;case hu:return v=by(v,T.mode,_),v.return=T,v;case ns:return v=ga(v),d(T,v,_)}if(du(v)||$c(v))return v=Va(v,T.mode,_,null),v.return=T,v;if(typeof v.then=="function")return d(T,rf(v),_);if(v.$$typeof===lr)return d(T,nf(T,v),_);sf(T,v)}return null}function f(T,v,_,C){var V=v!==null?v.key:null;if(typeof _=="string"&&_!==""||typeof _=="number"||typeof _=="bigint")return V!==null?null:o(T,v,""+_,C);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Yd:return _.key===V?l(T,v,_,C):null;case hu:return _.key===V?c(T,v,_,C):null;case ns:return _=ga(_),f(T,v,_,C)}if(du(_)||$c(_))return V!==null?null:h(T,v,_,C,null);if(typeof _.then=="function")return f(T,v,rf(_),C);if(_.$$typeof===lr)return f(T,v,nf(T,_),C);sf(T,_)}return null}function p(T,v,_,C,V){if(typeof C=="string"&&C!==""||typeof C=="number"||typeof C=="bigint")return T=T.get(_)||null,o(v,T,""+C,V);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Yd:return T=T.get(C.key===null?_:C.key)||null,l(v,T,C,V);case hu:return T=T.get(C.key===null?_:C.key)||null,c(v,T,C,V);case ns:return C=ga(C),p(T,v,_,C,V)}if(du(C)||$c(C))return T=T.get(_)||null,h(v,T,C,V,null);if(typeof C.then=="function")return p(T,v,_,rf(C),V);if(C.$$typeof===lr)return p(T,v,_,nf(v,C),V);sf(v,C)}return null}function w(T,v,_,C){for(var V=null,O=null,S=v,b=v=0,R=null;S!==null&&b<_.length;b++){S.index>b?(R=S,S=null):R=S.sibling;var D=f(T,S,_[b],C);if(D===null){S===null&&(S=R);break}t&&S&&D.alternate===null&&e(T,S),v=s(D,v,b),O===null?V=D:O.sibling=D,O=D,S=R}if(b===_.length)return n(T,S),ve&&sr(T,b),V;if(S===null){for(;b<_.length;b++)S=d(T,_[b],C),S!==null&&(v=s(S,v,b),O===null?V=S:O.sibling=S,O=S);return ve&&sr(T,b),V}for(S=i(S);b<_.length;b++)R=p(S,T,b,_[b],C),R!==null&&(t&&R.alternate!==null&&S.delete(R.key===null?b:R.key),v=s(R,v,b),O===null?V=R:O.sibling=R,O=R);return t&&S.forEach(function(N){return e(T,N)}),ve&&sr(T,b),V}function E(T,v,_,C){if(_==null)throw Error(j(151));for(var V=null,O=null,S=v,b=v=0,R=null,D=_.next();S!==null&&!D.done;b++,D=_.next()){S.index>b?(R=S,S=null):R=S.sibling;var N=f(T,S,D.value,C);if(N===null){S===null&&(S=R);break}t&&S&&N.alternate===null&&e(T,S),v=s(N,v,b),O===null?V=N:O.sibling=N,O=N,S=R}if(D.done)return n(T,S),ve&&sr(T,b),V;if(S===null){for(;!D.done;b++,D=_.next())D=d(T,D.value,C),D!==null&&(v=s(D,v,b),O===null?V=D:O.sibling=D,O=D);return ve&&sr(T,b),V}for(S=i(S);!D.done;b++,D=_.next())D=p(S,T,b,D.value,C),D!==null&&(t&&D.alternate!==null&&S.delete(D.key===null?b:D.key),v=s(D,v,b),O===null?V=D:O.sibling=D,O=D);return t&&S.forEach(function(k){return e(T,k)}),ve&&sr(T,b),V}function A(T,v,_,C){if(typeof _=="object"&&_!==null&&_.type===Fo&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case Yd:e:{for(var V=_.key;v!==null;){if(v.key===V){if(V=_.type,V===Fo){if(v.tag===7){n(T,v.sibling),C=r(v,_.props.children),C.return=T,T=C;break e}}else if(v.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===ns&&ga(V)===v.type){n(T,v.sibling),C=r(v,_.props),Wc(C,_),C.return=T,T=C;break e}n(T,v);break}else e(T,v);v=v.sibling}_.type===Fo?(C=Va(_.props.children,T.mode,C,_.key),C.return=T,T=C):(C=Vf(_.type,_.key,_.props,null,T.mode,C),Wc(C,_),C.return=T,T=C)}return a(T);case hu:e:{for(V=_.key;v!==null;){if(v.key===V)if(v.tag===4&&v.stateNode.containerInfo===_.containerInfo&&v.stateNode.implementation===_.implementation){n(T,v.sibling),C=r(v,_.children||[]),C.return=T,T=C;break e}else{n(T,v);break}else e(T,v);v=v.sibling}C=by(_,T.mode,C),C.return=T,T=C}return a(T);case ns:return _=ga(_),A(T,v,_,C)}if(du(_))return w(T,v,_,C);if($c(_)){if(V=$c(_),typeof V!="function")throw Error(j(150));return _=V.call(_),E(T,v,_,C)}if(typeof _.then=="function")return A(T,v,rf(_),C);if(_.$$typeof===lr)return A(T,v,nf(T,_),C);sf(T,_)}return typeof _=="string"&&_!==""||typeof _=="number"||typeof _=="bigint"?(_=""+_,v!==null&&v.tag===6?(n(T,v.sibling),C=r(v,_),C.return=T,T=C):(n(T,v),C=wy(_,T.mode,C),C.return=T,T=C),a(T)):n(T,v)}return function(T,v,_,C){try{fh=0;var V=A(T,v,_,C);return ul=null,V}catch(S){if(S===oc||S===Dp)throw S;var O=Nn(29,S,null,T.mode);return O.lanes=C,O.return=T,O}finally{}}}var Ga=ZC(!0),eP=ZC(!1),is=!1;function aT(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function J_(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function vs(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Ts(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,be&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,e=_m(t),GC(t,null,n),e}return Pp(t,i,e,n),_m(t)}function Nu(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194048)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,_C(t,n)}}function Ay(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var a={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};s===null?r=s=a:s=s.next=a,n=n.next}while(n!==null);s===null?r=s=e:s=s.next=e}else r=s=e;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,callbacks:i.callbacks},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}var Z_=!1;function ku(){if(Z_){var t=cl;if(t!==null)throw t}}function Vu(t,e,n,i){Z_=!1;var r=t.updateQueue;is=!1;var s=r.firstBaseUpdate,a=r.lastBaseUpdate,o=r.shared.pending;if(o!==null){r.shared.pending=null;var l=o,c=l.next;l.next=null,a===null?s=c:a.next=c,a=l;var h=t.alternate;h!==null&&(h=h.updateQueue,o=h.lastBaseUpdate,o!==a&&(o===null?h.firstBaseUpdate=c:o.next=c,h.lastBaseUpdate=l))}if(s!==null){var d=r.baseState;a=0,h=c=l=null,o=s;do{var f=o.lane&-536870913,p=f!==o.lane;if(p?(ge&f)===f:(i&f)===f){f!==0&&f===El&&(Z_=!0),h!==null&&(h=h.next={lane:0,tag:o.tag,payload:o.payload,callback:null,next:null});e:{var w=t,E=o;f=e;var A=n;switch(E.tag){case 1:if(w=E.payload,typeof w=="function"){d=w.call(A,d,f);break e}d=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=E.payload,f=typeof w=="function"?w.call(A,d,f):w,f==null)break e;d=Ge({},d,f);break e;case 2:is=!0}}f=o.callback,f!==null&&(t.flags|=64,p&&(t.flags|=8192),p=r.callbacks,p===null?r.callbacks=[f]:p.push(f))}else p={lane:f,tag:o.tag,payload:o.payload,callback:o.callback,next:null},h===null?(c=h=p,l=d):h=h.next=p,a|=f;if(o=o.next,o===null){if(o=r.shared.pending,o===null)break;p=o,o=p.next,p.next=null,r.lastBaseUpdate=p,r.shared.pending=null}}while(!0);h===null&&(l=d),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=h,s===null&&(r.shared.lanes=0),Vs|=a,t.lanes=a,t.memoizedState=d}}function tP(t,e){if(typeof t!="function")throw Error(j(191,t));t.call(e)}function nP(t,e){var n=t.callbacks;if(n!==null)for(t.callbacks=null,t=0;t<n.length;t++)tP(n[t],e)}var Al=Xi(null),bm=Xi(0);function XA(t,e){t=Sr,Oe(bm,t),Oe(Al,e),Sr=t|e.baseLanes}function ev(){Oe(bm,Sr),Oe(Al,Al.current)}function oT(){Sr=bm.current,kt(Al),kt(bm)}var qn=Xi(null),oi=null;function ss(t){var e=t.alternate;Oe(ht,ht.current&1),Oe(qn,t),oi===null&&(e===null||Al.current!==null||e.memoizedState!==null)&&(oi=t)}function tv(t){Oe(ht,ht.current),Oe(qn,t),oi===null&&(oi=t)}function iP(t){t.tag===22?(Oe(ht,ht.current),Oe(qn,t),oi===null&&(oi=t)):as()}function as(){Oe(ht,ht.current),Oe(qn,qn.current)}function Pn(t){kt(qn),oi===t&&(oi=null),kt(ht)}var ht=Xi(0);function Em(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||Tv(n)||wv(n)))return e}else if(e.tag===19&&(e.memoizedProps.revealOrder==="forwards"||e.memoizedProps.revealOrder==="backwards"||e.memoizedProps.revealOrder==="unstable_legacy-backwards"||e.memoizedProps.revealOrder==="together")){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var br=0,le=null,Pe=null,_t=null,Am=!1,hl=!1,$a=!1,Sm=0,mh=0,dl=null,qU=0;function it(){throw Error(j(321))}function lT(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Fn(t[n],e[n]))return!1;return!0}function cT(t,e,n,i,r,s){return br=s,le=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,re.H=t===null||t.memoizedState===null?VP:TT,$a=!1,s=n(i,r),$a=!1,hl&&(s=sP(e,n,i,r)),rP(t),s}function rP(t){re.H=ph;var e=Pe!==null&&Pe.next!==null;if(br=0,_t=Pe=le=null,Am=!1,mh=0,dl=null,e)throw Error(j(300));t===null||wt||(t=t.dependencies,t!==null&&Tm(t)&&(wt=!0))}function sP(t,e,n,i){le=t;var r=0;do{if(hl&&(dl=null),mh=0,hl=!1,25<=r)throw Error(j(301));if(r+=1,_t=Pe=null,t.updateQueue!=null){var s=t.updateQueue;s.lastEffect=null,s.events=null,s.stores=null,s.memoCache!=null&&(s.memoCache.index=0)}re.H=OP,s=e(n,i)}while(hl);return s}function HU(){var t=re.H,e=t.useState()[0];return e=typeof e.then=="function"?rd(e):e,t=t.useState()[0],(Pe!==null?Pe.memoizedState:null)!==t&&(le.flags|=1024),e}function uT(){var t=Sm!==0;return Sm=0,t}function hT(t,e,n){e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~n}function dT(t){if(Am){for(t=t.memoizedState;t!==null;){var e=t.queue;e!==null&&(e.pending=null),t=t.next}Am=!1}br=0,_t=Pe=le=null,hl=!1,mh=Sm=0,dl=null}function an(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return _t===null?le.memoizedState=_t=t:_t=_t.next=t,_t}function ft(){if(Pe===null){var t=le.alternate;t=t!==null?t.memoizedState:null}else t=Pe.next;var e=_t===null?le.memoizedState:_t.next;if(e!==null)_t=e,Pe=t;else{if(t===null)throw le.alternate===null?Error(j(467)):Error(j(310));Pe=t,t={memoizedState:Pe.memoizedState,baseState:Pe.baseState,baseQueue:Pe.baseQueue,queue:Pe.queue,next:null},_t===null?le.memoizedState=_t=t:_t=_t.next=t}return _t}function Np(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function rd(t){var e=mh;return mh+=1,dl===null&&(dl=[]),t=JC(dl,t,e),e=le,(_t===null?e.memoizedState:_t.next)===null&&(e=e.alternate,re.H=e===null||e.memoizedState===null?VP:TT),t}function kp(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return rd(t);if(t.$$typeof===lr)return Bt(t)}throw Error(j(438,String(t)))}function fT(t){var e=null,n=le.updateQueue;if(n!==null&&(e=n.memoCache),e==null){var i=le.alternate;i!==null&&(i=i.updateQueue,i!==null&&(i=i.memoCache,i!=null&&(e={data:i.data.map(function(r){return r.slice()}),index:0})))}if(e==null&&(e={data:[],index:0}),n===null&&(n=Np(),le.updateQueue=n),n.memoCache=e,n=e.data[e.index],n===void 0)for(n=e.data[e.index]=Array(t),i=0;i<t;i++)n[i]=C4;return e.index++,n}function Er(t,e){return typeof e=="function"?e(t):e}function Mf(t){var e=ft();return mT(e,Pe,t)}function mT(t,e,n){var i=t.queue;if(i===null)throw Error(j(311));i.lastRenderedReducer=n;var r=t.baseQueue,s=i.pending;if(s!==null){if(r!==null){var a=r.next;r.next=s.next,s.next=a}e.baseQueue=r=s,i.pending=null}if(s=t.baseState,r===null)t.memoizedState=s;else{e=r.next;var o=a=null,l=null,c=e,h=!1;do{var d=c.lane&-536870913;if(d!==c.lane?(ge&d)===d:(br&d)===d){var f=c.revertLane;if(f===0)l!==null&&(l=l.next={lane:0,revertLane:0,gesture:null,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),d===El&&(h=!0);else if((br&f)===f){c=c.next,f===El&&(h=!0);continue}else d={lane:0,revertLane:c.revertLane,gesture:null,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},l===null?(o=l=d,a=s):l=l.next=d,le.lanes|=f,Vs|=f;d=c.action,$a&&n(s,d),s=c.hasEagerState?c.eagerState:n(s,d)}else f={lane:d,revertLane:c.revertLane,gesture:c.gesture,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},l===null?(o=l=f,a=s):l=l.next=f,le.lanes|=d,Vs|=d;c=c.next}while(c!==null&&c!==e);if(l===null?a=s:l.next=o,!Fn(s,t.memoizedState)&&(wt=!0,h&&(n=cl,n!==null)))throw n;t.memoizedState=s,t.baseState=a,t.baseQueue=l,i.lastRenderedState=s}return r===null&&(i.lanes=0),[t.memoizedState,i.dispatch]}function Sy(t){var e=ft(),n=e.queue;if(n===null)throw Error(j(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,s=e.memoizedState;if(r!==null){n.pending=null;var a=r=r.next;do s=t(s,a.action),a=a.next;while(a!==r);Fn(s,e.memoizedState)||(wt=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,i]}function aP(t,e,n){var i=le,r=ft(),s=ve;if(s){if(n===void 0)throw Error(j(407));n=n()}else n=e();var a=!Fn((Pe||r).memoizedState,n);if(a&&(r.memoizedState=n,wt=!0),r=r.queue,pT(cP.bind(null,i,r,t),[t]),r.getSnapshot!==e||a||_t!==null&&_t.memoizedState.tag&1){if(i.flags|=2048,Sl(9,{destroy:void 0},lP.bind(null,i,r,n,e),null),Ve===null)throw Error(j(349));s||br&127||oP(i,e,n)}return n}function oP(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=le.updateQueue,e===null?(e=Np(),le.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function lP(t,e,n,i){e.value=n,e.getSnapshot=i,uP(e)&&hP(t)}function cP(t,e,n){return n(function(){uP(e)&&hP(t)})}function uP(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Fn(t,n)}catch{return!0}}function hP(t){var e=uo(t,2);e!==null&&bn(e,t,2)}function nv(t){var e=an();if(typeof t=="function"){var n=t;if(t=n(),$a){cs(!0);try{n()}finally{cs(!1)}}}return e.memoizedState=e.baseState=t,e.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Er,lastRenderedState:t},e}function dP(t,e,n,i){return t.baseState=n,mT(t,Pe,typeof i=="function"?i:Er)}function GU(t,e,n,i,r){if(Op(t))throw Error(j(485));if(t=e.action,t!==null){var s={payload:r,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(a){s.listeners.push(a)}};re.T!==null?n(!0):s.isTransition=!1,i(s),n=e.pending,n===null?(s.next=e.pending=s,fP(e,s)):(s.next=n.next,e.pending=n.next=s)}}function fP(t,e){var n=e.action,i=e.payload,r=t.state;if(e.isTransition){var s=re.T,a={};re.T=a;try{var o=n(r,i),l=re.S;l!==null&&l(a,o),JA(t,e,o)}catch(c){iv(t,e,c)}finally{s!==null&&a.types!==null&&(s.types=a.types),re.T=s}}else try{s=n(r,i),JA(t,e,s)}catch(c){iv(t,e,c)}}function JA(t,e,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(i){ZA(t,e,i)},function(i){return iv(t,e,i)}):ZA(t,e,n)}function ZA(t,e,n){e.status="fulfilled",e.value=n,mP(e),t.state=n,e=t.pending,e!==null&&(n=e.next,n===e?t.pending=null:(n=n.next,e.next=n,fP(t,n)))}function iv(t,e,n){var i=t.pending;if(t.pending=null,i!==null){i=i.next;do e.status="rejected",e.reason=n,mP(e),e=e.next;while(e!==i)}t.action=null}function mP(t){t=t.listeners;for(var e=0;e<t.length;e++)(0,t[e])()}function pP(t,e){return e}function eS(t,e){if(ve){var n=Ve.formState;if(n!==null){e:{var i=le;if(ve){if(je){t:{for(var r=je,s=ri;r.nodeType!==8;){if(!s){r=null;break t}if(r=li(r.nextSibling),r===null){r=null;break t}}s=r.data,r=s==="F!"||s==="F"?r:null}if(r){je=li(r.nextSibling),i=r.data==="F!";break e}}Ns(i)}i=!1}i&&(e=n[0])}}return n=an(),n.memoizedState=n.baseState=e,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:pP,lastRenderedState:e},n.queue=i,n=DP.bind(null,le,i),i.dispatch=n,i=nv(!1),s=vT.bind(null,le,!1,i.queue),i=an(),r={state:e,dispatch:null,action:t,pending:null},i.queue=r,n=GU.bind(null,le,r,s,n),r.dispatch=n,i.memoizedState=t,[e,n,!1]}function tS(t){var e=ft();return gP(e,Pe,t)}function gP(t,e,n){if(e=mT(t,e,pP)[0],t=Mf(Er)[0],typeof e=="object"&&e!==null&&typeof e.then=="function")try{var i=rd(e)}catch(a){throw a===oc?Dp:a}else i=e;e=ft();var r=e.queue,s=r.dispatch;return n!==e.memoizedState&&(le.flags|=2048,Sl(9,{destroy:void 0},$U.bind(null,r,n),null)),[i,s,t]}function $U(t,e){t.action=e}function nS(t){var e=ft(),n=Pe;if(n!==null)return gP(e,n,t);ft(),e=e.memoizedState,n=ft();var i=n.queue.dispatch;return n.memoizedState=t,[e,i,!1]}function Sl(t,e,n,i){return t={tag:t,create:n,deps:i,inst:e,next:null},e=le.updateQueue,e===null&&(e=Np(),le.updateQueue=e),n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t),t}function yP(){return ft().memoizedState}function Lf(t,e,n,i){var r=an();le.flags|=t,r.memoizedState=Sl(1|e,{destroy:void 0},n,i===void 0?null:i)}function Vp(t,e,n,i){var r=ft();i=i===void 0?null:i;var s=r.memoizedState.inst;Pe!==null&&i!==null&&lT(i,Pe.memoizedState.deps)?r.memoizedState=Sl(e,s,n,i):(le.flags|=t,r.memoizedState=Sl(1|e,s,n,i))}function iS(t,e){Lf(8390656,8,t,e)}function pT(t,e){Vp(2048,8,t,e)}function KU(t){le.flags|=4;var e=le.updateQueue;if(e===null)e=Np(),le.updateQueue=e,e.events=[t];else{var n=e.events;n===null?e.events=[t]:n.push(t)}}function _P(t){var e=ft().memoizedState;return KU({ref:e,nextImpl:t}),function(){if(be&2)throw Error(j(440));return e.impl.apply(void 0,arguments)}}function vP(t,e){return Vp(4,2,t,e)}function TP(t,e){return Vp(4,4,t,e)}function wP(t,e){if(typeof e=="function"){t=t();var n=e(t);return function(){typeof n=="function"?n():e(null)}}if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function bP(t,e,n){n=n!=null?n.concat([t]):null,Vp(4,4,wP.bind(null,e,t),n)}function gT(){}function EP(t,e){var n=ft();e=e===void 0?null:e;var i=n.memoizedState;return e!==null&&lT(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function AP(t,e){var n=ft();e=e===void 0?null:e;var i=n.memoizedState;if(e!==null&&lT(e,i[1]))return i[0];if(i=t(),$a){cs(!0);try{t()}finally{cs(!1)}}return n.memoizedState=[i,e],i}function yT(t,e,n){return n===void 0||br&1073741824&&!(ge&261930)?t.memoizedState=e:(t.memoizedState=n,t=dD(),le.lanes|=t,Vs|=t,n)}function SP(t,e,n,i){return Fn(n,e)?n:Al.current!==null?(t=yT(t,n,i),Fn(t,e)||(wt=!0),t):!(br&42)||br&1073741824&&!(ge&261930)?(wt=!0,t.memoizedState=n):(t=dD(),le.lanes|=t,Vs|=t,e)}function IP(t,e,n,i,r){var s=Ee.p;Ee.p=s!==0&&8>s?s:8;var a=re.T,o={};re.T=o,vT(t,!1,e,n);try{var l=r(),c=re.S;if(c!==null&&c(o,l),l!==null&&typeof l=="object"&&typeof l.then=="function"){var h=FU(l,i);Ou(t,e,h,Un(t))}else Ou(t,e,i,Un(t))}catch(d){Ou(t,e,{then:function(){},status:"rejected",reason:d},Un())}finally{Ee.p=s,a!==null&&o.types!==null&&(a.types=o.types),re.T=a}}function QU(){}function rv(t,e,n,i){if(t.tag!==5)throw Error(j(476));var r=RP(t).queue;IP(t,r,e,ka,n===null?QU:function(){return xP(t),n(i)})}function RP(t){var e=t.memoizedState;if(e!==null)return e;e={memoizedState:ka,baseState:ka,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Er,lastRenderedState:ka},next:null};var n={};return e.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Er,lastRenderedState:n},next:null},t.memoizedState=e,t=t.alternate,t!==null&&(t.memoizedState=e),e}function xP(t){var e=RP(t);e.next===null&&(e=t.alternate.memoizedState),Ou(t,e.next.queue,{},Un())}function _T(){return Bt(_h)}function CP(){return ft().memoizedState}function PP(){return ft().memoizedState}function WU(t){for(var e=t.return;e!==null;){switch(e.tag){case 24:case 3:var n=Un();t=vs(n);var i=Ts(e,t,n);i!==null&&(bn(i,e,n),Nu(i,e,n)),e={cache:iT()},t.payload=e;return}e=e.return}}function YU(t,e,n){var i=Un();n={lane:i,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},Op(t)?NP(e,n):(n=Z0(t,e,n,i),n!==null&&(bn(n,t,i),kP(n,e,i)))}function DP(t,e,n){var i=Un();Ou(t,e,n,i)}function Ou(t,e,n,i){var r={lane:i,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(Op(t))NP(e,r);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var a=e.lastRenderedState,o=s(a,n);if(r.hasEagerState=!0,r.eagerState=o,Fn(o,a))return Pp(t,e,r,0),Ve===null&&Cp(),!1}catch{}finally{}if(n=Z0(t,e,r,i),n!==null)return bn(n,t,i),kP(n,e,i),!0}return!1}function vT(t,e,n,i){if(i={lane:2,revertLane:xT(),gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null},Op(t)){if(e)throw Error(j(479))}else e=Z0(t,n,i,2),e!==null&&bn(e,t,2)}function Op(t){var e=t.alternate;return t===le||e!==null&&e===le}function NP(t,e){hl=Am=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function kP(t,e,n){if(n&4194048){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,_C(t,n)}}var ph={readContext:Bt,use:kp,useCallback:it,useContext:it,useEffect:it,useImperativeHandle:it,useLayoutEffect:it,useInsertionEffect:it,useMemo:it,useReducer:it,useRef:it,useState:it,useDebugValue:it,useDeferredValue:it,useTransition:it,useSyncExternalStore:it,useId:it,useHostTransitionStatus:it,useFormState:it,useActionState:it,useOptimistic:it,useMemoCache:it,useCacheRefresh:it};ph.useEffectEvent=it;var VP={readContext:Bt,use:kp,useCallback:function(t,e){return an().memoizedState=[t,e===void 0?null:e],t},useContext:Bt,useEffect:iS,useImperativeHandle:function(t,e,n){n=n!=null?n.concat([t]):null,Lf(4194308,4,wP.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Lf(4194308,4,t,e)},useInsertionEffect:function(t,e){Lf(4,2,t,e)},useMemo:function(t,e){var n=an();e=e===void 0?null:e;var i=t();if($a){cs(!0);try{t()}finally{cs(!1)}}return n.memoizedState=[i,e],i},useReducer:function(t,e,n){var i=an();if(n!==void 0){var r=n(e);if($a){cs(!0);try{n(e)}finally{cs(!1)}}}else r=e;return i.memoizedState=i.baseState=r,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:r},i.queue=t,t=t.dispatch=YU.bind(null,le,t),[i.memoizedState,t]},useRef:function(t){var e=an();return t={current:t},e.memoizedState=t},useState:function(t){t=nv(t);var e=t.queue,n=DP.bind(null,le,e);return e.dispatch=n,[t.memoizedState,n]},useDebugValue:gT,useDeferredValue:function(t,e){var n=an();return yT(n,t,e)},useTransition:function(){var t=nv(!1);return t=IP.bind(null,le,t.queue,!0,!1),an().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,e,n){var i=le,r=an();if(ve){if(n===void 0)throw Error(j(407));n=n()}else{if(n=e(),Ve===null)throw Error(j(349));ge&127||oP(i,e,n)}r.memoizedState=n;var s={value:n,getSnapshot:e};return r.queue=s,iS(cP.bind(null,i,s,t),[t]),i.flags|=2048,Sl(9,{destroy:void 0},lP.bind(null,i,s,n,e),null),n},useId:function(){var t=an(),e=Ve.identifierPrefix;if(ve){var n=Mi,i=Oi;n=(i&~(1<<32-Ln(i)-1)).toString(32)+n,e="_"+e+"R_"+n,n=Sm++,0<n&&(e+="H"+n.toString(32)),e+="_"}else n=qU++,e="_"+e+"r_"+n.toString(32)+"_";return t.memoizedState=e},useHostTransitionStatus:_T,useFormState:eS,useActionState:eS,useOptimistic:function(t){var e=an();e.memoizedState=e.baseState=t;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return e.queue=n,e=vT.bind(null,le,!0,n),n.dispatch=e,[t,e]},useMemoCache:fT,useCacheRefresh:function(){return an().memoizedState=WU.bind(null,le)},useEffectEvent:function(t){var e=an(),n={impl:t};return e.memoizedState=n,function(){if(be&2)throw Error(j(440));return n.impl.apply(void 0,arguments)}}},TT={readContext:Bt,use:kp,useCallback:EP,useContext:Bt,useEffect:pT,useImperativeHandle:bP,useInsertionEffect:vP,useLayoutEffect:TP,useMemo:AP,useReducer:Mf,useRef:yP,useState:function(){return Mf(Er)},useDebugValue:gT,useDeferredValue:function(t,e){var n=ft();return SP(n,Pe.memoizedState,t,e)},useTransition:function(){var t=Mf(Er)[0],e=ft().memoizedState;return[typeof t=="boolean"?t:rd(t),e]},useSyncExternalStore:aP,useId:CP,useHostTransitionStatus:_T,useFormState:tS,useActionState:tS,useOptimistic:function(t,e){var n=ft();return dP(n,Pe,t,e)},useMemoCache:fT,useCacheRefresh:PP};TT.useEffectEvent=_P;var OP={readContext:Bt,use:kp,useCallback:EP,useContext:Bt,useEffect:pT,useImperativeHandle:bP,useInsertionEffect:vP,useLayoutEffect:TP,useMemo:AP,useReducer:Sy,useRef:yP,useState:function(){return Sy(Er)},useDebugValue:gT,useDeferredValue:function(t,e){var n=ft();return Pe===null?yT(n,t,e):SP(n,Pe.memoizedState,t,e)},useTransition:function(){var t=Sy(Er)[0],e=ft().memoizedState;return[typeof t=="boolean"?t:rd(t),e]},useSyncExternalStore:aP,useId:CP,useHostTransitionStatus:_T,useFormState:nS,useActionState:nS,useOptimistic:function(t,e){var n=ft();return Pe!==null?dP(n,Pe,t,e):(n.baseState=t,[t,n.queue.dispatch])},useMemoCache:fT,useCacheRefresh:PP};OP.useEffectEvent=_P;function Iy(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:Ge({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var sv={enqueueSetState:function(t,e,n){t=t._reactInternals;var i=Un(),r=vs(i);r.payload=e,n!=null&&(r.callback=n),e=Ts(t,r,i),e!==null&&(bn(e,t,i),Nu(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=Un(),r=vs(i);r.tag=1,r.payload=e,n!=null&&(r.callback=n),e=Ts(t,r,i),e!==null&&(bn(e,t,i),Nu(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Un(),i=vs(n);i.tag=2,e!=null&&(i.callback=e),e=Ts(t,i,n),e!==null&&(bn(e,t,n),Nu(e,t,n))}};function rS(t,e,n,i,r,s,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,s,a):e.prototype&&e.prototype.isPureReactComponent?!uh(n,i)||!uh(r,s):!0}function sS(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&sv.enqueueReplaceState(e,e.state,null)}function Ka(t,e){var n=e;if("ref"in e){n={};for(var i in e)i!=="ref"&&(n[i]=e[i])}if(t=t.defaultProps){n===e&&(n=Ge({},n));for(var r in t)n[r]===void 0&&(n[r]=t[r])}return n}function MP(t){ym(t)}function LP(t){console.error(t)}function UP(t){ym(t)}function Im(t,e){try{var n=t.onUncaughtError;n(e.value,{componentStack:e.stack})}catch(i){setTimeout(function(){throw i})}}function aS(t,e,n){try{var i=t.onCaughtError;i(n.value,{componentStack:n.stack,errorBoundary:e.tag===1?e.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function av(t,e,n){return n=vs(n),n.tag=3,n.payload={element:null},n.callback=function(){Im(t,e)},n}function zP(t){return t=vs(t),t.tag=3,t}function jP(t,e,n,i){var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var s=i.value;t.payload=function(){return r(s)},t.callback=function(){aS(e,n,i)}}var a=n.stateNode;a!==null&&typeof a.componentDidCatch=="function"&&(t.callback=function(){aS(e,n,i),typeof r!="function"&&(ws===null?ws=new Set([this]):ws.add(this));var o=i.stack;this.componentDidCatch(i.value,{componentStack:o!==null?o:""})})}function XU(t,e,n,i,r){if(n.flags|=32768,i!==null&&typeof i=="object"&&typeof i.then=="function"){if(e=n.alternate,e!==null&&ac(e,n,r,!0),n=qn.current,n!==null){switch(n.tag){case 31:case 13:return oi===null?Dm():n.alternate===null&&st===0&&(st=3),n.flags&=-257,n.flags|=65536,n.lanes=r,i===wm?n.flags|=16384:(e=n.updateQueue,e===null?n.updateQueue=new Set([i]):e.add(i),Ly(t,i,r)),!1;case 22:return n.flags|=65536,i===wm?n.flags|=16384:(e=n.updateQueue,e===null?(e={transitions:null,markerInstances:null,retryQueue:new Set([i])},n.updateQueue=e):(n=e.retryQueue,n===null?e.retryQueue=new Set([i]):n.add(i)),Ly(t,i,r)),!1}throw Error(j(435,n.tag))}return Ly(t,i,r),Dm(),!1}if(ve)return e=qn.current,e!==null?(!(e.flags&65536)&&(e.flags|=256),e.flags|=65536,e.lanes=r,i!==K_&&(t=Error(j(422),{cause:i}),dh(ii(t,n)))):(i!==K_&&(e=Error(j(423),{cause:i}),dh(ii(e,n))),t=t.current.alternate,t.flags|=65536,r&=-r,t.lanes|=r,i=ii(i,n),r=av(t.stateNode,i,r),Ay(t,r),st!==4&&(st=2)),!1;var s=Error(j(520),{cause:i});if(s=ii(s,n),Uu===null?Uu=[s]:Uu.push(s),st!==4&&(st=2),e===null)return!0;i=ii(i,n),n=e;do{switch(n.tag){case 3:return n.flags|=65536,t=r&-r,n.lanes|=t,t=av(n.stateNode,i,t),Ay(n,t),!1;case 1:if(e=n.type,s=n.stateNode,(n.flags&128)===0&&(typeof e.getDerivedStateFromError=="function"||s!==null&&typeof s.componentDidCatch=="function"&&(ws===null||!ws.has(s))))return n.flags|=65536,r&=-r,n.lanes|=r,r=zP(r),jP(r,t,n,i),Ay(n,r),!1}n=n.return}while(n!==null);return!1}var wT=Error(j(461)),wt=!1;function Mt(t,e,n,i){e.child=t===null?eP(e,null,n,i):Ga(e,t.child,n,i)}function oS(t,e,n,i,r){n=n.render;var s=e.ref;if("ref"in i){var a={};for(var o in i)o!=="ref"&&(a[o]=i[o])}else a=i;return Ha(e),i=cT(t,e,n,a,s,r),o=uT(),t!==null&&!wt?(hT(t,e,r),Ar(t,e,r)):(ve&&o&&tT(e),e.flags|=1,Mt(t,e,i,r),e.child)}function lS(t,e,n,i,r){if(t===null){var s=n.type;return typeof s=="function"&&!eT(s)&&s.defaultProps===void 0&&n.compare===null?(e.tag=15,e.type=s,BP(t,e,s,i,r)):(t=Vf(n.type,null,i,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!bT(t,r)){var a=s.memoizedProps;if(n=n.compare,n=n!==null?n:uh,n(a,i)&&t.ref===e.ref)return Ar(t,e,r)}return e.flags|=1,t=fr(s,i),t.ref=e.ref,t.return=e,e.child=t}function BP(t,e,n,i,r){if(t!==null){var s=t.memoizedProps;if(uh(s,i)&&t.ref===e.ref)if(wt=!1,e.pendingProps=i=s,bT(t,r))t.flags&131072&&(wt=!0);else return e.lanes=t.lanes,Ar(t,e,r)}return ov(t,e,n,i,r)}function FP(t,e,n,i){var r=i.children,s=t!==null?t.memoizedState:null;if(t===null&&e.stateNode===null&&(e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.mode==="hidden"){if(e.flags&128){if(s=s!==null?s.baseLanes|n:n,t!==null){for(i=e.child=t.child,r=0;i!==null;)r=r|i.lanes|i.childLanes,i=i.sibling;i=r&~s}else i=0,e.child=null;return cS(t,e,s,n,i)}if(n&536870912)e.memoizedState={baseLanes:0,cachePool:null},t!==null&&Of(e,s!==null?s.cachePool:null),s!==null?XA(e,s):ev(),iP(e);else return i=e.lanes=536870912,cS(t,e,s!==null?s.baseLanes|n:n,n,i)}else s!==null?(Of(e,s.cachePool),XA(e,s),as(),e.memoizedState=null):(t!==null&&Of(e,null),ev(),as());return Mt(t,e,r,n),e.child}function mu(t,e){return t!==null&&t.tag===22||e.stateNode!==null||(e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),e.sibling}function cS(t,e,n,i,r){var s=rT();return s=s===null?null:{parent:Tt._currentValue,pool:s},e.memoizedState={baseLanes:n,cachePool:s},t!==null&&Of(e,null),ev(),iP(e),t!==null&&ac(t,e,i,!0),e.childLanes=r,null}function Uf(t,e){return e=Rm({mode:e.mode,children:e.children},t.mode),e.ref=t.ref,t.child=e,e.return=t,e}function uS(t,e,n){return Ga(e,t.child,null,n),t=Uf(e,e.pendingProps),t.flags|=2,Pn(e),e.memoizedState=null,t}function JU(t,e,n){var i=e.pendingProps,r=(e.flags&128)!==0;if(e.flags&=-129,t===null){if(ve){if(i.mode==="hidden")return t=Uf(e,i),e.lanes=536870912,mu(null,t);if(tv(e),(t=je)?(t=VD(t,ri),t=t!==null&&t.data==="&"?t:null,t!==null&&(e.memoizedState={dehydrated:t,treeContext:Ds!==null?{id:Oi,overflow:Mi}:null,retryLane:536870912,hydrationErrors:null},n=KC(t),n.return=e,e.child=n,zt=e,je=null)):t=null,t===null)throw Ns(e);return e.lanes=536870912,null}return Uf(e,i)}var s=t.memoizedState;if(s!==null){var a=s.dehydrated;if(tv(e),r)if(e.flags&256)e.flags&=-257,e=uS(t,e,n);else if(e.memoizedState!==null)e.child=t.child,e.flags|=128,e=null;else throw Error(j(558));else if(wt||ac(t,e,n,!1),r=(n&t.childLanes)!==0,wt||r){if(i=Ve,i!==null&&(a=vC(i,n),a!==0&&a!==s.retryLane))throw s.retryLane=a,uo(t,a),bn(i,t,a),wT;Dm(),e=uS(t,e,n)}else t=s.treeContext,je=li(a.nextSibling),zt=e,ve=!0,_s=null,ri=!1,t!==null&&WC(e,t),e=Uf(e,i),e.flags|=4096;return e}return t=fr(t.child,{mode:i.mode,children:i.children}),t.ref=e.ref,e.child=t,t.return=e,t}function zf(t,e){var n=e.ref;if(n===null)t!==null&&t.ref!==null&&(e.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(j(284));(t===null||t.ref!==n)&&(e.flags|=4194816)}}function ov(t,e,n,i,r){return Ha(e),n=cT(t,e,n,i,void 0,r),i=uT(),t!==null&&!wt?(hT(t,e,r),Ar(t,e,r)):(ve&&i&&tT(e),e.flags|=1,Mt(t,e,n,r),e.child)}function hS(t,e,n,i,r,s){return Ha(e),e.updateQueue=null,n=sP(e,i,n,r),rP(t),i=uT(),t!==null&&!wt?(hT(t,e,s),Ar(t,e,s)):(ve&&i&&tT(e),e.flags|=1,Mt(t,e,n,s),e.child)}function dS(t,e,n,i,r){if(Ha(e),e.stateNode===null){var s=Yo,a=n.contextType;typeof a=="object"&&a!==null&&(s=Bt(a)),s=new n(i,s),e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=sv,e.stateNode=s,s._reactInternals=e,s=e.stateNode,s.props=i,s.state=e.memoizedState,s.refs={},aT(e),a=n.contextType,s.context=typeof a=="object"&&a!==null?Bt(a):Yo,s.state=e.memoizedState,a=n.getDerivedStateFromProps,typeof a=="function"&&(Iy(e,n,a,i),s.state=e.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(a=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),a!==s.state&&sv.enqueueReplaceState(s,s.state,null),Vu(e,i,s,r),ku(),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308),i=!0}else if(t===null){s=e.stateNode;var o=e.memoizedProps,l=Ka(n,o);s.props=l;var c=s.context,h=n.contextType;a=Yo,typeof h=="object"&&h!==null&&(a=Bt(h));var d=n.getDerivedStateFromProps;h=typeof d=="function"||typeof s.getSnapshotBeforeUpdate=="function",o=e.pendingProps!==o,h||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(o||c!==a)&&sS(e,s,i,a),is=!1;var f=e.memoizedState;s.state=f,Vu(e,i,s,r),ku(),c=e.memoizedState,o||f!==c||is?(typeof d=="function"&&(Iy(e,n,d,i),c=e.memoizedState),(l=is||rS(e,n,l,i,f,c,a))?(h||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=c),s.props=i,s.state=c,s.context=a,i=l):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{s=e.stateNode,J_(t,e),a=e.memoizedProps,h=Ka(n,a),s.props=h,d=e.pendingProps,f=s.context,c=n.contextType,l=Yo,typeof c=="object"&&c!==null&&(l=Bt(c)),o=n.getDerivedStateFromProps,(c=typeof o=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==d||f!==l)&&sS(e,s,i,l),is=!1,f=e.memoizedState,s.state=f,Vu(e,i,s,r),ku();var p=e.memoizedState;a!==d||f!==p||is||t!==null&&t.dependencies!==null&&Tm(t.dependencies)?(typeof o=="function"&&(Iy(e,n,o,i),p=e.memoizedState),(h=is||rS(e,n,h,i,f,p,l)||t!==null&&t.dependencies!==null&&Tm(t.dependencies))?(c||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(i,p,l),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(i,p,l)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=p),s.props=i,s.state=p,s.context=l,i=h):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),i=!1)}return s=i,zf(t,e),i=(e.flags&128)!==0,s||i?(s=e.stateNode,n=i&&typeof n.getDerivedStateFromError!="function"?null:s.render(),e.flags|=1,t!==null&&i?(e.child=Ga(e,t.child,null,r),e.child=Ga(e,null,n,r)):Mt(t,e,n,r),e.memoizedState=s.state,t=e.child):t=Ar(t,e,r),t}function fS(t,e,n,i){return qa(),e.flags|=256,Mt(t,e,n,i),e.child}var Ry={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function xy(t){return{baseLanes:t,cachePool:XC()}}function Cy(t,e,n){return t=t!==null?t.childLanes&~n:0,e&&(t|=kn),t}function qP(t,e,n){var i=e.pendingProps,r=!1,s=(e.flags&128)!==0,a;if((a=s)||(a=t!==null&&t.memoizedState===null?!1:(ht.current&2)!==0),a&&(r=!0,e.flags&=-129),a=(e.flags&32)!==0,e.flags&=-33,t===null){if(ve){if(r?ss(e):as(),(t=je)?(t=VD(t,ri),t=t!==null&&t.data!=="&"?t:null,t!==null&&(e.memoizedState={dehydrated:t,treeContext:Ds!==null?{id:Oi,overflow:Mi}:null,retryLane:536870912,hydrationErrors:null},n=KC(t),n.return=e,e.child=n,zt=e,je=null)):t=null,t===null)throw Ns(e);return wv(t)?e.lanes=32:e.lanes=536870912,null}var o=i.children;return i=i.fallback,r?(as(),r=e.mode,o=Rm({mode:"hidden",children:o},r),i=Va(i,r,n,null),o.return=e,i.return=e,o.sibling=i,e.child=o,i=e.child,i.memoizedState=xy(n),i.childLanes=Cy(t,a,n),e.memoizedState=Ry,mu(null,i)):(ss(e),lv(e,o))}var l=t.memoizedState;if(l!==null&&(o=l.dehydrated,o!==null)){if(s)e.flags&256?(ss(e),e.flags&=-257,e=Py(t,e,n)):e.memoizedState!==null?(as(),e.child=t.child,e.flags|=128,e=null):(as(),o=i.fallback,r=e.mode,i=Rm({mode:"visible",children:i.children},r),o=Va(o,r,n,null),o.flags|=2,i.return=e,o.return=e,i.sibling=o,e.child=i,Ga(e,t.child,null,n),i=e.child,i.memoizedState=xy(n),i.childLanes=Cy(t,a,n),e.memoizedState=Ry,e=mu(null,i));else if(ss(e),wv(o)){if(a=o.nextSibling&&o.nextSibling.dataset,a)var c=a.dgst;a=c,i=Error(j(419)),i.stack="",i.digest=a,dh({value:i,source:null,stack:null}),e=Py(t,e,n)}else if(wt||ac(t,e,n,!1),a=(n&t.childLanes)!==0,wt||a){if(a=Ve,a!==null&&(i=vC(a,n),i!==0&&i!==l.retryLane))throw l.retryLane=i,uo(t,i),bn(a,t,i),wT;Tv(o)||Dm(),e=Py(t,e,n)}else Tv(o)?(e.flags|=192,e.child=t.child,e=null):(t=l.treeContext,je=li(o.nextSibling),zt=e,ve=!0,_s=null,ri=!1,t!==null&&WC(e,t),e=lv(e,i.children),e.flags|=4096);return e}return r?(as(),o=i.fallback,r=e.mode,l=t.child,c=l.sibling,i=fr(l,{mode:"hidden",children:i.children}),i.subtreeFlags=l.subtreeFlags&65011712,c!==null?o=fr(c,o):(o=Va(o,r,n,null),o.flags|=2),o.return=e,i.return=e,i.sibling=o,e.child=i,mu(null,i),i=e.child,o=t.child.memoizedState,o===null?o=xy(n):(r=o.cachePool,r!==null?(l=Tt._currentValue,r=r.parent!==l?{parent:l,pool:l}:r):r=XC(),o={baseLanes:o.baseLanes|n,cachePool:r}),i.memoizedState=o,i.childLanes=Cy(t,a,n),e.memoizedState=Ry,mu(t.child,i)):(ss(e),n=t.child,t=n.sibling,n=fr(n,{mode:"visible",children:i.children}),n.return=e,n.sibling=null,t!==null&&(a=e.deletions,a===null?(e.deletions=[t],e.flags|=16):a.push(t)),e.child=n,e.memoizedState=null,n)}function lv(t,e){return e=Rm({mode:"visible",children:e},t.mode),e.return=t,t.child=e}function Rm(t,e){return t=Nn(22,t,null,e),t.lanes=0,t}function Py(t,e,n){return Ga(e,t.child,null,n),t=lv(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function mS(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),W_(t.return,e,n)}function Dy(t,e,n,i,r,s){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r,treeForkCount:s}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=i,a.tail=n,a.tailMode=r,a.treeForkCount=s)}function HP(t,e,n){var i=e.pendingProps,r=i.revealOrder,s=i.tail;i=i.children;var a=ht.current,o=(a&2)!==0;if(o?(a=a&1|2,e.flags|=128):a&=1,Oe(ht,a),Mt(t,e,i,n),i=ve?hh:0,!o&&t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&mS(t,n,e);else if(t.tag===19)mS(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&Em(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),Dy(e,!1,r,n,s,i);break;case"backwards":case"unstable_legacy-backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&Em(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}Dy(e,!0,n,null,s,i);break;case"together":Dy(e,!1,null,null,void 0,i);break;default:e.memoizedState=null}return e.child}function Ar(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Vs|=e.lanes,!(n&e.childLanes))if(t!==null){if(ac(t,e,n,!1),(n&e.childLanes)===0)return null}else return null;if(t!==null&&e.child!==t.child)throw Error(j(153));if(e.child!==null){for(t=e.child,n=fr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=fr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function bT(t,e){return t.lanes&e?!0:(t=t.dependencies,!!(t!==null&&Tm(t)))}function ZU(t,e,n){switch(e.tag){case 3:fm(e,e.stateNode.containerInfo),rs(e,Tt,t.memoizedState.cache),qa();break;case 27:case 5:M_(e);break;case 4:fm(e,e.stateNode.containerInfo);break;case 10:rs(e,e.type,e.memoizedProps.value);break;case 31:if(e.memoizedState!==null)return e.flags|=128,tv(e),null;break;case 13:var i=e.memoizedState;if(i!==null)return i.dehydrated!==null?(ss(e),e.flags|=128,null):n&e.child.childLanes?qP(t,e,n):(ss(e),t=Ar(t,e,n),t!==null?t.sibling:null);ss(e);break;case 19:var r=(t.flags&128)!==0;if(i=(n&e.childLanes)!==0,i||(ac(t,e,n,!1),i=(n&e.childLanes)!==0),r){if(i)return HP(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),Oe(ht,ht.current),i)break;return null;case 22:return e.lanes=0,FP(t,e,n,e.pendingProps);case 24:rs(e,Tt,t.memoizedState.cache)}return Ar(t,e,n)}function GP(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps)wt=!0;else{if(!bT(t,n)&&!(e.flags&128))return wt=!1,ZU(t,e,n);wt=!!(t.flags&131072)}else wt=!1,ve&&e.flags&1048576&&QC(e,hh,e.index);switch(e.lanes=0,e.tag){case 16:e:{var i=e.pendingProps;if(t=ga(e.elementType),e.type=t,typeof t=="function")eT(t)?(i=Ka(t,i),e.tag=1,e=dS(null,e,t,i,n)):(e.tag=0,e=ov(null,e,t,i,n));else{if(t!=null){var r=t.$$typeof;if(r===j0){e.tag=11,e=oS(null,e,t,i,n);break e}else if(r===B0){e.tag=14,e=lS(null,e,t,i,n);break e}}throw e=V_(t)||t,Error(j(306,e,""))}}return e;case 0:return ov(t,e,e.type,e.pendingProps,n);case 1:return i=e.type,r=Ka(i,e.pendingProps),dS(t,e,i,r,n);case 3:e:{if(fm(e,e.stateNode.containerInfo),t===null)throw Error(j(387));i=e.pendingProps;var s=e.memoizedState;r=s.element,J_(t,e),Vu(e,i,null,n);var a=e.memoizedState;if(i=a.cache,rs(e,Tt,i),i!==s.cache&&Y_(e,[Tt],n,!0),ku(),i=a.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:a.cache},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){e=fS(t,e,i,n);break e}else if(i!==r){r=ii(Error(j(424)),e),dh(r),e=fS(t,e,i,n);break e}else{switch(t=e.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(je=li(t.firstChild),zt=e,ve=!0,_s=null,ri=!0,n=eP(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(qa(),i===r){e=Ar(t,e,n);break e}Mt(t,e,i,n)}e=e.child}return e;case 26:return zf(t,e),t===null?(n=VS(e.type,null,e.pendingProps,null))?e.memoizedState=n:ve||(n=e.type,t=e.pendingProps,i=Om(ys.current).createElement(n),i[Ut]=e,i[En]=t,Ft(i,n,t),Nt(i),e.stateNode=i):e.memoizedState=VS(e.type,t.memoizedProps,e.pendingProps,t.memoizedState),null;case 27:return M_(e),t===null&&ve&&(i=e.stateNode=OD(e.type,e.pendingProps,ys.current),zt=e,ri=!0,r=je,Ys(e.type)?(bv=r,je=li(i.firstChild)):je=r),Mt(t,e,e.pendingProps.children,n),zf(t,e),t===null&&(e.flags|=4194304),e.child;case 5:return t===null&&ve&&((r=i=je)&&(i=C6(i,e.type,e.pendingProps,ri),i!==null?(e.stateNode=i,zt=e,je=li(i.firstChild),ri=!1,r=!0):r=!1),r||Ns(e)),M_(e),r=e.type,s=e.pendingProps,a=t!==null?t.memoizedProps:null,i=s.children,_v(r,s)?i=null:a!==null&&_v(r,a)&&(e.flags|=32),e.memoizedState!==null&&(r=cT(t,e,HU,null,null,n),_h._currentValue=r),zf(t,e),Mt(t,e,i,n),e.child;case 6:return t===null&&ve&&((t=n=je)&&(n=P6(n,e.pendingProps,ri),n!==null?(e.stateNode=n,zt=e,je=null,t=!0):t=!1),t||Ns(e)),null;case 13:return qP(t,e,n);case 4:return fm(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=Ga(e,null,i,n):Mt(t,e,i,n),e.child;case 11:return oS(t,e,e.type,e.pendingProps,n);case 7:return Mt(t,e,e.pendingProps,n),e.child;case 8:return Mt(t,e,e.pendingProps.children,n),e.child;case 12:return Mt(t,e,e.pendingProps.children,n),e.child;case 10:return i=e.pendingProps,rs(e,e.type,i.value),Mt(t,e,i.children,n),e.child;case 9:return r=e.type._context,i=e.pendingProps.children,Ha(e),r=Bt(r),i=i(r),e.flags|=1,Mt(t,e,i,n),e.child;case 14:return lS(t,e,e.type,e.pendingProps,n);case 15:return BP(t,e,e.type,e.pendingProps,n);case 19:return HP(t,e,n);case 31:return JU(t,e,n);case 22:return FP(t,e,n,e.pendingProps);case 24:return Ha(e),i=Bt(Tt),t===null?(r=rT(),r===null&&(r=Ve,s=iT(),r.pooledCache=s,s.refCount++,s!==null&&(r.pooledCacheLanes|=n),r=s),e.memoizedState={parent:i,cache:r},aT(e),rs(e,Tt,r)):(t.lanes&n&&(J_(t,e),Vu(e,null,null,n),ku()),r=t.memoizedState,s=e.memoizedState,r.parent!==i?(r={parent:i,cache:i},e.memoizedState=r,e.lanes===0&&(e.memoizedState=e.updateQueue.baseState=r),rs(e,Tt,i)):(i=s.cache,rs(e,Tt,i),i!==r.cache&&Y_(e,[Tt],n,!0))),Mt(t,e,e.pendingProps.children,n),e.child;case 29:throw e.pendingProps}throw Error(j(156,e.tag))}function er(t){t.flags|=4}function Ny(t,e,n,i,r){if((e=(t.mode&32)!==0)&&(e=!1),e){if(t.flags|=16777216,(r&335544128)===r)if(t.stateNode.complete)t.flags|=8192;else if(pD())t.flags|=8192;else throw Ma=wm,sT}else t.flags&=-16777217}function pS(t,e){if(e.type!=="stylesheet"||e.state.loading&4)t.flags&=-16777217;else if(t.flags|=16777216,!UD(e))if(pD())t.flags|=8192;else throw Ma=wm,sT}function af(t,e){e!==null&&(t.flags|=4),t.flags&16384&&(e=t.tag!==22?gC():536870912,t.lanes|=e,Il|=e)}function Yc(t,e){if(!ve)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function ze(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&65011712,i|=r.flags&65011712,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function e6(t,e,n){var i=e.pendingProps;switch(nT(e),e.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ze(e),null;case 1:return ze(e),null;case 3:return n=e.stateNode,i=null,t!==null&&(i=t.memoizedState.cache),e.memoizedState.cache!==i&&(e.flags|=2048),mr(Tt),Tl(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(Ao(e)?er(e):t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Ey())),ze(e),null;case 26:var r=e.type,s=e.memoizedState;return t===null?(er(e),s!==null?(ze(e),pS(e,s)):(ze(e),Ny(e,r,null,i,n))):s?s!==t.memoizedState?(er(e),ze(e),pS(e,s)):(ze(e),e.flags&=-16777217):(t=t.memoizedProps,t!==i&&er(e),ze(e),Ny(e,r,t,i,n)),null;case 27:if(mm(e),n=ys.current,r=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==i&&er(e);else{if(!i){if(e.stateNode===null)throw Error(j(166));return ze(e),null}t=Bi.current,Ao(e)?HA(e):(t=OD(r,i,n),e.stateNode=t,er(e))}return ze(e),null;case 5:if(mm(e),r=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==i&&er(e);else{if(!i){if(e.stateNode===null)throw Error(j(166));return ze(e),null}if(s=Bi.current,Ao(e))HA(e);else{var a=Om(ys.current);switch(s){case 1:s=a.createElementNS("http://www.w3.org/2000/svg",r);break;case 2:s=a.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;default:switch(r){case"svg":s=a.createElementNS("http://www.w3.org/2000/svg",r);break;case"math":s=a.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;case"script":s=a.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s=typeof i.is=="string"?a.createElement("select",{is:i.is}):a.createElement("select"),i.multiple?s.multiple=!0:i.size&&(s.size=i.size);break;default:s=typeof i.is=="string"?a.createElement(r,{is:i.is}):a.createElement(r)}}s[Ut]=e,s[En]=i;e:for(a=e.child;a!==null;){if(a.tag===5||a.tag===6)s.appendChild(a.stateNode);else if(a.tag!==4&&a.tag!==27&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===e)break e;for(;a.sibling===null;){if(a.return===null||a.return===e)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}e.stateNode=s;e:switch(Ft(s,r,i),r){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}i&&er(e)}}return ze(e),Ny(e,e.type,t===null?null:t.memoizedProps,e.pendingProps,n),null;case 6:if(t&&e.stateNode!=null)t.memoizedProps!==i&&er(e);else{if(typeof i!="string"&&e.stateNode===null)throw Error(j(166));if(t=ys.current,Ao(e)){if(t=e.stateNode,n=e.memoizedProps,i=null,r=zt,r!==null)switch(r.tag){case 27:case 5:i=r.memoizedProps}t[Ut]=e,t=!!(t.nodeValue===n||i!==null&&i.suppressHydrationWarning===!0||DD(t.nodeValue,n)),t||Ns(e,!0)}else t=Om(t).createTextNode(i),t[Ut]=e,e.stateNode=t}return ze(e),null;case 31:if(n=e.memoizedState,t===null||t.memoizedState!==null){if(i=Ao(e),n!==null){if(t===null){if(!i)throw Error(j(318));if(t=e.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(j(557));t[Ut]=e}else qa(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ze(e),t=!1}else n=Ey(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=n),t=!0;if(!t)return e.flags&256?(Pn(e),e):(Pn(e),null);if(e.flags&128)throw Error(j(558))}return ze(e),null;case 13:if(i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(r=Ao(e),i!==null&&i.dehydrated!==null){if(t===null){if(!r)throw Error(j(318));if(r=e.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(j(317));r[Ut]=e}else qa(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ze(e),r=!1}else r=Ey(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=r),r=!0;if(!r)return e.flags&256?(Pn(e),e):(Pn(e),null)}return Pn(e),e.flags&128?(e.lanes=n,e):(n=i!==null,t=t!==null&&t.memoizedState!==null,n&&(i=e.child,r=null,i.alternate!==null&&i.alternate.memoizedState!==null&&i.alternate.memoizedState.cachePool!==null&&(r=i.alternate.memoizedState.cachePool.pool),s=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(s=i.memoizedState.cachePool.pool),s!==r&&(i.flags|=2048)),n!==t&&n&&(e.child.flags|=8192),af(e,e.updateQueue),ze(e),null);case 4:return Tl(),t===null&&CT(e.stateNode.containerInfo),ze(e),null;case 10:return mr(e.type),ze(e),null;case 19:if(kt(ht),i=e.memoizedState,i===null)return ze(e),null;if(r=(e.flags&128)!==0,s=i.rendering,s===null)if(r)Yc(i,!1);else{if(st!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(s=Em(t),s!==null){for(e.flags|=128,Yc(i,!1),t=s.updateQueue,e.updateQueue=t,af(e,t),e.subtreeFlags=0,t=n,n=e.child;n!==null;)$C(n,t),n=n.sibling;return Oe(ht,ht.current&1|2),ve&&sr(e,i.treeForkCount),e.child}t=t.sibling}i.tail!==null&&On()>Cm&&(e.flags|=128,r=!0,Yc(i,!1),e.lanes=4194304)}else{if(!r)if(t=Em(s),t!==null){if(e.flags|=128,r=!0,t=t.updateQueue,e.updateQueue=t,af(e,t),Yc(i,!0),i.tail===null&&i.tailMode==="hidden"&&!s.alternate&&!ve)return ze(e),null}else 2*On()-i.renderingStartTime>Cm&&n!==536870912&&(e.flags|=128,r=!0,Yc(i,!1),e.lanes=4194304);i.isBackwards?(s.sibling=e.child,e.child=s):(t=i.last,t!==null?t.sibling=s:e.child=s,i.last=s)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=On(),t.sibling=null,n=ht.current,Oe(ht,r?n&1|2:n&1),ve&&sr(e,i.treeForkCount),t):(ze(e),null);case 22:case 23:return Pn(e),oT(),i=e.memoizedState!==null,t!==null?t.memoizedState!==null!==i&&(e.flags|=8192):i&&(e.flags|=8192),i?n&536870912&&!(e.flags&128)&&(ze(e),e.subtreeFlags&6&&(e.flags|=8192)):ze(e),n=e.updateQueue,n!==null&&af(e,n.retryQueue),n=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),i=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),i!==n&&(e.flags|=2048),t!==null&&kt(Oa),null;case 24:return n=null,t!==null&&(n=t.memoizedState.cache),e.memoizedState.cache!==n&&(e.flags|=2048),mr(Tt),ze(e),null;case 25:return null;case 30:return null}throw Error(j(156,e.tag))}function t6(t,e){switch(nT(e),e.tag){case 1:return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return mr(Tt),Tl(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 26:case 27:case 5:return mm(e),null;case 31:if(e.memoizedState!==null){if(Pn(e),e.alternate===null)throw Error(j(340));qa()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 13:if(Pn(e),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(j(340));qa()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return kt(ht),null;case 4:return Tl(),null;case 10:return mr(e.type),null;case 22:case 23:return Pn(e),oT(),t!==null&&kt(Oa),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 24:return mr(Tt),null;case 25:return null;default:return null}}function $P(t,e){switch(nT(e),e.tag){case 3:mr(Tt),Tl();break;case 26:case 27:case 5:mm(e);break;case 4:Tl();break;case 31:e.memoizedState!==null&&Pn(e);break;case 13:Pn(e);break;case 19:kt(ht);break;case 10:mr(e.type);break;case 22:case 23:Pn(e),oT(),t!==null&&kt(Oa);break;case 24:mr(Tt)}}function sd(t,e){try{var n=e.updateQueue,i=n!==null?n.lastEffect:null;if(i!==null){var r=i.next;n=r;do{if((n.tag&t)===t){i=void 0;var s=n.create,a=n.inst;i=s(),a.destroy=i}n=n.next}while(n!==r)}}catch(o){Ie(e,e.return,o)}}function ks(t,e,n){try{var i=e.updateQueue,r=i!==null?i.lastEffect:null;if(r!==null){var s=r.next;i=s;do{if((i.tag&t)===t){var a=i.inst,o=a.destroy;if(o!==void 0){a.destroy=void 0,r=e;var l=n,c=o;try{c()}catch(h){Ie(r,l,h)}}}i=i.next}while(i!==s)}}catch(h){Ie(e,e.return,h)}}function KP(t){var e=t.updateQueue;if(e!==null){var n=t.stateNode;try{nP(e,n)}catch(i){Ie(t,t.return,i)}}}function QP(t,e,n){n.props=Ka(t.type,t.memoizedProps),n.state=t.memoizedState;try{n.componentWillUnmount()}catch(i){Ie(t,e,i)}}function Mu(t,e){try{var n=t.ref;if(n!==null){switch(t.tag){case 26:case 27:case 5:var i=t.stateNode;break;case 30:i=t.stateNode;break;default:i=t.stateNode}typeof n=="function"?t.refCleanup=n(i):n.current=i}}catch(r){Ie(t,e,r)}}function Li(t,e){var n=t.ref,i=t.refCleanup;if(n!==null)if(typeof i=="function")try{i()}catch(r){Ie(t,e,r)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(r){Ie(t,e,r)}else n.current=null}function WP(t){var e=t.type,n=t.memoizedProps,i=t.stateNode;try{e:switch(e){case"button":case"input":case"select":case"textarea":n.autoFocus&&i.focus();break e;case"img":n.src?i.src=n.src:n.srcSet&&(i.srcset=n.srcSet)}}catch(r){Ie(t,t.return,r)}}function ky(t,e,n){try{var i=t.stateNode;E6(i,t.type,n,e),i[En]=e}catch(r){Ie(t,t.return,r)}}function YP(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Ys(t.type)||t.tag===4}function Vy(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||YP(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Ys(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function cv(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(t,e):(e=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,e.appendChild(t),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=cr));else if(i!==4&&(i===27&&Ys(t.type)&&(n=t.stateNode,e=null),t=t.child,t!==null))for(cv(t,e,n),t=t.sibling;t!==null;)cv(t,e,n),t=t.sibling}function xm(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(i===27&&Ys(t.type)&&(n=t.stateNode),t=t.child,t!==null))for(xm(t,e,n),t=t.sibling;t!==null;)xm(t,e,n),t=t.sibling}function XP(t){var e=t.stateNode,n=t.memoizedProps;try{for(var i=t.type,r=e.attributes;r.length;)e.removeAttributeNode(r[0]);Ft(e,i,n),e[Ut]=t,e[En]=n}catch(s){Ie(t,t.return,s)}}var ar=!1,vt=!1,Oy=!1,gS=typeof WeakSet=="function"?WeakSet:Set,Pt=null;function n6(t,e){if(t=t.containerInfo,gv=zm,t=UC(t),X0(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var a=0,o=-1,l=-1,c=0,h=0,d=t,f=null;t:for(;;){for(var p;d!==n||r!==0&&d.nodeType!==3||(o=a+r),d!==s||i!==0&&d.nodeType!==3||(l=a+i),d.nodeType===3&&(a+=d.nodeValue.length),(p=d.firstChild)!==null;)f=d,d=p;for(;;){if(d===t)break t;if(f===n&&++c===r&&(o=a),f===s&&++h===i&&(l=a),(p=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=p}n=o===-1||l===-1?null:{start:o,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(yv={focusedElem:t,selectionRange:n},zm=!1,Pt=e;Pt!==null;)if(e=Pt,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Pt=t;else for(;Pt!==null;){switch(e=Pt,s=e.alternate,t=e.flags,e.tag){case 0:if(t&4&&(t=e.updateQueue,t=t!==null?t.events:null,t!==null))for(n=0;n<t.length;n++)r=t[n],r.ref.impl=r.nextImpl;break;case 11:case 15:break;case 1:if(t&1024&&s!==null){t=void 0,n=e,r=s.memoizedProps,s=s.memoizedState,i=n.stateNode;try{var w=Ka(n.type,r);t=i.getSnapshotBeforeUpdate(w,s),i.__reactInternalSnapshotBeforeUpdate=t}catch(E){Ie(n,n.return,E)}}break;case 3:if(t&1024){if(t=e.stateNode.containerInfo,n=t.nodeType,n===9)vv(t);else if(n===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":vv(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(t&1024)throw Error(j(163))}if(t=e.sibling,t!==null){t.return=e.return,Pt=t;break}Pt=e.return}}function JP(t,e,n){var i=n.flags;switch(n.tag){case 0:case 11:case 15:nr(t,n),i&4&&sd(5,n);break;case 1:if(nr(t,n),i&4)if(t=n.stateNode,e===null)try{t.componentDidMount()}catch(a){Ie(n,n.return,a)}else{var r=Ka(n.type,e.memoizedProps);e=e.memoizedState;try{t.componentDidUpdate(r,e,t.__reactInternalSnapshotBeforeUpdate)}catch(a){Ie(n,n.return,a)}}i&64&&KP(n),i&512&&Mu(n,n.return);break;case 3:if(nr(t,n),i&64&&(t=n.updateQueue,t!==null)){if(e=null,n.child!==null)switch(n.child.tag){case 27:case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}try{nP(t,e)}catch(a){Ie(n,n.return,a)}}break;case 27:e===null&&i&4&&XP(n);case 26:case 5:nr(t,n),e===null&&i&4&&WP(n),i&512&&Mu(n,n.return);break;case 12:nr(t,n);break;case 31:nr(t,n),i&4&&tD(t,n);break;case 13:nr(t,n),i&4&&nD(t,n),i&64&&(t=n.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(n=h6.bind(null,n),D6(t,n))));break;case 22:if(i=n.memoizedState!==null||ar,!i){e=e!==null&&e.memoizedState!==null||vt,r=ar;var s=vt;ar=i,(vt=e)&&!s?ir(t,n,(n.subtreeFlags&8772)!==0):nr(t,n),ar=r,vt=s}break;case 30:break;default:nr(t,n)}}function ZP(t){var e=t.alternate;e!==null&&(t.alternate=null,ZP(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&G0(e)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Ke=null,gn=!1;function tr(t,e,n){for(n=n.child;n!==null;)eD(t,e,n),n=n.sibling}function eD(t,e,n){if(Mn&&typeof Mn.onCommitFiberUnmount=="function")try{Mn.onCommitFiberUnmount(Jh,n)}catch{}switch(n.tag){case 26:vt||Li(n,e),tr(t,e,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:vt||Li(n,e);var i=Ke,r=gn;Ys(n.type)&&(Ke=n.stateNode,gn=!1),tr(t,e,n),ju(n.stateNode),Ke=i,gn=r;break;case 5:vt||Li(n,e);case 6:if(i=Ke,r=gn,Ke=null,tr(t,e,n),Ke=i,gn=r,Ke!==null)if(gn)try{(Ke.nodeType===9?Ke.body:Ke.nodeName==="HTML"?Ke.ownerDocument.body:Ke).removeChild(n.stateNode)}catch(s){Ie(n,e,s)}else try{Ke.removeChild(n.stateNode)}catch(s){Ie(n,e,s)}break;case 18:Ke!==null&&(gn?(t=Ke,CS(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,n.stateNode),Pl(t)):CS(Ke,n.stateNode));break;case 4:i=Ke,r=gn,Ke=n.stateNode.containerInfo,gn=!0,tr(t,e,n),Ke=i,gn=r;break;case 0:case 11:case 14:case 15:ks(2,n,e),vt||ks(4,n,e),tr(t,e,n);break;case 1:vt||(Li(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"&&QP(n,e,i)),tr(t,e,n);break;case 21:tr(t,e,n);break;case 22:vt=(i=vt)||n.memoizedState!==null,tr(t,e,n),vt=i;break;default:tr(t,e,n)}}function tD(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{Pl(t)}catch(n){Ie(e,e.return,n)}}}function nD(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Pl(t)}catch(n){Ie(e,e.return,n)}}function i6(t){switch(t.tag){case 31:case 13:case 19:var e=t.stateNode;return e===null&&(e=t.stateNode=new gS),e;case 22:return t=t.stateNode,e=t._retryCache,e===null&&(e=t._retryCache=new gS),e;default:throw Error(j(435,t.tag))}}function of(t,e){var n=i6(t);e.forEach(function(i){if(!n.has(i)){n.add(i);var r=d6.bind(null,t,i);i.then(r,r)}})}function mn(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i],s=t,a=e,o=a;e:for(;o!==null;){switch(o.tag){case 27:if(Ys(o.type)){Ke=o.stateNode,gn=!1;break e}break;case 5:Ke=o.stateNode,gn=!1;break e;case 3:case 4:Ke=o.stateNode.containerInfo,gn=!0;break e}o=o.return}if(Ke===null)throw Error(j(160));eD(s,a,r),Ke=null,gn=!1,s=r.alternate,s!==null&&(s.return=null),r.return=null}if(e.subtreeFlags&13886)for(e=e.child;e!==null;)iD(e,t),e=e.sibling}var yi=null;function iD(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:mn(e,t),pn(t),i&4&&(ks(3,t,t.return),sd(3,t),ks(5,t,t.return));break;case 1:mn(e,t),pn(t),i&512&&(vt||n===null||Li(n,n.return)),i&64&&ar&&(t=t.updateQueue,t!==null&&(i=t.callbacks,i!==null&&(n=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=n===null?i:n.concat(i))));break;case 26:var r=yi;if(mn(e,t),pn(t),i&512&&(vt||n===null||Li(n,n.return)),i&4){var s=n!==null?n.memoizedState:null;if(i=t.memoizedState,n===null)if(i===null)if(t.stateNode===null){e:{i=t.type,n=t.memoizedProps,r=r.ownerDocument||r;t:switch(i){case"title":s=r.getElementsByTagName("title")[0],(!s||s[td]||s[Ut]||s.namespaceURI==="http://www.w3.org/2000/svg"||s.hasAttribute("itemprop"))&&(s=r.createElement(i),r.head.insertBefore(s,r.querySelector("head > title"))),Ft(s,i,n),s[Ut]=t,Nt(s),i=s;break e;case"link":var a=MS("link","href",r).get(i+(n.href||""));if(a){for(var o=0;o<a.length;o++)if(s=a[o],s.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&s.getAttribute("rel")===(n.rel==null?null:n.rel)&&s.getAttribute("title")===(n.title==null?null:n.title)&&s.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){a.splice(o,1);break t}}s=r.createElement(i),Ft(s,i,n),r.head.appendChild(s);break;case"meta":if(a=MS("meta","content",r).get(i+(n.content||""))){for(o=0;o<a.length;o++)if(s=a[o],s.getAttribute("content")===(n.content==null?null:""+n.content)&&s.getAttribute("name")===(n.name==null?null:n.name)&&s.getAttribute("property")===(n.property==null?null:n.property)&&s.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&s.getAttribute("charset")===(n.charSet==null?null:n.charSet)){a.splice(o,1);break t}}s=r.createElement(i),Ft(s,i,n),r.head.appendChild(s);break;default:throw Error(j(468,i))}s[Ut]=t,Nt(s),i=s}t.stateNode=i}else LS(r,t.type,t.stateNode);else t.stateNode=OS(r,i,t.memoizedProps);else s!==i?(s===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):s.count--,i===null?LS(r,t.type,t.stateNode):OS(r,i,t.memoizedProps)):i===null&&t.stateNode!==null&&ky(t,t.memoizedProps,n.memoizedProps)}break;case 27:mn(e,t),pn(t),i&512&&(vt||n===null||Li(n,n.return)),n!==null&&i&4&&ky(t,t.memoizedProps,n.memoizedProps);break;case 5:if(mn(e,t),pn(t),i&512&&(vt||n===null||Li(n,n.return)),t.flags&32){r=t.stateNode;try{bl(r,"")}catch(w){Ie(t,t.return,w)}}i&4&&t.stateNode!=null&&(r=t.memoizedProps,ky(t,r,n!==null?n.memoizedProps:r)),i&1024&&(Oy=!0);break;case 6:if(mn(e,t),pn(t),i&4){if(t.stateNode===null)throw Error(j(162));i=t.memoizedProps,n=t.stateNode;try{n.nodeValue=i}catch(w){Ie(t,t.return,w)}}break;case 3:if(Ff=null,r=yi,yi=Mm(e.containerInfo),mn(e,t),yi=r,pn(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{Pl(e.containerInfo)}catch(w){Ie(t,t.return,w)}Oy&&(Oy=!1,rD(t));break;case 4:i=yi,yi=Mm(t.stateNode.containerInfo),mn(e,t),pn(t),yi=i;break;case 12:mn(e,t),pn(t);break;case 31:mn(e,t),pn(t),i&4&&(i=t.updateQueue,i!==null&&(t.updateQueue=null,of(t,i)));break;case 13:mn(e,t),pn(t),t.child.flags&8192&&t.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(Mp=On()),i&4&&(i=t.updateQueue,i!==null&&(t.updateQueue=null,of(t,i)));break;case 22:r=t.memoizedState!==null;var l=n!==null&&n.memoizedState!==null,c=ar,h=vt;if(ar=c||r,vt=h||l,mn(e,t),vt=h,ar=c,pn(t),i&8192)e:for(e=t.stateNode,e._visibility=r?e._visibility&-2:e._visibility|1,r&&(n===null||l||ar||vt||ya(t)),n=null,e=t;;){if(e.tag===5||e.tag===26){if(n===null){l=n=e;try{if(s=l.stateNode,r)a=s.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none";else{o=l.stateNode;var d=l.memoizedProps.style,f=d!=null&&d.hasOwnProperty("display")?d.display:null;o.style.display=f==null||typeof f=="boolean"?"":(""+f).trim()}}catch(w){Ie(l,l.return,w)}}}else if(e.tag===6){if(n===null){l=e;try{l.stateNode.nodeValue=r?"":l.memoizedProps}catch(w){Ie(l,l.return,w)}}}else if(e.tag===18){if(n===null){l=e;try{var p=l.stateNode;r?PS(p,!0):PS(l.stateNode,!1)}catch(w){Ie(l,l.return,w)}}}else if((e.tag!==22&&e.tag!==23||e.memoizedState===null||e===t)&&e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;n===e&&(n=null),e=e.return}n===e&&(n=null),e.sibling.return=e.return,e=e.sibling}i&4&&(i=t.updateQueue,i!==null&&(n=i.retryQueue,n!==null&&(i.retryQueue=null,of(t,n))));break;case 19:mn(e,t),pn(t),i&4&&(i=t.updateQueue,i!==null&&(t.updateQueue=null,of(t,i)));break;case 30:break;case 21:break;default:mn(e,t),pn(t)}}function pn(t){var e=t.flags;if(e&2){try{for(var n,i=t.return;i!==null;){if(YP(i)){n=i;break}i=i.return}if(n==null)throw Error(j(160));switch(n.tag){case 27:var r=n.stateNode,s=Vy(t);xm(t,s,r);break;case 5:var a=n.stateNode;n.flags&32&&(bl(a,""),n.flags&=-33);var o=Vy(t);xm(t,o,a);break;case 3:case 4:var l=n.stateNode.containerInfo,c=Vy(t);cv(t,c,l);break;default:throw Error(j(161))}}catch(h){Ie(t,t.return,h)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function rD(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var e=t;rD(e),e.tag===5&&e.flags&1024&&e.stateNode.reset(),t=t.sibling}}function nr(t,e){if(e.subtreeFlags&8772)for(e=e.child;e!==null;)JP(t,e.alternate,e),e=e.sibling}function ya(t){for(t=t.child;t!==null;){var e=t;switch(e.tag){case 0:case 11:case 14:case 15:ks(4,e,e.return),ya(e);break;case 1:Li(e,e.return);var n=e.stateNode;typeof n.componentWillUnmount=="function"&&QP(e,e.return,n),ya(e);break;case 27:ju(e.stateNode);case 26:case 5:Li(e,e.return),ya(e);break;case 22:e.memoizedState===null&&ya(e);break;case 30:ya(e);break;default:ya(e)}t=t.sibling}}function ir(t,e,n){for(n=n&&(e.subtreeFlags&8772)!==0,e=e.child;e!==null;){var i=e.alternate,r=t,s=e,a=s.flags;switch(s.tag){case 0:case 11:case 15:ir(r,s,n),sd(4,s);break;case 1:if(ir(r,s,n),i=s,r=i.stateNode,typeof r.componentDidMount=="function")try{r.componentDidMount()}catch(c){Ie(i,i.return,c)}if(i=s,r=i.updateQueue,r!==null){var o=i.stateNode;try{var l=r.shared.hiddenCallbacks;if(l!==null)for(r.shared.hiddenCallbacks=null,r=0;r<l.length;r++)tP(l[r],o)}catch(c){Ie(i,i.return,c)}}n&&a&64&&KP(s),Mu(s,s.return);break;case 27:XP(s);case 26:case 5:ir(r,s,n),n&&i===null&&a&4&&WP(s),Mu(s,s.return);break;case 12:ir(r,s,n);break;case 31:ir(r,s,n),n&&a&4&&tD(r,s);break;case 13:ir(r,s,n),n&&a&4&&nD(r,s);break;case 22:s.memoizedState===null&&ir(r,s,n),Mu(s,s.return);break;case 30:break;default:ir(r,s,n)}e=e.sibling}}function ET(t,e){var n=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),t=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(t=e.memoizedState.cachePool.pool),t!==n&&(t!=null&&t.refCount++,n!=null&&id(n))}function AT(t,e){t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&id(t))}function mi(t,e,n,i){if(e.subtreeFlags&10256)for(e=e.child;e!==null;)sD(t,e,n,i),e=e.sibling}function sD(t,e,n,i){var r=e.flags;switch(e.tag){case 0:case 11:case 15:mi(t,e,n,i),r&2048&&sd(9,e);break;case 1:mi(t,e,n,i);break;case 3:mi(t,e,n,i),r&2048&&(t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&id(t)));break;case 12:if(r&2048){mi(t,e,n,i),t=e.stateNode;try{var s=e.memoizedProps,a=s.id,o=s.onPostCommit;typeof o=="function"&&o(a,e.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(l){Ie(e,e.return,l)}}else mi(t,e,n,i);break;case 31:mi(t,e,n,i);break;case 13:mi(t,e,n,i);break;case 23:break;case 22:s=e.stateNode,a=e.alternate,e.memoizedState!==null?s._visibility&2?mi(t,e,n,i):Lu(t,e):s._visibility&2?mi(t,e,n,i):(s._visibility|=2,Oo(t,e,n,i,(e.subtreeFlags&10256)!==0||!1)),r&2048&&ET(a,e);break;case 24:mi(t,e,n,i),r&2048&&AT(e.alternate,e);break;default:mi(t,e,n,i)}}function Oo(t,e,n,i,r){for(r=r&&((e.subtreeFlags&10256)!==0||!1),e=e.child;e!==null;){var s=t,a=e,o=n,l=i,c=a.flags;switch(a.tag){case 0:case 11:case 15:Oo(s,a,o,l,r),sd(8,a);break;case 23:break;case 22:var h=a.stateNode;a.memoizedState!==null?h._visibility&2?Oo(s,a,o,l,r):Lu(s,a):(h._visibility|=2,Oo(s,a,o,l,r)),r&&c&2048&&ET(a.alternate,a);break;case 24:Oo(s,a,o,l,r),r&&c&2048&&AT(a.alternate,a);break;default:Oo(s,a,o,l,r)}e=e.sibling}}function Lu(t,e){if(e.subtreeFlags&10256)for(e=e.child;e!==null;){var n=t,i=e,r=i.flags;switch(i.tag){case 22:Lu(n,i),r&2048&&ET(i.alternate,i);break;case 24:Lu(n,i),r&2048&&AT(i.alternate,i);break;default:Lu(n,i)}e=e.sibling}}var pu=8192;function So(t,e,n){if(t.subtreeFlags&pu)for(t=t.child;t!==null;)aD(t,e,n),t=t.sibling}function aD(t,e,n){switch(t.tag){case 26:So(t,e,n),t.flags&pu&&t.memoizedState!==null&&q6(n,yi,t.memoizedState,t.memoizedProps);break;case 5:So(t,e,n);break;case 3:case 4:var i=yi;yi=Mm(t.stateNode.containerInfo),So(t,e,n),yi=i;break;case 22:t.memoizedState===null&&(i=t.alternate,i!==null&&i.memoizedState!==null?(i=pu,pu=16777216,So(t,e,n),pu=i):So(t,e,n));break;default:So(t,e,n)}}function oD(t){var e=t.alternate;if(e!==null&&(t=e.child,t!==null)){e.child=null;do e=t.sibling,t.sibling=null,t=e;while(t!==null)}}function Xc(t){var e=t.deletions;if(t.flags&16){if(e!==null)for(var n=0;n<e.length;n++){var i=e[n];Pt=i,cD(i,t)}oD(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)lD(t),t=t.sibling}function lD(t){switch(t.tag){case 0:case 11:case 15:Xc(t),t.flags&2048&&ks(9,t,t.return);break;case 3:Xc(t);break;case 12:Xc(t);break;case 22:var e=t.stateNode;t.memoizedState!==null&&e._visibility&2&&(t.return===null||t.return.tag!==13)?(e._visibility&=-3,jf(t)):Xc(t);break;default:Xc(t)}}function jf(t){var e=t.deletions;if(t.flags&16){if(e!==null)for(var n=0;n<e.length;n++){var i=e[n];Pt=i,cD(i,t)}oD(t)}for(t=t.child;t!==null;){switch(e=t,e.tag){case 0:case 11:case 15:ks(8,e,e.return),jf(e);break;case 22:n=e.stateNode,n._visibility&2&&(n._visibility&=-3,jf(e));break;default:jf(e)}t=t.sibling}}function cD(t,e){for(;Pt!==null;){var n=Pt;switch(n.tag){case 0:case 11:case 15:ks(8,n,e);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var i=n.memoizedState.cachePool.pool;i!=null&&i.refCount++}break;case 24:id(n.memoizedState.cache)}if(i=n.child,i!==null)i.return=n,Pt=i;else e:for(n=t;Pt!==null;){i=Pt;var r=i.sibling,s=i.return;if(ZP(i),i===n){Pt=null;break e}if(r!==null){r.return=s,Pt=r;break e}Pt=s}}}var r6={getCacheForType:function(t){var e=Bt(Tt),n=e.data.get(t);return n===void 0&&(n=t(),e.data.set(t,n)),n},cacheSignal:function(){return Bt(Tt).controller.signal}},s6=typeof WeakMap=="function"?WeakMap:Map,be=0,Ve=null,me=null,ge=0,Se=0,xn=null,hs=!1,lc=!1,ST=!1,Sr=0,st=0,Vs=0,La=0,IT=0,kn=0,Il=0,Uu=null,yn=null,uv=!1,Mp=0,uD=0,Cm=1/0,Pm=null,ws=null,At=0,bs=null,Rl=null,pr=0,hv=0,dv=null,hD=null,zu=0,fv=null;function Un(){return be&2&&ge!==0?ge&-ge:re.T!==null?xT():TC()}function dD(){if(kn===0)if(!(ge&536870912)||ve){var t=Jd;Jd<<=1,!(Jd&3932160)&&(Jd=262144),kn=t}else kn=536870912;return t=qn.current,t!==null&&(t.flags|=32),kn}function bn(t,e,n){(t===Ve&&(Se===2||Se===9)||t.cancelPendingCommit!==null)&&(xl(t,0),ds(t,ge,kn,!1)),ed(t,n),(!(be&2)||t!==Ve)&&(t===Ve&&(!(be&2)&&(La|=n),st===4&&ds(t,ge,kn,!1)),Ji(t))}function fD(t,e,n){if(be&6)throw Error(j(327));var i=!n&&(e&127)===0&&(e&t.expiredLanes)===0||Zh(t,e),r=i?l6(t,e):My(t,e,!0),s=i;do{if(r===0){lc&&!i&&ds(t,e,0,!1);break}else{if(n=t.current.alternate,s&&!a6(n)){r=My(t,e,!1),s=!1;continue}if(r===2){if(s=e,t.errorRecoveryDisabledLanes&s)var a=0;else a=t.pendingLanes&-536870913,a=a!==0?a:a&536870912?536870912:0;if(a!==0){e=a;e:{var o=t;r=Uu;var l=o.current.memoizedState.isDehydrated;if(l&&(xl(o,a).flags|=256),a=My(o,a,!1),a!==2){if(ST&&!l){o.errorRecoveryDisabledLanes|=s,La|=s,r=4;break e}s=yn,yn=r,s!==null&&(yn===null?yn=s:yn.push.apply(yn,s))}r=a}if(s=!1,r!==2)continue}}if(r===1){xl(t,0),ds(t,e,0,!0);break}e:{switch(i=t,s=r,s){case 0:case 1:throw Error(j(345));case 4:if((e&4194048)!==e)break;case 6:ds(i,e,kn,!hs);break e;case 2:yn=null;break;case 3:case 5:break;default:throw Error(j(329))}if((e&62914560)===e&&(r=Mp+300-On(),10<r)){if(ds(i,e,kn,!hs),Sp(i,0,!0)!==0)break e;pr=e,i.timeoutHandle=kD(yS.bind(null,i,n,yn,Pm,uv,e,kn,La,Il,hs,s,"Throttled",-0,0),r);break e}yS(i,n,yn,Pm,uv,e,kn,La,Il,hs,s,null,-0,0)}}break}while(!0);Ji(t)}function yS(t,e,n,i,r,s,a,o,l,c,h,d,f,p){if(t.timeoutHandle=-1,d=e.subtreeFlags,d&8192||(d&16785408)===16785408){d={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:cr},aD(e,s,d);var w=(s&62914560)===s?Mp-On():(s&4194048)===s?uD-On():0;if(w=H6(d,w),w!==null){pr=s,t.cancelPendingCommit=w(vS.bind(null,t,e,s,n,i,r,a,o,l,h,d,null,f,p)),ds(t,s,a,!c);return}}vS(t,e,s,n,i,r,a,o,l)}function a6(t){for(var e=t;;){var n=e.tag;if((n===0||n===11||n===15)&&e.flags&16384&&(n=e.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!Fn(s(),r))return!1}catch{return!1}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ds(t,e,n,i){e&=~IT,e&=~La,t.suspendedLanes|=e,t.pingedLanes&=~e,i&&(t.warmLanes|=e),i=t.expirationTimes;for(var r=e;0<r;){var s=31-Ln(r),a=1<<s;i[s]=-1,r&=~a}n!==0&&yC(t,n,e)}function Lp(){return be&6?!0:(ad(0),!1)}function RT(){if(me!==null){if(Se===0)var t=me.return;else t=me,ur=ho=null,dT(t),ul=null,fh=0,t=me;for(;t!==null;)$P(t.alternate,t),t=t.return;me=null}}function xl(t,e){var n=t.timeoutHandle;n!==-1&&(t.timeoutHandle=-1,I6(n)),n=t.cancelPendingCommit,n!==null&&(t.cancelPendingCommit=null,n()),pr=0,RT(),Ve=t,me=n=fr(t.current,null),ge=e,Se=0,xn=null,hs=!1,lc=Zh(t,e),ST=!1,Il=kn=IT=La=Vs=st=0,yn=Uu=null,uv=!1,e&8&&(e|=e&32);var i=t.entangledLanes;if(i!==0)for(t=t.entanglements,i&=e;0<i;){var r=31-Ln(i),s=1<<r;e|=t[r],i&=~s}return Sr=e,Cp(),n}function mD(t,e){le=null,re.H=ph,e===oc||e===Dp?(e=WA(),Se=3):e===sT?(e=WA(),Se=4):Se=e===wT?8:e!==null&&typeof e=="object"&&typeof e.then=="function"?6:1,xn=e,me===null&&(st=1,Im(t,ii(e,t.current)))}function pD(){var t=qn.current;return t===null?!0:(ge&4194048)===ge?oi===null:(ge&62914560)===ge||ge&536870912?t===oi:!1}function gD(){var t=re.H;return re.H=ph,t===null?ph:t}function yD(){var t=re.A;return re.A=r6,t}function Dm(){st=4,hs||(ge&4194048)!==ge&&qn.current!==null||(lc=!0),!(Vs&134217727)&&!(La&134217727)||Ve===null||ds(Ve,ge,kn,!1)}function My(t,e,n){var i=be;be|=2;var r=gD(),s=yD();(Ve!==t||ge!==e)&&(Pm=null,xl(t,e)),e=!1;var a=st;e:do try{if(Se!==0&&me!==null){var o=me,l=xn;switch(Se){case 8:RT(),a=6;break e;case 3:case 2:case 9:case 6:qn.current===null&&(e=!0);var c=Se;if(Se=0,xn=null,Zo(t,o,l,c),n&&lc){a=0;break e}break;default:c=Se,Se=0,xn=null,Zo(t,o,l,c)}}o6(),a=st;break}catch(h){mD(t,h)}while(!0);return e&&t.shellSuspendCounter++,ur=ho=null,be=i,re.H=r,re.A=s,me===null&&(Ve=null,ge=0,Cp()),a}function o6(){for(;me!==null;)_D(me)}function l6(t,e){var n=be;be|=2;var i=gD(),r=yD();Ve!==t||ge!==e?(Pm=null,Cm=On()+500,xl(t,e)):lc=Zh(t,e);e:do try{if(Se!==0&&me!==null){e=me;var s=xn;t:switch(Se){case 1:Se=0,xn=null,Zo(t,e,s,1);break;case 2:case 9:if(QA(s)){Se=0,xn=null,_S(e);break}e=function(){Se!==2&&Se!==9||Ve!==t||(Se=7),Ji(t)},s.then(e,e);break e;case 3:Se=7;break e;case 4:Se=5;break e;case 7:QA(s)?(Se=0,xn=null,_S(e)):(Se=0,xn=null,Zo(t,e,s,7));break;case 5:var a=null;switch(me.tag){case 26:a=me.memoizedState;case 5:case 27:var o=me;if(a?UD(a):o.stateNode.complete){Se=0,xn=null;var l=o.sibling;if(l!==null)me=l;else{var c=o.return;c!==null?(me=c,Up(c)):me=null}break t}}Se=0,xn=null,Zo(t,e,s,5);break;case 6:Se=0,xn=null,Zo(t,e,s,6);break;case 8:RT(),st=6;break e;default:throw Error(j(462))}}c6();break}catch(h){mD(t,h)}while(!0);return ur=ho=null,re.H=i,re.A=r,be=n,me!==null?0:(Ve=null,ge=0,Cp(),st)}function c6(){for(;me!==null&&!N4();)_D(me)}function _D(t){var e=GP(t.alternate,t,Sr);t.memoizedProps=t.pendingProps,e===null?Up(t):me=e}function _S(t){var e=t,n=e.alternate;switch(e.tag){case 15:case 0:e=hS(n,e,e.pendingProps,e.type,void 0,ge);break;case 11:e=hS(n,e,e.pendingProps,e.type.render,e.ref,ge);break;case 5:dT(e);default:$P(n,e),e=me=$C(e,Sr),e=GP(n,e,Sr)}t.memoizedProps=t.pendingProps,e===null?Up(t):me=e}function Zo(t,e,n,i){ur=ho=null,dT(e),ul=null,fh=0;var r=e.return;try{if(XU(t,r,e,n,ge)){st=1,Im(t,ii(n,t.current)),me=null;return}}catch(s){if(r!==null)throw me=r,s;st=1,Im(t,ii(n,t.current)),me=null;return}e.flags&32768?(ve||i===1?t=!0:lc||ge&536870912?t=!1:(hs=t=!0,(i===2||i===9||i===3||i===6)&&(i=qn.current,i!==null&&i.tag===13&&(i.flags|=16384))),vD(e,t)):Up(e)}function Up(t){var e=t;do{if(e.flags&32768){vD(e,hs);return}t=e.return;var n=e6(e.alternate,e,Sr);if(n!==null){me=n;return}if(e=e.sibling,e!==null){me=e;return}me=e=t}while(e!==null);st===0&&(st=5)}function vD(t,e){do{var n=t6(t.alternate,t);if(n!==null){n.flags&=32767,me=n;return}if(n=t.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!e&&(t=t.sibling,t!==null)){me=t;return}me=t=n}while(t!==null);st=6,me=null}function vS(t,e,n,i,r,s,a,o,l){t.cancelPendingCommit=null;do zp();while(At!==0);if(be&6)throw Error(j(327));if(e!==null){if(e===t.current)throw Error(j(177));if(s=e.lanes|e.childLanes,s|=J0,F4(t,n,s,a,o,l),t===Ve&&(me=Ve=null,ge=0),Rl=e,bs=t,pr=n,hv=s,dv=r,hD=i,e.subtreeFlags&10256||e.flags&10256?(t.callbackNode=null,t.callbackPriority=0,f6(pm,function(){return AD(),null})):(t.callbackNode=null,t.callbackPriority=0),i=(e.flags&13878)!==0,e.subtreeFlags&13878||i){i=re.T,re.T=null,r=Ee.p,Ee.p=2,a=be,be|=4;try{n6(t,e,n)}finally{be=a,Ee.p=r,re.T=i}}At=1,TD(),wD(),bD()}}function TD(){if(At===1){At=0;var t=bs,e=Rl,n=(e.flags&13878)!==0;if(e.subtreeFlags&13878||n){n=re.T,re.T=null;var i=Ee.p;Ee.p=2;var r=be;be|=4;try{iD(e,t);var s=yv,a=UC(t.containerInfo),o=s.focusedElem,l=s.selectionRange;if(a!==o&&o&&o.ownerDocument&&LC(o.ownerDocument.documentElement,o)){if(l!==null&&X0(o)){var c=l.start,h=l.end;if(h===void 0&&(h=c),"selectionStart"in o)o.selectionStart=c,o.selectionEnd=Math.min(h,o.value.length);else{var d=o.ownerDocument||document,f=d&&d.defaultView||window;if(f.getSelection){var p=f.getSelection(),w=o.textContent.length,E=Math.min(l.start,w),A=l.end===void 0?E:Math.min(l.end,w);!p.extend&&E>A&&(a=A,A=E,E=a);var T=BA(o,E),v=BA(o,A);if(T&&v&&(p.rangeCount!==1||p.anchorNode!==T.node||p.anchorOffset!==T.offset||p.focusNode!==v.node||p.focusOffset!==v.offset)){var _=d.createRange();_.setStart(T.node,T.offset),p.removeAllRanges(),E>A?(p.addRange(_),p.extend(v.node,v.offset)):(_.setEnd(v.node,v.offset),p.addRange(_))}}}}for(d=[],p=o;p=p.parentNode;)p.nodeType===1&&d.push({element:p,left:p.scrollLeft,top:p.scrollTop});for(typeof o.focus=="function"&&o.focus(),o=0;o<d.length;o++){var C=d[o];C.element.scrollLeft=C.left,C.element.scrollTop=C.top}}zm=!!gv,yv=gv=null}finally{be=r,Ee.p=i,re.T=n}}t.current=e,At=2}}function wD(){if(At===2){At=0;var t=bs,e=Rl,n=(e.flags&8772)!==0;if(e.subtreeFlags&8772||n){n=re.T,re.T=null;var i=Ee.p;Ee.p=2;var r=be;be|=4;try{JP(t,e.alternate,e)}finally{be=r,Ee.p=i,re.T=n}}At=3}}function bD(){if(At===4||At===3){At=0,k4();var t=bs,e=Rl,n=pr,i=hD;e.subtreeFlags&10256||e.flags&10256?At=5:(At=0,Rl=bs=null,ED(t,t.pendingLanes));var r=t.pendingLanes;if(r===0&&(ws=null),H0(n),e=e.stateNode,Mn&&typeof Mn.onCommitFiberRoot=="function")try{Mn.onCommitFiberRoot(Jh,e,void 0,(e.current.flags&128)===128)}catch{}if(i!==null){e=re.T,r=Ee.p,Ee.p=2,re.T=null;try{for(var s=t.onRecoverableError,a=0;a<i.length;a++){var o=i[a];s(o.value,{componentStack:o.stack})}}finally{re.T=e,Ee.p=r}}pr&3&&zp(),Ji(t),r=t.pendingLanes,n&261930&&r&42?t===fv?zu++:(zu=0,fv=t):zu=0,ad(0)}}function ED(t,e){(t.pooledCacheLanes&=e)===0&&(e=t.pooledCache,e!=null&&(t.pooledCache=null,id(e)))}function zp(){return TD(),wD(),bD(),AD()}function AD(){if(At!==5)return!1;var t=bs,e=hv;hv=0;var n=H0(pr),i=re.T,r=Ee.p;try{Ee.p=32>n?32:n,re.T=null,n=dv,dv=null;var s=bs,a=pr;if(At=0,Rl=bs=null,pr=0,be&6)throw Error(j(331));var o=be;if(be|=4,lD(s.current),sD(s,s.current,a,n),be=o,ad(0,!1),Mn&&typeof Mn.onPostCommitFiberRoot=="function")try{Mn.onPostCommitFiberRoot(Jh,s)}catch{}return!0}finally{Ee.p=r,re.T=i,ED(t,e)}}function TS(t,e,n){e=ii(n,e),e=av(t.stateNode,e,2),t=Ts(t,e,2),t!==null&&(ed(t,2),Ji(t))}function Ie(t,e,n){if(t.tag===3)TS(t,t,n);else for(;e!==null;){if(e.tag===3){TS(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(ws===null||!ws.has(i))){t=ii(n,t),n=zP(2),i=Ts(e,n,2),i!==null&&(jP(n,i,e,t),ed(i,2),Ji(i));break}}e=e.return}}function Ly(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new s6;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(n)||(ST=!0,r.add(n),t=u6.bind(null,t,e,n),e.then(t,t))}function u6(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),t.pingedLanes|=t.suspendedLanes&n,t.warmLanes&=~n,Ve===t&&(ge&n)===n&&(st===4||st===3&&(ge&62914560)===ge&&300>On()-Mp?!(be&2)&&xl(t,0):IT|=n,Il===ge&&(Il=0)),Ji(t)}function SD(t,e){e===0&&(e=gC()),t=uo(t,e),t!==null&&(ed(t,e),Ji(t))}function h6(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),SD(t,n)}function d6(t,e){var n=0;switch(t.tag){case 31:case 13:var i=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=t.stateNode;break;case 22:i=t.stateNode._retryCache;break;default:throw Error(j(314))}i!==null&&i.delete(e),SD(t,n)}function f6(t,e){return F0(t,e)}var Nm=null,Mo=null,mv=!1,km=!1,Uy=!1,fs=0;function Ji(t){t!==Mo&&t.next===null&&(Mo===null?Nm=Mo=t:Mo=Mo.next=t),km=!0,mv||(mv=!0,p6())}function ad(t,e){if(!Uy&&km){Uy=!0;do for(var n=!1,i=Nm;i!==null;){if(t!==0){var r=i.pendingLanes;if(r===0)var s=0;else{var a=i.suspendedLanes,o=i.pingedLanes;s=(1<<31-Ln(42|t)+1)-1,s&=r&~(a&~o),s=s&201326741?s&201326741|1:s?s|2:0}s!==0&&(n=!0,wS(i,s))}else s=ge,s=Sp(i,i===Ve?s:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),!(s&3)||Zh(i,s)||(n=!0,wS(i,s));i=i.next}while(n);Uy=!1}}function m6(){ID()}function ID(){km=mv=!1;var t=0;fs!==0&&S6()&&(t=fs);for(var e=On(),n=null,i=Nm;i!==null;){var r=i.next,s=RD(i,e);s===0?(i.next=null,n===null?Nm=r:n.next=r,r===null&&(Mo=n)):(n=i,(t!==0||s&3)&&(km=!0)),i=r}At!==0&&At!==5||ad(t),fs!==0&&(fs=0)}function RD(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,s=t.pendingLanes&-62914561;0<s;){var a=31-Ln(s),o=1<<a,l=r[a];l===-1?(!(o&n)||o&i)&&(r[a]=B4(o,e)):l<=e&&(t.expiredLanes|=o),s&=~o}if(e=Ve,n=ge,n=Sp(t,t===e?n:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),i=t.callbackNode,n===0||t===e&&(Se===2||Se===9)||t.cancelPendingCommit!==null)return i!==null&&i!==null&&dy(i),t.callbackNode=null,t.callbackPriority=0;if(!(n&3)||Zh(t,n)){if(e=n&-n,e===t.callbackPriority)return e;switch(i!==null&&dy(i),H0(n)){case 2:case 8:n=mC;break;case 32:n=pm;break;case 268435456:n=pC;break;default:n=pm}return i=xD.bind(null,t),n=F0(n,i),t.callbackPriority=e,t.callbackNode=n,e}return i!==null&&i!==null&&dy(i),t.callbackPriority=2,t.callbackNode=null,2}function xD(t,e){if(At!==0&&At!==5)return t.callbackNode=null,t.callbackPriority=0,null;var n=t.callbackNode;if(zp()&&t.callbackNode!==n)return null;var i=ge;return i=Sp(t,t===Ve?i:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),i===0?null:(fD(t,i,e),RD(t,On()),t.callbackNode!=null&&t.callbackNode===n?xD.bind(null,t):null)}function wS(t,e){if(zp())return null;fD(t,e,!0)}function p6(){R6(function(){be&6?F0(fC,m6):ID()})}function xT(){if(fs===0){var t=El;t===0&&(t=Xd,Xd<<=1,!(Xd&261888)&&(Xd=256)),fs=t}return fs}function bS(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Df(""+t)}function ES(t,e){var n=e.ownerDocument.createElement("input");return n.name=e.name,n.value=e.value,t.id&&n.setAttribute("form",t.id),e.parentNode.insertBefore(n,e),t=new FormData(t),n.parentNode.removeChild(n),t}function g6(t,e,n,i,r){if(e==="submit"&&n&&n.stateNode===r){var s=bS((r[En]||null).action),a=i.submitter;a&&(e=(e=a[En]||null)?bS(e.formAction):a.getAttribute("formAction"),e!==null&&(s=e,a=null));var o=new Ip("action","action",null,i,r);t.push({event:o,listeners:[{instance:null,listener:function(){if(i.defaultPrevented){if(fs!==0){var l=a?ES(r,a):new FormData(r);rv(n,{pending:!0,data:l,method:r.method,action:s},null,l)}}else typeof s=="function"&&(o.preventDefault(),l=a?ES(r,a):new FormData(r),rv(n,{pending:!0,data:l,method:r.method,action:s},s,l))},currentTarget:r}]})}}for(var zy=0;zy<$_.length;zy++){var jy=$_[zy],y6=jy.toLowerCase(),_6=jy[0].toUpperCase()+jy.slice(1);Ei(y6,"on"+_6)}Ei(jC,"onAnimationEnd");Ei(BC,"onAnimationIteration");Ei(FC,"onAnimationStart");Ei("dblclick","onDoubleClick");Ei("focusin","onFocus");Ei("focusout","onBlur");Ei(VU,"onTransitionRun");Ei(OU,"onTransitionStart");Ei(MU,"onTransitionCancel");Ei(qC,"onTransitionEnd");wl("onMouseEnter",["mouseout","mouseover"]);wl("onMouseLeave",["mouseout","mouseover"]);wl("onPointerEnter",["pointerout","pointerover"]);wl("onPointerLeave",["pointerout","pointerover"]);oo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));oo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));oo("onBeforeInput",["compositionend","keypress","textInput","paste"]);oo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));oo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));oo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var gh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),v6=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(gh));function CD(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var a=i.length-1;0<=a;a--){var o=i[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==s&&r.isPropagationStopped())break e;s=o,r.currentTarget=c;try{s(r)}catch(h){ym(h)}r.currentTarget=null,s=l}else for(a=0;a<i.length;a++){if(o=i[a],l=o.instance,c=o.currentTarget,o=o.listener,l!==s&&r.isPropagationStopped())break e;s=o,r.currentTarget=c;try{s(r)}catch(h){ym(h)}r.currentTarget=null,s=l}}}}function de(t,e){var n=e[U_];n===void 0&&(n=e[U_]=new Set);var i=t+"__bubble";n.has(i)||(PD(e,t,2,!1),n.add(i))}function By(t,e,n){var i=0;e&&(i|=4),PD(n,t,i,e)}var lf="_reactListening"+Math.random().toString(36).slice(2);function CT(t){if(!t[lf]){t[lf]=!0,wC.forEach(function(n){n!=="selectionchange"&&(v6.has(n)||By(n,!1,t),By(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[lf]||(e[lf]=!0,By("selectionchange",!1,e))}}function PD(t,e,n,i){switch(qD(e)){case 2:var r=K6;break;case 8:r=Q6;break;default:r=kT}n=r.bind(null,e,n,t),r=void 0,!q_||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function Fy(t,e,n,i,r){var s=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var a=i.tag;if(a===3||a===4){var o=i.stateNode.containerInfo;if(o===r)break;if(a===4)for(a=i.return;a!==null;){var l=a.tag;if((l===3||l===4)&&a.stateNode.containerInfo===r)return;a=a.return}for(;o!==null;){if(a=Ho(o),a===null)return;if(l=a.tag,l===5||l===6||l===26||l===27){i=s=a;continue e}o=o.parentNode}}i=i.return}CC(function(){var c=s,h=K0(n),d=[];e:{var f=HC.get(t);if(f!==void 0){var p=Ip,w=t;switch(t){case"keypress":if(kf(n)===0)break e;case"keydown":case"keyup":p=dU;break;case"focusin":w="focus",p=yy;break;case"focusout":w="blur",p=yy;break;case"beforeblur":case"afterblur":p=yy;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=DA;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=eU;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=pU;break;case jC:case BC:case FC:p=iU;break;case qC:p=yU;break;case"scroll":case"scrollend":p=J4;break;case"wheel":p=vU;break;case"copy":case"cut":case"paste":p=sU;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=kA;break;case"toggle":case"beforetoggle":p=wU}var E=(e&4)!==0,A=!E&&(t==="scroll"||t==="scrollend"),T=E?f!==null?f+"Capture":null:f;E=[];for(var v=c,_;v!==null;){var C=v;if(_=C.stateNode,C=C.tag,C!==5&&C!==26&&C!==27||_===null||T===null||(C=lh(v,T),C!=null&&E.push(yh(v,C,_))),A)break;v=v.return}0<E.length&&(f=new p(f,w,null,n,h),d.push({event:f,listeners:E}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",f&&n!==F_&&(w=n.relatedTarget||n.fromElement)&&(Ho(w)||w[rc]))break e;if((p||f)&&(f=h.window===h?h:(f=h.ownerDocument)?f.defaultView||f.parentWindow:window,p?(w=n.relatedTarget||n.toElement,p=c,w=w?Ho(w):null,w!==null&&(A=Xh(w),E=w.tag,w!==A||E!==5&&E!==27&&E!==6)&&(w=null)):(p=null,w=c),p!==w)){if(E=DA,C="onMouseLeave",T="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(E=kA,C="onPointerLeave",T="onPointerEnter",v="pointer"),A=p==null?f:fu(p),_=w==null?f:fu(w),f=new E(C,v+"leave",p,n,h),f.target=A,f.relatedTarget=_,C=null,Ho(h)===c&&(E=new E(T,v+"enter",w,n,h),E.target=_,E.relatedTarget=A,C=E),A=C,p&&w)t:{for(E=T6,T=p,v=w,_=0,C=T;C;C=E(C))_++;C=0;for(var V=v;V;V=E(V))C++;for(;0<_-C;)T=E(T),_--;for(;0<C-_;)v=E(v),C--;for(;_--;){if(T===v||v!==null&&T===v.alternate){E=T;break t}T=E(T),v=E(v)}E=null}else E=null;p!==null&&AS(d,f,p,E,!1),w!==null&&A!==null&&AS(d,A,w,E,!0)}}e:{if(f=c?fu(c):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var O=LA;else if(MA(f))if(OC)O=DU;else{O=CU;var S=xU}else p=f.nodeName,!p||p.toLowerCase()!=="input"||f.type!=="checkbox"&&f.type!=="radio"?c&&$0(c.elementType)&&(O=LA):O=PU;if(O&&(O=O(t,c))){VC(d,O,n,h);break e}S&&S(t,f,c),t==="focusout"&&c&&f.type==="number"&&c.memoizedProps.value!=null&&B_(f,"number",f.value)}switch(S=c?fu(c):window,t){case"focusin":(MA(S)||S.contentEditable==="true")&&(Ko=S,H_=c,Pu=null);break;case"focusout":Pu=H_=Ko=null;break;case"mousedown":G_=!0;break;case"contextmenu":case"mouseup":case"dragend":G_=!1,FA(d,n,h);break;case"selectionchange":if(kU)break;case"keydown":case"keyup":FA(d,n,h)}var b;if(Y0)e:{switch(t){case"compositionstart":var R="onCompositionStart";break e;case"compositionend":R="onCompositionEnd";break e;case"compositionupdate":R="onCompositionUpdate";break e}R=void 0}else $o?NC(t,n)&&(R="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(R="onCompositionStart");R&&(DC&&n.locale!=="ko"&&($o||R!=="onCompositionStart"?R==="onCompositionEnd"&&$o&&(b=PC()):(us=h,Q0="value"in us?us.value:us.textContent,$o=!0)),S=Vm(c,R),0<S.length&&(R=new NA(R,t,null,n,h),d.push({event:R,listeners:S}),b?R.data=b:(b=kC(n),b!==null&&(R.data=b)))),(b=EU?AU(t,n):SU(t,n))&&(R=Vm(c,"onBeforeInput"),0<R.length&&(S=new NA("onBeforeInput","beforeinput",null,n,h),d.push({event:S,listeners:R}),S.data=b)),g6(d,t,c,n,h)}CD(d,e)})}function yh(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Vm(t,e){for(var n=e+"Capture",i=[];t!==null;){var r=t,s=r.stateNode;if(r=r.tag,r!==5&&r!==26&&r!==27||s===null||(r=lh(t,n),r!=null&&i.unshift(yh(t,r,s)),r=lh(t,e),r!=null&&i.push(yh(t,r,s))),t.tag===3)return i;t=t.return}return[]}function T6(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function AS(t,e,n,i,r){for(var s=e._reactName,a=[];n!==null&&n!==i;){var o=n,l=o.alternate,c=o.stateNode;if(o=o.tag,l!==null&&l===i)break;o!==5&&o!==26&&o!==27||c===null||(l=c,r?(c=lh(n,s),c!=null&&a.unshift(yh(n,c,l))):r||(c=lh(n,s),c!=null&&a.push(yh(n,c,l)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var w6=/\r\n?/g,b6=/\u0000|\uFFFD/g;function SS(t){return(typeof t=="string"?t:""+t).replace(w6,`
`).replace(b6,"")}function DD(t,e){return e=SS(e),SS(t)===e}function Ce(t,e,n,i,r,s){switch(n){case"children":typeof i=="string"?e==="body"||e==="textarea"&&i===""||bl(t,i):(typeof i=="number"||typeof i=="bigint")&&e!=="body"&&bl(t,""+i);break;case"className":ef(t,"class",i);break;case"tabIndex":ef(t,"tabindex",i);break;case"dir":case"role":case"viewBox":case"width":case"height":ef(t,n,i);break;case"style":xC(t,i,s);break;case"data":if(e!=="object"){ef(t,"data",i);break}case"src":case"href":if(i===""&&(e!=="a"||n!=="href")){t.removeAttribute(n);break}if(i==null||typeof i=="function"||typeof i=="symbol"||typeof i=="boolean"){t.removeAttribute(n);break}i=Df(""+i),t.setAttribute(n,i);break;case"action":case"formAction":if(typeof i=="function"){t.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof s=="function"&&(n==="formAction"?(e!=="input"&&Ce(t,e,"name",r.name,r,null),Ce(t,e,"formEncType",r.formEncType,r,null),Ce(t,e,"formMethod",r.formMethod,r,null),Ce(t,e,"formTarget",r.formTarget,r,null)):(Ce(t,e,"encType",r.encType,r,null),Ce(t,e,"method",r.method,r,null),Ce(t,e,"target",r.target,r,null)));if(i==null||typeof i=="symbol"||typeof i=="boolean"){t.removeAttribute(n);break}i=Df(""+i),t.setAttribute(n,i);break;case"onClick":i!=null&&(t.onclick=cr);break;case"onScroll":i!=null&&de("scroll",t);break;case"onScrollEnd":i!=null&&de("scrollend",t);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(j(61));if(n=i.__html,n!=null){if(r.children!=null)throw Error(j(60));t.innerHTML=n}}break;case"multiple":t.multiple=i&&typeof i!="function"&&typeof i!="symbol";break;case"muted":t.muted=i&&typeof i!="function"&&typeof i!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(i==null||typeof i=="function"||typeof i=="boolean"||typeof i=="symbol"){t.removeAttribute("xlink:href");break}n=Df(""+i),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":i!=null&&typeof i!="function"&&typeof i!="symbol"?t.setAttribute(n,""+i):t.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":i&&typeof i!="function"&&typeof i!="symbol"?t.setAttribute(n,""):t.removeAttribute(n);break;case"capture":case"download":i===!0?t.setAttribute(n,""):i!==!1&&i!=null&&typeof i!="function"&&typeof i!="symbol"?t.setAttribute(n,i):t.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":i!=null&&typeof i!="function"&&typeof i!="symbol"&&!isNaN(i)&&1<=i?t.setAttribute(n,i):t.removeAttribute(n);break;case"rowSpan":case"start":i==null||typeof i=="function"||typeof i=="symbol"||isNaN(i)?t.removeAttribute(n):t.setAttribute(n,i);break;case"popover":de("beforetoggle",t),de("toggle",t),Pf(t,"popover",i);break;case"xlinkActuate":Zi(t,"http://www.w3.org/1999/xlink","xlink:actuate",i);break;case"xlinkArcrole":Zi(t,"http://www.w3.org/1999/xlink","xlink:arcrole",i);break;case"xlinkRole":Zi(t,"http://www.w3.org/1999/xlink","xlink:role",i);break;case"xlinkShow":Zi(t,"http://www.w3.org/1999/xlink","xlink:show",i);break;case"xlinkTitle":Zi(t,"http://www.w3.org/1999/xlink","xlink:title",i);break;case"xlinkType":Zi(t,"http://www.w3.org/1999/xlink","xlink:type",i);break;case"xmlBase":Zi(t,"http://www.w3.org/XML/1998/namespace","xml:base",i);break;case"xmlLang":Zi(t,"http://www.w3.org/XML/1998/namespace","xml:lang",i);break;case"xmlSpace":Zi(t,"http://www.w3.org/XML/1998/namespace","xml:space",i);break;case"is":Pf(t,"is",i);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=Y4.get(n)||n,Pf(t,n,i))}}function pv(t,e,n,i,r,s){switch(n){case"style":xC(t,i,s);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(j(61));if(n=i.__html,n!=null){if(r.children!=null)throw Error(j(60));t.innerHTML=n}}break;case"children":typeof i=="string"?bl(t,i):(typeof i=="number"||typeof i=="bigint")&&bl(t,""+i);break;case"onScroll":i!=null&&de("scroll",t);break;case"onScrollEnd":i!=null&&de("scrollend",t);break;case"onClick":i!=null&&(t.onclick=cr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!bC.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(r=n.endsWith("Capture"),e=n.slice(2,r?n.length-7:void 0),s=t[En]||null,s=s!=null?s[n]:null,typeof s=="function"&&t.removeEventListener(e,s,r),typeof i=="function")){typeof s!="function"&&s!==null&&(n in t?t[n]=null:t.hasAttribute(n)&&t.removeAttribute(n)),t.addEventListener(e,i,r);break e}n in t?t[n]=i:i===!0?t.setAttribute(n,""):Pf(t,n,i)}}}function Ft(t,e,n){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":de("error",t),de("load",t);var i=!1,r=!1,s;for(s in n)if(n.hasOwnProperty(s)){var a=n[s];if(a!=null)switch(s){case"src":i=!0;break;case"srcSet":r=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(j(137,e));default:Ce(t,e,s,a,n,null)}}r&&Ce(t,e,"srcSet",n.srcSet,n,null),i&&Ce(t,e,"src",n.src,n,null);return;case"input":de("invalid",t);var o=s=a=r=null,l=null,c=null;for(i in n)if(n.hasOwnProperty(i)){var h=n[i];if(h!=null)switch(i){case"name":r=h;break;case"type":a=h;break;case"checked":l=h;break;case"defaultChecked":c=h;break;case"value":s=h;break;case"defaultValue":o=h;break;case"children":case"dangerouslySetInnerHTML":if(h!=null)throw Error(j(137,e));break;default:Ce(t,e,i,h,n,null)}}SC(t,s,o,l,c,a,r,!1);return;case"select":de("invalid",t),i=a=s=null;for(r in n)if(n.hasOwnProperty(r)&&(o=n[r],o!=null))switch(r){case"value":s=o;break;case"defaultValue":a=o;break;case"multiple":i=o;default:Ce(t,e,r,o,n,null)}e=s,n=a,t.multiple=!!i,e!=null?ol(t,!!i,e,!1):n!=null&&ol(t,!!i,n,!0);return;case"textarea":de("invalid",t),s=r=i=null;for(a in n)if(n.hasOwnProperty(a)&&(o=n[a],o!=null))switch(a){case"value":i=o;break;case"defaultValue":r=o;break;case"children":s=o;break;case"dangerouslySetInnerHTML":if(o!=null)throw Error(j(91));break;default:Ce(t,e,a,o,n,null)}RC(t,i,r,s);return;case"option":for(l in n)if(n.hasOwnProperty(l)&&(i=n[l],i!=null))switch(l){case"selected":t.selected=i&&typeof i!="function"&&typeof i!="symbol";break;default:Ce(t,e,l,i,n,null)}return;case"dialog":de("beforetoggle",t),de("toggle",t),de("cancel",t),de("close",t);break;case"iframe":case"object":de("load",t);break;case"video":case"audio":for(i=0;i<gh.length;i++)de(gh[i],t);break;case"image":de("error",t),de("load",t);break;case"details":de("toggle",t);break;case"embed":case"source":case"link":de("error",t),de("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(c in n)if(n.hasOwnProperty(c)&&(i=n[c],i!=null))switch(c){case"children":case"dangerouslySetInnerHTML":throw Error(j(137,e));default:Ce(t,e,c,i,n,null)}return;default:if($0(e)){for(h in n)n.hasOwnProperty(h)&&(i=n[h],i!==void 0&&pv(t,e,h,i,n,void 0));return}}for(o in n)n.hasOwnProperty(o)&&(i=n[o],i!=null&&Ce(t,e,o,i,n,null))}function E6(t,e,n,i){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var r=null,s=null,a=null,o=null,l=null,c=null,h=null;for(p in n){var d=n[p];if(n.hasOwnProperty(p)&&d!=null)switch(p){case"checked":break;case"value":break;case"defaultValue":l=d;default:i.hasOwnProperty(p)||Ce(t,e,p,null,i,d)}}for(var f in i){var p=i[f];if(d=n[f],i.hasOwnProperty(f)&&(p!=null||d!=null))switch(f){case"type":s=p;break;case"name":r=p;break;case"checked":c=p;break;case"defaultChecked":h=p;break;case"value":a=p;break;case"defaultValue":o=p;break;case"children":case"dangerouslySetInnerHTML":if(p!=null)throw Error(j(137,e));break;default:p!==d&&Ce(t,e,f,p,i,d)}}j_(t,a,o,l,c,h,s,r);return;case"select":p=a=o=f=null;for(s in n)if(l=n[s],n.hasOwnProperty(s)&&l!=null)switch(s){case"value":break;case"multiple":p=l;default:i.hasOwnProperty(s)||Ce(t,e,s,null,i,l)}for(r in i)if(s=i[r],l=n[r],i.hasOwnProperty(r)&&(s!=null||l!=null))switch(r){case"value":f=s;break;case"defaultValue":o=s;break;case"multiple":a=s;default:s!==l&&Ce(t,e,r,s,i,l)}e=o,n=a,i=p,f!=null?ol(t,!!n,f,!1):!!i!=!!n&&(e!=null?ol(t,!!n,e,!0):ol(t,!!n,n?[]:"",!1));return;case"textarea":p=f=null;for(o in n)if(r=n[o],n.hasOwnProperty(o)&&r!=null&&!i.hasOwnProperty(o))switch(o){case"value":break;case"children":break;default:Ce(t,e,o,null,i,r)}for(a in i)if(r=i[a],s=n[a],i.hasOwnProperty(a)&&(r!=null||s!=null))switch(a){case"value":f=r;break;case"defaultValue":p=r;break;case"children":break;case"dangerouslySetInnerHTML":if(r!=null)throw Error(j(91));break;default:r!==s&&Ce(t,e,a,r,i,s)}IC(t,f,p);return;case"option":for(var w in n)if(f=n[w],n.hasOwnProperty(w)&&f!=null&&!i.hasOwnProperty(w))switch(w){case"selected":t.selected=!1;break;default:Ce(t,e,w,null,i,f)}for(l in i)if(f=i[l],p=n[l],i.hasOwnProperty(l)&&f!==p&&(f!=null||p!=null))switch(l){case"selected":t.selected=f&&typeof f!="function"&&typeof f!="symbol";break;default:Ce(t,e,l,f,i,p)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var E in n)f=n[E],n.hasOwnProperty(E)&&f!=null&&!i.hasOwnProperty(E)&&Ce(t,e,E,null,i,f);for(c in i)if(f=i[c],p=n[c],i.hasOwnProperty(c)&&f!==p&&(f!=null||p!=null))switch(c){case"children":case"dangerouslySetInnerHTML":if(f!=null)throw Error(j(137,e));break;default:Ce(t,e,c,f,i,p)}return;default:if($0(e)){for(var A in n)f=n[A],n.hasOwnProperty(A)&&f!==void 0&&!i.hasOwnProperty(A)&&pv(t,e,A,void 0,i,f);for(h in i)f=i[h],p=n[h],!i.hasOwnProperty(h)||f===p||f===void 0&&p===void 0||pv(t,e,h,f,i,p);return}}for(var T in n)f=n[T],n.hasOwnProperty(T)&&f!=null&&!i.hasOwnProperty(T)&&Ce(t,e,T,null,i,f);for(d in i)f=i[d],p=n[d],!i.hasOwnProperty(d)||f===p||f==null&&p==null||Ce(t,e,d,f,i,p)}function IS(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function A6(){if(typeof performance.getEntriesByType=="function"){for(var t=0,e=0,n=performance.getEntriesByType("resource"),i=0;i<n.length;i++){var r=n[i],s=r.transferSize,a=r.initiatorType,o=r.duration;if(s&&o&&IS(a)){for(a=0,o=r.responseEnd,i+=1;i<n.length;i++){var l=n[i],c=l.startTime;if(c>o)break;var h=l.transferSize,d=l.initiatorType;h&&IS(d)&&(l=l.responseEnd,a+=h*(l<o?1:(o-c)/(l-c)))}if(--i,e+=8*(s+a)/(r.duration/1e3),t++,10<t)break}}if(0<t)return e/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var gv=null,yv=null;function Om(t){return t.nodeType===9?t:t.ownerDocument}function RS(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function ND(t,e){if(t===0)switch(e){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&e==="foreignObject"?0:t}function _v(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.children=="bigint"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var qy=null;function S6(){var t=window.event;return t&&t.type==="popstate"?t===qy?!1:(qy=t,!0):(qy=null,!1)}var kD=typeof setTimeout=="function"?setTimeout:void 0,I6=typeof clearTimeout=="function"?clearTimeout:void 0,xS=typeof Promise=="function"?Promise:void 0,R6=typeof queueMicrotask=="function"?queueMicrotask:typeof xS<"u"?function(t){return xS.resolve(null).then(t).catch(x6)}:kD;function x6(t){setTimeout(function(){throw t})}function Ys(t){return t==="head"}function CS(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"||n==="/&"){if(i===0){t.removeChild(r),Pl(e);return}i--}else if(n==="$"||n==="$?"||n==="$~"||n==="$!"||n==="&")i++;else if(n==="html")ju(t.ownerDocument.documentElement);else if(n==="head"){n=t.ownerDocument.head,ju(n);for(var s=n.firstChild;s;){var a=s.nextSibling,o=s.nodeName;s[td]||o==="SCRIPT"||o==="STYLE"||o==="LINK"&&s.rel.toLowerCase()==="stylesheet"||n.removeChild(s),s=a}}else n==="body"&&ju(t.ownerDocument.body);n=r}while(n);Pl(e)}function PS(t,e){var n=t;t=0;do{var i=n.nextSibling;if(n.nodeType===1?e?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",n.getAttribute("style")===""&&n.removeAttribute("style")):n.nodeType===3&&(e?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(t===0)break;t--}else n!=="$"&&n!=="$?"&&n!=="$~"&&n!=="$!"||t++;n=i}while(n)}function vv(t){var e=t.firstChild;for(e&&e.nodeType===10&&(e=e.nextSibling);e;){var n=e;switch(e=e.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":vv(n),G0(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}t.removeChild(n)}}function C6(t,e,n,i){for(;t.nodeType===1;){var r=n;if(t.nodeName.toLowerCase()!==e.toLowerCase()){if(!i&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(i){if(!t[td])switch(e){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(s=t.getAttribute("rel"),s==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(s!==r.rel||t.getAttribute("href")!==(r.href==null||r.href===""?null:r.href)||t.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin)||t.getAttribute("title")!==(r.title==null?null:r.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(s=t.getAttribute("src"),(s!==(r.src==null?null:r.src)||t.getAttribute("type")!==(r.type==null?null:r.type)||t.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin))&&s&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(e==="input"&&t.type==="hidden"){var s=r.name==null?null:""+r.name;if(r.type==="hidden"&&t.getAttribute("name")===s)return t}else return t;if(t=li(t.nextSibling),t===null)break}return null}function P6(t,e,n){if(e==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!n||(t=li(t.nextSibling),t===null))return null;return t}function VD(t,e){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!e||(t=li(t.nextSibling),t===null))return null;return t}function Tv(t){return t.data==="$?"||t.data==="$~"}function wv(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function D6(t,e){var n=t.ownerDocument;if(t.data==="$~")t._reactRetry=e;else if(t.data!=="$?"||n.readyState!=="loading")e();else{var i=function(){e(),n.removeEventListener("DOMContentLoaded",i)};n.addEventListener("DOMContentLoaded",i),t._reactRetry=i}}function li(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?"||e==="$~"||e==="&"||e==="F!"||e==="F")break;if(e==="/$"||e==="/&")return null}}return t}var bv=null;function DS(t){t=t.nextSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"||n==="/&"){if(e===0)return li(t.nextSibling);e--}else n!=="$"&&n!=="$!"&&n!=="$?"&&n!=="$~"&&n!=="&"||e++}t=t.nextSibling}return null}function NS(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"){if(e===0)return t;e--}else n!=="/$"&&n!=="/&"||e++}t=t.previousSibling}return null}function OD(t,e,n){switch(e=Om(n),t){case"html":if(t=e.documentElement,!t)throw Error(j(452));return t;case"head":if(t=e.head,!t)throw Error(j(453));return t;case"body":if(t=e.body,!t)throw Error(j(454));return t;default:throw Error(j(451))}}function ju(t){for(var e=t.attributes;e.length;)t.removeAttributeNode(e[0]);G0(t)}var ui=new Map,kS=new Set;function Mm(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var kr=Ee.d;Ee.d={f:N6,r:k6,D:V6,C:O6,L:M6,m:L6,X:z6,S:U6,M:j6};function N6(){var t=kr.f(),e=Lp();return t||e}function k6(t){var e=sc(t);e!==null&&e.tag===5&&e.type==="form"?xP(e):kr.r(t)}var cc=typeof document>"u"?null:document;function MD(t,e,n){var i=cc;if(i&&typeof e=="string"&&e){var r=ni(e);r='link[rel="'+t+'"][href="'+r+'"]',typeof n=="string"&&(r+='[crossorigin="'+n+'"]'),kS.has(r)||(kS.add(r),t={rel:t,crossOrigin:n,href:e},i.querySelector(r)===null&&(e=i.createElement("link"),Ft(e,"link",t),Nt(e),i.head.appendChild(e)))}}function V6(t){kr.D(t),MD("dns-prefetch",t,null)}function O6(t,e){kr.C(t,e),MD("preconnect",t,e)}function M6(t,e,n){kr.L(t,e,n);var i=cc;if(i&&t&&e){var r='link[rel="preload"][as="'+ni(e)+'"]';e==="image"&&n&&n.imageSrcSet?(r+='[imagesrcset="'+ni(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(r+='[imagesizes="'+ni(n.imageSizes)+'"]')):r+='[href="'+ni(t)+'"]';var s=r;switch(e){case"style":s=Cl(t);break;case"script":s=uc(t)}ui.has(s)||(t=Ge({rel:"preload",href:e==="image"&&n&&n.imageSrcSet?void 0:t,as:e},n),ui.set(s,t),i.querySelector(r)!==null||e==="style"&&i.querySelector(od(s))||e==="script"&&i.querySelector(ld(s))||(e=i.createElement("link"),Ft(e,"link",t),Nt(e),i.head.appendChild(e)))}}function L6(t,e){kr.m(t,e);var n=cc;if(n&&t){var i=e&&typeof e.as=="string"?e.as:"script",r='link[rel="modulepreload"][as="'+ni(i)+'"][href="'+ni(t)+'"]',s=r;switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":s=uc(t)}if(!ui.has(s)&&(t=Ge({rel:"modulepreload",href:t},e),ui.set(s,t),n.querySelector(r)===null)){switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(ld(s)))return}i=n.createElement("link"),Ft(i,"link",t),Nt(i),n.head.appendChild(i)}}}function U6(t,e,n){kr.S(t,e,n);var i=cc;if(i&&t){var r=al(i).hoistableStyles,s=Cl(t);e=e||"default";var a=r.get(s);if(!a){var o={loading:0,preload:null};if(a=i.querySelector(od(s)))o.loading=5;else{t=Ge({rel:"stylesheet",href:t,"data-precedence":e},n),(n=ui.get(s))&&PT(t,n);var l=a=i.createElement("link");Nt(l),Ft(l,"link",t),l._p=new Promise(function(c,h){l.onload=c,l.onerror=h}),l.addEventListener("load",function(){o.loading|=1}),l.addEventListener("error",function(){o.loading|=2}),o.loading|=4,Bf(a,e,i)}a={type:"stylesheet",instance:a,count:1,state:o},r.set(s,a)}}}function z6(t,e){kr.X(t,e);var n=cc;if(n&&t){var i=al(n).hoistableScripts,r=uc(t),s=i.get(r);s||(s=n.querySelector(ld(r)),s||(t=Ge({src:t,async:!0},e),(e=ui.get(r))&&DT(t,e),s=n.createElement("script"),Nt(s),Ft(s,"link",t),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},i.set(r,s))}}function j6(t,e){kr.M(t,e);var n=cc;if(n&&t){var i=al(n).hoistableScripts,r=uc(t),s=i.get(r);s||(s=n.querySelector(ld(r)),s||(t=Ge({src:t,async:!0,type:"module"},e),(e=ui.get(r))&&DT(t,e),s=n.createElement("script"),Nt(s),Ft(s,"link",t),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},i.set(r,s))}}function VS(t,e,n,i){var r=(r=ys.current)?Mm(r):null;if(!r)throw Error(j(446));switch(t){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(e=Cl(n.href),n=al(r).hoistableStyles,i=n.get(e),i||(i={type:"style",instance:null,count:0,state:null},n.set(e,i)),i):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){t=Cl(n.href);var s=al(r).hoistableStyles,a=s.get(t);if(a||(r=r.ownerDocument||r,a={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},s.set(t,a),(s=r.querySelector(od(t)))&&!s._p&&(a.instance=s,a.state.loading=5),ui.has(t)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},ui.set(t,n),s||B6(r,t,n,a.state))),e&&i===null)throw Error(j(528,""));return a}if(e&&i!==null)throw Error(j(529,""));return null;case"script":return e=n.async,n=n.src,typeof n=="string"&&e&&typeof e!="function"&&typeof e!="symbol"?(e=uc(n),n=al(r).hoistableScripts,i=n.get(e),i||(i={type:"script",instance:null,count:0,state:null},n.set(e,i)),i):{type:"void",instance:null,count:0,state:null};default:throw Error(j(444,t))}}function Cl(t){return'href="'+ni(t)+'"'}function od(t){return'link[rel="stylesheet"]['+t+"]"}function LD(t){return Ge({},t,{"data-precedence":t.precedence,precedence:null})}function B6(t,e,n,i){t.querySelector('link[rel="preload"][as="style"]['+e+"]")?i.loading=1:(e=t.createElement("link"),i.preload=e,e.addEventListener("load",function(){return i.loading|=1}),e.addEventListener("error",function(){return i.loading|=2}),Ft(e,"link",n),Nt(e),t.head.appendChild(e))}function uc(t){return'[src="'+ni(t)+'"]'}function ld(t){return"script[async]"+t}function OS(t,e,n){if(e.count++,e.instance===null)switch(e.type){case"style":var i=t.querySelector('style[data-href~="'+ni(n.href)+'"]');if(i)return e.instance=i,Nt(i),i;var r=Ge({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return i=(t.ownerDocument||t).createElement("style"),Nt(i),Ft(i,"style",r),Bf(i,n.precedence,t),e.instance=i;case"stylesheet":r=Cl(n.href);var s=t.querySelector(od(r));if(s)return e.state.loading|=4,e.instance=s,Nt(s),s;i=LD(n),(r=ui.get(r))&&PT(i,r),s=(t.ownerDocument||t).createElement("link"),Nt(s);var a=s;return a._p=new Promise(function(o,l){a.onload=o,a.onerror=l}),Ft(s,"link",i),e.state.loading|=4,Bf(s,n.precedence,t),e.instance=s;case"script":return s=uc(n.src),(r=t.querySelector(ld(s)))?(e.instance=r,Nt(r),r):(i=n,(r=ui.get(s))&&(i=Ge({},n),DT(i,r)),t=t.ownerDocument||t,r=t.createElement("script"),Nt(r),Ft(r,"link",i),t.head.appendChild(r),e.instance=r);case"void":return null;default:throw Error(j(443,e.type))}else e.type==="stylesheet"&&!(e.state.loading&4)&&(i=e.instance,e.state.loading|=4,Bf(i,n.precedence,t));return e.instance}function Bf(t,e,n){for(var i=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),r=i.length?i[i.length-1]:null,s=r,a=0;a<i.length;a++){var o=i[a];if(o.dataset.precedence===e)s=o;else if(s!==r)break}s?s.parentNode.insertBefore(t,s.nextSibling):(e=n.nodeType===9?n.head:n,e.insertBefore(t,e.firstChild))}function PT(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.title==null&&(t.title=e.title)}function DT(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.integrity==null&&(t.integrity=e.integrity)}var Ff=null;function MS(t,e,n){if(Ff===null){var i=new Map,r=Ff=new Map;r.set(n,i)}else r=Ff,i=r.get(n),i||(i=new Map,r.set(n,i));if(i.has(t))return i;for(i.set(t,null),n=n.getElementsByTagName(t),r=0;r<n.length;r++){var s=n[r];if(!(s[td]||s[Ut]||t==="link"&&s.getAttribute("rel")==="stylesheet")&&s.namespaceURI!=="http://www.w3.org/2000/svg"){var a=s.getAttribute(e)||"";a=t+a;var o=i.get(a);o?o.push(s):i.set(a,[s])}}return i}function LS(t,e,n){t=t.ownerDocument||t,t.head.insertBefore(n,e==="title"?t.querySelector("head > title"):null)}function F6(t,e,n){if(n===1||e.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof e.precedence!="string"||typeof e.href!="string"||e.href==="")break;return!0;case"link":if(typeof e.rel!="string"||typeof e.href!="string"||e.href===""||e.onLoad||e.onError)break;switch(e.rel){case"stylesheet":return t=e.disabled,typeof e.precedence=="string"&&t==null;default:return!0}case"script":if(e.async&&typeof e.async!="function"&&typeof e.async!="symbol"&&!e.onLoad&&!e.onError&&e.src&&typeof e.src=="string")return!0}return!1}function UD(t){return!(t.type==="stylesheet"&&!(t.state.loading&3))}function q6(t,e,n,i){if(n.type==="stylesheet"&&(typeof i.media!="string"||matchMedia(i.media).matches!==!1)&&!(n.state.loading&4)){if(n.instance===null){var r=Cl(i.href),s=e.querySelector(od(r));if(s){e=s._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(t.count++,t=Lm.bind(t),e.then(t,t)),n.state.loading|=4,n.instance=s,Nt(s);return}s=e.ownerDocument||e,i=LD(i),(r=ui.get(r))&&PT(i,r),s=s.createElement("link"),Nt(s);var a=s;a._p=new Promise(function(o,l){a.onload=o,a.onerror=l}),Ft(s,"link",i),n.instance=s}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(n,e),(e=n.state.preload)&&!(n.state.loading&3)&&(t.count++,n=Lm.bind(t),e.addEventListener("load",n),e.addEventListener("error",n))}}var Hy=0;function H6(t,e){return t.stylesheets&&t.count===0&&qf(t,t.stylesheets),0<t.count||0<t.imgCount?function(n){var i=setTimeout(function(){if(t.stylesheets&&qf(t,t.stylesheets),t.unsuspend){var s=t.unsuspend;t.unsuspend=null,s()}},6e4+e);0<t.imgBytes&&Hy===0&&(Hy=62500*A6());var r=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&qf(t,t.stylesheets),t.unsuspend)){var s=t.unsuspend;t.unsuspend=null,s()}},(t.imgBytes>Hy?50:800)+e);return t.unsuspend=n,function(){t.unsuspend=null,clearTimeout(i),clearTimeout(r)}}:null}function Lm(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)qf(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Um=null;function qf(t,e){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Um=new Map,e.forEach(G6,t),Um=null,Lm.call(t))}function G6(t,e){if(!(e.state.loading&4)){var n=Um.get(t);if(n)var i=n.get(null);else{n=new Map,Um.set(t,n);for(var r=t.querySelectorAll("link[data-precedence],style[data-precedence]"),s=0;s<r.length;s++){var a=r[s];(a.nodeName==="LINK"||a.getAttribute("media")!=="not all")&&(n.set(a.dataset.precedence,a),i=a)}i&&n.set(null,i)}r=e.instance,a=r.getAttribute("data-precedence"),s=n.get(a)||i,s===i&&n.set(null,r),n.set(a,r),this.count++,i=Lm.bind(this),r.addEventListener("load",i),r.addEventListener("error",i),s?s.parentNode.insertBefore(r,s.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(r,t.firstChild)),e.state.loading|=4}}var _h={$$typeof:lr,Provider:null,Consumer:null,_currentValue:ka,_currentValue2:ka,_threadCount:0};function $6(t,e,n,i,r,s,a,o,l){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=fy(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=fy(0),this.hiddenUpdates=fy(null),this.identifierPrefix=i,this.onUncaughtError=r,this.onCaughtError=s,this.onRecoverableError=a,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=l,this.incompleteTransitions=new Map}function zD(t,e,n,i,r,s,a,o,l,c,h,d){return t=new $6(t,e,n,a,l,c,h,d,o),e=1,s===!0&&(e|=24),s=Nn(3,null,null,e),t.current=s,s.stateNode=t,e=iT(),e.refCount++,t.pooledCache=e,e.refCount++,s.memoizedState={element:i,isDehydrated:n,cache:e},aT(s),t}function jD(t){return t?(t=Yo,t):Yo}function BD(t,e,n,i,r,s){r=jD(r),i.context===null?i.context=r:i.pendingContext=r,i=vs(e),i.payload={element:n},s=s===void 0?null:s,s!==null&&(i.callback=s),n=Ts(t,i,e),n!==null&&(bn(n,t,e),Nu(n,t,e))}function US(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function NT(t,e){US(t,e),(t=t.alternate)&&US(t,e)}function FD(t){if(t.tag===13||t.tag===31){var e=uo(t,67108864);e!==null&&bn(e,t,67108864),NT(t,67108864)}}function zS(t){if(t.tag===13||t.tag===31){var e=Un();e=q0(e);var n=uo(t,e);n!==null&&bn(n,t,e),NT(t,e)}}var zm=!0;function K6(t,e,n,i){var r=re.T;re.T=null;var s=Ee.p;try{Ee.p=2,kT(t,e,n,i)}finally{Ee.p=s,re.T=r}}function Q6(t,e,n,i){var r=re.T;re.T=null;var s=Ee.p;try{Ee.p=8,kT(t,e,n,i)}finally{Ee.p=s,re.T=r}}function kT(t,e,n,i){if(zm){var r=Ev(i);if(r===null)Fy(t,e,i,jm,n),jS(t,i);else if(Y6(r,t,e,n,i))i.stopPropagation();else if(jS(t,i),e&4&&-1<W6.indexOf(t)){for(;r!==null;){var s=sc(r);if(s!==null)switch(s.tag){case 3:if(s=s.stateNode,s.current.memoizedState.isDehydrated){var a=pa(s.pendingLanes);if(a!==0){var o=s;for(o.pendingLanes|=2,o.entangledLanes|=2;a;){var l=1<<31-Ln(a);o.entanglements[1]|=l,a&=~l}Ji(s),!(be&6)&&(Cm=On()+500,ad(0))}}break;case 31:case 13:o=uo(s,2),o!==null&&bn(o,s,2),Lp(),NT(s,2)}if(s=Ev(i),s===null&&Fy(t,e,i,jm,n),s===r)break;r=s}r!==null&&i.stopPropagation()}else Fy(t,e,i,null,n)}}function Ev(t){return t=K0(t),VT(t)}var jm=null;function VT(t){if(jm=null,t=Ho(t),t!==null){var e=Xh(t);if(e===null)t=null;else{var n=e.tag;if(n===13){if(t=lC(e),t!==null)return t;t=null}else if(n===31){if(t=cC(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null)}}return jm=t,null}function qD(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(V4()){case fC:return 2;case mC:return 8;case pm:case O4:return 32;case pC:return 268435456;default:return 32}default:return 32}}var Av=!1,Es=null,As=null,Ss=null,vh=new Map,Th=new Map,os=[],W6="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function jS(t,e){switch(t){case"focusin":case"focusout":Es=null;break;case"dragenter":case"dragleave":As=null;break;case"mouseover":case"mouseout":Ss=null;break;case"pointerover":case"pointerout":vh.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Th.delete(e.pointerId)}}function Jc(t,e,n,i,r,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},e!==null&&(e=sc(e),e!==null&&FD(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function Y6(t,e,n,i,r){switch(e){case"focusin":return Es=Jc(Es,t,e,n,i,r),!0;case"dragenter":return As=Jc(As,t,e,n,i,r),!0;case"mouseover":return Ss=Jc(Ss,t,e,n,i,r),!0;case"pointerover":var s=r.pointerId;return vh.set(s,Jc(vh.get(s)||null,t,e,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,Th.set(s,Jc(Th.get(s)||null,t,e,n,i,r)),!0}return!1}function HD(t){var e=Ho(t.target);if(e!==null){var n=Xh(e);if(n!==null){if(e=n.tag,e===13){if(e=lC(n),e!==null){t.blockedOn=e,AA(t.priority,function(){zS(n)});return}}else if(e===31){if(e=cC(n),e!==null){t.blockedOn=e,AA(t.priority,function(){zS(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Hf(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Ev(t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);F_=i,n.target.dispatchEvent(i),F_=null}else return e=sc(n),e!==null&&FD(e),t.blockedOn=n,!1;e.shift()}return!0}function BS(t,e,n){Hf(t)&&n.delete(e)}function X6(){Av=!1,Es!==null&&Hf(Es)&&(Es=null),As!==null&&Hf(As)&&(As=null),Ss!==null&&Hf(Ss)&&(Ss=null),vh.forEach(BS),Th.forEach(BS)}function cf(t,e){t.blockedOn===e&&(t.blockedOn=null,Av||(Av=!0,It.unstable_scheduleCallback(It.unstable_NormalPriority,X6)))}var uf=null;function FS(t){uf!==t&&(uf=t,It.unstable_scheduleCallback(It.unstable_NormalPriority,function(){uf===t&&(uf=null);for(var e=0;e<t.length;e+=3){var n=t[e],i=t[e+1],r=t[e+2];if(typeof i!="function"){if(VT(i||n)===null)continue;break}var s=sc(n);s!==null&&(t.splice(e,3),e-=3,rv(s,{pending:!0,data:r,method:n.method,action:i},i,r))}}))}function Pl(t){function e(l){return cf(l,t)}Es!==null&&cf(Es,t),As!==null&&cf(As,t),Ss!==null&&cf(Ss,t),vh.forEach(e),Th.forEach(e);for(var n=0;n<os.length;n++){var i=os[n];i.blockedOn===t&&(i.blockedOn=null)}for(;0<os.length&&(n=os[0],n.blockedOn===null);)HD(n),n.blockedOn===null&&os.shift();if(n=(t.ownerDocument||t).$$reactFormReplay,n!=null)for(i=0;i<n.length;i+=3){var r=n[i],s=n[i+1],a=r[En]||null;if(typeof s=="function")a||FS(n);else if(a){var o=null;if(s&&s.hasAttribute("formAction")){if(r=s,a=s[En]||null)o=a.formAction;else if(VT(r)!==null)continue}else o=a.action;typeof o=="function"?n[i+1]=o:(n.splice(i,3),i-=3),FS(n)}}}function GD(){function t(s){s.canIntercept&&s.info==="react-transition"&&s.intercept({handler:function(){return new Promise(function(a){return r=a})},focusReset:"manual",scroll:"manual"})}function e(){r!==null&&(r(),r=null),i||setTimeout(n,20)}function n(){if(!i&&!navigation.transition){var s=navigation.currentEntry;s&&s.url!=null&&navigation.navigate(s.url,{state:s.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var i=!1,r=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",e),navigation.addEventListener("navigateerror",e),setTimeout(n,100),function(){i=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",e),navigation.removeEventListener("navigateerror",e),r!==null&&(r(),r=null)}}}function OT(t){this._internalRoot=t}jp.prototype.render=OT.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(j(409));var n=e.current,i=Un();BD(n,i,t,e,null,null)};jp.prototype.unmount=OT.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;BD(t.current,2,null,t,null,null),Lp(),e[rc]=null}};function jp(t){this._internalRoot=t}jp.prototype.unstable_scheduleHydration=function(t){if(t){var e=TC();t={blockedOn:null,target:t,priority:e};for(var n=0;n<os.length&&e!==0&&e<os[n].priority;n++);os.splice(n,0,t),n===0&&HD(t)}};var qS=aC.version;if(qS!=="19.2.0")throw Error(j(527,qS,"19.2.0"));Ee.findDOMNode=function(t){var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(j(188)):(t=Object.keys(t).join(","),Error(j(268,t)));return t=R4(e),t=t!==null?uC(t):null,t=t===null?null:t.stateNode,t};var J6={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:re,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var hf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!hf.isDisabled&&hf.supportsFiber)try{Jh=hf.inject(J6),Mn=hf}catch{}}Ep.createRoot=function(t,e){if(!oC(t))throw Error(j(299));var n=!1,i="",r=MP,s=LP,a=UP;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onUncaughtError!==void 0&&(r=e.onUncaughtError),e.onCaughtError!==void 0&&(s=e.onCaughtError),e.onRecoverableError!==void 0&&(a=e.onRecoverableError)),e=zD(t,1,!1,null,null,n,i,null,r,s,a,GD),t[rc]=e.current,CT(t),new OT(e)};Ep.hydrateRoot=function(t,e,n){if(!oC(t))throw Error(j(299));var i=!1,r="",s=MP,a=LP,o=UP,l=null;return n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(r=n.identifierPrefix),n.onUncaughtError!==void 0&&(s=n.onUncaughtError),n.onCaughtError!==void 0&&(a=n.onCaughtError),n.onRecoverableError!==void 0&&(o=n.onRecoverableError),n.formState!==void 0&&(l=n.formState)),e=zD(t,1,!0,e,n??null,i,r,l,s,a,o,GD),e.context=jD(null),n=e.current,i=Un(),i=q0(i),r=vs(i),r.callback=null,Ts(n,r,i),n=i,e.current.lanes=n,ed(e,n),Ji(e),t[rc]=e.current,CT(t),new jp(e)};Ep.version="19.2.0";function $D(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE($D)}catch(t){console.error(t)}}$D(),Zx.exports=Ep;var Z6=Zx.exports;const e5=qx(Z6),t5="modulepreload",n5=function(t){return"/RushCoffee-Capstone/"+t},HS={},De=function(e,n,i){let r=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),o=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));r=Promise.allSettled(n.map(l=>{if(l=n5(l),l in HS)return;HS[l]=!0;const c=l.endsWith(".css"),h=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${h}`))return;const d=document.createElement("link");if(d.rel=c?"stylesheet":t5,c||(d.as="script"),d.crossOrigin="",d.href=l,o&&d.setAttribute("nonce",o),document.head.appendChild(d),c)return new Promise((f,p)=>{d.addEventListener("load",f),d.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return r.then(a=>{for(const o of a||[])o.status==="rejected"&&s(o.reason);return e().catch(s)})};/**
 * react-router v7.9.6
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var GS="popstate";function i5(t={}){function e(r,s){let{pathname:a="/",search:o="",hash:l=""}=fo(r.location.hash.substring(1));return!a.startsWith("/")&&!a.startsWith(".")&&(a="/"+a),Sv("",{pathname:a,search:o,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){let a=r.document.querySelector("base"),o="";if(a&&a.getAttribute("href")){let l=r.location.href,c=l.indexOf("#");o=c===-1?l:l.slice(0,c)}return o+"#"+(typeof s=="string"?s:wh(s))}function i(r,s){An(r.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(s)})`)}return s5(e,n,i,t)}function Xe(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function An(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function r5(){return Math.random().toString(36).substring(2,10)}function $S(t,e){return{usr:t.state,key:t.key,idx:e}}function Sv(t,e,n=null,i){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?fo(e):e,state:n,key:e&&e.key||i||r5()}}function wh({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function fo(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substring(i),t=t.substring(0,i)),t&&(e.pathname=t)}return e}function s5(t,e,n,i={}){let{window:r=document.defaultView,v5Compat:s=!1}=i,a=r.history,o="POP",l=null,c=h();c==null&&(c=0,a.replaceState({...a.state,idx:c},""));function h(){return(a.state||{idx:null}).idx}function d(){o="POP";let A=h(),T=A==null?null:A-c;c=A,l&&l({action:o,location:E.location,delta:T})}function f(A,T){o="PUSH";let v=Sv(E.location,A,T);n&&n(v,A),c=h()+1;let _=$S(v,c),C=E.createHref(v);try{a.pushState(_,"",C)}catch(V){if(V instanceof DOMException&&V.name==="DataCloneError")throw V;r.location.assign(C)}s&&l&&l({action:o,location:E.location,delta:1})}function p(A,T){o="REPLACE";let v=Sv(E.location,A,T);n&&n(v,A),c=h();let _=$S(v,c),C=E.createHref(v);a.replaceState(_,"",C),s&&l&&l({action:o,location:E.location,delta:0})}function w(A){return a5(A)}let E={get action(){return o},get location(){return t(r,a)},listen(A){if(l)throw new Error("A history only accepts one active listener");return r.addEventListener(GS,d),l=A,()=>{r.removeEventListener(GS,d),l=null}},createHref(A){return e(r,A)},createURL:w,encodeLocation(A){let T=w(A);return{pathname:T.pathname,search:T.search,hash:T.hash}},push:f,replace:p,go(A){return a.go(A)}};return E}function a5(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Xe(n,"No window.location.(origin|href) available to create URL");let i=typeof t=="string"?t:wh(t);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=n+i),new URL(i,n)}function KD(t,e,n="/"){return o5(t,e,n,!1)}function o5(t,e,n,i){let r=typeof e=="string"?fo(e):e,s=Ir(r.pathname||"/",n);if(s==null)return null;let a=QD(t);l5(a);let o=null;for(let l=0;o==null&&l<a.length;++l){let c=v5(s);o=y5(a[l],c,i)}return o}function QD(t,e=[],n=[],i="",r=!1){let s=(a,o,l=r,c)=>{let h={relativePath:c===void 0?a.path||"":c,caseSensitive:a.caseSensitive===!0,childrenIndex:o,route:a};if(h.relativePath.startsWith("/")){if(!h.relativePath.startsWith(i)&&l)return;Xe(h.relativePath.startsWith(i),`Absolute route path "${h.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),h.relativePath=h.relativePath.slice(i.length)}let d=gr([i,h.relativePath]),f=n.concat(h);a.children&&a.children.length>0&&(Xe(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${d}".`),QD(a.children,e,f,d,l)),!(a.path==null&&!a.index)&&e.push({path:d,score:p5(d,a.index),routesMeta:f})};return t.forEach((a,o)=>{var l;if(a.path===""||!((l=a.path)!=null&&l.includes("?")))s(a,o);else for(let c of WD(a.path))s(a,o,!0,c)}),e}function WD(t){let e=t.split("/");if(e.length===0)return[];let[n,...i]=e,r=n.endsWith("?"),s=n.replace(/\?$/,"");if(i.length===0)return r?[s,""]:[s];let a=WD(i.join("/")),o=[];return o.push(...a.map(l=>l===""?s:[s,l].join("/"))),r&&o.push(...a),o.map(l=>t.startsWith("/")&&l===""?"/":l)}function l5(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:g5(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}var c5=/^:[\w-]+$/,u5=3,h5=2,d5=1,f5=10,m5=-2,KS=t=>t==="*";function p5(t,e){let n=t.split("/"),i=n.length;return n.some(KS)&&(i+=m5),e&&(i+=h5),n.filter(r=>!KS(r)).reduce((r,s)=>r+(c5.test(s)?u5:s===""?d5:f5),i)}function g5(t,e){return t.length===e.length&&t.slice(0,-1).every((i,r)=>i===e[r])?t[t.length-1]-e[e.length-1]:0}function y5(t,e,n=!1){let{routesMeta:i}=t,r={},s="/",a=[];for(let o=0;o<i.length;++o){let l=i[o],c=o===i.length-1,h=s==="/"?e:e.slice(s.length)||"/",d=Bm({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},h),f=l.route;if(!d&&c&&n&&!i[i.length-1].route.index&&(d=Bm({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},h)),!d)return null;Object.assign(r,d.params),a.push({params:r,pathname:gr([s,d.pathname]),pathnameBase:A5(gr([s,d.pathnameBase])),route:f}),d.pathnameBase!=="/"&&(s=gr([s,d.pathnameBase]))}return a}function Bm(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=_5(t.path,t.caseSensitive,t.end),r=e.match(n);if(!r)return null;let s=r[0],a=s.replace(/(.)\/+$/,"$1"),o=r.slice(1);return{params:i.reduce((c,{paramName:h,isOptional:d},f)=>{if(h==="*"){let w=o[f]||"";a=s.slice(0,s.length-w.length).replace(/(.)\/+$/,"$1")}const p=o[f];return d&&!p?c[h]=void 0:c[h]=(p||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:a,pattern:t}}function _5(t,e=!1,n=!0){An(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let i=[],r="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,o,l)=>(i.push({paramName:o,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(i.push({paramName:"*"}),r+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":t!==""&&t!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),i]}function v5(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return An(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Ir(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&i!=="/"?null:t.slice(n)||"/"}var T5=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,w5=t=>T5.test(t);function b5(t,e="/"){let{pathname:n,search:i="",hash:r=""}=typeof t=="string"?fo(t):t,s;if(n)if(w5(n))s=n;else{if(n.includes("//")){let a=n;n=n.replace(/\/\/+/g,"/"),An(!1,`Pathnames cannot have embedded double slashes - normalizing ${a} -> ${n}`)}n.startsWith("/")?s=QS(n.substring(1),"/"):s=QS(n,e)}else s=e;return{pathname:s,search:S5(i),hash:I5(r)}}function QS(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function Gy(t,e,n,i){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function E5(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function MT(t){let e=E5(t);return e.map((n,i)=>i===e.length-1?n.pathname:n.pathnameBase)}function LT(t,e,n,i=!1){let r;typeof t=="string"?r=fo(t):(r={...t},Xe(!r.pathname||!r.pathname.includes("?"),Gy("?","pathname","search",r)),Xe(!r.pathname||!r.pathname.includes("#"),Gy("#","pathname","hash",r)),Xe(!r.search||!r.search.includes("#"),Gy("#","search","hash",r)));let s=t===""||r.pathname==="",a=s?"/":r.pathname,o;if(a==null)o=n;else{let d=e.length-1;if(!i&&a.startsWith("..")){let f=a.split("/");for(;f[0]==="..";)f.shift(),d-=1;r.pathname=f.join("/")}o=d>=0?e[d]:"/"}let l=b5(r,o),c=a&&a!=="/"&&a.endsWith("/"),h=(s||a===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||h)&&(l.pathname+="/"),l}var gr=t=>t.join("/").replace(/\/\/+/g,"/"),A5=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),S5=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,I5=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function R5(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var YD=["POST","PUT","PATCH","DELETE"];new Set(YD);var x5=["GET",...YD];new Set(x5);var hc=x.createContext(null);hc.displayName="DataRouter";var Bp=x.createContext(null);Bp.displayName="DataRouterState";x.createContext(!1);var XD=x.createContext({isTransitioning:!1});XD.displayName="ViewTransition";var C5=x.createContext(new Map);C5.displayName="Fetchers";var P5=x.createContext(null);P5.displayName="Await";var Ai=x.createContext(null);Ai.displayName="Navigation";var cd=x.createContext(null);cd.displayName="Location";var Si=x.createContext({outlet:null,matches:[],isDataRoute:!1});Si.displayName="Route";var UT=x.createContext(null);UT.displayName="RouteError";function D5(t,{relative:e}={}){Xe(dc(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:i}=x.useContext(Ai),{hash:r,pathname:s,search:a}=ud(t,{relative:e}),o=s;return n!=="/"&&(o=s==="/"?n:gr([n,s])),i.createHref({pathname:o,search:a,hash:r})}function dc(){return x.useContext(cd)!=null}function fi(){return Xe(dc(),"useLocation() may be used only in the context of a <Router> component."),x.useContext(cd).location}var JD="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function ZD(t){x.useContext(Ai).static||x.useLayoutEffect(t)}function fc(){let{isDataRoute:t}=x.useContext(Si);return t?$5():N5()}function N5(){Xe(dc(),"useNavigate() may be used only in the context of a <Router> component.");let t=x.useContext(hc),{basename:e,navigator:n}=x.useContext(Ai),{matches:i}=x.useContext(Si),{pathname:r}=fi(),s=JSON.stringify(MT(i)),a=x.useRef(!1);return ZD(()=>{a.current=!0}),x.useCallback((l,c={})=>{if(An(a.current,JD),!a.current)return;if(typeof l=="number"){n.go(l);return}let h=LT(l,JSON.parse(s),r,c.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:gr([e,h.pathname])),(c.replace?n.replace:n.push)(h,c.state,c)},[e,n,s,r,t])}var k5=x.createContext(null);function V5(t){let e=x.useContext(Si).outlet;return x.useMemo(()=>e&&x.createElement(k5.Provider,{value:t},e),[e,t])}function ud(t,{relative:e}={}){let{matches:n}=x.useContext(Si),{pathname:i}=fi(),r=JSON.stringify(MT(n));return x.useMemo(()=>LT(t,JSON.parse(r),i,e==="path"),[t,r,i,e])}function O5(t,e){return e2(t,e)}function e2(t,e,n,i,r){var v;Xe(dc(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=x.useContext(Ai),{matches:a}=x.useContext(Si),o=a[a.length-1],l=o?o.params:{},c=o?o.pathname:"/",h=o?o.pathnameBase:"/",d=o&&o.route;{let _=d&&d.path||"";t2(c,!d||_.endsWith("*")||_.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${_}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${_}"> to <Route path="${_==="/"?"*":`${_}/*`}">.`)}let f=fi(),p;if(e){let _=typeof e=="string"?fo(e):e;Xe(h==="/"||((v=_.pathname)==null?void 0:v.startsWith(h)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${h}" but pathname "${_.pathname}" was given in the \`location\` prop.`),p=_}else p=f;let w=p.pathname||"/",E=w;if(h!=="/"){let _=h.replace(/^\//,"").split("/");E="/"+w.replace(/^\//,"").split("/").slice(_.length).join("/")}let A=KD(t,{pathname:E});An(d||A!=null,`No routes matched location "${p.pathname}${p.search}${p.hash}" `),An(A==null||A[A.length-1].route.element!==void 0||A[A.length-1].route.Component!==void 0||A[A.length-1].route.lazy!==void 0,`Matched leaf route at location "${p.pathname}${p.search}${p.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let T=j5(A&&A.map(_=>Object.assign({},_,{params:Object.assign({},l,_.params),pathname:gr([h,s.encodeLocation?s.encodeLocation(_.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?h:gr([h,s.encodeLocation?s.encodeLocation(_.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:_.pathnameBase])})),a,n,i,r);return e&&T?x.createElement(cd.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...p},navigationType:"POP"}},T):T}function M5(){let t=G5(),e=R5(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:i},s={padding:"2px 4px",backgroundColor:i},a=null;return console.error("Error handled by React Router default ErrorBoundary:",t),a=x.createElement(x.Fragment,null,x.createElement("p",null," Hey developer "),x.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",x.createElement("code",{style:s},"ErrorBoundary")," or"," ",x.createElement("code",{style:s},"errorElement")," prop on your route.")),x.createElement(x.Fragment,null,x.createElement("h2",null,"Unexpected Application Error!"),x.createElement("h3",{style:{fontStyle:"italic"}},e),n?x.createElement("pre",{style:r},n):null,a)}var L5=x.createElement(M5,null),U5=class extends x.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.onError?this.props.onError(t,e):console.error("React Router caught the following error during render",t)}render(){return this.state.error!==void 0?x.createElement(Si.Provider,{value:this.props.routeContext},x.createElement(UT.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function z5({routeContext:t,match:e,children:n}){let i=x.useContext(hc);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),x.createElement(Si.Provider,{value:t},n)}function j5(t,e=[],n=null,i=null,r=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let s=t,a=n==null?void 0:n.errors;if(a!=null){let h=s.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);Xe(h>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),s=s.slice(0,Math.min(s.length,h+1))}let o=!1,l=-1;if(n)for(let h=0;h<s.length;h++){let d=s[h];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(l=h),d.route.id){let{loaderData:f,errors:p}=n,w=d.route.loader&&!f.hasOwnProperty(d.route.id)&&(!p||p[d.route.id]===void 0);if(d.route.lazy||w){o=!0,l>=0?s=s.slice(0,l+1):s=[s[0]];break}}}let c=n&&i?(h,d)=>{var f,p;i(h,{location:n.location,params:((p=(f=n.matches)==null?void 0:f[0])==null?void 0:p.params)??{},errorInfo:d})}:void 0;return s.reduceRight((h,d,f)=>{let p,w=!1,E=null,A=null;n&&(p=a&&d.route.id?a[d.route.id]:void 0,E=d.route.errorElement||L5,o&&(l<0&&f===0?(t2("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),w=!0,A=null):l===f&&(w=!0,A=d.route.hydrateFallbackElement||null)));let T=e.concat(s.slice(0,f+1)),v=()=>{let _;return p?_=E:w?_=A:d.route.Component?_=x.createElement(d.route.Component,null):d.route.element?_=d.route.element:_=h,x.createElement(z5,{match:d,routeContext:{outlet:h,matches:T,isDataRoute:n!=null},children:_})};return n&&(d.route.ErrorBoundary||d.route.errorElement||f===0)?x.createElement(U5,{location:n.location,revalidation:n.revalidation,component:E,error:p,children:v(),routeContext:{outlet:null,matches:T,isDataRoute:!0},onError:c}):v()},null)}function zT(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function B5(t){let e=x.useContext(hc);return Xe(e,zT(t)),e}function F5(t){let e=x.useContext(Bp);return Xe(e,zT(t)),e}function q5(t){let e=x.useContext(Si);return Xe(e,zT(t)),e}function jT(t){let e=q5(t),n=e.matches[e.matches.length-1];return Xe(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function H5(){return jT("useRouteId")}function G5(){var i;let t=x.useContext(UT),e=F5("useRouteError"),n=jT("useRouteError");return t!==void 0?t:(i=e.errors)==null?void 0:i[n]}function $5(){let{router:t}=B5("useNavigate"),e=jT("useNavigate"),n=x.useRef(!1);return ZD(()=>{n.current=!0}),x.useCallback(async(r,s={})=>{An(n.current,JD),n.current&&(typeof r=="number"?t.navigate(r):await t.navigate(r,{fromRouteId:e,...s}))},[t,e])}var WS={};function t2(t,e,n){!e&&!WS[t]&&(WS[t]=!0,An(!1,n))}x.memo(K5);function K5({routes:t,future:e,state:n,unstable_onError:i}){return e2(t,void 0,n,i,e)}function Q5({to:t,replace:e,state:n,relative:i}){Xe(dc(),"<Navigate> may be used only in the context of a <Router> component.");let{static:r}=x.useContext(Ai);An(!r,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:s}=x.useContext(Si),{pathname:a}=fi(),o=fc(),l=LT(t,MT(s),a,i==="path"),c=JSON.stringify(l);return x.useEffect(()=>{o(JSON.parse(c),{replace:e,state:n,relative:i})},[o,c,i,e,n]),null}function YS(t){return V5(t.context)}function _e(t){Xe(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function W5({basename:t="/",children:e=null,location:n,navigationType:i="POP",navigator:r,static:s=!1}){Xe(!dc(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let a=t.replace(/^\/*/,"/"),o=x.useMemo(()=>({basename:a,navigator:r,static:s,future:{}}),[a,r,s]);typeof n=="string"&&(n=fo(n));let{pathname:l="/",search:c="",hash:h="",state:d=null,key:f="default"}=n,p=x.useMemo(()=>{let w=Ir(l,a);return w==null?null:{location:{pathname:w,search:c,hash:h,state:d,key:f},navigationType:i}},[a,l,c,h,d,f,i]);return An(p!=null,`<Router basename="${a}"> is not able to match the URL "${l}${c}${h}" because it does not start with the basename, so the <Router> won't render anything.`),p==null?null:x.createElement(Ai.Provider,{value:o},x.createElement(cd.Provider,{children:e,value:p}))}function Y5({children:t,location:e}){return O5(Iv(t),e)}function Iv(t,e=[]){let n=[];return x.Children.forEach(t,(i,r)=>{if(!x.isValidElement(i))return;let s=[...e,r];if(i.type===x.Fragment){n.push.apply(n,Iv(i.props.children,s));return}Xe(i.type===_e,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Xe(!i.props.index||!i.props.children,"An index route cannot have child routes.");let a={id:i.props.id||s.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,middleware:i.props.middleware,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(a.children=Iv(i.props.children,s)),n.push(a)}),n}var Gf="get",$f="application/x-www-form-urlencoded";function Fp(t){return t!=null&&typeof t.tagName=="string"}function X5(t){return Fp(t)&&t.tagName.toLowerCase()==="button"}function J5(t){return Fp(t)&&t.tagName.toLowerCase()==="form"}function Z5(t){return Fp(t)&&t.tagName.toLowerCase()==="input"}function e3(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function t3(t,e){return t.button===0&&(!e||e==="_self")&&!e3(t)}function Rv(t=""){return new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let i=t[n];return e.concat(Array.isArray(i)?i.map(r=>[n,r]):[[n,i]])},[]))}function n3(t,e){let n=Rv(t);return e&&e.forEach((i,r)=>{n.has(r)||e.getAll(r).forEach(s=>{n.append(r,s)})}),n}var df=null;function i3(){if(df===null)try{new FormData(document.createElement("form"),0),df=!1}catch{df=!0}return df}var r3=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function $y(t){return t!=null&&!r3.has(t)?(An(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${$f}"`),null):t}function s3(t,e){let n,i,r,s,a;if(J5(t)){let o=t.getAttribute("action");i=o?Ir(o,e):null,n=t.getAttribute("method")||Gf,r=$y(t.getAttribute("enctype"))||$f,s=new FormData(t)}else if(X5(t)||Z5(t)&&(t.type==="submit"||t.type==="image")){let o=t.form;if(o==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=t.getAttribute("formaction")||o.getAttribute("action");if(i=l?Ir(l,e):null,n=t.getAttribute("formmethod")||o.getAttribute("method")||Gf,r=$y(t.getAttribute("formenctype"))||$y(o.getAttribute("enctype"))||$f,s=new FormData(o,t),!i3()){let{name:c,type:h,value:d}=t;if(h==="image"){let f=c?`${c}.`:"";s.append(`${f}x`,"0"),s.append(`${f}y`,"0")}else c&&s.append(c,d)}}else{if(Fp(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Gf,i=null,r=$f,a=t}return s&&r==="text/plain"&&(a=s,s=void 0),{action:i,method:n.toLowerCase(),encType:r,formData:s,body:a}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function BT(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function a3(t,e,n){let i=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return i.pathname==="/"?i.pathname=`_root.${n}`:e&&Ir(i.pathname,e)==="/"?i.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${n}`,i}async function o3(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function l3(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function c3(t,e,n){let i=await Promise.all(t.map(async r=>{let s=e.routes[r.route.id];if(s){let a=await o3(s,n);return a.links?a.links():[]}return[]}));return f3(i.flat(1).filter(l3).filter(r=>r.rel==="stylesheet"||r.rel==="preload").map(r=>r.rel==="stylesheet"?{...r,rel:"prefetch",as:"style"}:{...r,rel:"prefetch"}))}function XS(t,e,n,i,r,s){let a=(l,c)=>n[c]?l.route.id!==n[c].route.id:!0,o=(l,c)=>{var h;return n[c].pathname!==l.pathname||((h=n[c].route.path)==null?void 0:h.endsWith("*"))&&n[c].params["*"]!==l.params["*"]};return s==="assets"?e.filter((l,c)=>a(l,c)||o(l,c)):s==="data"?e.filter((l,c)=>{var d;let h=i.routes[l.route.id];if(!h||!h.hasLoader)return!1;if(a(l,c)||o(l,c))return!0;if(l.route.shouldRevalidate){let f=l.route.shouldRevalidate({currentUrl:new URL(r.pathname+r.search+r.hash,window.origin),currentParams:((d=n[0])==null?void 0:d.params)||{},nextUrl:new URL(t,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof f=="boolean")return f}return!0}):[]}function u3(t,e,{includeHydrateFallback:n}={}){return h3(t.map(i=>{let r=e.routes[i.route.id];if(!r)return[];let s=[r.module];return r.clientActionModule&&(s=s.concat(r.clientActionModule)),r.clientLoaderModule&&(s=s.concat(r.clientLoaderModule)),n&&r.hydrateFallbackModule&&(s=s.concat(r.hydrateFallbackModule)),r.imports&&(s=s.concat(r.imports)),s}).flat(1))}function h3(t){return[...new Set(t)]}function d3(t){let e={},n=Object.keys(t).sort();for(let i of n)e[i]=t[i];return e}function f3(t,e){let n=new Set;return new Set(e),t.reduce((i,r)=>{let s=JSON.stringify(d3(r));return n.has(s)||(n.add(s),i.push({key:s,link:r})),i},[])}function n2(){let t=x.useContext(hc);return BT(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function m3(){let t=x.useContext(Bp);return BT(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var FT=x.createContext(void 0);FT.displayName="FrameworkContext";function i2(){let t=x.useContext(FT);return BT(t,"You must render this element inside a <HydratedRouter> element"),t}function p3(t,e){let n=x.useContext(FT),[i,r]=x.useState(!1),[s,a]=x.useState(!1),{onFocus:o,onBlur:l,onMouseEnter:c,onMouseLeave:h,onTouchStart:d}=e,f=x.useRef(null);x.useEffect(()=>{if(t==="render"&&a(!0),t==="viewport"){let E=T=>{T.forEach(v=>{a(v.isIntersecting)})},A=new IntersectionObserver(E,{threshold:.5});return f.current&&A.observe(f.current),()=>{A.disconnect()}}},[t]),x.useEffect(()=>{if(i){let E=setTimeout(()=>{a(!0)},100);return()=>{clearTimeout(E)}}},[i]);let p=()=>{r(!0)},w=()=>{r(!1),a(!1)};return n?t!=="intent"?[s,f,{}]:[s,f,{onFocus:Zc(o,p),onBlur:Zc(l,w),onMouseEnter:Zc(c,p),onMouseLeave:Zc(h,w),onTouchStart:Zc(d,p)}]:[!1,f,{}]}function Zc(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function g3({page:t,...e}){let{router:n}=n2(),i=x.useMemo(()=>KD(n.routes,t,n.basename),[n.routes,t,n.basename]);return i?x.createElement(_3,{page:t,matches:i,...e}):null}function y3(t){let{manifest:e,routeModules:n}=i2(),[i,r]=x.useState([]);return x.useEffect(()=>{let s=!1;return c3(t,e,n).then(a=>{s||r(a)}),()=>{s=!0}},[t,e,n]),i}function _3({page:t,matches:e,...n}){let i=fi(),{manifest:r,routeModules:s}=i2(),{basename:a}=n2(),{loaderData:o,matches:l}=m3(),c=x.useMemo(()=>XS(t,e,l,r,i,"data"),[t,e,l,r,i]),h=x.useMemo(()=>XS(t,e,l,r,i,"assets"),[t,e,l,r,i]),d=x.useMemo(()=>{if(t===i.pathname+i.search+i.hash)return[];let w=new Set,E=!1;if(e.forEach(T=>{var _;let v=r.routes[T.route.id];!v||!v.hasLoader||(!c.some(C=>C.route.id===T.route.id)&&T.route.id in o&&((_=s[T.route.id])!=null&&_.shouldRevalidate)||v.hasClientLoader?E=!0:w.add(T.route.id))}),w.size===0)return[];let A=a3(t,a,"data");return E&&w.size>0&&A.searchParams.set("_routes",e.filter(T=>w.has(T.route.id)).map(T=>T.route.id).join(",")),[A.pathname+A.search]},[a,o,i,r,c,e,t,s]),f=x.useMemo(()=>u3(h,r),[h,r]),p=y3(h);return x.createElement(x.Fragment,null,d.map(w=>x.createElement("link",{key:w,rel:"prefetch",as:"fetch",href:w,...n})),f.map(w=>x.createElement("link",{key:w,rel:"modulepreload",href:w,...n})),p.map(({key:w,link:E})=>x.createElement("link",{key:w,nonce:n.nonce,...E})))}function v3(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var r2=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{r2&&(window.__reactRouterVersion="7.9.6")}catch{}function T3({basename:t,children:e,window:n}){let i=x.useRef();i.current==null&&(i.current=i5({window:n,v5Compat:!0}));let r=i.current,[s,a]=x.useState({action:r.action,location:r.location}),o=x.useCallback(l=>{x.startTransition(()=>a(l))},[a]);return x.useLayoutEffect(()=>r.listen(o),[r,o]),x.createElement(W5,{basename:t,children:e,location:s.location,navigationType:s.action,navigator:r})}var s2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Xn=x.forwardRef(function({onClick:e,discover:n="render",prefetch:i="none",relative:r,reloadDocument:s,replace:a,state:o,target:l,to:c,preventScrollReset:h,viewTransition:d,...f},p){let{basename:w}=x.useContext(Ai),E=typeof c=="string"&&s2.test(c),A,T=!1;if(typeof c=="string"&&E&&(A=c,r2))try{let R=new URL(window.location.href),D=c.startsWith("//")?new URL(R.protocol+c):new URL(c),N=Ir(D.pathname,w);D.origin===R.origin&&N!=null?c=N+D.search+D.hash:T=!0}catch{An(!1,`<Link to="${c}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let v=D5(c,{relative:r}),[_,C,V]=p3(i,f),O=E3(c,{replace:a,state:o,target:l,preventScrollReset:h,relative:r,viewTransition:d});function S(R){e&&e(R),R.defaultPrevented||O(R)}let b=x.createElement("a",{...f,...V,href:A||v,onClick:T||s?e:S,ref:v3(p,C),target:l,"data-discover":!E&&n==="render"?"true":void 0});return _&&!E?x.createElement(x.Fragment,null,b,x.createElement(g3,{page:v})):b});Xn.displayName="Link";var pi=x.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:i="",end:r=!1,style:s,to:a,viewTransition:o,children:l,...c},h){let d=ud(a,{relative:c.relative}),f=fi(),p=x.useContext(Bp),{navigator:w,basename:E}=x.useContext(Ai),A=p!=null&&C3(d)&&o===!0,T=w.encodeLocation?w.encodeLocation(d).pathname:d.pathname,v=f.pathname,_=p&&p.navigation&&p.navigation.location?p.navigation.location.pathname:null;n||(v=v.toLowerCase(),_=_?_.toLowerCase():null,T=T.toLowerCase()),_&&E&&(_=Ir(_,E)||_);const C=T!=="/"&&T.endsWith("/")?T.length-1:T.length;let V=v===T||!r&&v.startsWith(T)&&v.charAt(C)==="/",O=_!=null&&(_===T||!r&&_.startsWith(T)&&_.charAt(T.length)==="/"),S={isActive:V,isPending:O,isTransitioning:A},b=V?e:void 0,R;typeof i=="function"?R=i(S):R=[i,V?"active":null,O?"pending":null,A?"transitioning":null].filter(Boolean).join(" ");let D=typeof s=="function"?s(S):s;return x.createElement(Xn,{...c,"aria-current":b,className:R,ref:h,style:D,to:a,viewTransition:o},typeof l=="function"?l(S):l)});pi.displayName="NavLink";var w3=x.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:i,replace:r,state:s,method:a=Gf,action:o,onSubmit:l,relative:c,preventScrollReset:h,viewTransition:d,...f},p)=>{let w=R3(),E=x3(o,{relative:c}),A=a.toLowerCase()==="get"?"get":"post",T=typeof o=="string"&&s2.test(o),v=_=>{if(l&&l(_),_.defaultPrevented)return;_.preventDefault();let C=_.nativeEvent.submitter,V=(C==null?void 0:C.getAttribute("formmethod"))||a;w(C||_.currentTarget,{fetcherKey:e,method:V,navigate:n,replace:r,state:s,relative:c,preventScrollReset:h,viewTransition:d})};return x.createElement("form",{ref:p,method:A,action:E,onSubmit:i?l:v,...f,"data-discover":!T&&t==="render"?"true":void 0})});w3.displayName="Form";function b3(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function a2(t){let e=x.useContext(hc);return Xe(e,b3(t)),e}function E3(t,{target:e,replace:n,state:i,preventScrollReset:r,relative:s,viewTransition:a}={}){let o=fc(),l=fi(),c=ud(t,{relative:s});return x.useCallback(h=>{if(t3(h,e)){h.preventDefault();let d=n!==void 0?n:wh(l)===wh(c);o(t,{replace:d,state:i,preventScrollReset:r,relative:s,viewTransition:a})}},[l,o,c,n,i,e,t,r,s,a])}function A3(t){An(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=x.useRef(Rv(t)),n=x.useRef(!1),i=fi(),r=x.useMemo(()=>n3(i.search,n.current?null:e.current),[i.search]),s=fc(),a=x.useCallback((o,l)=>{const c=Rv(typeof o=="function"?o(new URLSearchParams(r)):o);n.current=!0,s("?"+c,l)},[s,r]);return[r,a]}var S3=0,I3=()=>`__${String(++S3)}__`;function R3(){let{router:t}=a2("useSubmit"),{basename:e}=x.useContext(Ai),n=H5();return x.useCallback(async(i,r={})=>{let{action:s,method:a,encType:o,formData:l,body:c}=s3(i,e);if(r.navigate===!1){let h=r.fetcherKey||I3();await t.fetch(h,n,r.action||s,{preventScrollReset:r.preventScrollReset,formData:l,body:c,formMethod:r.method||a,formEncType:r.encType||o,flushSync:r.flushSync})}else await t.navigate(r.action||s,{preventScrollReset:r.preventScrollReset,formData:l,body:c,formMethod:r.method||a,formEncType:r.encType||o,replace:r.replace,state:r.state,fromRouteId:n,flushSync:r.flushSync,viewTransition:r.viewTransition})},[t,e,n])}function x3(t,{relative:e}={}){let{basename:n}=x.useContext(Ai),i=x.useContext(Si);Xe(i,"useFormAction must be used inside a RouteContext");let[r]=i.matches.slice(-1),s={...ud(t||".",{relative:e})},a=fi();if(t==null){s.search=a.search;let o=new URLSearchParams(s.search),l=o.getAll("index");if(l.some(h=>h==="")){o.delete("index"),l.filter(d=>d).forEach(d=>o.append("index",d));let h=o.toString();s.search=h?`?${h}`:""}}return(!t||t===".")&&r.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(s.pathname=s.pathname==="/"?n:gr([n,s.pathname])),wh(s)}function C3(t,{relative:e}={}){let n=x.useContext(XD);Xe(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=a2("useViewTransitionState"),r=ud(t,{relative:e});if(!n.isTransitioning)return!1;let s=Ir(n.currentLocation.pathname,i)||n.currentLocation.pathname,a=Ir(n.nextLocation.pathname,i)||n.nextLocation.pathname;return Bm(r.pathname,a)!=null||Bm(r.pathname,s)!=null}/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P3=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),D3=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,i)=>i?i.toUpperCase():n.toLowerCase()),JS=t=>{const e=D3(t);return e.charAt(0).toUpperCase()+e.slice(1)},o2=(...t)=>t.filter((e,n,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===n).join(" ").trim(),N3=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var k3={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V3=x.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:i,className:r="",children:s,iconNode:a,...o},l)=>x.createElement("svg",{ref:l,...k3,width:e,height:e,stroke:t,strokeWidth:i?Number(n)*24/Number(e):n,className:o2("lucide",r),...!s&&!N3(o)&&{"aria-hidden":"true"},...o},[...a.map(([c,h])=>x.createElement(c,h)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ne=(t,e)=>{const n=x.forwardRef(({className:i,...r},s)=>x.createElement(V3,{ref:s,iconNode:e,className:o2(`lucide-${P3(JS(t))}`,`lucide-${t}`,i),...r}));return n.displayName=JS(t),n};/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O3=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],M3=Ne("arrow-right",O3);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L3=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],ZS=Ne("check",L3);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U3=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],z3=Ne("chevron-down",U3);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j3=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],l2=Ne("circle-alert",j3);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B3=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],F3=Ne("circle-check-big",B3);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q3=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],H3=Ne("circle-x",q3);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G3=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],c2=Ne("eye-off",G3);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $3=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],u2=Ne("eye",$3);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K3=[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]],Q3=Ne("facebook",K3);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W3=[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]],Y3=Ne("gift",W3);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X3=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],h2=Ne("info",X3);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J3=[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]],Z3=Ne("instagram",J3);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ez=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],bh=Ne("loader-circle",ez);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tz=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],xv=Ne("lock",tz);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nz=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],eI=Ne("log-out",nz);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iz=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],qT=Ne("mail",iz);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rz=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],sz=Ne("map-pin",rz);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const az=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],oz=Ne("menu",az);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lz=[["path",{d:"M5 12h14",key:"1ays0h"}]],tI=Ne("minus",lz);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cz=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],HT=Ne("phone",cz);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uz=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],hz=Ne("plus",uz);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dz=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]],fz=Ne("shield-alert",dz);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mz=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],ff=Ne("shield",mz);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pz=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],gz=Ne("shopping-cart",pz);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yz=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],_z=Ne("trash-2",yz);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vz=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Tz=Ne("triangle-alert",vz);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wz=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Cv=Ne("user",wz);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bz=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],qp=Ne("x",bz),Ez=()=>{};var nI={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d2=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},Az=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=t[n++];e[i++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){const s=t[n++],a=t[n++],o=t[n++],l=((r&7)<<18|(s&63)<<12|(a&63)<<6|o&63)-65536;e[i++]=String.fromCharCode(55296+(l>>10)),e[i++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],a=t[n++];e[i++]=String.fromCharCode((r&15)<<12|(s&63)<<6|a&63)}}return e.join("")},f2={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){const s=t[r],a=r+1<t.length,o=a?t[r+1]:0,l=r+2<t.length,c=l?t[r+2]:0,h=s>>2,d=(s&3)<<4|o>>4;let f=(o&15)<<2|c>>6,p=c&63;l||(p=64,a||(f=64)),i.push(n[h],n[d],n[f],n[p])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(d2(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Az(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){const s=n[t.charAt(r++)],o=r<t.length?n[t.charAt(r)]:0;++r;const c=r<t.length?n[t.charAt(r)]:64;++r;const d=r<t.length?n[t.charAt(r)]:64;if(++r,s==null||o==null||c==null||d==null)throw new Sz;const f=s<<2|o>>4;if(i.push(f),c!==64){const p=o<<4&240|c>>2;if(i.push(p),d!==64){const w=c<<6&192|d;i.push(w)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Sz extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Iz=function(t){const e=d2(t);return f2.encodeByteArray(e,!0)},Fm=function(t){return Iz(t).replace(/\./g,"")},GT=function(t){try{return f2.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function qm(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!Rz(n)||(t[n]=qm(t[n],e[n]));return t}function Rz(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $T(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xz=()=>$T().__FIREBASE_DEFAULTS__,Cz=()=>{if(typeof process>"u"||typeof nI>"u")return;const t=nI.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Pz=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&GT(t[1]);return e&&JSON.parse(e)},KT=()=>{try{return Ez()||xz()||Cz()||Pz()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},QT=()=>{var t;return(t=KT())==null?void 0:t.config},Dz=t=>{var e;return(e=KT())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nz{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xs(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function WT(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m2(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",r=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Fm(JSON.stringify(n)),Fm(JSON.stringify(a)),""].join(".")}const Bu={};function kz(){const t={prod:[],emulator:[]};for(const e of Object.keys(Bu))Bu[e]?t.emulator.push(e):t.prod.push(e);return t}function Vz(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let iI=!1;function YT(t,e){if(typeof window>"u"||typeof document>"u"||!Xs(window.location.host)||Bu[t]===e||Bu[t]||iI)return;Bu[t]=e;function n(f){return`__firebase__banner__${f}`}const i="__firebase__banner",s=kz().prod.length>0;function a(){const f=document.getElementById(i);f&&f.remove()}function o(f){f.style.display="flex",f.style.background="#7faaf0",f.style.position="fixed",f.style.bottom="5px",f.style.left="5px",f.style.padding=".5em",f.style.borderRadius="5px",f.style.alignItems="center"}function l(f,p){f.setAttribute("width","24"),f.setAttribute("id",p),f.setAttribute("height","24"),f.setAttribute("viewBox","0 0 24 24"),f.setAttribute("fill","none"),f.style.marginLeft="-6px"}function c(){const f=document.createElement("span");return f.style.cursor="pointer",f.style.marginLeft="16px",f.style.fontSize="24px",f.innerHTML=" &times;",f.onclick=()=>{iI=!0,a()},f}function h(f,p){f.setAttribute("id",p),f.innerText="Learn more",f.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",f.setAttribute("target","__blank"),f.style.paddingLeft="5px",f.style.textDecoration="underline"}function d(){const f=Vz(i),p=n("text"),w=document.getElementById(p)||document.createElement("span"),E=n("learnmore"),A=document.getElementById(E)||document.createElement("a"),T=n("preprendIcon"),v=document.getElementById(T)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(f.created){const _=f.element;o(_),h(A,E);const C=c();l(v,T),_.append(v,w,A,C),document.body.appendChild(_)}s?(w.innerText="Preview backend disconnected.",v.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(v.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,w.innerText="Preview backend running in this workspace."),w.setAttribute("id",p)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",d):d()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ze(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Oz(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ze())}function Hp(){var e;const t=(e=KT())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Mz(){return typeof window<"u"||p2()}function p2(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function Lz(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function g2(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function XT(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function y2(){const t=Ze();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function _2(){return!Hp()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function v2(){return!Hp()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function Eh(){try{return typeof indexedDB=="object"}catch{return!1}}function Uz(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var s;e(((s=r.error)==null?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zz="FirebaseError";class Zt extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=zz,Object.setPrototypeOf(this,Zt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,mo.prototype.create)}}class mo{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},r=`${this.service}/${e}`,s=this.errors[e],a=s?jz(s,i):"Error",o=`${this.serviceName}: ${a} (${r}).`;return new Zt(r,o,i)}}function jz(t,e){return t.replace(Bz,(n,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const Bz=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rI(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Fz(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Os(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const s=t[r],a=e[r];if(sI(s)&&sI(a)){if(!Os(s,a))return!1}else if(s!==a)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function sI(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mc(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function el(t){const e={};return t.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[r,s]=i.split("=");e[decodeURIComponent(r)]=decodeURIComponent(s)}}),e}function gu(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function T2(t,e){const n=new qz(t,e);return n.subscribe.bind(n)}class qz{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let r;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");Hz(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:i},r.next===void 0&&(r.next=Ky),r.error===void 0&&(r.error=Ky),r.complete===void 0&&(r.complete=Ky);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Hz(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Ky(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J(t){return t&&t._delegate?t._delegate:t}class hi{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _a="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gz{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new Nz;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(r){if(i)return null;throw r}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Kz(e))try{this.getOrInitializeService({instanceIdentifier:_a})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:r});i.resolve(s)}catch{}}}}clearInstance(e=_a){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=_a){return this.instances.has(e)}getOptions(e=_a){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[s,a]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(s);i===o&&a.resolve(r)}return r}onInit(e,n){const i=this.normalizeInstanceIdentifier(n),r=this.onInitCallbacks.get(i)??new Set;r.add(e),this.onInitCallbacks.set(i,r);const s=this.instances.get(i);return s&&e(s,i),()=>{r.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:$z(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=_a){return this.component?this.component.multipleInstances?e:_a:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function $z(t){return t===_a?void 0:t}function Kz(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w2{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Gz(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JT=[];var fe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(fe||(fe={}));const b2={debug:fe.DEBUG,verbose:fe.VERBOSE,info:fe.INFO,warn:fe.WARN,error:fe.ERROR,silent:fe.SILENT},Qz=fe.INFO,Wz={[fe.DEBUG]:"log",[fe.VERBOSE]:"log",[fe.INFO]:"info",[fe.WARN]:"warn",[fe.ERROR]:"error"},Yz=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),r=Wz[e];if(r)console[r](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Gp{constructor(e){this.name=e,this._logLevel=Qz,this._logHandler=Yz,this._userLogHandler=null,JT.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in fe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?b2[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,fe.DEBUG,...e),this._logHandler(this,fe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,fe.VERBOSE,...e),this._logHandler(this,fe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,fe.INFO,...e),this._logHandler(this,fe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,fe.WARN,...e),this._logHandler(this,fe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,fe.ERROR,...e),this._logHandler(this,fe.ERROR,...e)}}function Xz(t){JT.forEach(e=>{e.setLogLevel(t)})}function Jz(t,e){for(const n of JT){let i=null;e&&e.level&&(i=b2[e.level]),t===null?n.userLogHandler=null:n.userLogHandler=(r,s,...a)=>{const o=a.map(l=>{if(l==null)return null;if(typeof l=="string")return l;if(typeof l=="number"||typeof l=="boolean")return l.toString();if(l instanceof Error)return l.message;try{return JSON.stringify(l)}catch{return null}}).filter(l=>l).join(" ");s>=(i??r.logLevel)&&t({level:fe[s].toLowerCase(),message:o,args:a,type:r.name})}}}const Zz=(t,e)=>e.some(n=>t instanceof n);let aI,oI;function e9(){return aI||(aI=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function t9(){return oI||(oI=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const E2=new WeakMap,Pv=new WeakMap,A2=new WeakMap,Qy=new WeakMap,ZT=new WeakMap;function n9(t){const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("success",s),t.removeEventListener("error",a)},s=()=>{n(Is(t.result)),r()},a=()=>{i(t.error),r()};t.addEventListener("success",s),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&E2.set(n,t)}).catch(()=>{}),ZT.set(e,t),e}function i9(t){if(Pv.has(t))return;const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",a),t.removeEventListener("abort",a)},s=()=>{n(),r()},a=()=>{i(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",s),t.addEventListener("error",a),t.addEventListener("abort",a)});Pv.set(t,e)}let Dv={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Pv.get(t);if(e==="objectStoreNames")return t.objectStoreNames||A2.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Is(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function r9(t){Dv=t(Dv)}function s9(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(Wy(this),e,...n);return A2.set(i,e.sort?e.sort():[e]),Is(i)}:t9().includes(t)?function(...e){return t.apply(Wy(this),e),Is(E2.get(this))}:function(...e){return Is(t.apply(Wy(this),e))}}function a9(t){return typeof t=="function"?s9(t):(t instanceof IDBTransaction&&i9(t),Zz(t,e9())?new Proxy(t,Dv):t)}function Is(t){if(t instanceof IDBRequest)return n9(t);if(Qy.has(t))return Qy.get(t);const e=a9(t);return e!==t&&(Qy.set(t,e),ZT.set(e,t)),e}const Wy=t=>ZT.get(t);function o9(t,e,{blocked:n,upgrade:i,blocking:r,terminated:s}={}){const a=indexedDB.open(t,e),o=Is(a);return i&&a.addEventListener("upgradeneeded",l=>{i(Is(a.result),l.oldVersion,l.newVersion,Is(a.transaction),l)}),n&&a.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),o.then(l=>{s&&l.addEventListener("close",()=>s()),r&&l.addEventListener("versionchange",c=>r(c.oldVersion,c.newVersion,c))}).catch(()=>{}),o}const l9=["get","getKey","getAll","getAllKeys","count"],c9=["put","add","delete","clear"],Yy=new Map;function lI(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Yy.get(e))return Yy.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=c9.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||l9.includes(n)))return;const s=async function(a,...o){const l=this.transaction(a,r?"readwrite":"readonly");let c=l.store;return i&&(c=c.index(o.shift())),(await Promise.all([c[n](...o),r&&l.done]))[0]};return Yy.set(e,s),s}r9(t=>({...t,get:(e,n,i)=>lI(e,n)||t.get(e,n,i),has:(e,n)=>!!lI(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u9{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(h9(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function h9(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Hm="@firebase/app",Nv="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rr=new Gp("@firebase/app"),d9="@firebase/app-compat",f9="@firebase/analytics-compat",m9="@firebase/analytics",p9="@firebase/app-check-compat",g9="@firebase/app-check",y9="@firebase/auth",_9="@firebase/auth-compat",v9="@firebase/database",T9="@firebase/data-connect",w9="@firebase/database-compat",b9="@firebase/functions",E9="@firebase/functions-compat",A9="@firebase/installations",S9="@firebase/installations-compat",I9="@firebase/messaging",R9="@firebase/messaging-compat",x9="@firebase/performance",C9="@firebase/performance-compat",P9="@firebase/remote-config",D9="@firebase/remote-config-compat",N9="@firebase/storage",k9="@firebase/storage-compat",V9="@firebase/firestore",O9="@firebase/ai",M9="@firebase/firestore-compat",L9="firebase",U9="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ms="[DEFAULT]",z9={[Hm]:"fire-core",[d9]:"fire-core-compat",[m9]:"fire-analytics",[f9]:"fire-analytics-compat",[g9]:"fire-app-check",[p9]:"fire-app-check-compat",[y9]:"fire-auth",[_9]:"fire-auth-compat",[v9]:"fire-rtdb",[T9]:"fire-data-connect",[w9]:"fire-rtdb-compat",[b9]:"fire-fn",[E9]:"fire-fn-compat",[A9]:"fire-iid",[S9]:"fire-iid-compat",[I9]:"fire-fcm",[R9]:"fire-fcm-compat",[x9]:"fire-perf",[C9]:"fire-perf-compat",[P9]:"fire-rc",[D9]:"fire-rc-compat",[N9]:"fire-gcs",[k9]:"fire-gcs-compat",[V9]:"fire-fst",[M9]:"fire-fst-compat",[O9]:"fire-vertex","fire-js":"fire-js",[L9]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ls=new Map,Dl=new Map,Nl=new Map;function Ah(t,e){try{t.container.addComponent(e)}catch(n){Rr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function S2(t,e){t.container.addOrOverwriteComponent(e)}function xr(t){const e=t.name;if(Nl.has(e))return Rr.debug(`There were multiple attempts to register component ${e}.`),!1;Nl.set(e,t);for(const n of Ls.values())Ah(n,t);for(const n of Dl.values())Ah(n,t);return!0}function I2(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function j9(t,e,n=Ms){I2(t,e).clearInstance(n)}function ew(t){return t.options!==void 0}function R2(t){return ew(t)?!1:"authIdToken"in t||"appCheckToken"in t||"releaseOnDeref"in t||"automaticDataCollectionEnabled"in t}function Fe(t){return t==null?!1:t.settings!==void 0}function B9(){Nl.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F9={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},zn=new mo("app","Firebase",F9);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let x2=class{constructor(e,n,i){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new hi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw zn.create("app-deleted",{appName:this._name})}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cI(t,e){const n=GT(t.split(".")[1]);if(n===null){console.error(`FirebaseServerApp ${e} is invalid: second part could not be parsed.`);return}if(JSON.parse(n).exp===void 0){console.error(`FirebaseServerApp ${e} is invalid: expiration claim could not be parsed`);return}const r=JSON.parse(n).exp*1e3,s=new Date().getTime();r-s<=0&&console.error(`FirebaseServerApp ${e} is invalid: the token has expired.`)}class q9 extends x2{constructor(e,n,i,r){const s=n.automaticDataCollectionEnabled!==void 0?n.automaticDataCollectionEnabled:!0,a={name:i,automaticDataCollectionEnabled:s};if(e.apiKey!==void 0)super(e,a,r);else{const o=e;super(o.options,a,r)}this._serverConfig={automaticDataCollectionEnabled:s,...n},this._serverConfig.authIdToken&&cI(this._serverConfig.authIdToken,"authIdToken"),this._serverConfig.appCheckToken&&cI(this._serverConfig.appCheckToken,"appCheckToken"),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,n.releaseOnDeref=void 0,jn(Hm,Nv,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,e!==void 0&&this._finalizationRegistry!==null&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){nw(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw zn.create("server-app-deleted")}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vr=U9;function tw(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i={name:Ms,automaticDataCollectionEnabled:!0,...e},r=i.name;if(typeof r!="string"||!r)throw zn.create("bad-app-name",{appName:String(r)});if(n||(n=QT()),!n)throw zn.create("no-options");const s=Ls.get(r);if(s){if(Os(n,s.options)&&Os(i,s.config))return s;throw zn.create("duplicate-app",{appName:r})}const a=new w2(r);for(const l of Nl.values())a.addComponent(l);const o=new x2(n,i,a);return Ls.set(r,o),o}function H9(t,e={}){if(Mz()&&!p2())throw zn.create("invalid-server-app-environment");let n,i=e||{};if(t&&(ew(t)?n=t.options:R2(t)?i=t:n=t),i.automaticDataCollectionEnabled===void 0&&(i.automaticDataCollectionEnabled=!0),n||(n=QT()),!n)throw zn.create("no-options");const r={...i,...n};r.releaseOnDeref!==void 0&&delete r.releaseOnDeref;const s=h=>[...h].reduce((d,f)=>Math.imul(31,d)+f.charCodeAt(0)|0,0);if(i.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw zn.create("finalization-registry-not-supported",{});const a=""+s(JSON.stringify(r)),o=Dl.get(a);if(o)return o.incRefCount(i.releaseOnDeref),o;const l=new w2(a);for(const h of Nl.values())l.addComponent(h);const c=new q9(n,i,a,l);return Dl.set(a,c),c}function G9(t=Ms){const e=Ls.get(t);if(!e&&t===Ms&&QT())return tw();if(!e)throw zn.create("no-app",{appName:t});return e}function $9(){return Array.from(Ls.values())}async function nw(t){let e=!1;const n=t.name;Ls.has(n)?(e=!0,Ls.delete(n)):Dl.has(n)&&t.decRefCount()<=0&&(Dl.delete(n),e=!0),e&&(await Promise.all(t.container.getProviders().map(i=>i.delete())),t.isDeleted=!0)}function jn(t,e,n){let i=z9[t]??t;n&&(i+=`-${n}`);const r=i.match(/\s|\//),s=e.match(/\s|\//);if(r||s){const a=[`Unable to register library "${i}" with version "${e}":`];r&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),r&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Rr.warn(a.join(" "));return}xr(new hi(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}function C2(t,e){if(t!==null&&typeof t!="function")throw zn.create("invalid-log-argument");Jz(t,e)}function P2(t){Xz(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K9="firebase-heartbeat-database",Q9=1,Sh="firebase-heartbeat-store";let Xy=null;function D2(){return Xy||(Xy=o9(K9,Q9,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Sh)}catch(n){console.warn(n)}}}}).catch(t=>{throw zn.create("idb-open",{originalErrorMessage:t.message})})),Xy}async function W9(t){try{const n=(await D2()).transaction(Sh),i=await n.objectStore(Sh).get(N2(t));return await n.done,i}catch(e){if(e instanceof Zt)Rr.warn(e.message);else{const n=zn.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Rr.warn(n.message)}}}async function uI(t,e){try{const i=(await D2()).transaction(Sh,"readwrite");await i.objectStore(Sh).put(e,N2(t)),await i.done}catch(n){if(n instanceof Zt)Rr.warn(n.message);else{const i=zn.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Rr.warn(i.message)}}}function N2(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y9=1024,X9=30;class J9{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new ej(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=hI();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:r}),this._heartbeatsCache.heartbeats.length>X9){const a=tj(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Rr.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=hI(),{heartbeatsToSend:i,unsentEntries:r}=Z9(this._heartbeatsCache.heartbeats),s=Fm(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Rr.warn(n),""}}}function hI(){return new Date().toISOString().substring(0,10)}function Z9(t,e=Y9){const n=[];let i=t.slice();for(const r of t){const s=n.find(a=>a.agent===r.agent);if(s){if(s.dates.push(r.date),dI(n)>e){s.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),dI(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class ej{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Eh()?Uz().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await W9(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return uI(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return uI(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function dI(t){return Fm(JSON.stringify({version:2,heartbeats:t})).length}function tj(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let i=1;i<t.length;i++)t[i].date<n&&(n=t[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nj(t){xr(new hi("platform-logger",e=>new u9(e),"PRIVATE")),xr(new hi("heartbeat",e=>new J9(e),"PRIVATE")),jn(Hm,Nv,t),jn(Hm,Nv,"esm2020"),jn("fire-js","")}nj("");const ij=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:Zt,SDK_VERSION:Vr,_DEFAULT_ENTRY_NAME:Ms,_addComponent:Ah,_addOrOverwriteComponent:S2,_apps:Ls,_clearComponents:B9,_components:Nl,_getProvider:I2,_isFirebaseApp:ew,_isFirebaseServerApp:Fe,_isFirebaseServerAppSettings:R2,_registerComponent:xr,_removeServiceInstance:j9,_serverApps:Dl,deleteApp:nw,getApp:G9,getApps:$9,initializeApp:tw,initializeServerApp:H9,onLog:C2,registerVersion:jn,setLogLevel:P2},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rj{constructor(e,n){this._delegate=e,this.firebase=n,Ah(e,new hi("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),nw(this._delegate)))}_getService(e,n=Ms){var r;this._delegate.checkDestroyed();const i=this._delegate.container.getProvider(e);return!i.isInitialized()&&((r=i.getComponent())==null?void 0:r.instantiationMode)==="EXPLICIT"&&i.initialize(),i.getImmediate({identifier:n})}_removeServiceInstance(e,n=Ms){this._delegate.container.getProvider(e).clearInstance(n)}_addComponent(e){Ah(this._delegate,e)}_addOrOverwriteComponent(e){S2(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sj={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},fI=new mo("app-compat","Firebase",sj);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aj(t){const e={},n={__esModule:!0,initializeApp:s,app:r,registerVersion:jn,setLogLevel:P2,onLog:C2,apps:null,SDK_VERSION:Vr,INTERNAL:{registerComponent:o,removeApp:i,useAsService:l,modularAPIs:ij}};n.default=n,Object.defineProperty(n,"apps",{get:a});function i(c){delete e[c]}function r(c){if(c=c||Ms,!rI(e,c))throw fI.create("no-app",{appName:c});return e[c]}r.App=t;function s(c,h={}){const d=tw(c,h);if(rI(e,d.name))return e[d.name];const f=new t(d,n);return e[d.name]=f,f}function a(){return Object.keys(e).map(c=>e[c])}function o(c){const h=c.name,d=h.replace("-compat","");if(xr(c)&&c.type==="PUBLIC"){const f=(p=r())=>{if(typeof p[d]!="function")throw fI.create("invalid-app-argument",{appName:h});return p[d]()};c.serviceProps!==void 0&&qm(f,c.serviceProps),n[d]=f,t.prototype[d]=function(...p){return this._getService.bind(this,h).apply(this,c.multipleInstances?p:[])}}return c.type==="PUBLIC"?n[d]:null}function l(c,h){return h==="serverAuth"?null:h}return n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k2(){const t=aj(rj);t.INTERNAL={...t.INTERNAL,createFirebaseNamespace:k2,extendNamespace:e,createSubscribe:T2,ErrorFactory:mo,deepExtend:qm};function e(n){qm(t,n)}return t}const oj=k2();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mI=new Gp("@firebase/app-compat"),lj="@firebase/app-compat",cj="0.5.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uj(t){jn(lj,cj,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */try{const t=$T();if(t.firebase!==void 0){mI.warn(`
      Warning: Firebase is already defined in the global scope. Please make sure
      Firebase library is only loaded once.
    `);const e=t.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&mI.warn(`
        Warning: You are trying to load Firebase while using Firebase Performance standalone script.
        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
        `)}}catch{}const Yt=oj;uj();var hj="firebase",dj="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Yt.registerVersion(hj,dj,"app-compat");const eu={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",TWITTER:"twitter.com"},Io={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fj(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements.","invalid-hosting-link-domain":"The provided Hosting link domain is not configured in Firebase Hosting or is not owned by the current project. This cannot be a default Hosting domain (`web.app` or `firebaseapp.com`)."}}function V2(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const mj=fj,pj=V2,O2=new mo("auth","Firebase",V2());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gm=new Gp("@firebase/auth");function gj(t,...e){Gm.logLevel<=fe.WARN&&Gm.warn(`Auth (${Vr}): ${t}`,...e)}function Kf(t,...e){Gm.logLevel<=fe.ERROR&&Gm.error(`Auth (${Vr}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ht(t,...e){throw rw(t,...e)}function St(t,...e){return rw(t,...e)}function iw(t,e,n){const i={...pj(),[e]:n};return new mo("auth","Firebase",i).create(e,{appName:t.name})}function Vt(t){return iw(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function pc(t,e,n){const i=n;if(!(e instanceof i))throw i.name!==e.constructor.name&&Ht(t,"argument-error"),iw(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function rw(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return O2.create(t,...e)}function H(t,e,...n){if(!t)throw rw(e,...n)}function Ui(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Kf(e),new Error(e)}function bi(t,e){t||Ui(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ih(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function sw(){return pI()==="http:"||pI()==="https:"}function pI(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yj(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(sw()||g2()||"connection"in navigator)?navigator.onLine:!0}function _j(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hd{constructor(e,n){this.shortDelay=e,this.longDelay=n,bi(n>e,"Short delay should be less than long delay!"),this.isMobile=Oz()||XT()}get(){return yj()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aw(t,e){bi(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M2{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ui("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ui("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ui("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vj={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tj=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],wj=new hd(3e4,6e4);function ot(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function lt(t,e,n,i,r={}){return L2(t,r,async()=>{let s={},a={};i&&(e==="GET"?a=i:s={body:JSON.stringify(i)});const o=mc({key:t.config.apiKey,...a}).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c={method:e,headers:l,...s};return Lz()||(c.referrerPolicy="no-referrer"),t.emulatorConfig&&Xs(t.emulatorConfig.host)&&(c.credentials="include"),M2.fetch()(await U2(t,t.config.apiHost,n,o),c)})}async function L2(t,e,n){t._canInitEmulator=!1;const i={...vj,...e};try{const r=new Ej(t),s=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const a=await s.json();if("needConfirmation"in a)throw yu(t,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{const o=s.ok?a.errorMessage:a.error.message,[l,c]=o.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw yu(t,"credential-already-in-use",a);if(l==="EMAIL_EXISTS")throw yu(t,"email-already-in-use",a);if(l==="USER_DISABLED")throw yu(t,"user-disabled",a);const h=i[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw iw(t,h,c);Ht(t,h)}}catch(r){if(r instanceof Zt)throw r;Ht(t,"network-request-failed",{message:String(r)})}}async function Or(t,e,n,i,r={}){const s=await lt(t,e,n,i,r);return"mfaPendingCredential"in s&&Ht(t,"multi-factor-auth-required",{_serverResponse:s}),s}async function U2(t,e,n,i){const r=`${e}${n}?${i}`,s=t,a=s.config.emulator?aw(t.config,r):`${t.config.apiScheme}://${r}`;return Tj.includes(n)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(a).toString():a}function bj(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Ej{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(St(this.auth,"network-request-failed")),wj.get())})}}function yu(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=St(t,e,i);return r.customData._tokenResponse=n,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gI(t){return t!==void 0&&t.getResponse!==void 0}function yI(t){return t!==void 0&&t.enterprise!==void 0}class z2{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return bj(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Aj(t){return(await lt(t,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function j2(t,e){return lt(t,"GET","/v2/recaptchaConfig",ot(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sj(t,e){return lt(t,"POST","/v1/accounts:delete",e)}async function Ij(t,e){return lt(t,"POST","/v1/accounts:update",e)}async function $m(t,e){return lt(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fu(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Rj(t,e=!1){const n=J(t),i=await n.getIdToken(e),r=$p(i);H(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const s=typeof r.firebase=="object"?r.firebase:void 0,a=s==null?void 0:s.sign_in_provider;return{claims:r,token:i,authTime:Fu(Jy(r.auth_time)),issuedAtTime:Fu(Jy(r.iat)),expirationTime:Fu(Jy(r.exp)),signInProvider:a||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Jy(t){return Number(t)*1e3}function $p(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return Kf("JWT malformed, contained fewer than 3 sections"),null;try{const r=GT(n);return r?JSON.parse(r):(Kf("Failed to decode base64 JWT payload"),null)}catch(r){return Kf("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function _I(t){const e=$p(t);return H(e,"internal-error"),H(typeof e.exp<"u","internal-error"),H(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cr(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof Zt&&xj(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function xj({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cj{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kv{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Fu(this.lastLoginAt),this.creationTime=Fu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rh(t){var d;const e=t.auth,n=await t.getIdToken(),i=await Cr(t,$m(e,{idToken:n}));H(i==null?void 0:i.users.length,e,"internal-error");const r=i.users[0];t._notifyReloadListener(r);const s=(d=r.providerUserInfo)!=null&&d.length?B2(r.providerUserInfo):[],a=Dj(t.providerData,s),o=t.isAnonymous,l=!(t.email&&r.passwordHash)&&!(a!=null&&a.length),c=o?l:!1,h={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:a,metadata:new kv(r.createdAt,r.lastLoginAt),isAnonymous:c};Object.assign(t,h)}async function Pj(t){const e=J(t);await Rh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Dj(t,e){return[...t.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function B2(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nj(t,e){const n=await L2(t,{},async()=>{const i=mc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:s}=t.config,a=await U2(t,r,"/v1/token",`key=${s}`),o=await t._getAdditionalHeaders();o["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:o,body:i};return t.emulatorConfig&&Xs(t.emulatorConfig.host)&&(l.credentials="include"),M2.fetch()(a,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function kj(t,e){return lt(t,"POST","/v2/accounts:revokeToken",ot(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){H(e.idToken,"internal-error"),H(typeof e.idToken<"u","internal-error"),H(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):_I(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){H(e.length!==0,"internal-error");const n=_I(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(H(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:r,expiresIn:s}=await Nj(e,n);this.updateTokensAndExpiration(i,r,Number(s))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:r,expirationTime:s}=n,a=new fl;return i&&(H(typeof i=="string","internal-error",{appName:e}),a.refreshToken=i),r&&(H(typeof r=="string","internal-error",{appName:e}),a.accessToken=r),s&&(H(typeof s=="number","internal-error",{appName:e}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new fl,this.toJSON())}_performRefresh(){return Ui("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yr(t,e){H(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class vi{constructor({uid:e,auth:n,stsTokenManager:i,...r}){this.providerId="firebase",this.proactiveRefresh=new Cj(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new kv(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const n=await Cr(this,this.stsTokenManager.getToken(this.auth,e));return H(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return Rj(this,e)}reload(){return Pj(this)}_assign(e){this!==e&&(H(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new vi({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){H(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await Rh(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Fe(this.auth.app))return Promise.reject(Vt(this.auth));const e=await this.getIdToken();return await Cr(this,Sj(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const i=n.displayName??void 0,r=n.email??void 0,s=n.phoneNumber??void 0,a=n.photoURL??void 0,o=n.tenantId??void 0,l=n._redirectEventId??void 0,c=n.createdAt??void 0,h=n.lastLoginAt??void 0,{uid:d,emailVerified:f,isAnonymous:p,providerData:w,stsTokenManager:E}=n;H(d&&E,e,"internal-error");const A=fl.fromJSON(this.name,E);H(typeof d=="string",e,"internal-error"),Yr(i,e.name),Yr(r,e.name),H(typeof f=="boolean",e,"internal-error"),H(typeof p=="boolean",e,"internal-error"),Yr(s,e.name),Yr(a,e.name),Yr(o,e.name),Yr(l,e.name),Yr(c,e.name),Yr(h,e.name);const T=new vi({uid:d,auth:e,email:r,emailVerified:f,displayName:i,isAnonymous:p,photoURL:a,phoneNumber:s,tenantId:o,stsTokenManager:A,createdAt:c,lastLoginAt:h});return w&&Array.isArray(w)&&(T.providerData=w.map(v=>({...v}))),l&&(T._redirectEventId=l),T}static async _fromIdTokenResponse(e,n,i=!1){const r=new fl;r.updateFromServerResponse(n);const s=new vi({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await Rh(s),s}static async _fromGetAccountInfoResponse(e,n,i){const r=n.users[0];H(r.localId!==void 0,"internal-error");const s=r.providerUserInfo!==void 0?B2(r.providerUserInfo):[],a=!(r.email&&r.passwordHash)&&!(s!=null&&s.length),o=new fl;o.updateFromIdToken(i);const l=new vi({uid:r.localId,auth:e,stsTokenManager:o,isAnonymous:a}),c={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new kv(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vI=new Map;function Vn(t){bi(t instanceof Function,"Expected a class definition");let e=vI.get(t);return e?(bi(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,vI.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F2{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}F2.type="NONE";const kl=F2;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ua(t,e,n){return`firebase:${t}:${e}:${n}`}class ml{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:r,name:s}=this.auth;this.fullUserKey=Ua(this.userKey,r.apiKey,s),this.fullPersistenceKey=Ua("persistence",r.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await $m(this.auth,{idToken:e}).catch(()=>{});return n?vi._fromGetAccountInfoResponse(this.auth,n,e):null}return vi._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new ml(Vn(kl),e,i);const r=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=r[0]||Vn(kl);const a=Ua(i,e.config.apiKey,e.name);let o=null;for(const c of n)try{const h=await c._get(a);if(h){let d;if(typeof h=="string"){const f=await $m(e,{idToken:h}).catch(()=>{});if(!f)break;d=await vi._fromGetAccountInfoResponse(e,f,h)}else d=vi._fromJSON(e,h);c!==s&&(o=d),s=c;break}}catch{}const l=r.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new ml(s,e,i):(s=l[0],o&&await s._set(a,o.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(a)}catch{}})),new ml(s,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TI(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if($2(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(q2(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(K2(e))return"Blackberry";if(Q2(e))return"Webos";if(H2(e))return"Safari";if((e.includes("chrome/")||G2(e))&&!e.includes("edge/"))return"Chrome";if(dd(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function q2(t=Ze()){return/firefox\//i.test(t)}function H2(t=Ze()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function G2(t=Ze()){return/crios\//i.test(t)}function $2(t=Ze()){return/iemobile/i.test(t)}function dd(t=Ze()){return/android/i.test(t)}function K2(t=Ze()){return/blackberry/i.test(t)}function Q2(t=Ze()){return/webos/i.test(t)}function fd(t=Ze()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Vj(t=Ze()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(t)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(t)}function Oj(t=Ze()){var e;return fd(t)&&!!((e=window.navigator)!=null&&e.standalone)}function Mj(){return y2()&&document.documentMode===10}function W2(t=Ze()){return fd(t)||dd(t)||Q2(t)||K2(t)||/windows phone/i.test(t)||$2(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y2(t,e=[]){let n;switch(t){case"Browser":n=TI(Ze());break;case"Worker":n=`${TI(Ze())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Vr}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lj{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=s=>new Promise((a,o)=>{try{const l=e(s);a(l)}catch(l){o(l)}});i.onAbort=n,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Uj(t,e={}){return lt(t,"GET","/v2/passwordPolicy",ot(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zj=6;class jj{constructor(e){var i;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??zj,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=e.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,r,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bj{constructor(e,n,i,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new wI(this),this.idTokenSubscription=new wI(this),this.beforeStateQueue=new Lj(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=O2,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Vn(n)),this._initializationPromise=this.queue(async()=>{var i,r,s;if(!this._deleted&&(this.persistenceManager=await ml.create(this,e),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((r=this._popupRedirectResolver)!=null&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)==null?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await $m(this,{idToken:e}),i=await vi._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var s;if(Fe(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(o,o))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(s=this.redirectUser)==null?void 0:s._redirectEventId,o=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!a||a===o)&&(l!=null&&l.user)&&(i=l.user,r=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(i)}catch(a){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return H(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Rh(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=_j()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Fe(this.app))return Promise.reject(Vt(this));const n=e?J(e):null;return n&&H(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&H(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Fe(this.app)?Promise.reject(Vt(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Fe(this.app)?Promise.reject(Vt(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Vn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Uj(this),n=new jj(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new mo("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await kj(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Vn(e)||this._popupRedirectResolver;H(n,this,"argument-error"),this.redirectPersistenceManager=await ml.create(this,[Vn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,r){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let a=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(H(o,this,"internal-error"),o.then(()=>{a||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,i,r);return()=>{a=!0,l()}}else{const l=e.addObserver(n);return()=>{a=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return H(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Y2(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var r;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((r=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:r.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var n;if(Fe(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&gj(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function et(t){return J(t)}class wI{constructor(e){this.auth=e,this.observer=null,this.addObserver=T2(n=>this.observer=n)}get next(){return H(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let md={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Fj(t){md=t}function ow(t){return md.loadJS(t)}function qj(){return md.recaptchaV2Script}function Hj(){return md.recaptchaEnterpriseScript}function Gj(){return md.gapiScript}function X2(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $j=500,Kj=6e4,mf=1e12;class Qj{constructor(e){this.auth=e,this.counter=mf,this._widgets=new Map}render(e,n){const i=this.counter;return this._widgets.set(i,new Xj(e,this.auth.name,n||{})),this.counter++,i}reset(e){var i;const n=e||mf;(i=this._widgets.get(n))==null||i.delete(),this._widgets.delete(n)}getResponse(e){var i;const n=e||mf;return((i=this._widgets.get(n))==null?void 0:i.getResponse())||""}async execute(e){var i;const n=e||mf;return(i=this._widgets.get(n))==null||i.execute(),""}}class Wj{constructor(){this.enterprise=new Yj}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class Yj{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class Xj{constructor(e,n,i){this.params=i,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const r=typeof e=="string"?document.getElementById(e):e;H(r,"argument-error",{appName:n}),this.container=r,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=Jj(50);const{callback:e,"expired-callback":n}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,n)try{n()}catch{}this.isVisible&&this.execute()},Kj)},$j))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function Jj(t){const e=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let i=0;i<t;i++)e.push(n.charAt(Math.floor(Math.random()*n.length)));return e.join("")}const Zj="recaptcha-enterprise",qu="NO_RECAPTCHA";class J2{constructor(e){this.type=Zj,this.auth=et(e)}async verify(e="verify",n=!1){async function i(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(a,o)=>{j2(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)o(new Error("recaptcha Enterprise site key undefined"));else{const c=new z2(l);return s.tenantId==null?s._agentRecaptchaConfig=c:s._tenantRecaptchaConfigs[s.tenantId]=c,a(c.siteKey)}}).catch(l=>{o(l)})})}function r(s,a,o){const l=window.grecaptcha;yI(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(c=>{a(c)}).catch(()=>{a(qu)})}):o(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Wj().execute("siteKey",{action:"verify"}):new Promise((s,a)=>{i(this.auth).then(o=>{if(!n&&yI(window.grecaptcha))r(o,s,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let l=Hj();l.length!==0&&(l+=o),ow(l).then(()=>{r(o,s,a)}).catch(c=>{a(c)})}}).catch(o=>{a(o)})})}}async function tu(t,e,n,i=!1,r=!1){const s=new J2(t);let a;if(r)a=qu;else try{a=await s.verify(n)}catch{a=await s.verify(n,!0)}const o={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in o){const l=o.phoneEnrollmentInfo.phoneNumber,c=o.phoneEnrollmentInfo.recaptchaToken;Object.assign(o,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:c,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in o){const l=o.phoneSignInInfo.recaptchaToken;Object.assign(o,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return o}return i?Object.assign(o,{captchaResp:a}):Object.assign(o,{captchaResponse:a}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Rs(t,e,n,i,r){var s,a;if(r==="EMAIL_PASSWORD_PROVIDER")if((s=t._getRecaptchaConfig())!=null&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await tu(t,e,n,n==="getOobCode");return i(t,o)}else return i(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await tu(t,e,n,n==="getOobCode");return i(t,l)}else return Promise.reject(o)});else if(r==="PHONE_PROVIDER")if((a=t._getRecaptchaConfig())!=null&&a.isProviderEnabled("PHONE_PROVIDER")){const o=await tu(t,e,n);return i(t,o).catch(async l=>{var c;if(((c=t._getRecaptchaConfig())==null?void 0:c.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(l.code==="auth/missing-recaptcha-token"||l.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`);const h=await tu(t,e,n,!1,!0);return i(t,h)}return Promise.reject(l)})}else{const o=await tu(t,e,n,!1,!0);return i(t,o)}else return Promise.reject(r+" provider is not supported.")}async function eB(t){const e=et(t),n=await j2(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),i=new z2(n);e.tenantId==null?e._agentRecaptchaConfig=i:e._tenantRecaptchaConfigs[e.tenantId]=i,i.isAnyProviderEnabled()&&new J2(e).verify()}function tB(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(Vn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function nB(t,e,n){const i=et(t);H(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!!(n!=null&&n.disableWarnings),s=Z2(e),{host:a,port:o}=iB(e),l=o===null?"":`:${o}`,c={url:`${s}//${a}${l}/`},h=Object.freeze({host:a,port:o,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!i._canInitEmulator){H(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),H(Os(c,i.config.emulator)&&Os(h,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=c,i.emulatorConfig=h,i.settings.appVerificationDisabledForTesting=!0,Xs(a)?(WT(`${s}//${a}${l}`),YT("Auth",!0)):r||rB()}function Z2(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function iB(t){const e=Z2(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const s=r[1];return{host:s,port:bI(i.substr(s.length+1))}}else{const[s,a]=i.split(":");return{host:s,port:bI(a)}}}function bI(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function rB(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gc{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Ui("not implemented")}_getIdTokenResponse(e){return Ui("not implemented")}_linkToIdToken(e,n){return Ui("not implemented")}_getReauthenticationResolver(e){return Ui("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eN(t,e){return lt(t,"POST","/v1/accounts:resetPassword",ot(t,e))}async function sB(t,e){return lt(t,"POST","/v1/accounts:update",e)}async function aB(t,e){return lt(t,"POST","/v1/accounts:signUp",e)}async function oB(t,e){return lt(t,"POST","/v1/accounts:update",ot(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lB(t,e){return Or(t,"POST","/v1/accounts:signInWithPassword",ot(t,e))}async function Kp(t,e){return lt(t,"POST","/v1/accounts:sendOobCode",ot(t,e))}async function cB(t,e){return Kp(t,e)}async function uB(t,e){return Kp(t,e)}async function hB(t,e){return Kp(t,e)}async function dB(t,e){return Kp(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fB(t,e){return Or(t,"POST","/v1/accounts:signInWithEmailLink",ot(t,e))}async function mB(t,e){return Or(t,"POST","/v1/accounts:signInWithEmailLink",ot(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xh extends gc{constructor(e,n,i,r=null){super("password",i),this._email=e,this._password=n,this._tenantId=r}static _fromEmailAndPassword(e,n){return new xh(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new xh(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Rs(e,n,"signInWithPassword",lB,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return fB(e,{email:this._email,oobCode:this._password});default:Ht(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Rs(e,i,"signUpPassword",aB,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return mB(e,{idToken:n,email:this._email,oobCode:this._password});default:Ht(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yr(t,e){return Or(t,"POST","/v1/accounts:signInWithIdp",ot(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pB="http://localhost";class Qi extends gc{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Qi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Ht("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r,...s}=n;if(!i||!r)return null;const a=new Qi(i,r);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(e){const n=this.buildRequest();return yr(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,yr(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,yr(e,n)}buildRequest(){const e={requestUri:pB,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=mc(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EI(t,e){return lt(t,"POST","/v1/accounts:sendVerificationCode",ot(t,e))}async function gB(t,e){return Or(t,"POST","/v1/accounts:signInWithPhoneNumber",ot(t,e))}async function yB(t,e){const n=await Or(t,"POST","/v1/accounts:signInWithPhoneNumber",ot(t,e));if(n.temporaryProof)throw yu(t,"account-exists-with-different-credential",n);return n}const _B={USER_NOT_FOUND:"user-not-found"};async function vB(t,e){const n={...e,operation:"REAUTH"};return Or(t,"POST","/v1/accounts:signInWithPhoneNumber",ot(t,n),_B)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class za extends gc{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,n){return new za({verificationId:e,verificationCode:n})}static _fromTokenResponse(e,n){return new za({phoneNumber:e,temporaryProof:n})}_getIdTokenResponse(e){return gB(e,this._makeVerificationRequest())}_linkToIdToken(e,n){return yB(e,{idToken:n,...this._makeVerificationRequest()})}_getReauthenticationResolver(e){return vB(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:n,verificationId:i,verificationCode:r}=this.params;return e&&n?{temporaryProof:e,phoneNumber:n}:{sessionInfo:i,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:n,verificationCode:i,phoneNumber:r,temporaryProof:s}=e;return!i&&!n&&!r&&!s?null:new za({verificationId:n,verificationCode:i,phoneNumber:r,temporaryProof:s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TB(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function wB(t){const e=el(gu(t)).link,n=e?el(gu(e)).deep_link_id:null,i=el(gu(t)).deep_link_id;return(i?el(gu(i)).link:null)||i||n||e||t}class Qp{constructor(e){const n=el(gu(e)),i=n.apiKey??null,r=n.oobCode??null,s=TB(n.mode??null);H(i&&r&&s,"argument-error"),this.apiKey=i,this.operation=s,this.code=r,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=wB(e);try{return new Qp(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Js{constructor(){this.providerId=Js.PROVIDER_ID}static credential(e,n){return xh._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=Qp.parseLink(n);return H(i,"argument-error"),xh._fromEmailAndCode(e,i.code,i.tenantId)}}Js.PROVIDER_ID="password";Js.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Js.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mr{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yc extends Mr{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class pl extends yc{static credentialFromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;return H("providerId"in n&&"signInMethod"in n,"argument-error"),Qi._fromParams(n)}credential(e){return this._credential({...e,nonce:e.rawNonce})}_credential(e){return H(e.idToken||e.accessToken,"argument-error"),Qi._fromParams({...e,providerId:this.providerId,signInMethod:this.providerId})}static credentialFromResult(e){return pl.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return pl.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i,oauthTokenSecret:r,pendingToken:s,nonce:a,providerId:o}=e;if(!i&&!r&&!n&&!s||!o)return null;try{return new pl(o)._credential({idToken:n,accessToken:i,nonce:a,pendingToken:s})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pi extends yc{constructor(){super("facebook.com")}static credential(e){return Qi._fromParams({providerId:Pi.PROVIDER_ID,signInMethod:Pi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Pi.credentialFromTaggedObject(e)}static credentialFromError(e){return Pi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Pi.credential(e.oauthAccessToken)}catch{return null}}}Pi.FACEBOOK_SIGN_IN_METHOD="facebook.com";Pi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Di extends yc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Qi._fromParams({providerId:Di.PROVIDER_ID,signInMethod:Di.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Di.credentialFromTaggedObject(e)}static credentialFromError(e){return Di.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return Di.credential(n,i)}catch{return null}}}Di.GOOGLE_SIGN_IN_METHOD="google.com";Di.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ni extends yc{constructor(){super("github.com")}static credential(e){return Qi._fromParams({providerId:Ni.PROVIDER_ID,signInMethod:Ni.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ni.credentialFromTaggedObject(e)}static credentialFromError(e){return Ni.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ni.credential(e.oauthAccessToken)}catch{return null}}}Ni.GITHUB_SIGN_IN_METHOD="github.com";Ni.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bB="http://localhost";class Vl extends gc{constructor(e,n){super(e,e),this.pendingToken=n}_getIdTokenResponse(e){const n=this.buildRequest();return yr(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,yr(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,yr(e,n)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r,pendingToken:s}=n;return!i||!r||!s||i!==r?null:new Vl(i,s)}static _create(e,n){return new Vl(e,n)}buildRequest(){return{requestUri:bB,returnSecureToken:!0,pendingToken:this.pendingToken}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EB="saml.";class Km extends Mr{constructor(e){H(e.startsWith(EB),"argument-error"),super(e)}static credentialFromResult(e){return Km.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return Km.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const n=Vl.fromJSON(e);return H(n,"argument-error"),n}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:n,providerId:i}=e;if(!n||!i)return null;try{return Vl._create(i,n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki extends yc{constructor(){super("twitter.com")}static credential(e,n){return Qi._fromParams({providerId:ki.PROVIDER_ID,signInMethod:ki.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ki.credentialFromTaggedObject(e)}static credentialFromError(e){return ki.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return ki.credential(n,i)}catch{return null}}}ki.TWITTER_SIGN_IN_METHOD="twitter.com";ki.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tN(t,e){return Or(t,"POST","/v1/accounts:signUp",ot(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,r=!1){const s=await vi._fromIdTokenResponse(e,i,r),a=AI(i);return new di({user:s,providerId:a,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const r=AI(i);return new di({user:e,providerId:r,_tokenResponse:i,operationType:n})}}function AI(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AB(t){var r;if(Fe(t.app))return Promise.reject(Vt(t));const e=et(t);if(await e._initializationPromise,(r=e.currentUser)!=null&&r.isAnonymous)return new di({user:e.currentUser,providerId:null,operationType:"signIn"});const n=await tN(e,{returnSecureToken:!0}),i=await di._fromIdTokenResponse(e,"signIn",n,!0);return await e._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qm extends Zt{constructor(e,n,i,r){super(n.code,n.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,Qm.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,r){return new Qm(e,n,i,r)}}function nN(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Qm._fromErrorAndOperation(t,s,e,i):s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iN(t){return new Set(t.map(({providerId:e})=>e).filter(e=>!!e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SB(t,e){const n=J(t);await Wp(!0,n,e);const{providerUserInfo:i}=await Ij(n.auth,{idToken:await n.getIdToken(),deleteProvider:[e]}),r=iN(i||[]);return n.providerData=n.providerData.filter(s=>r.has(s.providerId)),r.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function lw(t,e,n=!1){const i=await Cr(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return di._forOperation(t,"link",i)}async function Wp(t,e,n){await Rh(e);const i=iN(e.providerData),r=t===!1?"provider-already-linked":"no-such-provider";H(i.has(n)===t,e.auth,r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rN(t,e,n=!1){const{auth:i}=t;if(Fe(i.app))return Promise.reject(Vt(i));const r="reauthenticate";try{const s=await Cr(t,nN(i,r,e,t),n);H(s.idToken,i,"internal-error");const a=$p(s.idToken);H(a,i,"internal-error");const{sub:o}=a;return H(t.uid===o,i,"user-mismatch"),di._forOperation(t,r,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Ht(i,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sN(t,e,n=!1){if(Fe(t.app))return Promise.reject(Vt(t));const i="signIn",r=await nN(t,i,e),s=await di._fromIdTokenResponse(t,i,r);return n||await t._updateCurrentUser(s.user),s}async function Yp(t,e){return sN(et(t),e)}async function aN(t,e){const n=J(t);return await Wp(!1,n,e.providerId),lw(n,e)}async function oN(t,e){return rN(J(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IB(t,e){return Or(t,"POST","/v1/accounts:signInWithCustomToken",ot(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RB(t,e){if(Fe(t.app))return Promise.reject(Vt(t));const n=et(t),i=await IB(n,{token:e,returnSecureToken:!0}),r=await di._fromIdTokenResponse(n,"signIn",i);return await n._updateCurrentUser(r.user),r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pd{constructor(e,n){this.factorId=e,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}static _fromServerResponse(e,n){return"phoneInfo"in n?cw._fromServerResponse(e,n):"totpInfo"in n?uw._fromServerResponse(e,n):Ht(e,"internal-error")}}class cw extends pd{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,n){return new cw(n)}}class uw extends pd{constructor(e){super("totp",e)}static _fromServerResponse(e,n){return new uw(n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xp(t,e,n){var i;H(((i=n.url)==null?void 0:i.length)>0,t,"invalid-continue-uri"),H(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),H(typeof n.linkDomain>"u"||n.linkDomain.length>0,t,"invalid-hosting-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.linkDomain=n.linkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(H(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(H(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hw(t){const e=et(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function xB(t,e,n){const i=et(t),r={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};n&&Xp(i,r,n),await Rs(i,r,"getOobCode",uB,"EMAIL_PASSWORD_PROVIDER")}async function CB(t,e,n){await eN(J(t),{oobCode:e,newPassword:n}).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&hw(t),i})}async function PB(t,e){await oB(J(t),{oobCode:e})}async function lN(t,e){const n=J(t),i=await eN(n,{oobCode:e}),r=i.requestType;switch(H(r,n,"internal-error"),r){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":H(i.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":H(i.mfaInfo,n,"internal-error");default:H(i.email,n,"internal-error")}let s=null;return i.mfaInfo&&(s=pd._fromServerResponse(et(n),i.mfaInfo)),{data:{email:(i.requestType==="VERIFY_AND_CHANGE_EMAIL"?i.newEmail:i.email)||null,previousEmail:(i.requestType==="VERIFY_AND_CHANGE_EMAIL"?i.email:i.newEmail)||null,multiFactorInfo:s},operation:r}}async function DB(t,e){const{data:n}=await lN(J(t),e);return n.email}async function NB(t,e,n){if(Fe(t.app))return Promise.reject(Vt(t));const i=et(t),a=await Rs(i,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",tN,"EMAIL_PASSWORD_PROVIDER").catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&hw(t),l}),o=await di._fromIdTokenResponse(i,"signIn",a);return await i._updateCurrentUser(o.user),o}function kB(t,e,n){return Fe(t.app)?Promise.reject(Vt(t)):Yp(J(t),Js.credential(e,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&hw(t),i})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VB(t,e,n){const i=et(t),r={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};function s(a,o){H(o.handleCodeInApp,i,"argument-error"),o&&Xp(i,a,o)}s(r,n),await Rs(i,r,"getOobCode",hB,"EMAIL_PASSWORD_PROVIDER")}function OB(t,e){const n=Qp.parseLink(e);return(n==null?void 0:n.operation)==="EMAIL_SIGNIN"}async function MB(t,e,n){if(Fe(t.app))return Promise.reject(Vt(t));const i=J(t),r=Js.credentialWithLink(e,n||Ih());return H(r._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),Yp(i,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LB(t,e){return lt(t,"POST","/v1/accounts:createAuthUri",ot(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UB(t,e){const n=sw()?Ih():"http://localhost",i={identifier:e,continueUri:n},{signinMethods:r}=await LB(J(t),i);return r||[]}async function zB(t,e){const n=J(t),r={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()};e&&Xp(n.auth,r,e);const{email:s}=await cB(n.auth,r);s!==t.email&&await t.reload()}async function jB(t,e,n){const i=J(t),s={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await t.getIdToken(),newEmail:e};n&&Xp(i.auth,s,n);const{email:a}=await dB(i.auth,s);a!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BB(t,e){return lt(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FB(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const i=J(t),s={idToken:await i.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},a=await Cr(i,BB(i.auth,s));i.displayName=a.displayName||null,i.photoURL=a.photoUrl||null;const o=i.providerData.find(({providerId:l})=>l==="password");o&&(o.displayName=i.displayName,o.photoURL=i.photoURL),await i._updateTokensIfNecessary(a)}function qB(t,e){const n=J(t);return Fe(n.auth.app)?Promise.reject(Vt(n.auth)):cN(n,e,null)}function HB(t,e){return cN(J(t),null,e)}async function cN(t,e,n){const{auth:i}=t,s={idToken:await t.getIdToken(),returnSecureToken:!0};e&&(s.email=e),n&&(s.password=n);const a=await Cr(t,sB(i,s));await t._updateTokensIfNecessary(a,!0)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GB(t){var r,s;if(!t)return null;const{providerId:e}=t,n=t.rawUserInfo?JSON.parse(t.rawUserInfo):{},i=t.isNewUser||t.kind==="identitytoolkit#SignupNewUserResponse";if(!e&&(t!=null&&t.idToken)){const a=(s=(r=$p(t.idToken))==null?void 0:r.firebase)==null?void 0:s.sign_in_provider;if(a){const o=a!=="anonymous"&&a!=="custom"?a:null;return new gl(i,o)}}if(!e)return null;switch(e){case"facebook.com":return new $B(i,n);case"github.com":return new KB(i,n);case"google.com":return new QB(i,n);case"twitter.com":return new WB(i,n,t.screenName||null);case"custom":case"anonymous":return new gl(i,null);default:return new gl(i,e,n)}}class gl{constructor(e,n,i={}){this.isNewUser=e,this.providerId=n,this.profile=i}}class uN extends gl{constructor(e,n,i,r){super(e,n,i),this.username=r}}class $B extends gl{constructor(e,n){super(e,"facebook.com",n)}}class KB extends uN{constructor(e,n){super(e,"github.com",n,typeof(n==null?void 0:n.login)=="string"?n==null?void 0:n.login:null)}}class QB extends gl{constructor(e,n){super(e,"google.com",n)}}class WB extends uN{constructor(e,n,i){super(e,"twitter.com",n,i)}}function YB(t){const{user:e,_tokenResponse:n}=t;return e.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:GB(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xa{constructor(e,n,i){this.type=e,this.credential=n,this.user=i}static _fromIdtoken(e,n){return new xa("enroll",e,n)}static _fromMfaPendingCredential(e){return new xa("signin",e)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var n,i;if(e!=null&&e.multiFactorSession){if((n=e.multiFactorSession)!=null&&n.pendingCredential)return xa._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if((i=e.multiFactorSession)!=null&&i.idToken)return xa._fromIdtoken(e.multiFactorSession.idToken)}return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dw{constructor(e,n,i){this.session=e,this.hints=n,this.signInResolver=i}static _fromError(e,n){const i=et(e),r=n.customData._serverResponse,s=(r.mfaInfo||[]).map(o=>pd._fromServerResponse(i,o));H(r.mfaPendingCredential,i,"internal-error");const a=xa._fromMfaPendingCredential(r.mfaPendingCredential);return new dw(a,s,async o=>{const l=await o._process(i,a);delete r.mfaInfo,delete r.mfaPendingCredential;const c={...r,idToken:l.idToken,refreshToken:l.refreshToken};switch(n.operationType){case"signIn":const h=await di._fromIdTokenResponse(i,n.operationType,c);return await i._updateCurrentUser(h.user),h;case"reauthenticate":return H(n.user,i,"internal-error"),di._forOperation(n.user,n.operationType,c);default:Ht(i,"internal-error")}})}async resolveSignIn(e){const n=e;return this.signInResolver(n)}}function XB(t,e){var r;const n=J(t),i=e;return H(e.customData.operationType,n,"argument-error"),H((r=i.customData._serverResponse)==null?void 0:r.mfaPendingCredential,n,"argument-error"),dw._fromError(n,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SI(t,e){return lt(t,"POST","/v2/accounts/mfaEnrollment:start",ot(t,e))}function JB(t,e){return lt(t,"POST","/v2/accounts/mfaEnrollment:finalize",ot(t,e))}function ZB(t,e){return lt(t,"POST","/v2/accounts/mfaEnrollment:withdraw",ot(t,e))}class fw{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(n=>{n.mfaInfo&&(this.enrolledFactors=n.mfaInfo.map(i=>pd._fromServerResponse(e.auth,i)))})}static _fromUser(e){return new fw(e)}async getSession(){return xa._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,n){const i=e,r=await this.getSession(),s=await Cr(this.user,i._process(this.user.auth,r,n));return await this.user._updateTokensIfNecessary(s),this.user.reload()}async unenroll(e){const n=typeof e=="string"?e:e.uid,i=await this.user.getIdToken();try{const r=await Cr(this.user,ZB(this.user.auth,{idToken:i,mfaEnrollmentId:n}));this.enrolledFactors=this.enrolledFactors.filter(({uid:s})=>s!==n),await this.user._updateTokensIfNecessary(r),await this.user.reload()}catch(r){throw r}}}const Zy=new WeakMap;function eF(t){const e=J(t);return Zy.has(e)||Zy.set(e,fw._fromUser(e)),Zy.get(e)}const Wm="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hN{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Wm,"1"),this.storage.removeItem(Wm),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tF=1e3,nF=10;class dN extends hN{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=W2(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),r=this.localCache[n];i!==r&&e(n,r,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((a,o,l)=>{this.notifyListeners(a,l)});return}const i=e.key;n?this.detachListener():this.stopPolling();const r=()=>{const a=this.storage.getItem(i);!n&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);Mj()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,nF):r()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},tF)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}dN.type="LOCAL";const mw=dN;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fN extends hN{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}fN.type="SESSION";const Qa=fN;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iF(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jp{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const i=new Jp(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:r,data:s}=n.data,a=this.handlersMap[r];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const o=Array.from(a).map(async c=>c(n.origin,s)),l=await iF(o);n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Jp.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gd(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rF{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,a;return new Promise((o,l)=>{const c=gd("",20);r.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},i);a={messageChannel:r,onMessage(d){const f=d;if(f.data.eventId===c)switch(f.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),o(f.data.response);break;default:clearTimeout(h),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(a),r.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[r.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yt(){return window}function sF(t){yt().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pw(){return typeof yt().WorkerGlobalScope<"u"&&typeof yt().importScripts=="function"}async function aF(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function oF(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function lF(){return pw()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mN="firebaseLocalStorageDb",cF=1,Ym="firebaseLocalStorage",pN="fbase_key";class yd{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Zp(t,e){return t.transaction([Ym],e?"readwrite":"readonly").objectStore(Ym)}function uF(){const t=indexedDB.deleteDatabase(mN);return new yd(t).toPromise()}function Vv(){const t=indexedDB.open(mN,cF);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(Ym,{keyPath:pN})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(Ym)?e(i):(i.close(),await uF(),e(await Vv()))})})}async function II(t,e,n){const i=Zp(t,!0).put({[pN]:e,value:n});return new yd(i).toPromise()}async function hF(t,e){const n=Zp(t,!1).get(e),i=await new yd(n).toPromise();return i===void 0?null:i.value}function RI(t,e){const n=Zp(t,!0).delete(e);return new yd(n).toPromise()}const dF=800,fF=3;class gN{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Vv(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>fF)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return pw()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Jp._getInstance(lF()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,i;if(this.activeServiceWorker=await aF(),!this.activeServiceWorker)return;this.sender=new rF(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(i=e[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||oF()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Vv();return await II(e,Wm,"1"),await RI(e,Wm),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>II(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>hF(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>RI(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const s=Zp(r,!1).getAll();return new yd(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:r,value:s}of e)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(s)&&(this.notifyListeners(r,s),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),dF)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}gN.type="LOCAL";const Ch=gN;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xI(t,e){return lt(t,"POST","/v2/accounts/mfaSignIn:start",ot(t,e))}function mF(t,e){return lt(t,"POST","/v2/accounts/mfaSignIn:finalize",ot(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e_=X2("rcb"),pF=new hd(3e4,6e4);class gF{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!((e=yt().grecaptcha)!=null&&e.render)}load(e,n=""){return H(yF(n),e,"argument-error"),this.shouldResolveImmediately(n)&&gI(yt().grecaptcha)?Promise.resolve(yt().grecaptcha):new Promise((i,r)=>{const s=yt().setTimeout(()=>{r(St(e,"network-request-failed"))},pF.get());yt()[e_]=()=>{yt().clearTimeout(s),delete yt()[e_];const o=yt().grecaptcha;if(!o||!gI(o)){r(St(e,"internal-error"));return}const l=o.render;o.render=(c,h)=>{const d=l(c,h);return this.counter++,d},this.hostLanguage=n,i(o)};const a=`${qj()}?${mc({onload:e_,render:"explicit",hl:n})}`;ow(a).catch(()=>{clearTimeout(s),r(St(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var n;return!!((n=yt().grecaptcha)!=null&&n.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function yF(t){return t.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(t)}class _F{async load(e){return new Qj(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hu="recaptcha",vF={theme:"light",type:"image"};let TF=class{constructor(e,n,i={...vF}){this.parameters=i,this.type=Hu,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=et(e),this.isInvisible=this.parameters.size==="invisible",H(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const r=typeof n=="string"?document.getElementById(n):n;H(r,this.auth,"argument-error"),this.container=r,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new _F:new gF,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),n=this.getAssertedRecaptcha(),i=n.getResponse(e);return i||new Promise(r=>{const s=a=>{a&&(this.tokenChangeListeners.delete(s),r(a))};this.tokenChangeListeners.add(s),this.isInvisible&&n.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){H(!this.parameters.sitekey,this.auth,"argument-error"),H(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),H(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return n=>{if(this.tokenChangeListeners.forEach(i=>i(n)),typeof e=="function")e(n);else if(typeof e=="string"){const i=yt()[e];typeof i=="function"&&i(n)}}}assertNotDestroyed(){H(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const n=document.createElement("div");e.appendChild(n),e=n}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){H(sw()&&!pw(),this.auth,"internal-error"),await wF(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await Aj(this.auth);H(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return H(this.recaptcha,this.auth,"internal-error"),this.recaptcha}};function wF(){let t=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}t=()=>e(),window.addEventListener("load",t)}).catch(e=>{throw t&&window.removeEventListener("load",t),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gw{constructor(e,n){this.verificationId=e,this.onConfirmation=n}confirm(e){const n=za._fromVerification(this.verificationId,e);return this.onConfirmation(n)}}async function bF(t,e,n){if(Fe(t.app))return Promise.reject(Vt(t));const i=et(t),r=await eg(i,e,J(n));return new gw(r,s=>Yp(i,s))}async function EF(t,e,n){const i=J(t);await Wp(!1,i,"phone");const r=await eg(i.auth,e,J(n));return new gw(r,s=>aN(i,s))}async function AF(t,e,n){const i=J(t);if(Fe(i.auth.app))return Promise.reject(Vt(i.auth));const r=await eg(i.auth,e,J(n));return new gw(r,s=>oN(i,s))}async function eg(t,e,n){var i;if(!t._getRecaptchaConfig())try{await eB(t)}catch{console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let r;if(typeof e=="string"?r={phoneNumber:e}:r=e,"session"in r){const s=r.session;if("phoneNumber"in r){H(s.type==="enroll",t,"internal-error");const a={idToken:s.credential,phoneEnrollmentInfo:{phoneNumber:r.phoneNumber,clientType:"CLIENT_TYPE_WEB"}};return(await Rs(t,a,"mfaSmsEnrollment",async(h,d)=>{if(d.phoneEnrollmentInfo.captchaResponse===qu){H((n==null?void 0:n.type)===Hu,h,"argument-error");const f=await t_(h,d,n);return SI(h,f)}return SI(h,d)},"PHONE_PROVIDER").catch(h=>Promise.reject(h))).phoneSessionInfo.sessionInfo}else{H(s.type==="signin",t,"internal-error");const a=((i=r.multiFactorHint)==null?void 0:i.uid)||r.multiFactorUid;H(a,t,"missing-multi-factor-info");const o={mfaPendingCredential:s.credential,mfaEnrollmentId:a,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}};return(await Rs(t,o,"mfaSmsSignIn",async(d,f)=>{if(f.phoneSignInInfo.captchaResponse===qu){H((n==null?void 0:n.type)===Hu,d,"argument-error");const p=await t_(d,f,n);return xI(d,p)}return xI(d,f)},"PHONE_PROVIDER").catch(d=>Promise.reject(d))).phoneResponseInfo.sessionInfo}}else{const s={phoneNumber:r.phoneNumber,clientType:"CLIENT_TYPE_WEB"};return(await Rs(t,s,"sendVerificationCode",async(c,h)=>{if(h.captchaResponse===qu){H((n==null?void 0:n.type)===Hu,c,"argument-error");const d=await t_(c,h,n);return EI(c,d)}return EI(c,h)},"PHONE_PROVIDER").catch(c=>Promise.reject(c))).sessionInfo}}finally{n==null||n._reset()}}async function SF(t,e){const n=J(t);if(Fe(n.auth.app))return Promise.reject(Vt(n.auth));await lw(n,e)}async function t_(t,e,n){H(n.type===Hu,t,"argument-error");const i=await n.verify();H(typeof i=="string",t,"argument-error");const r={...e};if("phoneEnrollmentInfo"in r){const s=r.phoneEnrollmentInfo.phoneNumber,a=r.phoneEnrollmentInfo.captchaResponse,o=r.phoneEnrollmentInfo.clientType,l=r.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(r,{phoneEnrollmentInfo:{phoneNumber:s,recaptchaToken:i,captchaResponse:a,clientType:o,recaptchaVersion:l}}),r}else if("phoneSignInInfo"in r){const s=r.phoneSignInInfo.captchaResponse,a=r.phoneSignInInfo.clientType,o=r.phoneSignInInfo.recaptchaVersion;return Object.assign(r,{phoneSignInInfo:{recaptchaToken:i,captchaResponse:s,clientType:a,recaptchaVersion:o}}),r}else return Object.assign(r,{recaptchaToken:i}),r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wa=class Qf{constructor(e){this.providerId=Qf.PROVIDER_ID,this.auth=et(e)}verifyPhoneNumber(e,n){return eg(this.auth,e,J(n))}static credential(e,n){return za._fromVerification(e,n)}static credentialFromResult(e){const n=e;return Qf.credentialFromTaggedObject(n)}static credentialFromError(e){return Qf.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:n,temporaryProof:i}=e;return n&&i?za._fromTokenResponse(n,i):null}};Wa.PROVIDER_ID="phone";Wa.PHONE_SIGN_IN_METHOD="phone";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function po(t,e){return e?Vn(e):(H(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yw extends gc{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return yr(e,this._buildIdpRequest())}_linkToIdToken(e,n){return yr(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return yr(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function IF(t){return sN(t.auth,new yw(t),t.bypassAuthState)}function RF(t){const{auth:e,user:n}=t;return H(n,e,"internal-error"),rN(n,new yw(t),t.bypassAuthState)}async function xF(t){const{auth:e,user:n}=t;return H(n,e,"internal-error"),lw(n,new yw(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yN{constructor(e,n,i,r,s=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:r,tenantId:s,error:a,type:o}=e;if(a){this.reject(a);return}const l={auth:this.auth,requestUri:n,sessionId:i,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return IF;case"linkViaPopup":case"linkViaRedirect":return xF;case"reauthViaPopup":case"reauthViaRedirect":return RF;default:Ht(this.auth,"internal-error")}}resolve(e){bi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){bi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CF=new hd(2e3,1e4);async function PF(t,e,n){if(Fe(t.app))return Promise.reject(St(t,"operation-not-supported-in-this-environment"));const i=et(t);pc(t,e,Mr);const r=po(i,n);return new hr(i,"signInViaPopup",e,r).executeNotNull()}async function DF(t,e,n){const i=J(t);if(Fe(i.auth.app))return Promise.reject(St(i.auth,"operation-not-supported-in-this-environment"));pc(i.auth,e,Mr);const r=po(i.auth,n);return new hr(i.auth,"reauthViaPopup",e,r,i).executeNotNull()}async function NF(t,e,n){const i=J(t);pc(i.auth,e,Mr);const r=po(i.auth,n);return new hr(i.auth,"linkViaPopup",e,r,i).executeNotNull()}class hr extends yN{constructor(e,n,i,r,s){super(e,n,r,s),this.provider=i,this.authWindow=null,this.pollId=null,hr.currentPopupAction&&hr.currentPopupAction.cancel(),hr.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return H(e,this.auth,"internal-error"),e}async onExecution(){bi(this.filter.length===1,"Popup operations only handle one event");const e=gd();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(St(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(St(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,hr.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if((i=(n=this.authWindow)==null?void 0:n.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(St(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,CF.get())};e()}}hr.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kF="pendingRedirect",Gu=new Map;class VF extends yN{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=Gu.get(this.auth._key());if(!e){try{const i=await OF(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}Gu.set(this.auth._key(),e)}return this.bypassAuthState||Gu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function OF(t,e){const n=vN(e),i=_N(t);if(!await i._isAvailable())return!1;const r=await i._get(n)==="true";return await i._remove(n),r}async function _w(t,e){return _N(t)._set(vN(e),"true")}function MF(){Gu.clear()}function vw(t,e){Gu.set(t._key(),e)}function _N(t){return Vn(t._redirectPersistence)}function vN(t){return Ua(kF,t.config.apiKey,t.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LF(t,e,n){return UF(t,e,n)}async function UF(t,e,n){if(Fe(t.app))return Promise.reject(Vt(t));const i=et(t);pc(t,e,Mr),await i._initializationPromise;const r=po(i,n);return await _w(r,i),r._openRedirect(i,e,"signInViaRedirect")}function zF(t,e,n){return jF(t,e,n)}async function jF(t,e,n){const i=J(t);if(pc(i.auth,e,Mr),Fe(i.auth.app))return Promise.reject(Vt(i.auth));await i.auth._initializationPromise;const r=po(i.auth,n);await _w(r,i.auth);const s=await TN(i);return r._openRedirect(i.auth,e,"reauthViaRedirect",s)}function BF(t,e,n){return FF(t,e,n)}async function FF(t,e,n){const i=J(t);pc(i.auth,e,Mr),await i.auth._initializationPromise;const r=po(i.auth,n);await Wp(!1,i,e.providerId),await _w(r,i.auth);const s=await TN(i);return r._openRedirect(i.auth,e,"linkViaRedirect",s)}async function qF(t,e){return await et(t)._initializationPromise,tg(t,e,!1)}async function tg(t,e,n=!1){if(Fe(t.app))return Promise.reject(Vt(t));const i=et(t),r=po(i,e),a=await new VF(i,r,n).execute();return a&&!n&&(delete a.user._redirectEventId,await i._persistUserIfCurrent(a.user),await i._setRedirectUser(null,e)),a}async function TN(t){const e=gd(`${t.uid}:::`);return t._redirectEventId=e,await t.auth._setRedirectUser(t),await t.auth._persistUserIfCurrent(t),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HF=10*60*1e3;class wN{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!GF(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!bN(e)){const r=((i=e.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";n.onError(St(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=HF&&this.cachedEventUids.clear(),this.cachedEventUids.has(CI(e))}saveEventToCache(e){this.cachedEventUids.add(CI(e)),this.lastProcessedEventTime=Date.now()}}function CI(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function bN({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function GF(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return bN(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EN(t,e={}){return lt(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $F=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,KF=/^https?/;async function QF(t){if(t.config.emulator)return;const{authorizedDomains:e}=await EN(t);for(const n of e)try{if(WF(n))return}catch{}Ht(t,"unauthorized-domain")}function WF(t){const e=Ih(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===i}if(!KF.test(n))return!1;if($F.test(t))return i===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YF=new hd(3e4,6e4);function PI(){const t=yt().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function XF(t){return new Promise((e,n)=>{var r,s,a;function i(){PI(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{PI(),n(St(t,"network-request-failed"))},timeout:YF.get()})}if((s=(r=yt().gapi)==null?void 0:r.iframes)!=null&&s.Iframe)e(gapi.iframes.getContext());else if((a=yt().gapi)!=null&&a.load)i();else{const o=X2("iframefcb");return yt()[o]=()=>{gapi.load?i():n(St(t,"network-request-failed"))},ow(`${Gj()}?onload=${o}`).catch(l=>n(l))}}).catch(e=>{throw Wf=null,e})}let Wf=null;function JF(t){return Wf=Wf||XF(t),Wf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZF=new hd(5e3,15e3),eq="__/auth/iframe",tq="emulator/auth/iframe",nq={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},iq=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function rq(t){const e=t.config;H(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?aw(e,tq):`https://${t.config.authDomain}/${eq}`,i={apiKey:e.apiKey,appName:t.name,v:Vr},r=iq.get(t.config.apiHost);r&&(i.eid=r);const s=t._getFrameworks();return s.length&&(i.fw=s.join(",")),`${n}?${mc(i).slice(1)}`}async function sq(t){const e=await JF(t),n=yt().gapi;return H(n,t,"internal-error"),e.open({where:document.body,url:rq(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:nq,dontclear:!0},i=>new Promise(async(r,s)=>{await i.restyle({setHideOnLeave:!1});const a=St(t,"network-request-failed"),o=yt().setTimeout(()=>{s(a)},ZF.get());function l(){yt().clearTimeout(o),r(i)}i.ping(l).then(l,()=>{s(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aq={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},oq=500,lq=600,cq="_blank",uq="http://localhost";class DI{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function hq(t,e,n,i=oq,r=lq){const s=Math.max((window.screen.availHeight-r)/2,0).toString(),a=Math.max((window.screen.availWidth-i)/2,0).toString();let o="";const l={...aq,width:i.toString(),height:r.toString(),top:s,left:a},c=Ze().toLowerCase();n&&(o=G2(c)?cq:n),q2(c)&&(e=e||uq,l.scrollbars="yes");const h=Object.entries(l).reduce((f,[p,w])=>`${f}${p}=${w},`,"");if(Oj(c)&&o!=="_self")return dq(e||"",o),new DI(null);const d=window.open(e||"",o,h);H(d,t,"popup-blocked");try{d.focus()}catch{}return new DI(d)}function dq(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fq="__/auth/handler",mq="emulator/auth/handler",pq=encodeURIComponent("fac");async function Ov(t,e,n,i,r,s){H(t.config.authDomain,t,"auth-domain-config-required"),H(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:Vr,eventId:r};if(e instanceof Mr){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",Fz(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,d]of Object.entries(s||{}))a[h]=d}if(e instanceof yc){const h=e.getScopes().filter(d=>d!=="");h.length>0&&(a.scopes=h.join(","))}t.tenantId&&(a.tid=t.tenantId);const o=a;for(const h of Object.keys(o))o[h]===void 0&&delete o[h];const l=await t._getAppCheckToken(),c=l?`#${pq}=${encodeURIComponent(l)}`:"";return`${gq(t)}?${mc(o).slice(1)}${c}`}function gq({config:t}){return t.emulator?aw(t,mq):`https://${t.authDomain}/${fq}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n_="webStorageSupport";class yq{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Qa,this._completeRedirectFn=tg,this._overrideRedirectResult=vw}async _openPopup(e,n,i,r){var a;bi((a=this.eventManagers[e._key()])==null?void 0:a.manager,"_initialize() not called before _openPopup()");const s=await Ov(e,n,i,Ih(),r);return hq(e,s,gd())}async _openRedirect(e,n,i,r){await this._originValidation(e);const s=await Ov(e,n,i,Ih(),r);return sF(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:s}=this.eventManagers[n];return r?Promise.resolve(r):(bi(s,"If manager is not set, promise should be"),s)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await sq(e),i=new wN(e);return n.register("authEvent",r=>(H(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(n_,{type:n_},r=>{var a;const s=(a=r==null?void 0:r[0])==null?void 0:a[n_];s!==void 0&&n(!!s),Ht(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=QF(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return W2()||H2()||fd()}}const _q=yq;class vq{constructor(e){this.factorId=e}_process(e,n,i){switch(n.type){case"enroll":return this._finalizeEnroll(e,n.credential,i);case"signin":return this._finalizeSignIn(e,n.credential);default:return Ui("unexpected MultiFactorSessionType")}}}class Tw extends vq{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new Tw(e)}_finalizeEnroll(e,n,i){return JB(e,{idToken:n,displayName:i,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,n){return mF(e,{mfaPendingCredential:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class AN{constructor(){}static assertion(e){return Tw._fromCredential(e)}}AN.FACTOR_ID="phone";var NI="@firebase/auth",kI="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tq{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){H(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wq(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function bq(t){xr(new hi("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=i.options;H(a&&!a.includes(":"),"invalid-api-key",{appName:i.name});const l={apiKey:a,authDomain:o,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Y2(t)},c=new Bj(i,r,s,l);return tB(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),xr(new hi("auth-internal",e=>{const n=et(e.getProvider("auth").getImmediate());return(i=>new Tq(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),jn(NI,kI,wq(t)),jn(NI,kI,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eq=5*60;Dz("authIdTokenMaxAge");function Aq(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}Fj({loadJS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=r=>{const s=St("internal-error");s.customData=r,n(s)},i.type="text/javascript",i.charset="UTF-8",Aq().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});bq("Browser");/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ya(){return window}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sq=2e3;async function Iq(t,e,n){const{BuildInfo:i}=Ya();bi(e.sessionId,"AuthEvent did not contain a session ID");const r=await Dq(e.sessionId),s={};return fd()?s.ibi=i.packageName:dd()?s.apn=i.packageName:Ht(t,"operation-not-supported-in-this-environment"),i.displayName&&(s.appDisplayName=i.displayName),s.sessionId=r,Ov(t,n,e.type,void 0,e.eventId??void 0,s)}async function Rq(t){const{BuildInfo:e}=Ya(),n={};fd()?n.iosBundleId=e.packageName:dd()?n.androidPackageName=e.packageName:Ht(t,"operation-not-supported-in-this-environment"),await EN(t,n)}function xq(t){const{cordova:e}=Ya();return new Promise(n=>{e.plugins.browsertab.isAvailable(i=>{let r=null;i?e.plugins.browsertab.openUrl(t):r=e.InAppBrowser.open(t,Vj()?"_blank":"_system","location=yes"),n(r)})})}async function Cq(t,e,n){const{cordova:i}=Ya();let r=()=>{};try{await new Promise((s,a)=>{let o=null;function l(){var f;s();const d=(f=i.plugins.browsertab)==null?void 0:f.close;typeof d=="function"&&d(),typeof(n==null?void 0:n.close)=="function"&&n.close()}function c(){o||(o=window.setTimeout(()=>{a(St(t,"redirect-cancelled-by-user"))},Sq))}function h(){(document==null?void 0:document.visibilityState)==="visible"&&c()}e.addPassiveListener(l),document.addEventListener("resume",c,!1),dd()&&document.addEventListener("visibilitychange",h,!1),r=()=>{e.removePassiveListener(l),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",h,!1),o&&window.clearTimeout(o)}})}finally{r()}}function Pq(t){var n,i,r,s,a,o,l,c,h,d;const e=Ya();H(typeof((n=e==null?void 0:e.universalLinks)==null?void 0:n.subscribe)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),H(typeof((i=e==null?void 0:e.BuildInfo)==null?void 0:i.packageName)<"u",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),H(typeof((a=(s=(r=e==null?void 0:e.cordova)==null?void 0:r.plugins)==null?void 0:s.browsertab)==null?void 0:a.openUrl)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),H(typeof((c=(l=(o=e==null?void 0:e.cordova)==null?void 0:o.plugins)==null?void 0:l.browsertab)==null?void 0:c.isAvailable)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),H(typeof((d=(h=e==null?void 0:e.cordova)==null?void 0:h.InAppBrowser)==null?void 0:d.open)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}async function Dq(t){const e=Nq(t),n=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(n)).map(r=>r.toString(16).padStart(2,"0")).join("")}function Nq(t){if(bi(/[0-9a-zA-Z]+/.test(t),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return new TextEncoder().encode(t);const e=new ArrayBuffer(t.length),n=new Uint8Array(e);for(let i=0;i<t.length;i++)n[i]=t.charCodeAt(i);return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kq=20;class Vq extends wN{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(e=>{this.resolveInitialized=e})}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInitialized(),this.passiveListeners.forEach(n=>n(e)),super.onEvent(e)}async initialized(){await this.initPromise}}function Oq(t,e,n=null){return{type:e,eventId:n,urlResponse:null,sessionId:Uq(),postBody:null,tenantId:t.tenantId,error:St(t,"no-auth-event")}}function Mq(t,e){return Mv()._set(Lv(t),e)}async function VI(t){const e=await Mv()._get(Lv(t));return e&&await Mv()._remove(Lv(t)),e}function Lq(t,e){var i,r;const n=jq(e);if(n.includes("/__/auth/callback")){const s=Yf(n),a=s.firebaseError?zq(decodeURIComponent(s.firebaseError)):null,o=(r=(i=a==null?void 0:a.code)==null?void 0:i.split("auth/"))==null?void 0:r[1],l=o?St(o):null;return l?{type:t.type,eventId:t.eventId,tenantId:t.tenantId,error:l,urlResponse:null,sessionId:null,postBody:null}:{type:t.type,eventId:t.eventId,tenantId:t.tenantId,sessionId:t.sessionId,urlResponse:n,postBody:null}}return null}function Uq(){const t=[],e="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<kq;n++){const i=Math.floor(Math.random()*e.length);t.push(e.charAt(i))}return t.join("")}function Mv(){return Vn(mw)}function Lv(t){return Ua("authEvent",t.config.apiKey,t.name)}function zq(t){try{return JSON.parse(t)}catch{return null}}function jq(t){const e=Yf(t),n=e.link?decodeURIComponent(e.link):void 0,i=Yf(n).link,r=e.deep_link_id?decodeURIComponent(e.deep_link_id):void 0;return Yf(r).link||r||i||n||t}function Yf(t){if(!(t!=null&&t.includes("?")))return{};const[e,...n]=t.split("?");return el(n.join("?"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bq=500;class Fq{constructor(){this._redirectPersistence=Qa,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=tg,this._overrideRedirectResult=vw}async _initialize(e){const n=e._key();let i=this.eventManagers.get(n);return i||(i=new Vq(e),this.eventManagers.set(n,i),this.attachCallbackListeners(e,i)),i}_openPopup(e){Ht(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,n,i,r){Pq(e);const s=await this._initialize(e);await s.initialized(),s.resetRedirect(),MF(),await this._originValidation(e);const a=Oq(e,i,r);await Mq(e,a);const o=await Iq(e,a,n),l=await xq(o);return Cq(e,s,l)}_isIframeWebStorageSupported(e,n){throw new Error("Method not implemented.")}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Rq(e)),this.originValidationPromises[n]}attachCallbackListeners(e,n){const{universalLinks:i,handleOpenURL:r,BuildInfo:s}=Ya(),a=setTimeout(async()=>{await VI(e),n.onEvent(OI())},Bq),o=async h=>{clearTimeout(a);const d=await VI(e);let f=null;d&&(h!=null&&h.url)&&(f=Lq(d,h.url)),n.onEvent(f||OI())};typeof i<"u"&&typeof i.subscribe=="function"&&i.subscribe(null,o);const l=r,c=`${s.packageName.toLowerCase()}://`;Ya().handleOpenURL=async h=>{if(h.toLowerCase().startsWith(c)&&o({url:h}),typeof l=="function")try{l(h)}catch(d){console.error(d)}}}}const qq=Fq;function OI(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:St("no-auth-event")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hq(t,e){et(t)._logFramework(e)}var Gq="@firebase/auth-compat",$q="0.6.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kq=1e3;function $u(){var t;return((t=self==null?void 0:self.location)==null?void 0:t.protocol)||null}function Qq(){return $u()==="http:"||$u()==="https:"}function SN(t=Ze()){return!!(($u()==="file:"||$u()==="ionic:"||$u()==="capacitor:")&&t.toLowerCase().match(/iphone|ipad|ipod|android/))}function Wq(){return XT()||Hp()}function Yq(){return y2()&&(document==null?void 0:document.documentMode)===11}function Xq(t=Ze()){return/Edge\/\d+/.test(t)}function Jq(t=Ze()){return Yq()||Xq(t)}function IN(){try{const t=self.localStorage,e=gd();if(t)return t.setItem(e,"1"),t.removeItem(e),Jq()?Eh():!0}catch{return ww()&&Eh()}return!1}function ww(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function i_(){return(Qq()||g2()||SN())&&!Wq()&&IN()&&!ww()}function RN(){return SN()&&typeof document<"u"}async function Zq(){return RN()?new Promise(t=>{const e=setTimeout(()=>{t(!1)},Kq);document.addEventListener("deviceready",()=>{clearTimeout(e),t(!0)})}):!1}function e8(){return typeof window<"u"?window:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dn={LOCAL:"local",NONE:"none",SESSION:"session"},nu=H,xN="persistence";function t8(t,e){if(nu(Object.values(Dn).includes(e),t,"invalid-persistence-type"),XT()){nu(e!==Dn.SESSION,t,"unsupported-persistence-type");return}if(Hp()){nu(e===Dn.NONE,t,"unsupported-persistence-type");return}if(ww()){nu(e===Dn.NONE||e===Dn.LOCAL&&Eh(),t,"unsupported-persistence-type");return}nu(e===Dn.NONE||IN(),t,"unsupported-persistence-type")}async function Uv(t){await t._initializationPromise;const e=CN(),n=Ua(xN,t.config.apiKey,t.name);e&&e.setItem(n,t._getPersistenceType())}function n8(t,e){const n=CN();if(!n)return[];const i=Ua(xN,t,e);switch(n.getItem(i)){case Dn.NONE:return[kl];case Dn.LOCAL:return[Ch,Qa];case Dn.SESSION:return[Qa];default:return[]}}function CN(){var t;try{return((t=e8())==null?void 0:t.sessionStorage)||null}catch{return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i8=H;class ms{constructor(){this.browserResolver=Vn(_q),this.cordovaResolver=Vn(qq),this.underlyingResolver=null,this._redirectPersistence=Qa,this._completeRedirectFn=tg,this._overrideRedirectResult=vw}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,n,i,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,n,i,r)}async _openRedirect(e,n,i,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,n,i,r)}_isIframeWebStorageSupported(e,n){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,n)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return RN()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return i8(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await Zq();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PN(t){return t.unwrap()}function r8(t){return t.wrapped()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s8(t){return DN(t)}function a8(t,e){var i;const n=(i=e.customData)==null?void 0:i._tokenResponse;if((e==null?void 0:e.code)==="auth/multi-factor-auth-required"){const r=e;r.resolver=new o8(t,XB(t,e))}else if(n){const r=DN(e),s=e;r&&(s.credential=r,s.tenantId=n.tenantId||void 0,s.email=n.email||void 0,s.phoneNumber=n.phoneNumber||void 0)}}function DN(t){const{_tokenResponse:e}=t instanceof Zt?t.customData:t;if(!e)return null;if(!(t instanceof Zt)&&"temporaryProof"in e&&"phoneNumber"in e)return Wa.credentialFromResult(t);const n=e.providerId;if(!n||n===eu.PASSWORD)return null;let i;switch(n){case eu.GOOGLE:i=Di;break;case eu.FACEBOOK:i=Pi;break;case eu.GITHUB:i=Ni;break;case eu.TWITTER:i=ki;break;default:const{oauthIdToken:r,oauthAccessToken:s,oauthTokenSecret:a,pendingToken:o,nonce:l}=e;return!s&&!a&&!r&&!o?null:o?n.startsWith("saml.")?Vl._create(n,o):Qi._fromParams({providerId:n,signInMethod:n,pendingToken:o,idToken:r,accessToken:s}):new pl(n).credential({idToken:r,accessToken:s,rawNonce:l})}return t instanceof Zt?i.credentialFromError(t):i.credentialFromResult(t)}function _n(t,e){return e.catch(n=>{throw n instanceof Zt&&a8(t,n),n}).then(n=>{const i=n.operationType,r=n.user;return{operationType:i,credential:s8(n),additionalUserInfo:YB(n),user:ng.getOrCreate(r)}})}async function zv(t,e){const n=await e;return{verificationId:n.verificationId,confirm:i=>_n(t,n.confirm(i))}}class o8{constructor(e,n){this.resolver=n,this.auth=r8(e)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return _n(PN(this.auth),this.resolver.resolveSignIn(e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ng=class _u{constructor(e){this._delegate=e,this.multiFactor=eF(e)}static getOrCreate(e){return _u.USER_MAP.has(e)||_u.USER_MAP.set(e,new _u(e)),_u.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return _n(this.auth,aN(this._delegate,e))}async linkWithPhoneNumber(e,n){return zv(this.auth,EF(this._delegate,e,n))}async linkWithPopup(e){return _n(this.auth,NF(this._delegate,e,ms))}async linkWithRedirect(e){return await Uv(et(this.auth)),BF(this._delegate,e,ms)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return _n(this.auth,oN(this._delegate,e))}reauthenticateWithPhoneNumber(e,n){return zv(this.auth,AF(this._delegate,e,n))}reauthenticateWithPopup(e){return _n(this.auth,DF(this._delegate,e,ms))}async reauthenticateWithRedirect(e){return await Uv(et(this.auth)),zF(this._delegate,e,ms)}sendEmailVerification(e){return zB(this._delegate,e)}async unlink(e){return await SB(this._delegate,e),this}updateEmail(e){return qB(this._delegate,e)}updatePassword(e){return HB(this._delegate,e)}updatePhoneNumber(e){return SF(this._delegate,e)}updateProfile(e){return FB(this._delegate,e)}verifyBeforeUpdateEmail(e,n){return jB(this._delegate,e,n)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}};ng.USER_MAP=new WeakMap;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iu=H;class jv{constructor(e,n){if(this.app=e,n.isInitialized()){this._delegate=n.getImmediate(),this.linkUnderlyingAuth();return}const{apiKey:i}=e.options;iu(i,"invalid-api-key",{appName:e.name}),iu(i,"invalid-api-key",{appName:e.name});const r=typeof window<"u"?ms:void 0;this._delegate=n.initialize({options:{persistence:l8(i,e.name),popupRedirectResolver:r}}),this._delegate._updateErrorMap(mj),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?ng.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,n){nB(this._delegate,e,n)}applyActionCode(e){return PB(this._delegate,e)}checkActionCode(e){return lN(this._delegate,e)}confirmPasswordReset(e,n){return CB(this._delegate,e,n)}async createUserWithEmailAndPassword(e,n){return _n(this._delegate,NB(this._delegate,e,n))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return UB(this._delegate,e)}isSignInWithEmailLink(e){return OB(this._delegate,e)}async getRedirectResult(){iu(i_(),this._delegate,"operation-not-supported-in-this-environment");const e=await qF(this._delegate,ms);return e?_n(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){Hq(this._delegate,e)}onAuthStateChanged(e,n,i){const{next:r,error:s,complete:a}=MI(e,n,i);return this._delegate.onAuthStateChanged(r,s,a)}onIdTokenChanged(e,n,i){const{next:r,error:s,complete:a}=MI(e,n,i);return this._delegate.onIdTokenChanged(r,s,a)}sendSignInLinkToEmail(e,n){return VB(this._delegate,e,n)}sendPasswordResetEmail(e,n){return xB(this._delegate,e,n||void 0)}async setPersistence(e){t8(this._delegate,e);let n;switch(e){case Dn.SESSION:n=Qa;break;case Dn.LOCAL:n=await Vn(Ch)._isAvailable()?Ch:mw;break;case Dn.NONE:n=kl;break;default:return Ht("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(n)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return _n(this._delegate,AB(this._delegate))}signInWithCredential(e){return _n(this._delegate,Yp(this._delegate,e))}signInWithCustomToken(e){return _n(this._delegate,RB(this._delegate,e))}signInWithEmailAndPassword(e,n){return _n(this._delegate,kB(this._delegate,e,n))}signInWithEmailLink(e,n){return _n(this._delegate,MB(this._delegate,e,n))}signInWithPhoneNumber(e,n){return zv(this._delegate,bF(this._delegate,e,n))}async signInWithPopup(e){return iu(i_(),this._delegate,"operation-not-supported-in-this-environment"),_n(this._delegate,PF(this._delegate,e,ms))}async signInWithRedirect(e){return iu(i_(),this._delegate,"operation-not-supported-in-this-environment"),await Uv(this._delegate),LF(this._delegate,e,ms)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return DB(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}jv.Persistence=Dn;function MI(t,e,n){let i=t;typeof t!="function"&&({next:i,error:e,complete:n}=t);const r=i;return{next:a=>r(a&&ng.getOrCreate(a)),error:e,complete:n}}function l8(t,e){const n=n8(t,e);if(typeof self<"u"&&!n.includes(Ch)&&n.push(Ch),typeof window<"u")for(const i of[mw,Qa])n.includes(i)||n.push(i);return n.includes(kl)||n.push(kl),n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bw{static credential(e,n){return Wa.credential(e,n)}constructor(){this.providerId="phone",this._delegate=new Wa(PN(Yt.auth()))}verifyPhoneNumber(e,n){return this._delegate.verifyPhoneNumber(e,n)}unwrap(){return this._delegate}}bw.PHONE_SIGN_IN_METHOD=Wa.PHONE_SIGN_IN_METHOD;bw.PROVIDER_ID=Wa.PROVIDER_ID;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c8=H;class u8{constructor(e,n,i=Yt.app()){var r;c8((r=i.options)==null?void 0:r.apiKey,"invalid-api-key",{appName:i.name}),this._delegate=new TF(i.auth(),e,n),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h8="auth-compat";function d8(t){t.INTERNAL.registerComponent(new hi(h8,e=>{const n=e.getProvider("app-compat").getImmediate(),i=e.getProvider("auth");return new jv(n,i)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Io.EMAIL_SIGNIN,PASSWORD_RESET:Io.PASSWORD_RESET,RECOVER_EMAIL:Io.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:Io.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:Io.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:Io.VERIFY_EMAIL}},EmailAuthProvider:Js,FacebookAuthProvider:Pi,GithubAuthProvider:Ni,GoogleAuthProvider:Di,OAuthProvider:pl,SAMLAuthProvider:Km,PhoneAuthProvider:bw,PhoneMultiFactorGenerator:AN,RecaptchaVerifier:u8,TwitterAuthProvider:ki,Auth:jv,AuthCredential:gc,Error:Zt}).setInstantiationMode("LAZY").setMultipleInstances(!1)),t.registerVersion(Gq,$q)}d8(Yt);var LI=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var xs,NN;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(S,b){function R(){}R.prototype=b.prototype,S.F=b.prototype,S.prototype=new R,S.prototype.constructor=S,S.D=function(D,N,k){for(var P=Array(arguments.length-2),ie=2;ie<arguments.length;ie++)P[ie-2]=arguments[ie];return b.prototype[N].apply(D,P)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,n),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(S,b,R){R||(R=0);const D=Array(16);if(typeof b=="string")for(var N=0;N<16;++N)D[N]=b.charCodeAt(R++)|b.charCodeAt(R++)<<8|b.charCodeAt(R++)<<16|b.charCodeAt(R++)<<24;else for(N=0;N<16;++N)D[N]=b[R++]|b[R++]<<8|b[R++]<<16|b[R++]<<24;b=S.g[0],R=S.g[1],N=S.g[2];let k=S.g[3],P;P=b+(k^R&(N^k))+D[0]+3614090360&4294967295,b=R+(P<<7&4294967295|P>>>25),P=k+(N^b&(R^N))+D[1]+3905402710&4294967295,k=b+(P<<12&4294967295|P>>>20),P=N+(R^k&(b^R))+D[2]+606105819&4294967295,N=k+(P<<17&4294967295|P>>>15),P=R+(b^N&(k^b))+D[3]+3250441966&4294967295,R=N+(P<<22&4294967295|P>>>10),P=b+(k^R&(N^k))+D[4]+4118548399&4294967295,b=R+(P<<7&4294967295|P>>>25),P=k+(N^b&(R^N))+D[5]+1200080426&4294967295,k=b+(P<<12&4294967295|P>>>20),P=N+(R^k&(b^R))+D[6]+2821735955&4294967295,N=k+(P<<17&4294967295|P>>>15),P=R+(b^N&(k^b))+D[7]+4249261313&4294967295,R=N+(P<<22&4294967295|P>>>10),P=b+(k^R&(N^k))+D[8]+1770035416&4294967295,b=R+(P<<7&4294967295|P>>>25),P=k+(N^b&(R^N))+D[9]+2336552879&4294967295,k=b+(P<<12&4294967295|P>>>20),P=N+(R^k&(b^R))+D[10]+4294925233&4294967295,N=k+(P<<17&4294967295|P>>>15),P=R+(b^N&(k^b))+D[11]+2304563134&4294967295,R=N+(P<<22&4294967295|P>>>10),P=b+(k^R&(N^k))+D[12]+1804603682&4294967295,b=R+(P<<7&4294967295|P>>>25),P=k+(N^b&(R^N))+D[13]+4254626195&4294967295,k=b+(P<<12&4294967295|P>>>20),P=N+(R^k&(b^R))+D[14]+2792965006&4294967295,N=k+(P<<17&4294967295|P>>>15),P=R+(b^N&(k^b))+D[15]+1236535329&4294967295,R=N+(P<<22&4294967295|P>>>10),P=b+(N^k&(R^N))+D[1]+4129170786&4294967295,b=R+(P<<5&4294967295|P>>>27),P=k+(R^N&(b^R))+D[6]+3225465664&4294967295,k=b+(P<<9&4294967295|P>>>23),P=N+(b^R&(k^b))+D[11]+643717713&4294967295,N=k+(P<<14&4294967295|P>>>18),P=R+(k^b&(N^k))+D[0]+3921069994&4294967295,R=N+(P<<20&4294967295|P>>>12),P=b+(N^k&(R^N))+D[5]+3593408605&4294967295,b=R+(P<<5&4294967295|P>>>27),P=k+(R^N&(b^R))+D[10]+38016083&4294967295,k=b+(P<<9&4294967295|P>>>23),P=N+(b^R&(k^b))+D[15]+3634488961&4294967295,N=k+(P<<14&4294967295|P>>>18),P=R+(k^b&(N^k))+D[4]+3889429448&4294967295,R=N+(P<<20&4294967295|P>>>12),P=b+(N^k&(R^N))+D[9]+568446438&4294967295,b=R+(P<<5&4294967295|P>>>27),P=k+(R^N&(b^R))+D[14]+3275163606&4294967295,k=b+(P<<9&4294967295|P>>>23),P=N+(b^R&(k^b))+D[3]+4107603335&4294967295,N=k+(P<<14&4294967295|P>>>18),P=R+(k^b&(N^k))+D[8]+1163531501&4294967295,R=N+(P<<20&4294967295|P>>>12),P=b+(N^k&(R^N))+D[13]+2850285829&4294967295,b=R+(P<<5&4294967295|P>>>27),P=k+(R^N&(b^R))+D[2]+4243563512&4294967295,k=b+(P<<9&4294967295|P>>>23),P=N+(b^R&(k^b))+D[7]+1735328473&4294967295,N=k+(P<<14&4294967295|P>>>18),P=R+(k^b&(N^k))+D[12]+2368359562&4294967295,R=N+(P<<20&4294967295|P>>>12),P=b+(R^N^k)+D[5]+4294588738&4294967295,b=R+(P<<4&4294967295|P>>>28),P=k+(b^R^N)+D[8]+2272392833&4294967295,k=b+(P<<11&4294967295|P>>>21),P=N+(k^b^R)+D[11]+1839030562&4294967295,N=k+(P<<16&4294967295|P>>>16),P=R+(N^k^b)+D[14]+4259657740&4294967295,R=N+(P<<23&4294967295|P>>>9),P=b+(R^N^k)+D[1]+2763975236&4294967295,b=R+(P<<4&4294967295|P>>>28),P=k+(b^R^N)+D[4]+1272893353&4294967295,k=b+(P<<11&4294967295|P>>>21),P=N+(k^b^R)+D[7]+4139469664&4294967295,N=k+(P<<16&4294967295|P>>>16),P=R+(N^k^b)+D[10]+3200236656&4294967295,R=N+(P<<23&4294967295|P>>>9),P=b+(R^N^k)+D[13]+681279174&4294967295,b=R+(P<<4&4294967295|P>>>28),P=k+(b^R^N)+D[0]+3936430074&4294967295,k=b+(P<<11&4294967295|P>>>21),P=N+(k^b^R)+D[3]+3572445317&4294967295,N=k+(P<<16&4294967295|P>>>16),P=R+(N^k^b)+D[6]+76029189&4294967295,R=N+(P<<23&4294967295|P>>>9),P=b+(R^N^k)+D[9]+3654602809&4294967295,b=R+(P<<4&4294967295|P>>>28),P=k+(b^R^N)+D[12]+3873151461&4294967295,k=b+(P<<11&4294967295|P>>>21),P=N+(k^b^R)+D[15]+530742520&4294967295,N=k+(P<<16&4294967295|P>>>16),P=R+(N^k^b)+D[2]+3299628645&4294967295,R=N+(P<<23&4294967295|P>>>9),P=b+(N^(R|~k))+D[0]+4096336452&4294967295,b=R+(P<<6&4294967295|P>>>26),P=k+(R^(b|~N))+D[7]+1126891415&4294967295,k=b+(P<<10&4294967295|P>>>22),P=N+(b^(k|~R))+D[14]+2878612391&4294967295,N=k+(P<<15&4294967295|P>>>17),P=R+(k^(N|~b))+D[5]+4237533241&4294967295,R=N+(P<<21&4294967295|P>>>11),P=b+(N^(R|~k))+D[12]+1700485571&4294967295,b=R+(P<<6&4294967295|P>>>26),P=k+(R^(b|~N))+D[3]+2399980690&4294967295,k=b+(P<<10&4294967295|P>>>22),P=N+(b^(k|~R))+D[10]+4293915773&4294967295,N=k+(P<<15&4294967295|P>>>17),P=R+(k^(N|~b))+D[1]+2240044497&4294967295,R=N+(P<<21&4294967295|P>>>11),P=b+(N^(R|~k))+D[8]+1873313359&4294967295,b=R+(P<<6&4294967295|P>>>26),P=k+(R^(b|~N))+D[15]+4264355552&4294967295,k=b+(P<<10&4294967295|P>>>22),P=N+(b^(k|~R))+D[6]+2734768916&4294967295,N=k+(P<<15&4294967295|P>>>17),P=R+(k^(N|~b))+D[13]+1309151649&4294967295,R=N+(P<<21&4294967295|P>>>11),P=b+(N^(R|~k))+D[4]+4149444226&4294967295,b=R+(P<<6&4294967295|P>>>26),P=k+(R^(b|~N))+D[11]+3174756917&4294967295,k=b+(P<<10&4294967295|P>>>22),P=N+(b^(k|~R))+D[2]+718787259&4294967295,N=k+(P<<15&4294967295|P>>>17),P=R+(k^(N|~b))+D[9]+3951481745&4294967295,S.g[0]=S.g[0]+b&4294967295,S.g[1]=S.g[1]+(N+(P<<21&4294967295|P>>>11))&4294967295,S.g[2]=S.g[2]+N&4294967295,S.g[3]=S.g[3]+k&4294967295}i.prototype.v=function(S,b){b===void 0&&(b=S.length);const R=b-this.blockSize,D=this.C;let N=this.h,k=0;for(;k<b;){if(N==0)for(;k<=R;)r(this,S,k),k+=this.blockSize;if(typeof S=="string"){for(;k<b;)if(D[N++]=S.charCodeAt(k++),N==this.blockSize){r(this,D),N=0;break}}else for(;k<b;)if(D[N++]=S[k++],N==this.blockSize){r(this,D),N=0;break}}this.h=N,this.o+=b},i.prototype.A=function(){var S=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);S[0]=128;for(var b=1;b<S.length-8;++b)S[b]=0;b=this.o*8;for(var R=S.length-8;R<S.length;++R)S[R]=b&255,b/=256;for(this.v(S),S=Array(16),b=0,R=0;R<4;++R)for(let D=0;D<32;D+=8)S[b++]=this.g[R]>>>D&255;return S};function s(S,b){var R=o;return Object.prototype.hasOwnProperty.call(R,S)?R[S]:R[S]=b(S)}function a(S,b){this.h=b;const R=[];let D=!0;for(let N=S.length-1;N>=0;N--){const k=S[N]|0;D&&k==b||(R[N]=k,D=!1)}this.g=R}var o={};function l(S){return-128<=S&&S<128?s(S,function(b){return new a([b|0],b<0?-1:0)}):new a([S|0],S<0?-1:0)}function c(S){if(isNaN(S)||!isFinite(S))return d;if(S<0)return A(c(-S));const b=[];let R=1;for(let D=0;S>=R;D++)b[D]=S/R|0,R*=4294967296;return new a(b,0)}function h(S,b){if(S.length==0)throw Error("number format error: empty string");if(b=b||10,b<2||36<b)throw Error("radix out of range: "+b);if(S.charAt(0)=="-")return A(h(S.substring(1),b));if(S.indexOf("-")>=0)throw Error('number format error: interior "-" character');const R=c(Math.pow(b,8));let D=d;for(let k=0;k<S.length;k+=8){var N=Math.min(8,S.length-k);const P=parseInt(S.substring(k,k+N),b);N<8?(N=c(Math.pow(b,N)),D=D.j(N).add(c(P))):(D=D.j(R),D=D.add(c(P)))}return D}var d=l(0),f=l(1),p=l(16777216);t=a.prototype,t.m=function(){if(E(this))return-A(this).m();let S=0,b=1;for(let R=0;R<this.g.length;R++){const D=this.i(R);S+=(D>=0?D:4294967296+D)*b,b*=4294967296}return S},t.toString=function(S){if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(w(this))return"0";if(E(this))return"-"+A(this).toString(S);const b=c(Math.pow(S,6));var R=this;let D="";for(;;){const N=C(R,b).g;R=T(R,N.j(b));let k=((R.g.length>0?R.g[0]:R.h)>>>0).toString(S);if(R=N,w(R))return k+D;for(;k.length<6;)k="0"+k;D=k+D}},t.i=function(S){return S<0?0:S<this.g.length?this.g[S]:this.h};function w(S){if(S.h!=0)return!1;for(let b=0;b<S.g.length;b++)if(S.g[b]!=0)return!1;return!0}function E(S){return S.h==-1}t.l=function(S){return S=T(this,S),E(S)?-1:w(S)?0:1};function A(S){const b=S.g.length,R=[];for(let D=0;D<b;D++)R[D]=~S.g[D];return new a(R,~S.h).add(f)}t.abs=function(){return E(this)?A(this):this},t.add=function(S){const b=Math.max(this.g.length,S.g.length),R=[];let D=0;for(let N=0;N<=b;N++){let k=D+(this.i(N)&65535)+(S.i(N)&65535),P=(k>>>16)+(this.i(N)>>>16)+(S.i(N)>>>16);D=P>>>16,k&=65535,P&=65535,R[N]=P<<16|k}return new a(R,R[R.length-1]&-2147483648?-1:0)};function T(S,b){return S.add(A(b))}t.j=function(S){if(w(this)||w(S))return d;if(E(this))return E(S)?A(this).j(A(S)):A(A(this).j(S));if(E(S))return A(this.j(A(S)));if(this.l(p)<0&&S.l(p)<0)return c(this.m()*S.m());const b=this.g.length+S.g.length,R=[];for(var D=0;D<2*b;D++)R[D]=0;for(D=0;D<this.g.length;D++)for(let N=0;N<S.g.length;N++){const k=this.i(D)>>>16,P=this.i(D)&65535,ie=S.i(N)>>>16,ee=S.i(N)&65535;R[2*D+2*N]+=P*ee,v(R,2*D+2*N),R[2*D+2*N+1]+=k*ee,v(R,2*D+2*N+1),R[2*D+2*N+1]+=P*ie,v(R,2*D+2*N+1),R[2*D+2*N+2]+=k*ie,v(R,2*D+2*N+2)}for(S=0;S<b;S++)R[S]=R[2*S+1]<<16|R[2*S];for(S=b;S<2*b;S++)R[S]=0;return new a(R,0)};function v(S,b){for(;(S[b]&65535)!=S[b];)S[b+1]+=S[b]>>>16,S[b]&=65535,b++}function _(S,b){this.g=S,this.h=b}function C(S,b){if(w(b))throw Error("division by zero");if(w(S))return new _(d,d);if(E(S))return b=C(A(S),b),new _(A(b.g),A(b.h));if(E(b))return b=C(S,A(b)),new _(A(b.g),b.h);if(S.g.length>30){if(E(S)||E(b))throw Error("slowDivide_ only works with positive integers.");for(var R=f,D=b;D.l(S)<=0;)R=V(R),D=V(D);var N=O(R,1),k=O(D,1);for(D=O(D,2),R=O(R,2);!w(D);){var P=k.add(D);P.l(S)<=0&&(N=N.add(R),k=P),D=O(D,1),R=O(R,1)}return b=T(S,N.j(b)),new _(N,b)}for(N=d;S.l(b)>=0;){for(R=Math.max(1,Math.floor(S.m()/b.m())),D=Math.ceil(Math.log(R)/Math.LN2),D=D<=48?1:Math.pow(2,D-48),k=c(R),P=k.j(b);E(P)||P.l(S)>0;)R-=D,k=c(R),P=k.j(b);w(k)&&(k=f),N=N.add(k),S=T(S,P)}return new _(N,S)}t.B=function(S){return C(this,S).h},t.and=function(S){const b=Math.max(this.g.length,S.g.length),R=[];for(let D=0;D<b;D++)R[D]=this.i(D)&S.i(D);return new a(R,this.h&S.h)},t.or=function(S){const b=Math.max(this.g.length,S.g.length),R=[];for(let D=0;D<b;D++)R[D]=this.i(D)|S.i(D);return new a(R,this.h|S.h)},t.xor=function(S){const b=Math.max(this.g.length,S.g.length),R=[];for(let D=0;D<b;D++)R[D]=this.i(D)^S.i(D);return new a(R,this.h^S.h)};function V(S){const b=S.g.length+1,R=[];for(let D=0;D<b;D++)R[D]=S.i(D)<<1|S.i(D-1)>>>31;return new a(R,S.h)}function O(S,b){const R=b>>5;b%=32;const D=S.g.length-R,N=[];for(let k=0;k<D;k++)N[k]=b>0?S.i(k+R)>>>b|S.i(k+R+1)<<32-b:S.i(k+R);return new a(N,S.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,NN=i,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.B,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=c,a.fromString=h,xs=a}).apply(typeof LI<"u"?LI:typeof self<"u"?self:typeof window<"u"?window:{});var pf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var kN,vu,VN,Xf,Bv,ON,MN,LN;(function(){var t,e=Object.defineProperty;function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof pf=="object"&&pf];for(var m=0;m<u.length;++m){var g=u[m];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var i=n(this);function r(u,m){if(m)e:{var g=i;u=u.split(".");for(var I=0;I<u.length-1;I++){var L=u[I];if(!(L in g))break e;g=g[L]}u=u[u.length-1],I=g[u],m=m(I),m!=I&&m!=null&&e(g,u,{configurable:!0,writable:!0,value:m})}}r("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(u){return u||function(m){var g=[],I;for(I in m)Object.prototype.hasOwnProperty.call(m,I)&&g.push([I,m[I]]);return g}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var s=s||{},a=this||self;function o(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function l(u,m,g){return u.call.apply(u.bind,arguments)}function c(u,m,g){return c=l,c.apply(null,arguments)}function h(u,m){var g=Array.prototype.slice.call(arguments,1);return function(){var I=g.slice();return I.push.apply(I,arguments),u.apply(this,I)}}function d(u,m){function g(){}g.prototype=m.prototype,u.Z=m.prototype,u.prototype=new g,u.prototype.constructor=u,u.Ob=function(I,L,z){for(var K=Array(arguments.length-2),ue=2;ue<arguments.length;ue++)K[ue-2]=arguments[ue];return m.prototype[L].apply(I,K)}}var f=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function p(u){const m=u.length;if(m>0){const g=Array(m);for(let I=0;I<m;I++)g[I]=u[I];return g}return[]}function w(u,m){for(let I=1;I<arguments.length;I++){const L=arguments[I];var g=typeof L;if(g=g!="object"?g:L?Array.isArray(L)?"array":g:"null",g=="array"||g=="object"&&typeof L.length=="number"){g=u.length||0;const z=L.length||0;u.length=g+z;for(let K=0;K<z;K++)u[g+K]=L[K]}else u.push(L)}}class E{constructor(m,g){this.i=m,this.j=g,this.h=0,this.g=null}get(){let m;return this.h>0?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function A(u){a.setTimeout(()=>{throw u},0)}function T(){var u=S;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class v{constructor(){this.h=this.g=null}add(m,g){const I=_.get();I.set(m,g),this.h?this.h.next=I:this.g=I,this.h=I}}var _=new E(()=>new C,u=>u.reset());class C{constructor(){this.next=this.g=this.h=null}set(m,g){this.h=m,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let V,O=!1,S=new v,b=()=>{const u=Promise.resolve(void 0);V=()=>{u.then(R)}};function R(){for(var u;u=T();){try{u.h.call(u.g)}catch(g){A(g)}var m=_;m.j(u),m.h<100&&(m.h++,u.next=m.g,m.g=u)}O=!1}function D(){this.u=this.u,this.C=this.C}D.prototype.u=!1,D.prototype.dispose=function(){this.u||(this.u=!0,this.N())},D.prototype[Symbol.dispose]=function(){this.dispose()},D.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function N(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}N.prototype.h=function(){this.defaultPrevented=!0};var k=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const g=()=>{};a.addEventListener("test",g,m),a.removeEventListener("test",g,m)}catch{}return u}();function P(u){return/^[\s\xa0]*$/.test(u)}function ie(u,m){N.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,m)}d(ie,N),ie.prototype.init=function(u,m){const g=this.type=u.type,I=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget,m||(g=="mouseover"?m=u.fromElement:g=="mouseout"&&(m=u.toElement)),this.relatedTarget=m,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&ie.Z.h.call(this)},ie.prototype.h=function(){ie.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var ee="closure_listenable_"+(Math.random()*1e6|0),G=0;function Y(u,m,g,I,L){this.listener=u,this.proxy=null,this.src=m,this.type=g,this.capture=!!I,this.ha=L,this.key=++G,this.da=this.fa=!1}function B(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function te(u,m,g){for(const I in u)m.call(g,u[I],I,u)}function oe(u,m){for(const g in u)m.call(void 0,u[g],g,u)}function $n(u){const m={};for(const g in u)m[g]=u[g];return m}const In="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Kn(u,m){let g,I;for(let L=1;L<arguments.length;L++){I=arguments[L];for(g in I)u[g]=I[g];for(let z=0;z<In.length;z++)g=In[z],Object.prototype.hasOwnProperty.call(I,g)&&(u[g]=I[g])}}function Qn(u){this.src=u,this.g={},this.h=0}Qn.prototype.add=function(u,m,g,I,L){const z=u.toString();u=this.g[z],u||(u=this.g[z]=[],this.h++);const K=zg(u,m,I,L);return K>-1?(m=u[K],g||(m.fa=!1)):(m=new Y(m,this.src,z,!!I,L),m.fa=g,u.push(m)),m};function Fr(u,m){const g=m.type;if(g in u.g){var I=u.g[g],L=Array.prototype.indexOf.call(I,m,void 0),z;(z=L>=0)&&Array.prototype.splice.call(I,L,1),z&&(B(m),u.g[g].length==0&&(delete u.g[g],u.h--))}}function zg(u,m,g,I){for(let L=0;L<u.length;++L){const z=u[L];if(!z.da&&z.listener==m&&z.capture==!!g&&z.ha==I)return L}return-1}var jg="closure_lm_"+(Math.random()*1e6|0),Bg={};function _E(u,m,g,I,L){if(Array.isArray(m)){for(let z=0;z<m.length;z++)_E(u,m[z],g,I,L);return null}return g=wE(g),u&&u[ee]?u.J(m,g,o(I)?!!I.capture:!1,L):xL(u,m,g,!1,I,L)}function xL(u,m,g,I,L,z){if(!m)throw Error("Invalid event type");const K=o(L)?!!L.capture:!!L;let ue=qg(u);if(ue||(u[jg]=ue=new Qn(u)),g=ue.add(m,g,I,K,z),g.proxy)return g;if(I=CL(),g.proxy=I,I.src=u,I.listener=g,u.addEventListener)k||(L=K),L===void 0&&(L=!1),u.addEventListener(m.toString(),I,L);else if(u.attachEvent)u.attachEvent(TE(m.toString()),I);else if(u.addListener&&u.removeListener)u.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return g}function CL(){function u(g){return m.call(u.src,u.listener,g)}const m=PL;return u}function vE(u,m,g,I,L){if(Array.isArray(m))for(var z=0;z<m.length;z++)vE(u,m[z],g,I,L);else I=o(I)?!!I.capture:!!I,g=wE(g),u&&u[ee]?(u=u.i,z=String(m).toString(),z in u.g&&(m=u.g[z],g=zg(m,g,I,L),g>-1&&(B(m[g]),Array.prototype.splice.call(m,g,1),m.length==0&&(delete u.g[z],u.h--)))):u&&(u=qg(u))&&(m=u.g[m.toString()],u=-1,m&&(u=zg(m,g,I,L)),(g=u>-1?m[u]:null)&&Fg(g))}function Fg(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[ee])Fr(m.i,u);else{var g=u.type,I=u.proxy;m.removeEventListener?m.removeEventListener(g,I,u.capture):m.detachEvent?m.detachEvent(TE(g),I):m.addListener&&m.removeListener&&m.removeListener(I),(g=qg(m))?(Fr(g,u),g.h==0&&(g.src=null,m[jg]=null)):B(u)}}}function TE(u){return u in Bg?Bg[u]:Bg[u]="on"+u}function PL(u,m){if(u.da)u=!0;else{m=new ie(m,this);const g=u.listener,I=u.ha||u.src;u.fa&&Fg(u),u=g.call(I,m)}return u}function qg(u){return u=u[jg],u instanceof Qn?u:null}var Hg="__closure_events_fn_"+(Math.random()*1e9>>>0);function wE(u){return typeof u=="function"?u:(u[Hg]||(u[Hg]=function(m){return u.handleEvent(m)}),u[Hg])}function Gt(){D.call(this),this.i=new Qn(this),this.M=this,this.G=null}d(Gt,D),Gt.prototype[ee]=!0,Gt.prototype.removeEventListener=function(u,m,g,I){vE(this,u,m,g,I)};function nn(u,m){var g,I=u.G;if(I)for(g=[];I;I=I.G)g.push(I);if(u=u.M,I=m.type||m,typeof m=="string")m=new N(m,u);else if(m instanceof N)m.target=m.target||u;else{var L=m;m=new N(I,u),Kn(m,L)}L=!0;let z,K;if(g)for(K=g.length-1;K>=0;K--)z=m.g=g[K],L=Ld(z,I,!0,m)&&L;if(z=m.g=u,L=Ld(z,I,!0,m)&&L,L=Ld(z,I,!1,m)&&L,g)for(K=0;K<g.length;K++)z=m.g=g[K],L=Ld(z,I,!1,m)&&L}Gt.prototype.N=function(){if(Gt.Z.N.call(this),this.i){var u=this.i;for(const m in u.g){const g=u.g[m];for(let I=0;I<g.length;I++)B(g[I]);delete u.g[m],u.h--}}this.G=null},Gt.prototype.J=function(u,m,g,I){return this.i.add(String(u),m,!1,g,I)},Gt.prototype.K=function(u,m,g,I){return this.i.add(String(u),m,!0,g,I)};function Ld(u,m,g,I){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();let L=!0;for(let z=0;z<m.length;++z){const K=m[z];if(K&&!K.da&&K.capture==g){const ue=K.listener,Et=K.ha||K.src;K.fa&&Fr(u.i,K),L=ue.call(Et,I)!==!1&&L}}return L&&!I.defaultPrevented}function DL(u,m){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=c(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(m)>2147483647?-1:a.setTimeout(u,m||0)}function bE(u){u.g=DL(()=>{u.g=null,u.i&&(u.i=!1,bE(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class NL extends D{constructor(m,g){super(),this.m=m,this.l=g,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:bE(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Pc(u){D.call(this),this.h=u,this.g={}}d(Pc,D);var EE=[];function AE(u){te(u.g,function(m,g){this.g.hasOwnProperty(g)&&Fg(m)},u),u.g={}}Pc.prototype.N=function(){Pc.Z.N.call(this),AE(this)},Pc.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Gg=a.JSON.stringify,kL=a.JSON.parse,VL=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function SE(){}function IE(){}var Dc={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function $g(){N.call(this,"d")}d($g,N);function Kg(){N.call(this,"c")}d(Kg,N);var aa={},RE=null;function Ud(){return RE=RE||new Gt}aa.Ia="serverreachability";function xE(u){N.call(this,aa.Ia,u)}d(xE,N);function Nc(u){const m=Ud();nn(m,new xE(m))}aa.STAT_EVENT="statevent";function CE(u,m){N.call(this,aa.STAT_EVENT,u),this.stat=m}d(CE,N);function rn(u){const m=Ud();nn(m,new CE(m,u))}aa.Ja="timingevent";function PE(u,m){N.call(this,aa.Ja,u),this.size=m}d(PE,N);function kc(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},m)}function Vc(){this.g=!0}Vc.prototype.ua=function(){this.g=!1};function OL(u,m,g,I,L,z){u.info(function(){if(u.g)if(z){var K="",ue=z.split("&");for(let ke=0;ke<ue.length;ke++){var Et=ue[ke].split("=");if(Et.length>1){const xt=Et[0];Et=Et[1];const Ri=xt.split("_");K=Ri.length>=2&&Ri[1]=="type"?K+(xt+"="+Et+"&"):K+(xt+"=redacted&")}}}else K=null;else K=z;return"XMLHTTP REQ ("+I+") [attempt "+L+"]: "+m+`
`+g+`
`+K})}function ML(u,m,g,I,L,z,K){u.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+L+"]: "+m+`
`+g+`
`+z+" "+K})}function wo(u,m,g,I){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+UL(u,g)+(I?" "+I:"")})}function LL(u,m){u.info(function(){return"TIMEOUT: "+m})}Vc.prototype.info=function(){};function UL(u,m){if(!u.g)return m;if(!m)return null;try{const z=JSON.parse(m);if(z){for(u=0;u<z.length;u++)if(Array.isArray(z[u])){var g=z[u];if(!(g.length<2)){var I=g[1];if(Array.isArray(I)&&!(I.length<1)){var L=I[0];if(L!="noop"&&L!="stop"&&L!="close")for(let K=1;K<I.length;K++)I[K]=""}}}}return Gg(z)}catch{return m}}var zd={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},DE={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},NE;function Qg(){}d(Qg,SE),Qg.prototype.g=function(){return new XMLHttpRequest},NE=new Qg;function Oc(u){return encodeURIComponent(String(u))}function zL(u){var m=1;u=u.split(":");const g=[];for(;m>0&&u.length;)g.push(u.shift()),m--;return u.length&&g.push(u.join(":")),g}function qr(u,m,g,I){this.j=u,this.i=m,this.l=g,this.S=I||1,this.V=new Pc(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new kE}function kE(){this.i=null,this.g="",this.h=!1}var VE={},Wg={};function Yg(u,m,g){u.M=1,u.A=Bd(Ii(m)),u.u=g,u.R=!0,OE(u,null)}function OE(u,m){u.F=Date.now(),jd(u),u.B=Ii(u.A);var g=u.B,I=u.S;Array.isArray(I)||(I=[String(I)]),QE(g.i,"t",I),u.C=0,g=u.j.L,u.h=new kE,u.g=dA(u.j,g?m:null,!u.u),u.P>0&&(u.O=new NL(c(u.Y,u,u.g),u.P)),m=u.V,g=u.g,I=u.ba;var L="readystatechange";Array.isArray(L)||(L&&(EE[0]=L.toString()),L=EE);for(let z=0;z<L.length;z++){const K=_E(g,L[z],I||m.handleEvent,!1,m.h||m);if(!K)break;m.g[K.key]=K}m=u.J?$n(u.J):{},u.u?(u.v||(u.v="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,m)):(u.v="GET",u.g.ea(u.B,u.v,null,m)),Nc(),OL(u.i,u.v,u.B,u.l,u.S,u.u)}qr.prototype.ba=function(u){u=u.target;const m=this.O;m&&$r(u)==3?m.j():this.Y(u)},qr.prototype.Y=function(u){try{if(u==this.g)e:{const ue=$r(this.g),Et=this.g.ya(),ke=this.g.ca();if(!(ue<3)&&(ue!=3||this.g&&(this.h.h||this.g.la()||tA(this.g)))){this.K||ue!=4||Et==7||(Et==8||ke<=0?Nc(3):Nc(2)),Xg(this);var m=this.g.ca();this.X=m;var g=jL(this);if(this.o=m==200,ML(this.i,this.v,this.B,this.l,this.S,ue,m),this.o){if(this.U&&!this.L){t:{if(this.g){var I,L=this.g;if((I=L.g?L.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!P(I)){var z=I;break t}}z=null}if(u=z)wo(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Jg(this,u);else{this.o=!1,this.m=3,rn(12),oa(this),Mc(this);break e}}if(this.R){u=!0;let xt;for(;!this.K&&this.C<g.length;)if(xt=BL(this,g),xt==Wg){ue==4&&(this.m=4,rn(14),u=!1),wo(this.i,this.l,null,"[Incomplete Response]");break}else if(xt==VE){this.m=4,rn(15),wo(this.i,this.l,g,"[Invalid Chunk]"),u=!1;break}else wo(this.i,this.l,xt,null),Jg(this,xt);if(ME(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ue!=4||g.length!=0||this.h.h||(this.m=1,rn(16),u=!1),this.o=this.o&&u,!u)wo(this.i,this.l,g,"[Invalid Chunked Response]"),oa(this),Mc(this);else if(g.length>0&&!this.W){this.W=!0;var K=this.j;K.g==this&&K.aa&&!K.P&&(K.j.info("Great, no buffering proxy detected. Bytes received: "+g.length),ay(K),K.P=!0,rn(11))}}else wo(this.i,this.l,g,null),Jg(this,g);ue==4&&oa(this),this.o&&!this.K&&(ue==4?lA(this.j,this):(this.o=!1,jd(this)))}else t4(this.g),m==400&&g.indexOf("Unknown SID")>0?(this.m=3,rn(12)):(this.m=0,rn(13)),oa(this),Mc(this)}}}catch{}finally{}};function jL(u){if(!ME(u))return u.g.la();const m=tA(u.g);if(m==="")return"";let g="";const I=m.length,L=$r(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return oa(u),Mc(u),"";u.h.i=new a.TextDecoder}for(let z=0;z<I;z++)u.h.h=!0,g+=u.h.i.decode(m[z],{stream:!(L&&z==I-1)});return m.length=0,u.h.g+=g,u.C=0,u.h.g}function ME(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function BL(u,m){var g=u.C,I=m.indexOf(`
`,g);return I==-1?Wg:(g=Number(m.substring(g,I)),isNaN(g)?VE:(I+=1,I+g>m.length?Wg:(m=m.slice(I,I+g),u.C=I+g,m)))}qr.prototype.cancel=function(){this.K=!0,oa(this)};function jd(u){u.T=Date.now()+u.H,LE(u,u.H)}function LE(u,m){if(u.D!=null)throw Error("WatchDog timer not null");u.D=kc(c(u.aa,u),m)}function Xg(u){u.D&&(a.clearTimeout(u.D),u.D=null)}qr.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(LL(this.i,this.B),this.M!=2&&(Nc(),rn(17)),oa(this),this.m=2,Mc(this)):LE(this,this.T-u)};function Mc(u){u.j.I==0||u.K||lA(u.j,u)}function oa(u){Xg(u);var m=u.O;m&&typeof m.dispose=="function"&&m.dispose(),u.O=null,AE(u.V),u.g&&(m=u.g,u.g=null,m.abort(),m.dispose())}function Jg(u,m){try{var g=u.j;if(g.I!=0&&(g.g==u||Zg(g.h,u))){if(!u.L&&Zg(g.h,u)&&g.I==3){try{var I=g.Ba.g.parse(m)}catch{I=null}if(Array.isArray(I)&&I.length==3){var L=I;if(L[0]==0){e:if(!g.v){if(g.g)if(g.g.F+3e3<u.F)$d(g),Hd(g);else break e;sy(g),rn(18)}}else g.xa=L[1],0<g.xa-g.K&&L[2]<37500&&g.F&&g.A==0&&!g.C&&(g.C=kc(c(g.Va,g),6e3));jE(g.h)<=1&&g.ta&&(g.ta=void 0)}else ca(g,11)}else if((u.L||g.g==u)&&$d(g),!P(m))for(L=g.Ba.g.parse(m),m=0;m<L.length;m++){let ke=L[m];const xt=ke[0];if(!(xt<=g.K))if(g.K=xt,ke=ke[1],g.I==2)if(ke[0]=="c"){g.M=ke[1],g.ba=ke[2];const Ri=ke[3];Ri!=null&&(g.ka=Ri,g.j.info("VER="+g.ka));const ua=ke[4];ua!=null&&(g.za=ua,g.j.info("SVER="+g.za));const Kr=ke[5];Kr!=null&&typeof Kr=="number"&&Kr>0&&(I=1.5*Kr,g.O=I,g.j.info("backChannelRequestTimeoutMs_="+I)),I=g;const Qr=u.g;if(Qr){const Qd=Qr.g?Qr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Qd){var z=I.h;z.g||Qd.indexOf("spdy")==-1&&Qd.indexOf("quic")==-1&&Qd.indexOf("h2")==-1||(z.j=z.l,z.g=new Set,z.h&&(ey(z,z.h),z.h=null))}if(I.G){const oy=Qr.g?Qr.g.getResponseHeader("X-HTTP-Session-Id"):null;oy&&(I.wa=oy,Ue(I.J,I.G,oy))}}g.I=3,g.l&&g.l.ra(),g.aa&&(g.T=Date.now()-u.F,g.j.info("Handshake RTT: "+g.T+"ms")),I=g;var K=u;if(I.na=hA(I,I.L?I.ba:null,I.W),K.L){BE(I.h,K);var ue=K,Et=I.O;Et&&(ue.H=Et),ue.D&&(Xg(ue),jd(ue)),I.g=K}else aA(I);g.i.length>0&&Gd(g)}else ke[0]!="stop"&&ke[0]!="close"||ca(g,7);else g.I==3&&(ke[0]=="stop"||ke[0]=="close"?ke[0]=="stop"?ca(g,7):ry(g):ke[0]!="noop"&&g.l&&g.l.qa(ke),g.A=0)}}Nc(4)}catch{}}var FL=class{constructor(u,m){this.g=u,this.map=m}};function UE(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function zE(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function jE(u){return u.h?1:u.g?u.g.size:0}function Zg(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function ey(u,m){u.g?u.g.add(m):u.h=m}function BE(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}UE.prototype.cancel=function(){if(this.i=FE(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function FE(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const g of u.g.values())m=m.concat(g.G);return m}return p(u.i)}var qE=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function qL(u,m){if(u){u=u.split("&");for(let g=0;g<u.length;g++){const I=u[g].indexOf("=");let L,z=null;I>=0?(L=u[g].substring(0,I),z=u[g].substring(I+1)):L=u[g],m(L,z?decodeURIComponent(z.replace(/\+/g," ")):"")}}}function Hr(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let m;u instanceof Hr?(this.l=u.l,Lc(this,u.j),this.o=u.o,this.g=u.g,Uc(this,u.u),this.h=u.h,ty(this,WE(u.i)),this.m=u.m):u&&(m=String(u).match(qE))?(this.l=!1,Lc(this,m[1]||"",!0),this.o=zc(m[2]||""),this.g=zc(m[3]||"",!0),Uc(this,m[4]),this.h=zc(m[5]||"",!0),ty(this,m[6]||"",!0),this.m=zc(m[7]||"")):(this.l=!1,this.i=new Bc(null,this.l))}Hr.prototype.toString=function(){const u=[];var m=this.j;m&&u.push(jc(m,HE,!0),":");var g=this.g;return(g||m=="file")&&(u.push("//"),(m=this.o)&&u.push(jc(m,HE,!0),"@"),u.push(Oc(g).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.u,g!=null&&u.push(":",String(g))),(g=this.h)&&(this.g&&g.charAt(0)!="/"&&u.push("/"),u.push(jc(g,g.charAt(0)=="/"?$L:GL,!0))),(g=this.i.toString())&&u.push("?",g),(g=this.m)&&u.push("#",jc(g,QL)),u.join("")},Hr.prototype.resolve=function(u){const m=Ii(this);let g=!!u.j;g?Lc(m,u.j):g=!!u.o,g?m.o=u.o:g=!!u.g,g?m.g=u.g:g=u.u!=null;var I=u.h;if(g)Uc(m,u.u);else if(g=!!u.h){if(I.charAt(0)!="/")if(this.g&&!this.h)I="/"+I;else{var L=m.h.lastIndexOf("/");L!=-1&&(I=m.h.slice(0,L+1)+I)}if(L=I,L==".."||L==".")I="";else if(L.indexOf("./")!=-1||L.indexOf("/.")!=-1){I=L.lastIndexOf("/",0)==0,L=L.split("/");const z=[];for(let K=0;K<L.length;){const ue=L[K++];ue=="."?I&&K==L.length&&z.push(""):ue==".."?((z.length>1||z.length==1&&z[0]!="")&&z.pop(),I&&K==L.length&&z.push("")):(z.push(ue),I=!0)}I=z.join("/")}else I=L}return g?m.h=I:g=u.i.toString()!=="",g?ty(m,WE(u.i)):g=!!u.m,g&&(m.m=u.m),m};function Ii(u){return new Hr(u)}function Lc(u,m,g){u.j=g?zc(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function Uc(u,m){if(m){if(m=Number(m),isNaN(m)||m<0)throw Error("Bad port number "+m);u.u=m}else u.u=null}function ty(u,m,g){m instanceof Bc?(u.i=m,WL(u.i,u.l)):(g||(m=jc(m,KL)),u.i=new Bc(m,u.l))}function Ue(u,m,g){u.i.set(m,g)}function Bd(u){return Ue(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function zc(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function jc(u,m,g){return typeof u=="string"?(u=encodeURI(u).replace(m,HL),g&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function HL(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var HE=/[#\/\?@]/g,GL=/[#\?:]/g,$L=/[#\?]/g,KL=/[#\?@]/g,QL=/#/g;function Bc(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function la(u){u.g||(u.g=new Map,u.h=0,u.i&&qL(u.i,function(m,g){u.add(decodeURIComponent(m.replace(/\+/g," ")),g)}))}t=Bc.prototype,t.add=function(u,m){la(this),this.i=null,u=bo(this,u);let g=this.g.get(u);return g||this.g.set(u,g=[]),g.push(m),this.h+=1,this};function GE(u,m){la(u),m=bo(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function $E(u,m){return la(u),m=bo(u,m),u.g.has(m)}t.forEach=function(u,m){la(this),this.g.forEach(function(g,I){g.forEach(function(L){u.call(m,L,I,this)},this)},this)};function KE(u,m){la(u);let g=[];if(typeof m=="string")$E(u,m)&&(g=g.concat(u.g.get(bo(u,m))));else for(u=Array.from(u.g.values()),m=0;m<u.length;m++)g=g.concat(u[m]);return g}t.set=function(u,m){return la(this),this.i=null,u=bo(this,u),$E(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},t.get=function(u,m){return u?(u=KE(this,u),u.length>0?String(u[0]):m):m};function QE(u,m,g){GE(u,m),g.length>0&&(u.i=null,u.g.set(bo(u,m),p(g)),u.h+=g.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(let I=0;I<m.length;I++){var g=m[I];const L=Oc(g);g=KE(this,g);for(let z=0;z<g.length;z++){let K=L;g[z]!==""&&(K+="="+Oc(g[z])),u.push(K)}}return this.i=u.join("&")};function WE(u){const m=new Bc;return m.i=u.i,u.g&&(m.g=new Map(u.g),m.h=u.h),m}function bo(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function WL(u,m){m&&!u.j&&(la(u),u.i=null,u.g.forEach(function(g,I){const L=I.toLowerCase();I!=L&&(GE(this,I),QE(this,L,g))},u)),u.j=m}function YL(u,m){const g=new Vc;if(a.Image){const I=new Image;I.onload=h(Gr,g,"TestLoadImage: loaded",!0,m,I),I.onerror=h(Gr,g,"TestLoadImage: error",!1,m,I),I.onabort=h(Gr,g,"TestLoadImage: abort",!1,m,I),I.ontimeout=h(Gr,g,"TestLoadImage: timeout",!1,m,I),a.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=u}else m(!1)}function XL(u,m){const g=new Vc,I=new AbortController,L=setTimeout(()=>{I.abort(),Gr(g,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:I.signal}).then(z=>{clearTimeout(L),z.ok?Gr(g,"TestPingServer: ok",!0,m):Gr(g,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(L),Gr(g,"TestPingServer: error",!1,m)})}function Gr(u,m,g,I,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),I(g)}catch{}}function JL(){this.g=new VL}function ny(u){this.i=u.Sb||null,this.h=u.ab||!1}d(ny,SE),ny.prototype.g=function(){return new Fd(this.i,this.h)};function Fd(u,m){Gt.call(this),this.H=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}d(Fd,Gt),t=Fd.prototype,t.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=m,this.readyState=1,qc(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const m={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(m.body=u),(this.H||a).fetch(new Request(this.D,m)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Fc(this)),this.readyState=0},t.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,qc(this)),this.g&&(this.readyState=3,qc(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;YE(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function YE(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}t.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.B.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?Fc(this):qc(this),this.readyState==3&&YE(this)}},t.Oa=function(u){this.g&&(this.response=this.responseText=u,Fc(this))},t.Na=function(u){this.g&&(this.response=u,Fc(this))},t.ga=function(){this.g&&Fc(this)};function Fc(u){u.readyState=4,u.l=null,u.j=null,u.B=null,qc(u)}t.setRequestHeader=function(u,m){this.A.append(u,m)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var g=m.next();!g.done;)g=g.value,u.push(g[0]+": "+g[1]),g=m.next();return u.join(`\r
`)};function qc(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Fd.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function XE(u){let m="";return te(u,function(g,I){m+=I,m+=":",m+=g,m+=`\r
`}),m}function iy(u,m,g){e:{for(I in g){var I=!1;break e}I=!0}I||(g=XE(g),typeof u=="string"?g!=null&&Oc(g):Ue(u,m,g))}function nt(u){Gt.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}d(nt,Gt);var ZL=/^https?$/i,e4=["POST","PUT"];t=nt.prototype,t.Fa=function(u){this.H=u},t.ea=function(u,m,g,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():NE.g(),this.g.onreadystatechange=f(c(this.Ca,this));try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch(z){JE(this,z);return}if(u=g||"",g=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var L in I)g.set(L,I[L]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const z of I.keys())g.set(z,I.get(z));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(g.keys()).find(z=>z.toLowerCase()=="content-type"),L=a.FormData&&u instanceof a.FormData,!(Array.prototype.indexOf.call(e4,m,void 0)>=0)||I||L||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[z,K]of g)this.g.setRequestHeader(z,K);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(z){JE(this,z)}};function JE(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.o=5,ZE(u),qd(u)}function ZE(u){u.A||(u.A=!0,nn(u,"complete"),nn(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,nn(this,"complete"),nn(this,"abort"),qd(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),qd(this,!0)),nt.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?eA(this):this.Xa())},t.Xa=function(){eA(this)};function eA(u){if(u.h&&typeof s<"u"){if(u.v&&$r(u)==4)setTimeout(u.Ca.bind(u),0);else if(nn(u,"readystatechange"),$r(u)==4){u.h=!1;try{const z=u.ca();e:switch(z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var g;if(!(g=m)){var I;if(I=z===0){let K=String(u.D).match(qE)[1]||null;!K&&a.self&&a.self.location&&(K=a.self.location.protocol.slice(0,-1)),I=!ZL.test(K?K.toLowerCase():"")}g=I}if(g)nn(u,"complete"),nn(u,"success");else{u.o=6;try{var L=$r(u)>2?u.g.statusText:""}catch{L=""}u.l=L+" ["+u.ca()+"]",ZE(u)}}finally{qd(u)}}}}function qd(u,m){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const g=u.g;u.g=null,m||nn(u,"ready");try{g.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function $r(u){return u.g?u.g.readyState:0}t.ca=function(){try{return $r(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),kL(m)}};function tA(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function t4(u){const m={};u=(u.g&&$r(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<u.length;I++){if(P(u[I]))continue;var g=zL(u[I]);const L=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const z=m[L]||[];m[L]=z,z.push(g)}oe(m,function(I){return I.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Hc(u,m,g){return g&&g.internalChannelParams&&g.internalChannelParams[u]||m}function nA(u){this.za=0,this.i=[],this.j=new Vc,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Hc("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Hc("baseRetryDelayMs",5e3,u),this.Za=Hc("retryDelaySeedMs",1e4,u),this.Ta=Hc("forwardChannelMaxRetries",2,u),this.va=Hc("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new UE(u&&u.concurrentRequestLimit),this.Ba=new JL,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=nA.prototype,t.ka=8,t.I=1,t.connect=function(u,m,g,I){rn(0),this.W=u,this.H=m||{},g&&I!==void 0&&(this.H.OSID=g,this.H.OAID=I),this.F=this.X,this.J=hA(this,null,this.W),Gd(this)};function ry(u){if(iA(u),u.I==3){var m=u.V++,g=Ii(u.J);if(Ue(g,"SID",u.M),Ue(g,"RID",m),Ue(g,"TYPE","terminate"),Gc(u,g),m=new qr(u,u.j,m),m.M=2,m.A=Bd(Ii(g)),g=!1,a.navigator&&a.navigator.sendBeacon)try{g=a.navigator.sendBeacon(m.A.toString(),"")}catch{}!g&&a.Image&&(new Image().src=m.A,g=!0),g||(m.g=dA(m.j,null),m.g.ea(m.A)),m.F=Date.now(),jd(m)}uA(u)}function Hd(u){u.g&&(ay(u),u.g.cancel(),u.g=null)}function iA(u){Hd(u),u.v&&(a.clearTimeout(u.v),u.v=null),$d(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&a.clearTimeout(u.m),u.m=null)}function Gd(u){if(!zE(u.h)&&!u.m){u.m=!0;var m=u.Ea;V||b(),O||(V(),O=!0),S.add(m,u),u.D=0}}function n4(u,m){return jE(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=m.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=kc(c(u.Ea,u,m),cA(u,u.D)),u.D++,!0)}t.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const L=new qr(this,this.j,u);let z=this.o;if(this.U&&(z?(z=$n(z),Kn(z,this.U)):z=this.U),this.u!==null||this.R||(L.J=z,z=null),this.S)e:{for(var m=0,g=0;g<this.i.length;g++){t:{var I=this.i[g];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(m+=I,m>4096){m=g;break e}if(m===4096||g===this.i.length-1){m=g+1;break e}}m=1e3}else m=1e3;m=sA(this,L,m),g=Ii(this.J),Ue(g,"RID",u),Ue(g,"CVER",22),this.G&&Ue(g,"X-HTTP-Session-Id",this.G),Gc(this,g),z&&(this.R?m="headers="+Oc(XE(z))+"&"+m:this.u&&iy(g,this.u,z)),ey(this.h,L),this.Ra&&Ue(g,"TYPE","init"),this.S?(Ue(g,"$req",m),Ue(g,"SID","null"),L.U=!0,Yg(L,g,null)):Yg(L,g,m),this.I=2}}else this.I==3&&(u?rA(this,u):this.i.length==0||zE(this.h)||rA(this))};function rA(u,m){var g;m?g=m.l:g=u.V++;const I=Ii(u.J);Ue(I,"SID",u.M),Ue(I,"RID",g),Ue(I,"AID",u.K),Gc(u,I),u.u&&u.o&&iy(I,u.u,u.o),g=new qr(u,u.j,g,u.D+1),u.u===null&&(g.J=u.o),m&&(u.i=m.G.concat(u.i)),m=sA(u,g,1e3),g.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),ey(u.h,g),Yg(g,I,m)}function Gc(u,m){u.H&&te(u.H,function(g,I){Ue(m,I,g)}),u.l&&te({},function(g,I){Ue(m,I,g)})}function sA(u,m,g){g=Math.min(u.i.length,g);const I=u.l?c(u.l.Ka,u.l,u):null;e:{var L=u.i;let ue=-1;for(;;){const Et=["count="+g];ue==-1?g>0?(ue=L[0].g,Et.push("ofs="+ue)):ue=0:Et.push("ofs="+ue);let ke=!0;for(let xt=0;xt<g;xt++){var z=L[xt].g;const Ri=L[xt].map;if(z-=ue,z<0)ue=Math.max(0,L[xt].g-100),ke=!1;else try{z="req"+z+"_"||"";try{var K=Ri instanceof Map?Ri:Object.entries(Ri);for(const[ua,Kr]of K){let Qr=Kr;o(Kr)&&(Qr=Gg(Kr)),Et.push(z+ua+"="+encodeURIComponent(Qr))}}catch(ua){throw Et.push(z+"type="+encodeURIComponent("_badmap")),ua}}catch{I&&I(Ri)}}if(ke){K=Et.join("&");break e}}K=void 0}return u=u.i.splice(0,g),m.G=u,K}function aA(u){if(!u.g&&!u.v){u.Y=1;var m=u.Da;V||b(),O||(V(),O=!0),S.add(m,u),u.A=0}}function sy(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=kc(c(u.Da,u),cA(u,u.A)),u.A++,!0)}t.Da=function(){if(this.v=null,oA(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=kc(c(this.Wa,this),u)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,rn(10),Hd(this),oA(this))};function ay(u){u.B!=null&&(a.clearTimeout(u.B),u.B=null)}function oA(u){u.g=new qr(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var m=Ii(u.na);Ue(m,"RID","rpc"),Ue(m,"SID",u.M),Ue(m,"AID",u.K),Ue(m,"CI",u.F?"0":"1"),!u.F&&u.ia&&Ue(m,"TO",u.ia),Ue(m,"TYPE","xmlhttp"),Gc(u,m),u.u&&u.o&&iy(m,u.u,u.o),u.O&&(u.g.H=u.O);var g=u.g;u=u.ba,g.M=1,g.A=Bd(Ii(m)),g.u=null,g.R=!0,OE(g,u)}t.Va=function(){this.C!=null&&(this.C=null,Hd(this),sy(this),rn(19))};function $d(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function lA(u,m){var g=null;if(u.g==m){$d(u),ay(u),u.g=null;var I=2}else if(Zg(u.h,m))g=m.G,BE(u.h,m),I=1;else return;if(u.I!=0){if(m.o)if(I==1){g=m.u?m.u.length:0,m=Date.now()-m.F;var L=u.D;I=Ud(),nn(I,new PE(I,g)),Gd(u)}else aA(u);else if(L=m.m,L==3||L==0&&m.X>0||!(I==1&&n4(u,m)||I==2&&sy(u)))switch(g&&g.length>0&&(m=u.h,m.i=m.i.concat(g)),L){case 1:ca(u,5);break;case 4:ca(u,10);break;case 3:ca(u,6);break;default:ca(u,2)}}}function cA(u,m){let g=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(g*=2),g*m}function ca(u,m){if(u.j.info("Error code "+m),m==2){var g=c(u.bb,u),I=u.Ua;const L=!I;I=new Hr(I||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Lc(I,"https"),Bd(I),L?YL(I.toString(),g):XL(I.toString(),g)}else rn(2);u.I=0,u.l&&u.l.pa(m),uA(u),iA(u)}t.bb=function(u){u?(this.j.info("Successfully pinged google.com"),rn(2)):(this.j.info("Failed to ping google.com"),rn(1))};function uA(u){if(u.I=0,u.ja=[],u.l){const m=FE(u.h);(m.length!=0||u.i.length!=0)&&(w(u.ja,m),w(u.ja,u.i),u.h.i.length=0,p(u.i),u.i.length=0),u.l.oa()}}function hA(u,m,g){var I=g instanceof Hr?Ii(g):new Hr(g);if(I.g!="")m&&(I.g=m+"."+I.g),Uc(I,I.u);else{var L=a.location;I=L.protocol,m=m?m+"."+L.hostname:L.hostname,L=+L.port;const z=new Hr(null);I&&Lc(z,I),m&&(z.g=m),L&&Uc(z,L),g&&(z.h=g),I=z}return g=u.G,m=u.wa,g&&m&&Ue(I,g,m),Ue(I,"VER",u.ka),Gc(u,I),I}function dA(u,m,g){if(m&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Aa&&!u.ma?new nt(new ny({ab:g})):new nt(u.ma),m.Fa(u.L),m}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function fA(){}t=fA.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Kd(){}Kd.prototype.g=function(u,m){return new Rn(u,m)};function Rn(u,m){Gt.call(this),this.g=new nA(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.sa&&(u?u["X-WebChannel-Client-Profile"]=m.sa:u={"X-WebChannel-Client-Profile":m.sa}),this.g.U=u,(u=m&&m.Qb)&&!P(u)&&(this.g.u=u),this.A=m&&m.supportsCrossDomainXhr||!1,this.v=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!P(m)&&(this.g.G=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new Eo(this)}d(Rn,Gt),Rn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Rn.prototype.close=function(){ry(this.g)},Rn.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var g={};g.__data__=u,u=g}else this.v&&(g={},g.__data__=Gg(u),u=g);m.i.push(new FL(m.Ya++,u)),m.I==3&&Gd(m)},Rn.prototype.N=function(){this.g.l=null,delete this.j,ry(this.g),delete this.g,Rn.Z.N.call(this)};function mA(u){$g.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){e:{for(const g in m){u=g;break e}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}d(mA,$g);function pA(){Kg.call(this),this.status=1}d(pA,Kg);function Eo(u){this.g=u}d(Eo,fA),Eo.prototype.ra=function(){nn(this.g,"a")},Eo.prototype.qa=function(u){nn(this.g,new mA(u))},Eo.prototype.pa=function(u){nn(this.g,new pA)},Eo.prototype.oa=function(){nn(this.g,"b")},Kd.prototype.createWebChannel=Kd.prototype.g,Rn.prototype.send=Rn.prototype.o,Rn.prototype.open=Rn.prototype.m,Rn.prototype.close=Rn.prototype.close,LN=function(){return new Kd},MN=function(){return Ud()},ON=aa,Bv={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},zd.NO_ERROR=0,zd.TIMEOUT=8,zd.HTTP_ERROR=6,Xf=zd,DE.COMPLETE="complete",VN=DE,IE.EventType=Dc,Dc.OPEN="a",Dc.CLOSE="b",Dc.ERROR="c",Dc.MESSAGE="d",Gt.prototype.listen=Gt.prototype.J,vu=IE,nt.prototype.listenOnce=nt.prototype.K,nt.prototype.getLastError=nt.prototype.Ha,nt.prototype.getLastErrorCode=nt.prototype.ya,nt.prototype.getStatus=nt.prototype.ca,nt.prototype.getResponseJson=nt.prototype.La,nt.prototype.getResponseText=nt.prototype.la,nt.prototype.send=nt.prototype.ea,nt.prototype.setWithCredentials=nt.prototype.Fa,kN=nt}).apply(typeof pf<"u"?pf:typeof self<"u"?self:typeof window<"u"?window:{});const UI="@firebase/firestore",zI="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Dt.UNAUTHENTICATED=new Dt(null),Dt.GOOGLE_CREDENTIALS=new Dt("google-credentials-uid"),Dt.FIRST_PARTY=new Dt("first-party-uid"),Dt.MOCK_USER=new Dt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _c="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Us=new Gp("@firebase/firestore");function Lo(){return Us.logLevel}function f8(t){Us.setLogLevel(t)}function q(t,...e){if(Us.logLevel<=fe.DEBUG){const n=e.map(Ew);Us.debug(`Firestore (${_c}): ${t}`,...n)}}function dt(t,...e){if(Us.logLevel<=fe.ERROR){const n=e.map(Ew);Us.error(`Firestore (${_c}): ${t}`,...n)}}function Wi(t,...e){if(Us.logLevel<=fe.WARN){const n=e.map(Ew);Us.warn(`Firestore (${_c}): ${t}`,...n)}}function Ew(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W(t,e,n){let i="Unexpected state";typeof e=="string"?i=e:n=e,UN(t,i,n)}function UN(t,e,n){let i=`FIRESTORE (${_c}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw dt(i),new Error(i)}function X(t,e,n,i){let r="Unexpected state";typeof n=="string"?r=n:i=n,t||UN(e,r,i)}function m8(t,e){t||W(57014,e)}function Q(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class F extends Zt{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qt{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zN{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class p8{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Dt.UNAUTHENTICATED))}shutdown(){}}class g8{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class y8{constructor(e){this.t=e,this.currentUser=Dt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){X(this.o===void 0,42304);let i=this.i;const r=l=>this.i!==i?(i=this.i,n(l)):Promise.resolve();let s=new qt;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new qt,e.enqueueRetryable(()=>r(this.currentUser))};const a=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await r(this.currentUser)})},o=l=>{q("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(l=>o(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?o(l):(q("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new qt)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(q("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(X(typeof i.accessToken=="string",31837,{l:i}),new zN(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return X(e===null||typeof e=="string",2055,{h:e}),new Dt(e)}}class _8{constructor(e,n,i){this.P=e,this.T=n,this.I=i,this.type="FirstParty",this.user=Dt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class v8{constructor(e,n,i){this.P=e,this.T=n,this.I=i}getToken(){return Promise.resolve(new _8(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Dt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class jI{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class T8{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Fe(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){X(this.o===void 0,3512);const i=s=>{s.error!=null&&q("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const a=s.token!==this.m;return this.m=s.token,q("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>i(s))};const r=s=>{q("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?r(s):q("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new jI(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(X(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new jI(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w8(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aw{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const r=w8(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<n&&(i+=e.charAt(r[s]%62))}return i}}function se(t,e){return t<e?-1:t>e?1:0}function Fv(t,e){const n=Math.min(t.length,e.length);for(let i=0;i<n;i++){const r=t.charAt(i),s=e.charAt(i);if(r!==s)return r_(r)===r_(s)?se(r,s):r_(r)?1:-1}return se(t.length,e.length)}const b8=55296,E8=57343;function r_(t){const e=t.charCodeAt(0);return e>=b8&&e<=E8}function Ol(t,e,n){return t.length===e.length&&t.every((i,r)=>n(i,e[r]))}function jN(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BI="__name__";class xi{constructor(e,n,i){n===void 0?n=0:n>e.length&&W(637,{offset:n,range:e.length}),i===void 0?i=e.length-n:i>e.length-n&&W(1746,{length:i,range:e.length-n}),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return xi.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof xi?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let r=0;r<i;r++){const s=xi.compareSegments(e.get(r),n.get(r));if(s!==0)return s}return se(e.length,n.length)}static compareSegments(e,n){const i=xi.isNumericId(e),r=xi.isNumericId(n);return i&&!r?-1:!i&&r?1:i&&r?xi.extractNumericId(e).compare(xi.extractNumericId(n)):Fv(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return xs.fromString(e.substring(4,e.length-2))}}class pe extends xi{construct(e,n,i){return new pe(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new F(U.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(r=>r.length>0))}return new pe(n)}static emptyPath(){return new pe([])}}const A8=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class We extends xi{construct(e,n,i){return new We(e,n,i)}static isValidIdentifier(e){return A8.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),We.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===BI}static keyField(){return new We([BI])}static fromServerFormat(e){const n=[];let i="",r=0;const s=()=>{if(i.length===0)throw new F(U.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let a=!1;for(;r<e.length;){const o=e[r];if(o==="\\"){if(r+1===e.length)throw new F(U.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[r+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new F(U.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=l,r+=2}else o==="`"?(a=!a,r++):o!=="."||a?(i+=o,r++):(s(),r++)}if(s(),a)throw new F(U.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new We(n)}static emptyPath(){return new We([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ${constructor(e){this.path=e}static fromPath(e){return new $(pe.fromString(e))}static fromName(e){return new $(pe.fromString(e).popFirst(5))}static empty(){return new $(pe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&pe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return pe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new $(new pe(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sw(t,e,n){if(!n)throw new F(U.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function BN(t,e,n,i){if(e===!0&&i===!0)throw new F(U.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function FI(t){if(!$.isDocumentKey(t))throw new F(U.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function qI(t){if($.isDocumentKey(t))throw new F(U.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function FN(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function ig(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":W(12329,{type:typeof t})}function we(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new F(U.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=ig(t);throw new F(U.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function qN(t,e){if(e<=0)throw new F(U.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bt(t,e){const n={typeString:t};return e&&(n.value=e),n}function _d(t,e){if(!FN(t))throw new F(U.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in e)if(e[i]){const r=e[i].typeString,s="value"in e[i]?{value:e[i].value}:void 0;if(!(i in t)){n=`JSON missing required field: '${i}'`;break}const a=t[i];if(r&&typeof a!==r){n=`JSON field '${i}' must be a ${r}.`;break}if(s!==void 0&&a!==s.value){n=`Expected '${i}' field to equal '${s.value}'`;break}}if(n)throw new F(U.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HI=-62135596800,GI=1e6;class Ae{static now(){return Ae.fromMillis(Date.now())}static fromDate(e){return Ae.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor((e-1e3*n)*GI);return new Ae(n,i)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new F(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new F(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<HI)throw new F(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new F(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/GI}_compareTo(e){return this.seconds===e.seconds?se(this.nanoseconds,e.nanoseconds):se(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ae._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(_d(e,Ae._jsonSchema))return new Ae(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-HI;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ae._jsonSchemaVersion="firestore/timestamp/1.0",Ae._jsonSchema={type:bt("string",Ae._jsonSchemaVersion),seconds:bt("number"),nanoseconds:bt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z{static fromTimestamp(e){return new Z(e)}static min(){return new Z(new Ae(0,0))}static max(){return new Z(new Ae(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ml=-1;class Xm{constructor(e,n,i,r){this.indexId=e,this.collectionGroup=n,this.fields=i,this.indexState=r}}function qv(t){return t.fields.find(e=>e.kind===2)}function va(t){return t.fields.filter(e=>e.kind!==2)}Xm.UNKNOWN_ID=-1;class Jf{constructor(e,n){this.fieldPath=e,this.kind=n}}class Ph{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new Ph(0,Hn.min())}}function HN(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=Z.fromTimestamp(i===1e9?new Ae(n+1,0):new Ae(n,i));return new Hn(r,$.empty(),e)}function GN(t){return new Hn(t.readTime,t.key,Ml)}class Hn{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new Hn(Z.min(),$.empty(),Ml)}static max(){return new Hn(Z.max(),$.empty(),Ml)}}function Iw(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=$.comparator(t.documentKey,e.documentKey),n!==0?n:se(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $N="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class KN{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zs(t){if(t.code!==U.FAILED_PRECONDITION||t.message!==$N)throw t;q("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&W(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new M((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(n,s).next(i,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof M?n:M.resolve(n)}catch(n){return M.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):M.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):M.reject(n)}static resolve(e){return new M((n,i)=>{n(e)})}static reject(e){return new M((n,i)=>{i(e)})}static waitFor(e){return new M((n,i)=>{let r=0,s=0,a=!1;e.forEach(o=>{++r,o.next(()=>{++s,a&&s===r&&n()},l=>i(l))}),a=!0,s===r&&n()})}static or(e){let n=M.resolve(!1);for(const i of e)n=n.next(r=>r?M.resolve(r):i());return n}static forEach(e,n){const i=[];return e.forEach((r,s)=>{i.push(n.call(this,r,s))}),this.waitFor(i)}static mapArray(e,n){return new M((i,r)=>{const s=e.length,a=new Array(s);let o=0;for(let l=0;l<s;l++){const c=l;n(e[c]).next(h=>{a[c]=h,++o,o===s&&i(a)},h=>r(h))}})}static doWhile(e,n){return new M((i,r)=>{const s=()=>{e()===!0?n().next(()=>{s()},r):i()};s()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cn="SimpleDb";class rg{static open(e,n,i,r){try{return new rg(n,e.transaction(r,i))}catch(s){throw new Ku(n,s)}}constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.S=new qt,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{n.error?this.S.reject(new Ku(e,n.error)):this.S.resolve()},this.transaction.onerror=i=>{const r=Rw(i.target.error);this.S.reject(new Ku(e,r))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(q(Cn,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new I8(n)}}class Fi{static delete(e){return q(Cn,"Removing database:",e),Ea($T().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!Eh())return!1;if(Fi.F())return!0;const e=Ze(),n=Fi.M(e),i=0<n&&n<10,r=QN(e),s=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||i||s)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)==null?void 0:e.__PRIVATE_USE_MOCK_PERSISTENCE)==="YES"}static O(e,n){return e.store(n)}static M(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(i)}constructor(e,n,i){this.name=e,this.version=n,this.N=i,this.B=null,Fi.M(Ze())===12.2&&dt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(q(Cn,"Opening database:",this.name),this.db=await new Promise((n,i)=>{const r=indexedDB.open(this.name,this.version);r.onsuccess=s=>{const a=s.target.result;n(a)},r.onblocked=()=>{i(new Ku(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=s=>{const a=s.target.error;a.name==="VersionError"?i(new F(U.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):a.name==="InvalidStateError"?i(new F(U.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a)):i(new Ku(e,a))},r.onupgradeneeded=s=>{q(Cn,'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const a=s.target.result;this.N.k(a,r.transaction,s.oldVersion,this.version).next(()=>{q(Cn,"Database upgrade to version "+this.version+" complete")})}})),this.q&&(this.db.onversionchange=n=>this.q(n)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,i,r){const s=n==="readonly";let a=0;for(;;){++a;try{this.db=await this.L(e);const o=rg.open(this.db,e,s?"readonly":"readwrite",i),l=r(o).next(c=>(o.C(),c)).catch(c=>(o.abort(c),M.reject(c))).toPromise();return l.catch(()=>{}),await o.D,l}catch(o){const l=o,c=l.name!=="FirebaseError"&&a<3;if(q(Cn,"Transaction failed with error:",l.message,"Retrying:",c),this.close(),!c)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}function QN(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class S8{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return Ea(this.U.delete())}}class Ku extends F{constructor(e,n){super(U.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function ea(t){return t.name==="IndexedDbTransactionError"}class I8{constructor(e){this.store=e}put(e,n){let i;return n!==void 0?(q(Cn,"PUT",this.store.name,e,n),i=this.store.put(n,e)):(q(Cn,"PUT",this.store.name,"<auto-key>",e),i=this.store.put(e)),Ea(i)}add(e){return q(Cn,"ADD",this.store.name,e,e),Ea(this.store.add(e))}get(e){return Ea(this.store.get(e)).next(n=>(n===void 0&&(n=null),q(Cn,"GET",this.store.name,e,n),n))}delete(e){return q(Cn,"DELETE",this.store.name,e),Ea(this.store.delete(e))}count(){return q(Cn,"COUNT",this.store.name),Ea(this.store.count())}J(e,n){const i=this.options(e,n),r=i.index?this.store.index(i.index):this.store;if(typeof r.getAll=="function"){const s=r.getAll(i.range);return new M((a,o)=>{s.onerror=l=>{o(l.target.error)},s.onsuccess=l=>{a(l.target.result)}})}{const s=this.cursor(i),a=[];return this.H(s,(o,l)=>{a.push(l)}).next(()=>a)}}Y(e,n){const i=this.store.getAll(e,n===null?void 0:n);return new M((r,s)=>{i.onerror=a=>{s(a.target.error)},i.onsuccess=a=>{r(a.target.result)}})}Z(e,n){q(Cn,"DELETE ALL",this.store.name);const i=this.options(e,n);i.X=!1;const r=this.cursor(i);return this.H(r,(s,a,o)=>o.delete())}ee(e,n){let i;n?i=e:(i={},n=e);const r=this.cursor(i);return this.H(r,n)}te(e){const n=this.cursor({});return new M((i,r)=>{n.onerror=s=>{const a=Rw(s.target.error);r(a)},n.onsuccess=s=>{const a=s.target.result;a?e(a.primaryKey,a.value).next(o=>{o?a.continue():i()}):i()}})}H(e,n){const i=[];return new M((r,s)=>{e.onerror=a=>{s(a.target.error)},e.onsuccess=a=>{const o=a.target.result;if(!o)return void r();const l=new S8(o),c=n(o.primaryKey,o.value,l);if(c instanceof M){const h=c.catch(d=>(l.done(),M.reject(d)));i.push(h)}l.isDone?r():l.G===null?o.continue():o.continue(l.G)}}).next(()=>M.waitFor(i))}options(e,n){let i;return e!==void 0&&(typeof e=="string"?i=e:n=e),{index:i,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const i=this.store.index(e.index);return e.X?i.openKeyCursor(e.range,n):i.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function Ea(t){return new M((e,n)=>{t.onsuccess=i=>{const r=i.target.result;e(r)},t.onerror=i=>{const r=Rw(i.target.error);n(r)}})}let $I=!1;function Rw(t){const e=Fi.M(Ze());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const i=new F("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return $I||($I=!0,setTimeout(()=>{throw i},0)),i}}return t}const Qu="IndexBackfiller";class R8{constructor(e,n){this.asyncQueue=e,this.ne=n,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){q(Qu,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{const n=await this.ne.ie();q(Qu,`Documents written: ${n}`)}catch(n){ea(n)?q(Qu,"Ignoring IndexedDB error during index backfill: ",n):await Zs(n)}await this.re(6e4)})}}class x8{constructor(e,n){this.localStore=e,this.persistence=n}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.se(n,e))}se(e,n){const i=new Set;let r=n,s=!0;return M.doWhile(()=>s===!0&&r>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(a=>{if(a!==null&&!i.has(a))return q(Qu,`Processing collection: ${a}`),this.oe(e,a,r).next(o=>{r-=o,i.add(a)});s=!1})).next(()=>n-r)}oe(e,n,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(r=>this.localStore.localDocuments.getNextDocuments(e,n,r,i).next(s=>{const a=s.changes;return this.localStore.indexManager.updateIndexEntries(e,a).next(()=>this._e(r,s)).next(o=>(q(Qu,`Updating offset: ${o}`),this.localStore.indexManager.updateCollectionGroup(e,n,o))).next(()=>a.size)}))}_e(e,n){let i=e;return n.changes.forEach((r,s)=>{const a=GN(s);Iw(a,i)>0&&(i=a)}),new Hn(i.readTime,i.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>n.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}vn.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cs=-1;function vd(t){return t==null}function Dh(t){return t===0&&1/t==-1/0}function WN(t){return typeof t=="number"&&Number.isInteger(t)&&!Dh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jm="";function en(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=KI(e)),e=C8(t.get(n),e);return KI(e)}function C8(t,e){let n=e;const i=t.length;for(let r=0;r<i;r++){const s=t.charAt(r);switch(s){case"\0":n+="";break;case Jm:n+="";break;default:n+=s}}return n}function KI(t){return t+Jm+""}function zi(t){const e=t.length;if(X(e>=2,64408,{path:t}),e===2)return X(t.charAt(0)===Jm&&t.charAt(1)==="",56145,{path:t}),pe.emptyPath();const n=e-2,i=[];let r="";for(let s=0;s<e;){const a=t.indexOf(Jm,s);switch((a<0||a>n)&&W(50515,{path:t}),t.charAt(a+1)){case"":const o=t.substring(s,a);let l;r.length===0?l=o:(r+=o,l=r,r=""),i.push(l);break;case"":r+=t.substring(s,a),r+="\0";break;case"":r+=t.substring(s,a+1);break;default:W(61167,{path:t})}s=a+2}return new pe(i)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ta="remoteDocuments",Td="owner",Ro="owner",Nh="mutationQueues",P8="userId",_i="mutations",QI="batchId",Ca="userMutationsIndex",WI=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zf(t,e){return[t,en(e)]}function YN(t,e,n){return[t,en(e),n]}const D8={},Ll="documentMutations",Zm="remoteDocumentsV14",N8=["prefixPath","collectionGroup","readTime","documentId"],em="documentKeyIndex",k8=["prefixPath","collectionGroup","documentId"],XN="collectionGroupIndex",V8=["collectionGroup","readTime","prefixPath","documentId"],kh="remoteDocumentGlobal",Hv="remoteDocumentGlobalKey",Ul="targets",JN="queryTargetsIndex",O8=["canonicalId","targetId"],zl="targetDocuments",M8=["targetId","path"],xw="documentTargetsIndex",L8=["path","targetId"],ep="targetGlobalKey",ja="targetGlobal",Vh="collectionParents",U8=["collectionId","parent"],jl="clientMetadata",z8="clientId",sg="bundles",j8="bundleId",ag="namedQueries",B8="name",Cw="indexConfiguration",F8="indexId",Gv="collectionGroupIndex",q8="collectionGroup",Wu="indexState",H8=["indexId","uid"],ZN="sequenceNumberIndex",G8=["uid","sequenceNumber"],Yu="indexEntries",$8=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],ek="documentKeyIndex",K8=["indexId","uid","orderedDocumentKey"],og="documentOverlays",Q8=["userId","collectionPath","documentId"],$v="collectionPathOverlayIndex",W8=["userId","collectionPath","largestBatchId"],tk="collectionGroupOverlayIndex",Y8=["userId","collectionGroup","largestBatchId"],Pw="globals",X8="name",nk=[Nh,_i,Ll,Ta,Ul,Td,ja,zl,jl,kh,Vh,sg,ag],J8=[...nk,og],ik=[Nh,_i,Ll,Zm,Ul,Td,ja,zl,jl,kh,Vh,sg,ag,og],rk=ik,Dw=[...rk,Cw,Wu,Yu],Z8=Dw,sk=[...Dw,Pw],e7=sk;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kv extends KN{constructor(e,n){super(),this.le=e,this.currentSequenceNumber=n}}function Rt(t,e){const n=Q(t);return Fi.O(n.le,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YI(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ta(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function ak(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Le{constructor(e,n){this.comparator=e,this.root=n||Lt.EMPTY}insert(e,n){return new Le(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Lt.BLACK,null,null))}remove(e){return new Le(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Lt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){const e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new gf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new gf(this.root,e,this.comparator,!1)}getReverseIterator(){return new gf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new gf(this.root,e,this.comparator,!0)}}class gf{constructor(e,n,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?i(e.key,n):1,n&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Lt{constructor(e,n,i,r,s){this.key=e,this.value=n,this.color=i??Lt.RED,this.left=r??Lt.EMPTY,this.right=s??Lt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,r,s){return new Lt(e??this.key,n??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this;const s=i(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,n,i),null):s===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Lt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return Lt.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Lt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Lt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw W(43730,{key:this.key,value:this.value});if(this.right.isRed())throw W(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw W(27949);return e+(this.isRed()?0:1)}}Lt.EMPTY=null,Lt.RED=!0,Lt.BLACK=!1;Lt.EMPTY=new class{constructor(){this.size=0}get key(){throw W(57766)}get value(){throw W(16141)}get color(){throw W(16727)}get left(){throw W(29726)}get right(){throw W(36894)}copy(e,n,i,r,s){return this}insert(e,n,i){return new Lt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xe{constructor(e){this.comparator=e,this.data=new Le(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new XI(this.data.getIterator())}getIteratorFrom(e){return new XI(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof xe)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=i.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new xe(this.comparator);return n.data=e,n}}class XI{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function xo(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(e){this.fields=e,e.sort(We.comparator)}static empty(){return new Tn([])}unionWith(e){let n=new xe(We.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new Tn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ol(this.fields,e.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ok extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t7(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new ok("Invalid base64 string: "+s):s}}(e);return new at(n)}static fromUint8Array(e){const n=function(r){let s="";for(let a=0;a<r.length;++a)s+=String.fromCharCode(r[a]);return s}(e);return new at(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return se(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}at.EMPTY_BYTE_STRING=new at("");const n7=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Pr(t){if(X(!!t,39018),typeof t=="string"){let e=0;const n=n7.exec(t);if(X(!!n,46558,{timestamp:t}),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Qe(t.seconds),nanos:Qe(t.nanos)}}function Qe(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Dr(t){return typeof t=="string"?at.fromBase64String(t):at.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lk="server_timestamp",ck="__type__",uk="__previous_value__",hk="__local_write_time__";function lg(t){var n,i;return((i=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[ck])==null?void 0:i.stringValue)===lk}function cg(t){const e=t.mapValue.fields[uk];return lg(e)?cg(e):e}function Oh(t){const e=Pr(t.mapValue.fields[hk].timestampValue);return new Ae(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i7{constructor(e,n,i,r,s,a,o,l,c,h){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=o,this.longPollingOptions=l,this.useFetchStreams=c,this.isUsingEmulator=h}}const Qv="(default)";class zs{constructor(e,n){this.projectId=e,this.database=n||Qv}static empty(){return new zs("","")}get isDefaultDatabase(){return this.database===Qv}isEqual(e){return e instanceof zs&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nw="__type__",dk="__max__",ps={mapValue:{fields:{__type__:{stringValue:dk}}}},kw="__vector__",Bl="value",tm={nullValue:"NULL_VALUE"};function js(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?lg(t)?4:fk(t)?9007199254740991:ug(t)?10:11:W(28295,{value:t})}function Yi(t,e){if(t===e)return!0;const n=js(t);if(n!==js(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Oh(t).isEqual(Oh(e));case 3:return function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const a=Pr(r.timestampValue),o=Pr(s.timestampValue);return a.seconds===o.seconds&&a.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,s){return Dr(r.bytesValue).isEqual(Dr(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,s){return Qe(r.geoPointValue.latitude)===Qe(s.geoPointValue.latitude)&&Qe(r.geoPointValue.longitude)===Qe(s.geoPointValue.longitude)}(t,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return Qe(r.integerValue)===Qe(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const a=Qe(r.doubleValue),o=Qe(s.doubleValue);return a===o?Dh(a)===Dh(o):isNaN(a)&&isNaN(o)}return!1}(t,e);case 9:return Ol(t.arrayValue.values||[],e.arrayValue.values||[],Yi);case 10:case 11:return function(r,s){const a=r.mapValue.fields||{},o=s.mapValue.fields||{};if(YI(a)!==YI(o))return!1;for(const l in a)if(a.hasOwnProperty(l)&&(o[l]===void 0||!Yi(a[l],o[l])))return!1;return!0}(t,e);default:return W(52216,{left:t})}}function Mh(t,e){return(t.values||[]).find(n=>Yi(n,e))!==void 0}function Bs(t,e){if(t===e)return 0;const n=js(t),i=js(e);if(n!==i)return se(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return se(t.booleanValue,e.booleanValue);case 2:return function(s,a){const o=Qe(s.integerValue||s.doubleValue),l=Qe(a.integerValue||a.doubleValue);return o<l?-1:o>l?1:o===l?0:isNaN(o)?isNaN(l)?0:-1:1}(t,e);case 3:return JI(t.timestampValue,e.timestampValue);case 4:return JI(Oh(t),Oh(e));case 5:return Fv(t.stringValue,e.stringValue);case 6:return function(s,a){const o=Dr(s),l=Dr(a);return o.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,a){const o=s.split("/"),l=a.split("/");for(let c=0;c<o.length&&c<l.length;c++){const h=se(o[c],l[c]);if(h!==0)return h}return se(o.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,a){const o=se(Qe(s.latitude),Qe(a.latitude));return o!==0?o:se(Qe(s.longitude),Qe(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return ZI(t.arrayValue,e.arrayValue);case 10:return function(s,a){var f,p,w,E;const o=s.fields||{},l=a.fields||{},c=(f=o[Bl])==null?void 0:f.arrayValue,h=(p=l[Bl])==null?void 0:p.arrayValue,d=se(((w=c==null?void 0:c.values)==null?void 0:w.length)||0,((E=h==null?void 0:h.values)==null?void 0:E.length)||0);return d!==0?d:ZI(c,h)}(t.mapValue,e.mapValue);case 11:return function(s,a){if(s===ps.mapValue&&a===ps.mapValue)return 0;if(s===ps.mapValue)return 1;if(a===ps.mapValue)return-1;const o=s.fields||{},l=Object.keys(o),c=a.fields||{},h=Object.keys(c);l.sort(),h.sort();for(let d=0;d<l.length&&d<h.length;++d){const f=Fv(l[d],h[d]);if(f!==0)return f;const p=Bs(o[l[d]],c[h[d]]);if(p!==0)return p}return se(l.length,h.length)}(t.mapValue,e.mapValue);default:throw W(23264,{he:n})}}function JI(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return se(t,e);const n=Pr(t),i=Pr(e),r=se(n.seconds,i.seconds);return r!==0?r:se(n.nanos,i.nanos)}function ZI(t,e){const n=t.values||[],i=e.values||[];for(let r=0;r<n.length&&r<i.length;++r){const s=Bs(n[r],i[r]);if(s)return s}return se(n.length,i.length)}function Fl(t){return Wv(t)}function Wv(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const i=Pr(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Dr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return $.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",r=!0;for(const s of n.values||[])r?r=!1:i+=",",i+=Wv(s);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){const i=Object.keys(n.fields||{}).sort();let r="{",s=!0;for(const a of i)s?s=!1:r+=",",r+=`${a}:${Wv(n.fields[a])}`;return r+"}"}(t.mapValue):W(61005,{value:t})}function nm(t){switch(js(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=cg(t);return e?16+nm(e):16;case 5:return 2*t.stringValue.length;case 6:return Dr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((r,s)=>r+nm(s),0)}(t.arrayValue);case 10:case 11:return function(i){let r=0;return ta(i.fields,(s,a)=>{r+=s.length+nm(a)}),r}(t.mapValue);default:throw W(13486,{value:t})}}function Xa(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Yv(t){return!!t&&"integerValue"in t}function Lh(t){return!!t&&"arrayValue"in t}function e1(t){return!!t&&"nullValue"in t}function t1(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function im(t){return!!t&&"mapValue"in t}function ug(t){var n,i;return((i=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[Nw])==null?void 0:i.stringValue)===kw}function Xu(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return ta(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=Xu(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Xu(t.arrayValue.values[n]);return e}return{...t}}function fk(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===dk}const mk={mapValue:{fields:{[Nw]:{stringValue:kw},[Bl]:{arrayValue:{}}}}};function r7(t){return"nullValue"in t?tm:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Xa(zs.empty(),$.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?ug(t)?mk:{mapValue:{}}:W(35942,{value:t})}function s7(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Xa(zs.empty(),$.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?mk:"mapValue"in t?ug(t)?{mapValue:{}}:ps:W(61959,{value:t})}function n1(t,e){const n=Bs(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function i1(t,e){const n=Bs(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e){this.value=e}static empty(){return new jt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!im(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Xu(n)}setAll(e){let n=We.emptyPath(),i={},r=[];e.forEach((a,o)=>{if(!n.isImmediateParentOf(o)){const l=this.getFieldsMap(n);this.applyChanges(l,i,r),i={},r=[],n=o.popLast()}a?i[o.lastSegment()]=Xu(a):r.push(o.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,i,r)}delete(e){const n=this.field(e.popLast());im(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Yi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=n.mapValue.fields[e.get(i)];im(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,i){ta(n,(r,s)=>e[r]=s);for(const r of i)delete e[r]}clone(){return new jt(Xu(this.value))}}function pk(t){const e=[];return ta(t.fields,(n,i)=>{const r=new We([n]);if(im(i)){const s=pk(i.mapValue).fields;if(s.length===0)e.push(r);else for(const a of s)e.push(r.child(a))}else e.push(r)}),new Tn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Be{constructor(e,n,i,r,s,a,o){this.key=e,this.documentType=n,this.version=i,this.readTime=r,this.createTime=s,this.data=a,this.documentState=o}static newInvalidDocument(e){return new Be(e,0,Z.min(),Z.min(),Z.min(),jt.empty(),0)}static newFoundDocument(e,n,i,r){return new Be(e,1,n,Z.min(),i,r,0)}static newNoDocument(e,n){return new Be(e,2,n,Z.min(),Z.min(),jt.empty(),0)}static newUnknownDocument(e,n){return new Be(e,3,n,Z.min(),Z.min(),jt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Z.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=jt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=jt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Z.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Be&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Be(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fs{constructor(e,n){this.position=e,this.inclusive=n}}function r1(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){const s=e[r],a=t.position[r];if(s.field.isKeyField()?i=$.comparator($.fromName(a.referenceValue),n.key):i=Bs(a,n.data.field(s.field)),s.dir==="desc"&&(i*=-1),i!==0)break}return i}function s1(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Yi(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uh{constructor(e,n="asc"){this.field=e,this.dir=n}}function a7(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gk{}class ye extends gk{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new o7(e,n,i):n==="array-contains"?new u7(e,i):n==="in"?new bk(e,i):n==="not-in"?new h7(e,i):n==="array-contains-any"?new d7(e,i):new ye(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new l7(e,i):new c7(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Bs(n,this.value)):n!==null&&js(this.value)===js(n)&&this.matchesComparison(Bs(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return W(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Re extends gk{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Re(e,n)}matches(e){return ql(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function ql(t){return t.op==="and"}function Xv(t){return t.op==="or"}function Vw(t){return yk(t)&&ql(t)}function yk(t){for(const e of t.filters)if(e instanceof Re)return!1;return!0}function Jv(t){if(t instanceof ye)return t.field.canonicalString()+t.op.toString()+Fl(t.value);if(Vw(t))return t.filters.map(e=>Jv(e)).join(",");{const e=t.filters.map(n=>Jv(n)).join(",");return`${t.op}(${e})`}}function _k(t,e){return t instanceof ye?function(i,r){return r instanceof ye&&i.op===r.op&&i.field.isEqual(r.field)&&Yi(i.value,r.value)}(t,e):t instanceof Re?function(i,r){return r instanceof Re&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((s,a,o)=>s&&_k(a,r.filters[o]),!0):!1}(t,e):void W(19439)}function vk(t,e){const n=t.filters.concat(e);return Re.create(n,t.op)}function Tk(t){return t instanceof ye?function(n){return`${n.field.canonicalString()} ${n.op} ${Fl(n.value)}`}(t):t instanceof Re?function(n){return n.op.toString()+" {"+n.getFilters().map(Tk).join(" ,")+"}"}(t):"Filter"}class o7 extends ye{constructor(e,n,i){super(e,n,i),this.key=$.fromName(i.referenceValue)}matches(e){const n=$.comparator(e.key,this.key);return this.matchesComparison(n)}}class l7 extends ye{constructor(e,n){super(e,"in",n),this.keys=wk("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class c7 extends ye{constructor(e,n){super(e,"not-in",n),this.keys=wk("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function wk(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(i=>$.fromName(i.referenceValue))}class u7 extends ye{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Lh(n)&&Mh(n.arrayValue,this.value)}}class bk extends ye{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Mh(this.value.arrayValue,n)}}class h7 extends ye{constructor(e,n){super(e,"not-in",n)}matches(e){if(Mh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Mh(this.value.arrayValue,n)}}class d7 extends ye{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Lh(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>Mh(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f7{constructor(e,n=null,i=[],r=[],s=null,a=null,o=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=a,this.endAt=o,this.Te=null}}function Zv(t,e=null,n=[],i=[],r=null,s=null,a=null){return new f7(t,e,n,i,r,s,a)}function Ja(t){const e=Q(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>Jv(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(s){return s.field.canonicalString()+s.dir}(i)).join(","),vd(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>Fl(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>Fl(i)).join(",")),e.Te=n}return e.Te}function wd(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!a7(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!_k(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!s1(t.startAt,e.startAt)&&s1(t.endAt,e.endAt)}function tp(t){return $.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function np(t,e){return t.filters.filter(n=>n instanceof ye&&n.field.isEqual(e))}function a1(t,e,n){let i=tm,r=!0;for(const s of np(t,e)){let a=tm,o=!0;switch(s.op){case"<":case"<=":a=r7(s.value);break;case"==":case"in":case">=":a=s.value;break;case">":a=s.value,o=!1;break;case"!=":case"not-in":a=tm}n1({value:i,inclusive:r},{value:a,inclusive:o})<0&&(i=a,r=o)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const a=n.position[s];n1({value:i,inclusive:r},{value:a,inclusive:n.inclusive})<0&&(i=a,r=n.inclusive);break}}return{value:i,inclusive:r}}function o1(t,e,n){let i=ps,r=!0;for(const s of np(t,e)){let a=ps,o=!0;switch(s.op){case">=":case">":a=s7(s.value),o=!1;break;case"==":case"in":case"<=":a=s.value;break;case"<":a=s.value,o=!1;break;case"!=":case"not-in":a=ps}i1({value:i,inclusive:r},{value:a,inclusive:o})>0&&(i=a,r=o)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const a=n.position[s];i1({value:i,inclusive:r},{value:a,inclusive:n.inclusive})>0&&(i=a,r=n.inclusive);break}}return{value:i,inclusive:r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lr{constructor(e,n=null,i=[],r=[],s=null,a="F",o=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=a,this.startAt=o,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function Ek(t,e,n,i,r,s,a,o){return new Lr(t,e,n,i,r,s,a,o)}function vc(t){return new Lr(t)}function l1(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Ow(t){return t.collectionGroup!==null}function yl(t){const e=Q(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const s of e.explicitOrderBy)e.Ie.push(s),n.add(s.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let o=new xe(We.comparator);return a.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(o=o.add(c.field))})}),o})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new Uh(s,i))}),n.has(We.keyField().canonicalString())||e.Ie.push(new Uh(We.keyField(),i))}return e.Ie}function hn(t){const e=Q(t);return e.Ee||(e.Ee=m7(e,yl(t))),e.Ee}function m7(t,e){if(t.limitType==="F")return Zv(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{const s=r.dir==="desc"?"asc":"desc";return new Uh(r.field,s)});const n=t.endAt?new Fs(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new Fs(t.startAt.position,t.startAt.inclusive):null;return Zv(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function e0(t,e){const n=t.filters.concat([e]);return new Lr(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function ip(t,e,n){return new Lr(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function bd(t,e){return wd(hn(t),hn(e))&&t.limitType===e.limitType}function Ak(t){return`${Ja(hn(t))}|lt:${t.limitType}`}function Uo(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(r=>Tk(r)).join(", ")}]`),vd(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(r=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(r)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(r=>Fl(r)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(r=>Fl(r)).join(",")),`Target(${i})`}(hn(t))}; limitType=${t.limitType})`}function Ed(t,e){return e.isFoundDocument()&&function(i,r){const s=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(s):$.isDocumentKey(i.path)?i.path.isEqual(s):i.path.isImmediateParentOf(s)}(t,e)&&function(i,r){for(const s of yl(i))if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0}(t,e)&&function(i,r){for(const s of i.filters)if(!s.matches(r))return!1;return!0}(t,e)&&function(i,r){return!(i.startAt&&!function(a,o,l){const c=r1(a,o,l);return a.inclusive?c<=0:c<0}(i.startAt,yl(i),r)||i.endAt&&!function(a,o,l){const c=r1(a,o,l);return a.inclusive?c>=0:c>0}(i.endAt,yl(i),r))}(t,e)}function Sk(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Ik(t){return(e,n)=>{let i=!1;for(const r of yl(t)){const s=p7(r,e,n);if(s!==0)return s;i=i||r.field.isKeyField()}return 0}}function p7(t,e,n){const i=t.field.isKeyField()?$.comparator(e.key,n.key):function(s,a,o){const l=a.data.field(s),c=o.data.field(s);return l!==null&&c!==null?Bs(l,c):W(42886)}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return W(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[r,s]of i)if(this.equalsFn(r,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){ta(this.inner,(n,i)=>{for(const[r,s]of i)e(r,s)})}isEmpty(){return ak(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g7=new Le($.comparator);function wn(){return g7}const Rk=new Le($.comparator);function Tu(...t){let e=Rk;for(const n of t)e=e.insert(n.key,n);return e}function xk(t){let e=Rk;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function ji(){return Ju()}function Ck(){return Ju()}function Ju(){return new Ur(t=>t.toString(),(t,e)=>t.isEqual(e))}const y7=new Le($.comparator),_7=new xe($.comparator);function ce(...t){let e=_7;for(const n of t)e=e.add(n);return e}const v7=new xe(se);function Mw(){return v7}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lw(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Dh(e)?"-0":e}}function Pk(t){return{integerValue:""+t}}function Dk(t,e){return WN(e)?Pk(e):Lw(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hg{constructor(){this._=void 0}}function T7(t,e,n){return t instanceof Hl?function(r,s){const a={fields:{[ck]:{stringValue:lk},[hk]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&lg(s)&&(s=cg(s)),s&&(a.fields[uk]=s),{mapValue:a}}(n,e):t instanceof Za?kk(t,e):t instanceof eo?Vk(t,e):function(r,s){const a=Nk(r,s),o=c1(a)+c1(r.Ae);return Yv(a)&&Yv(r.Ae)?Pk(o):Lw(r.serializer,o)}(t,e)}function w7(t,e,n){return t instanceof Za?kk(t,e):t instanceof eo?Vk(t,e):n}function Nk(t,e){return t instanceof Gl?function(i){return Yv(i)||function(s){return!!s&&"doubleValue"in s}(i)}(e)?e:{integerValue:0}:null}class Hl extends hg{}class Za extends hg{constructor(e){super(),this.elements=e}}function kk(t,e){const n=Ok(e);for(const i of t.elements)n.some(r=>Yi(r,i))||n.push(i);return{arrayValue:{values:n}}}class eo extends hg{constructor(e){super(),this.elements=e}}function Vk(t,e){let n=Ok(e);for(const i of t.elements)n=n.filter(r=>!Yi(r,i));return{arrayValue:{values:n}}}class Gl extends hg{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function c1(t){return Qe(t.integerValue||t.doubleValue)}function Ok(t){return Lh(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ad{constructor(e,n){this.field=e,this.transform=n}}function b7(t,e){return t.field.isEqual(e.field)&&function(i,r){return i instanceof Za&&r instanceof Za||i instanceof eo&&r instanceof eo?Ol(i.elements,r.elements,Yi):i instanceof Gl&&r instanceof Gl?Yi(i.Ae,r.Ae):i instanceof Hl&&r instanceof Hl}(t.transform,e.transform)}class E7{constructor(e,n){this.version=e,this.transformResults=n}}class Ye{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Ye}static exists(e){return new Ye(void 0,e)}static updateTime(e){return new Ye(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function rm(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class dg{}function Mk(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new wc(t.key,Ye.none()):new Tc(t.key,t.data,Ye.none());{const n=t.data,i=jt.empty();let r=new xe(We.comparator);for(let s of e.fields)if(!r.has(s)){let a=n.field(s);a===null&&s.length>1&&(s=s.popLast(),a=n.field(s)),a===null?i.delete(s):i.set(s,a),r=r.add(s)}return new zr(t.key,i,new Tn(r.toArray()),Ye.none())}}function A7(t,e,n){t instanceof Tc?function(r,s,a){const o=r.value.clone(),l=h1(r.fieldTransforms,s,a.transformResults);o.setAll(l),s.convertToFoundDocument(a.version,o).setHasCommittedMutations()}(t,e,n):t instanceof zr?function(r,s,a){if(!rm(r.precondition,s))return void s.convertToUnknownDocument(a.version);const o=h1(r.fieldTransforms,s,a.transformResults),l=s.data;l.setAll(Lk(r)),l.setAll(o),s.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(t,e,n):function(r,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function Zu(t,e,n,i){return t instanceof Tc?function(s,a,o,l){if(!rm(s.precondition,a))return o;const c=s.value.clone(),h=d1(s.fieldTransforms,l,a);return c.setAll(h),a.convertToFoundDocument(a.version,c).setHasLocalMutations(),null}(t,e,n,i):t instanceof zr?function(s,a,o,l){if(!rm(s.precondition,a))return o;const c=d1(s.fieldTransforms,l,a),h=a.data;return h.setAll(Lk(s)),h.setAll(c),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),o===null?null:o.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(t,e,n,i):function(s,a,o){return rm(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):o}(t,e,n)}function S7(t,e){let n=null;for(const i of t.fieldTransforms){const r=e.data.field(i.field),s=Nk(i.transform,r||null);s!=null&&(n===null&&(n=jt.empty()),n.set(i.field,s))}return n||null}function u1(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&Ol(i,r,(s,a)=>b7(s,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Tc extends dg{constructor(e,n,i,r=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class zr extends dg{constructor(e,n,i,r,s=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function Lk(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}}),e}function h1(t,e,n){const i=new Map;X(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let r=0;r<n.length;r++){const s=t[r],a=s.transform,o=e.data.field(s.field);i.set(s.field,w7(a,o,n[r]))}return i}function d1(t,e,n){const i=new Map;for(const r of t){const s=r.transform,a=n.data.field(r.field);i.set(r.field,T7(s,a,e))}return i}class wc extends dg{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Uw extends dg{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zw{constructor(e,n,i,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const s=this.mutations[r];s.key.isEqual(e.key)&&A7(s,e,i[r])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=Zu(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=Zu(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=Ck();return this.mutations.forEach(r=>{const s=e.get(r.key),a=s.overlayedDocument;let o=this.applyToLocalView(a,s.mutatedFields);o=n.has(r.key)?null:o;const l=Mk(a,o);l!==null&&i.set(r.key,l),a.isValidDocument()||a.convertToNoDocument(Z.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ce())}isEqual(e){return this.batchId===e.batchId&&Ol(this.mutations,e.mutations,(n,i)=>u1(n,i))&&Ol(this.baseMutations,e.baseMutations,(n,i)=>u1(n,i))}}class jw{constructor(e,n,i,r){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(e,n,i){X(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let r=function(){return y7}();const s=e.mutations;for(let a=0;a<s.length;a++)r=r.insert(s[a].key,i[a].version);return new jw(e,n,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bw{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I7{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var gt,Te;function Uk(t){switch(t){case U.OK:return W(64938);case U.CANCELLED:case U.UNKNOWN:case U.DEADLINE_EXCEEDED:case U.RESOURCE_EXHAUSTED:case U.INTERNAL:case U.UNAVAILABLE:case U.UNAUTHENTICATED:return!1;case U.INVALID_ARGUMENT:case U.NOT_FOUND:case U.ALREADY_EXISTS:case U.PERMISSION_DENIED:case U.FAILED_PRECONDITION:case U.ABORTED:case U.OUT_OF_RANGE:case U.UNIMPLEMENTED:case U.DATA_LOSS:return!0;default:return W(15467,{code:t})}}function zk(t){if(t===void 0)return dt("GRPC error has no .code"),U.UNKNOWN;switch(t){case gt.OK:return U.OK;case gt.CANCELLED:return U.CANCELLED;case gt.UNKNOWN:return U.UNKNOWN;case gt.DEADLINE_EXCEEDED:return U.DEADLINE_EXCEEDED;case gt.RESOURCE_EXHAUSTED:return U.RESOURCE_EXHAUSTED;case gt.INTERNAL:return U.INTERNAL;case gt.UNAVAILABLE:return U.UNAVAILABLE;case gt.UNAUTHENTICATED:return U.UNAUTHENTICATED;case gt.INVALID_ARGUMENT:return U.INVALID_ARGUMENT;case gt.NOT_FOUND:return U.NOT_FOUND;case gt.ALREADY_EXISTS:return U.ALREADY_EXISTS;case gt.PERMISSION_DENIED:return U.PERMISSION_DENIED;case gt.FAILED_PRECONDITION:return U.FAILED_PRECONDITION;case gt.ABORTED:return U.ABORTED;case gt.OUT_OF_RANGE:return U.OUT_OF_RANGE;case gt.UNIMPLEMENTED:return U.UNIMPLEMENTED;case gt.DATA_LOSS:return U.DATA_LOSS;default:return W(39323,{code:t})}}(Te=gt||(gt={}))[Te.OK=0]="OK",Te[Te.CANCELLED=1]="CANCELLED",Te[Te.UNKNOWN=2]="UNKNOWN",Te[Te.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Te[Te.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Te[Te.NOT_FOUND=5]="NOT_FOUND",Te[Te.ALREADY_EXISTS=6]="ALREADY_EXISTS",Te[Te.PERMISSION_DENIED=7]="PERMISSION_DENIED",Te[Te.UNAUTHENTICATED=16]="UNAUTHENTICATED",Te[Te.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Te[Te.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Te[Te.ABORTED=10]="ABORTED",Te[Te.OUT_OF_RANGE=11]="OUT_OF_RANGE",Te[Te.UNIMPLEMENTED=12]="UNIMPLEMENTED",Te[Te.INTERNAL=13]="INTERNAL",Te[Te.UNAVAILABLE=14]="UNAVAILABLE",Te[Te.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jk(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R7=new xs([4294967295,4294967295],0);function f1(t){const e=jk().encode(t),n=new NN;return n.update(e),new Uint8Array(n.digest())}function m1(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new xs([n,i],0),new xs([r,s],0)]}class Fw{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new wu(`Invalid padding: ${n}`);if(i<0)throw new wu(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new wu(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new wu(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=xs.fromNumber(this.ge)}ye(e,n,i){let r=e.add(n.multiply(xs.fromNumber(i)));return r.compare(R7)===1&&(r=new xs([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=f1(e),[i,r]=m1(n);for(let s=0;s<this.hashCount;s++){const a=this.ye(i,r,s);if(!this.we(a))return!1}return!0}static create(e,n,i){const r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),a=new Fw(s,r,n);return i.forEach(o=>a.insert(o)),a}insert(e){if(this.ge===0)return;const n=f1(e),[i,r]=m1(n);for(let s=0;s<this.hashCount;s++){const a=this.ye(i,r,s);this.Se(a)}}Se(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class wu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sd{constructor(e,n,i,r,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const r=new Map;return r.set(e,Id.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new Sd(Z.min(),r,new Le(se),wn(),ce())}}class Id{constructor(e,n,i,r,s){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new Id(i,n,ce(),ce(),ce())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sm{constructor(e,n,i,r){this.be=e,this.removedTargetIds=n,this.key=i,this.De=r}}class Bk{constructor(e,n){this.targetId=e,this.Ce=n}}class Fk{constructor(e,n,i=at.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=r}}class p1{constructor(){this.ve=0,this.Fe=g1(),this.Me=at.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ce(),n=ce(),i=ce();return this.Fe.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:W(38017,{changeType:s})}}),new Id(this.Me,this.xe,e,n,i)}qe(){this.Oe=!1,this.Fe=g1()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,X(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class x7{constructor(e){this.Ge=e,this.ze=new Map,this.je=wn(),this.Je=yf(),this.He=yf(),this.Ye=new Le(se)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const i=this.nt(n);switch(e.state){case 0:this.rt(n)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),i.Le(e.resumeToken));break;default:W(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((i,r)=>{this.rt(r)&&n(r)})}st(e){const n=e.targetId,i=e.Ce.count,r=this.ot(n);if(r){const s=r.target;if(tp(s))if(i===0){const a=new $(s.path);this.et(n,a,Be.newNoDocument(a,Z.min()))}else X(i===1,20013,{expectedCount:i});else{const a=this._t(n);if(a!==i){const o=this.ut(e),l=o?this.ct(o,e,a):1;if(l!==0){this.it(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,c)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:s=0}=n;let a,o;try{a=Dr(i).toUint8Array()}catch(l){if(l instanceof ok)return Wi("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{o=new Fw(a,r,s)}catch(l){return Wi(l instanceof wu?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return o.ge===0?null:o}ct(e,n,i){return n.Ce.count===i-this.Pt(e,n.targetId)?0:2}Pt(e,n){const i=this.Ge.getRemoteKeysForTarget(n);let r=0;return i.forEach(s=>{const a=this.Ge.ht(),o=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;e.mightContain(o)||(this.et(n,s,null),r++)}),r}Tt(e){const n=new Map;this.ze.forEach((s,a)=>{const o=this.ot(a);if(o){if(s.current&&tp(o.target)){const l=new $(o.target.path);this.It(l).has(a)||this.Et(a,l)||this.et(a,l,Be.newNoDocument(l,e))}s.Be&&(n.set(a,s.ke()),s.qe())}});let i=ce();this.He.forEach((s,a)=>{let o=!0;a.forEachWhile(l=>{const c=this.ot(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)}),o&&(i=i.add(s))}),this.je.forEach((s,a)=>a.setReadTime(e));const r=new Sd(e,n,this.Ye,this.je,i);return this.je=wn(),this.Je=yf(),this.He=yf(),this.Ye=new Le(se),r}Xe(e,n){if(!this.rt(e))return;const i=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,i),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,i){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,n)?r.Qe(n,1):r.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),i&&(this.je=this.je.insert(n,i))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new p1,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new xe(se),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new xe(se),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||q("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new p1),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function yf(){return new Le($.comparator)}function g1(){return new Le($.comparator)}const C7={asc:"ASCENDING",desc:"DESCENDING"},P7={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},D7={and:"AND",or:"OR"};class N7{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function t0(t,e){return t.useProto3Json||vd(e)?e:{value:e}}function $l(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function qk(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function k7(t,e){return $l(t,e.toTimestamp())}function mt(t){return X(!!t,49232),Z.fromTimestamp(function(n){const i=Pr(n);return new Ae(i.seconds,i.nanos)}(t))}function qw(t,e){return n0(t,e).canonicalString()}function n0(t,e){const n=function(r){return new pe(["projects",r.projectId,"databases",r.database])}(t).child("documents");return e===void 0?n:n.child(e)}function Hk(t){const e=pe.fromString(t);return X(eV(e),10190,{key:e.toString()}),e}function zh(t,e){return qw(t.databaseId,e.path)}function qi(t,e){const n=Hk(e);if(n.get(1)!==t.databaseId.projectId)throw new F(U.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new F(U.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new $(Kk(n))}function Gk(t,e){return qw(t.databaseId,e)}function $k(t){const e=Hk(t);return e.length===4?pe.emptyPath():Kk(e)}function i0(t){return new pe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Kk(t){return X(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function y1(t,e,n){return{name:zh(t,e),fields:n.value.mapValue.fields}}function Qk(t,e,n){const i=qi(t,e.name),r=mt(e.updateTime),s=e.createTime?mt(e.createTime):Z.min(),a=new jt({mapValue:{fields:e.fields}}),o=Be.newFoundDocument(i,r,s,a);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function V7(t,e){return"found"in e?function(i,r){X(!!r.found,43571),r.found.name,r.found.updateTime;const s=qi(i,r.found.name),a=mt(r.found.updateTime),o=r.found.createTime?mt(r.found.createTime):Z.min(),l=new jt({mapValue:{fields:r.found.fields}});return Be.newFoundDocument(s,a,o,l)}(t,e):"missing"in e?function(i,r){X(!!r.missing,3894),X(!!r.readTime,22933);const s=qi(i,r.missing),a=mt(r.readTime);return Be.newNoDocument(s,a)}(t,e):W(7234,{result:e})}function O7(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:W(39313,{state:c})}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],s=function(c,h){return c.useProto3Json?(X(h===void 0||typeof h=="string",58123),at.fromBase64String(h||"")):(X(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),at.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,o=a&&function(c){const h=c.code===void 0?U.UNKNOWN:zk(c.code);return new F(h,c.message||"")}(a);n=new Fk(i,r,s,o||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=qi(t,i.document.name),s=mt(i.document.updateTime),a=i.document.createTime?mt(i.document.createTime):Z.min(),o=new jt({mapValue:{fields:i.document.fields}}),l=Be.newFoundDocument(r,s,a,o),c=i.targetIds||[],h=i.removedTargetIds||[];n=new sm(c,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=qi(t,i.document),s=i.readTime?mt(i.readTime):Z.min(),a=Be.newNoDocument(r,s),o=i.removedTargetIds||[];n=new sm([],o,a.key,a)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=qi(t,i.document),s=i.removedTargetIds||[];n=new sm([],s,r,null)}else{if(!("filter"in e))return W(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:r=0,unchangedNames:s}=i,a=new I7(r,s),o=i.targetId;n=new Bk(o,a)}}return n}function jh(t,e){let n;if(e instanceof Tc)n={update:y1(t,e.key,e.value)};else if(e instanceof wc)n={delete:zh(t,e.key)};else if(e instanceof zr)n={update:y1(t,e.key,e.data),updateMask:B7(e.fieldMask)};else{if(!(e instanceof Uw))return W(16599,{Vt:e.type});n={verify:zh(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(s,a){const o=a.transform;if(o instanceof Hl)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof Za)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof eo)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof Gl)return{fieldPath:a.field.canonicalString(),increment:o.Ae};throw W(20930,{transform:a.transform})}(0,i))),e.precondition.isNone||(n.currentDocument=function(r,s){return s.updateTime!==void 0?{updateTime:k7(r,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:W(27497)}(t,e.precondition)),n}function r0(t,e){const n=e.currentDocument?function(s){return s.updateTime!==void 0?Ye.updateTime(mt(s.updateTime)):s.exists!==void 0?Ye.exists(s.exists):Ye.none()}(e.currentDocument):Ye.none(),i=e.updateTransforms?e.updateTransforms.map(r=>function(a,o){let l=null;if("setToServerValue"in o)X(o.setToServerValue==="REQUEST_TIME",16630,{proto:o}),l=new Hl;else if("appendMissingElements"in o){const h=o.appendMissingElements.values||[];l=new Za(h)}else if("removeAllFromArray"in o){const h=o.removeAllFromArray.values||[];l=new eo(h)}else"increment"in o?l=new Gl(a,o.increment):W(16584,{proto:o});const c=We.fromServerFormat(o.fieldPath);return new Ad(c,l)}(t,r)):[];if(e.update){e.update.name;const r=qi(t,e.update.name),s=new jt({mapValue:{fields:e.update.fields}});if(e.updateMask){const a=function(l){const c=l.fieldPaths||[];return new Tn(c.map(h=>We.fromServerFormat(h)))}(e.updateMask);return new zr(r,s,a,n,i)}return new Tc(r,s,n,i)}if(e.delete){const r=qi(t,e.delete);return new wc(r,n)}if(e.verify){const r=qi(t,e.verify);return new Uw(r,n)}return W(1463,{proto:e})}function M7(t,e){return t&&t.length>0?(X(e!==void 0,14353),t.map(n=>function(r,s){let a=r.updateTime?mt(r.updateTime):mt(s);return a.isEqual(Z.min())&&(a=mt(s)),new E7(a,r.transformResults||[])}(n,e))):[]}function Wk(t,e){return{documents:[Gk(t,e.path)]}}function Yk(t,e){const n={structuredQuery:{}},i=e.path;let r;e.collectionGroup!==null?(r=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=Gk(t,r);const s=function(c){if(c.length!==0)return Zk(Re.create(c,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const a=function(c){if(c.length!==0)return c.map(h=>function(f){return{field:zo(f.field),direction:U7(f.dir)}}(h))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const o=t0(t,e.limit);return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ft:n,parent:r}}function Xk(t){let e=$k(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){X(i===1,65062);const h=n.from[0];h.allDescendants?r=h.collectionId:e=e.child(h.collectionId)}let s=[];n.where&&(s=function(d){const f=Jk(d);return f instanceof Re&&Vw(f)?f.getFilters():[f]}(n.where));let a=[];n.orderBy&&(a=function(d){return d.map(f=>function(w){return new Uh(jo(w.field),function(A){switch(A){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(w.direction))}(f))}(n.orderBy));let o=null;n.limit&&(o=function(d){let f;return f=typeof d=="object"?d.value:d,vd(f)?null:f}(n.limit));let l=null;n.startAt&&(l=function(d){const f=!!d.before,p=d.values||[];return new Fs(p,f)}(n.startAt));let c=null;return n.endAt&&(c=function(d){const f=!d.before,p=d.values||[];return new Fs(p,f)}(n.endAt)),Ek(e,r,a,s,o,"F",l,c)}function L7(t,e){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return W(28987,{purpose:r})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Jk(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=jo(n.unaryFilter.field);return ye.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=jo(n.unaryFilter.field);return ye.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=jo(n.unaryFilter.field);return ye.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=jo(n.unaryFilter.field);return ye.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return W(61313);default:return W(60726)}}(t):t.fieldFilter!==void 0?function(n){return ye.create(jo(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return W(58110);default:return W(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Re.create(n.compositeFilter.filters.map(i=>Jk(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return W(1026)}}(n.compositeFilter.op))}(t):W(30097,{filter:t})}function U7(t){return C7[t]}function z7(t){return P7[t]}function j7(t){return D7[t]}function zo(t){return{fieldPath:t.canonicalString()}}function jo(t){return We.fromServerFormat(t.fieldPath)}function Zk(t){return t instanceof ye?function(n){if(n.op==="=="){if(t1(n.value))return{unaryFilter:{field:zo(n.field),op:"IS_NAN"}};if(e1(n.value))return{unaryFilter:{field:zo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(t1(n.value))return{unaryFilter:{field:zo(n.field),op:"IS_NOT_NAN"}};if(e1(n.value))return{unaryFilter:{field:zo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:zo(n.field),op:z7(n.op),value:n.value}}}(t):t instanceof Re?function(n){const i=n.getFilters().map(r=>Zk(r));return i.length===1?i[0]:{compositeFilter:{op:j7(n.op),filters:i}}}(t):W(54877,{filter:t})}function B7(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function eV(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dr{constructor(e,n,i,r,s=Z.min(),a=Z.min(),o=at.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=o,this.expectedCount=l}withSequenceNumber(e){return new dr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new dr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new dr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new dr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tV{constructor(e){this.yt=e}}function F7(t,e){let n;if(e.document)n=Qk(t.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const i=$.fromSegments(e.noDocument.path),r=no(e.noDocument.readTime);n=Be.newNoDocument(i,r),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return W(56709);{const i=$.fromSegments(e.unknownDocument.path),r=no(e.unknownDocument.version);n=Be.newUnknownDocument(i,r)}}return e.readTime&&n.setReadTime(function(r){const s=new Ae(r[0],r[1]);return Z.fromTimestamp(s)}(e.readTime)),n}function _1(t,e){const n=e.key,i={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:rp(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())i.document=function(s,a){return{name:zh(s,a.key),fields:a.data.value.mapValue.fields,updateTime:$l(s,a.version.toTimestamp()),createTime:$l(s,a.createTime.toTimestamp())}}(t.yt,e);else if(e.isNoDocument())i.noDocument={path:n.path.toArray(),readTime:to(e.version)};else{if(!e.isUnknownDocument())return W(57904,{document:e});i.unknownDocument={path:n.path.toArray(),version:to(e.version)}}return i}function rp(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function to(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function no(t){const e=new Ae(t.seconds,t.nanoseconds);return Z.fromTimestamp(e)}function Aa(t,e){const n=(e.baseMutations||[]).map(s=>r0(t.yt,s));for(let s=0;s<e.mutations.length-1;++s){const a=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const o=e.mutations[s+1];a.updateTransforms=o.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const i=e.mutations.map(s=>r0(t.yt,s)),r=Ae.fromMillis(e.localWriteTimeMs);return new zw(e.batchId,r,n,i)}function bu(t){const e=no(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?no(t.lastLimboFreeSnapshotVersion):Z.min();let i;return i=function(s){return s.documents!==void 0}(t.query)?function(s){const a=s.documents.length;return X(a===1,1966,{count:a}),hn(vc($k(s.documents[0])))}(t.query):function(s){return hn(Xk(s))}(t.query),new dr(i,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,at.fromBase64String(t.resumeToken))}function nV(t,e){const n=to(e.snapshotVersion),i=to(e.lastLimboFreeSnapshotVersion);let r;r=tp(e.target)?Wk(t.yt,e.target):Yk(t.yt,e.target).ft;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Ja(e.target),readTime:n,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:r}}function Hw(t){const e=Xk({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?ip(e,e.limit,"L"):e}function s_(t,e){return new Bw(e.largestBatchId,r0(t.yt,e.overlayMutation))}function v1(t,e){const n=e.path.lastSegment();return[t,en(e.path.popLast()),n]}function T1(t,e,n,i){return{indexId:t,uid:e,sequenceNumber:n,readTime:to(i.readTime),documentKey:en(i.documentKey.path),largestBatchId:i.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q7{getBundleMetadata(e,n){return w1(e).get(n).next(i=>{if(i)return function(s){return{id:s.bundleId,createTime:no(s.createTime),version:s.version}}(i)})}saveBundleMetadata(e,n){return w1(e).put(function(r){return{bundleId:r.id,createTime:to(mt(r.createTime)),version:r.version}}(n))}getNamedQuery(e,n){return b1(e).get(n).next(i=>{if(i)return function(s){return{name:s.name,query:Hw(s.bundledQuery),readTime:no(s.readTime)}}(i)})}saveNamedQuery(e,n){return b1(e).put(function(r){return{name:r.name,readTime:to(mt(r.readTime)),bundledQuery:r.bundledQuery}}(n))}}function w1(t){return Rt(t,sg)}function b1(t){return Rt(t,ag)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fg{constructor(e,n){this.serializer=e,this.userId=n}static wt(e,n){const i=n.uid||"";return new fg(e,i)}getOverlay(e,n){return ru(e).get(v1(this.userId,n)).next(i=>i?s_(this.serializer,i):null)}getOverlays(e,n){const i=ji();return M.forEach(n,r=>this.getOverlay(e,r).next(s=>{s!==null&&i.set(r,s)})).next(()=>i)}saveOverlays(e,n,i){const r=[];return i.forEach((s,a)=>{const o=new Bw(n,a);r.push(this.St(e,o))}),M.waitFor(r)}removeOverlaysForBatchId(e,n,i){const r=new Set;n.forEach(a=>r.add(en(a.getCollectionPath())));const s=[];return r.forEach(a=>{const o=IDBKeyRange.bound([this.userId,a,i],[this.userId,a,i+1],!1,!0);s.push(ru(e).Z($v,o))}),M.waitFor(s)}getOverlaysForCollection(e,n,i){const r=ji(),s=en(n),a=IDBKeyRange.bound([this.userId,s,i],[this.userId,s,Number.POSITIVE_INFINITY],!0);return ru(e).J($v,a).next(o=>{for(const l of o){const c=s_(this.serializer,l);r.set(c.getKey(),c)}return r})}getOverlaysForCollectionGroup(e,n,i,r){const s=ji();let a;const o=IDBKeyRange.bound([this.userId,n,i],[this.userId,n,Number.POSITIVE_INFINITY],!0);return ru(e).ee({index:tk,range:o},(l,c,h)=>{const d=s_(this.serializer,c);s.size()<r||d.largestBatchId===a?(s.set(d.getKey(),d),a=d.largestBatchId):h.done()}).next(()=>s)}St(e,n){return ru(e).put(function(r,s,a){const[o,l,c]=v1(s,a.mutation.key);return{userId:s,collectionPath:l,documentId:c,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:jh(r.yt,a.mutation)}}(this.serializer,this.userId,n))}}function ru(t){return Rt(t,og)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H7{bt(e){return Rt(e,Pw)}getSessionToken(e){return this.bt(e).get("sessionToken").next(n=>{const i=n==null?void 0:n.value;return i?at.fromUint8Array(i):at.EMPTY_BYTE_STRING})}setSessionToken(e,n){return this.bt(e).put({name:"sessionToken",value:n.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sa{constructor(){}Dt(e,n){this.Ct(e,n),n.vt()}Ct(e,n){if("nullValue"in e)this.Ft(n,5);else if("booleanValue"in e)this.Ft(n,10),n.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(n,15),n.Mt(Qe(e.integerValue));else if("doubleValue"in e){const i=Qe(e.doubleValue);isNaN(i)?this.Ft(n,13):(this.Ft(n,15),Dh(i)?n.Mt(0):n.Mt(i))}else if("timestampValue"in e){let i=e.timestampValue;this.Ft(n,20),typeof i=="string"&&(i=Pr(i)),n.xt(`${i.seconds||""}`),n.Mt(i.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,n),this.Nt(n);else if("bytesValue"in e)this.Ft(n,30),n.Bt(Dr(e.bytesValue)),this.Nt(n);else if("referenceValue"in e)this.Lt(e.referenceValue,n);else if("geoPointValue"in e){const i=e.geoPointValue;this.Ft(n,45),n.Mt(i.latitude||0),n.Mt(i.longitude||0)}else"mapValue"in e?fk(e)?this.Ft(n,Number.MAX_SAFE_INTEGER):ug(e)?this.kt(e.mapValue,n):(this.qt(e.mapValue,n),this.Nt(n)):"arrayValue"in e?(this.Qt(e.arrayValue,n),this.Nt(n)):W(19022,{$t:e})}Ot(e,n){this.Ft(n,25),this.Ut(e,n)}Ut(e,n){n.xt(e)}qt(e,n){const i=e.fields||{};this.Ft(n,55);for(const r of Object.keys(i))this.Ot(r,n),this.Ct(i[r],n)}kt(e,n){var a,o;const i=e.fields||{};this.Ft(n,53);const r=Bl,s=((o=(a=i[r].arrayValue)==null?void 0:a.values)==null?void 0:o.length)||0;this.Ft(n,15),n.Mt(Qe(s)),this.Ot(r,n),this.Ct(i[r],n)}Qt(e,n){const i=e.values||[];this.Ft(n,50);for(const r of i)this.Ct(r,n)}Lt(e,n){this.Ft(n,37),$.fromName(e).path.forEach(i=>{this.Ft(n,60),this.Ut(i,n)})}Ft(e,n){e.Mt(n)}Nt(e){e.Mt(2)}}Sa.Kt=new Sa;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Co=255;function G7(t){if(t===0)return 8;let e=0;return t>>4||(e+=4,t<<=4),t>>6||(e+=2,t<<=2),t>>7||(e+=1),e}function E1(t){const e=64-function(i){let r=0;for(let s=0;s<8;++s){const a=G7(255&i[s]);if(r+=a,a!==8)break}return r}(t);return Math.ceil(e/8)}class $7{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const n=e[Symbol.iterator]();let i=n.next();for(;!i.done;)this.Gt(i.value),i=n.next();this.zt()}jt(e){const n=e[Symbol.iterator]();let i=n.next();for(;!i.done;)this.Jt(i.value),i=n.next();this.Ht()}Yt(e){for(const n of e){const i=n.charCodeAt(0);if(i<128)this.Gt(i);else if(i<2048)this.Gt(960|i>>>6),this.Gt(128|63&i);else if(n<"\uD800"||"\uDBFF"<n)this.Gt(480|i>>>12),this.Gt(128|63&i>>>6),this.Gt(128|63&i);else{const r=n.codePointAt(0);this.Gt(240|r>>>18),this.Gt(128|63&r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r)}}this.zt()}Zt(e){for(const n of e){const i=n.charCodeAt(0);if(i<128)this.Jt(i);else if(i<2048)this.Jt(960|i>>>6),this.Jt(128|63&i);else if(n<"\uD800"||"\uDBFF"<n)this.Jt(480|i>>>12),this.Jt(128|63&i>>>6),this.Jt(128|63&i);else{const r=n.codePointAt(0);this.Jt(240|r>>>18),this.Jt(128|63&r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r)}}this.Ht()}Xt(e){const n=this.en(e),i=E1(n);this.tn(1+i),this.buffer[this.position++]=255&i;for(let r=n.length-i;r<n.length;++r)this.buffer[this.position++]=255&n[r]}nn(e){const n=this.en(e),i=E1(n);this.tn(1+i),this.buffer[this.position++]=~(255&i);for(let r=n.length-i;r<n.length;++r)this.buffer[this.position++]=~(255&n[r])}rn(){this.sn(Co),this.sn(255)}_n(){this.an(Co),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const n=function(s){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,s,!1),new Uint8Array(a.buffer)}(e),i=!!(128&n[0]);n[0]^=i?255:128;for(let r=1;r<n.length;++r)n[r]^=i?255:0;return n}Gt(e){const n=255&e;n===0?(this.sn(0),this.sn(255)):n===Co?(this.sn(Co),this.sn(0)):this.sn(n)}Jt(e){const n=255&e;n===0?(this.an(0),this.an(255)):n===Co?(this.an(Co),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const n=e+this.position;if(n<=this.buffer.length)return;let i=2*this.buffer.length;i<n&&(i=n);const r=new Uint8Array(i);r.set(this.buffer),this.buffer=r}}class K7{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class Q7{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class su{constructor(){this.cn=new $7,this.ln=new K7(this.cn),this.hn=new Q7(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ia{constructor(e,n,i,r){this.Tn=e,this.In=n,this.En=i,this.dn=r}An(){const e=this.dn.length,n=e===0||this.dn[e-1]===255?e+1:e,i=new Uint8Array(n);return i.set(this.dn,0),n!==e?i.set([0],this.dn.length):++i[i.length-1],new Ia(this.Tn,this.In,this.En,i)}Rn(e,n,i){return{indexId:this.Tn,uid:e,arrayValue:am(this.En),directionalValue:am(this.dn),orderedDocumentKey:am(n),documentKey:i.path.toArray()}}Vn(e,n,i){const r=this.Rn(e,n,i);return[r.indexId,r.uid,r.arrayValue,r.directionalValue,r.orderedDocumentKey,r.documentKey]}}function Xr(t,e){let n=t.Tn-e.Tn;return n!==0?n:(n=A1(t.En,e.En),n!==0?n:(n=A1(t.dn,e.dn),n!==0?n:$.comparator(t.In,e.In)))}function A1(t,e){for(let n=0;n<t.length&&n<e.length;++n){const i=t[n]-e[n];if(i!==0)return i}return t.length-e.length}function am(t){return v2()?function(n){let i="";for(let r=0;r<n.length;r++)i+=String.fromCharCode(n[r]);return i}(t):t}function S1(t){return typeof t!="string"?t:function(n){const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}(t)}class I1{constructor(e){this.mn=new xe((n,i)=>We.comparator(n.field,i.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const n of e.filters){const i=n;i.isInequality()?this.mn=this.mn.add(i):this.gn.push(i)}}get pn(){return this.mn.size>1}yn(e){if(X(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const n=qv(e);if(n!==void 0&&!this.wn(n))return!1;const i=va(e);let r=new Set,s=0,a=0;for(;s<i.length&&this.wn(i[s]);++s)r=r.add(i[s].fieldPath.canonicalString());if(s===i.length)return!0;if(this.mn.size>0){const o=this.mn.getIterator().getNext();if(!r.has(o.field.canonicalString())){const l=i[s];if(!this.Sn(o,l)||!this.bn(this.fn[a++],l))return!1}++s}for(;s<i.length;++s){const o=i[s];if(a>=this.fn.length||!this.bn(this.fn[a++],o))return!1}return!0}Dn(){if(this.pn)return null;let e=new xe(We.comparator);const n=[];for(const i of this.gn)if(!i.field.isKeyField())if(i.op==="array-contains"||i.op==="array-contains-any")n.push(new Jf(i.field,2));else{if(e.has(i.field))continue;e=e.add(i.field),n.push(new Jf(i.field,0))}for(const i of this.fn)i.field.isKeyField()||e.has(i.field)||(e=e.add(i.field),n.push(new Jf(i.field,i.dir==="asc"?0:1)));return new Xm(Xm.UNKNOWN_ID,this.collectionId,n,Ph.empty())}wn(e){for(const n of this.gn)if(this.Sn(n,e))return!0;return!1}Sn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const i=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===i}bn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iV(t){var n,i;if(X(t instanceof ye||t instanceof Re,20012),t instanceof ye){if(t instanceof bk){const r=((i=(n=t.value.arrayValue)==null?void 0:n.values)==null?void 0:i.map(s=>ye.create(t.field,"==",s)))||[];return Re.create(r,"or")}return t}const e=t.filters.map(r=>iV(r));return Re.create(e,t.op)}function W7(t){if(t.getFilters().length===0)return[];const e=o0(iV(t));return X(rV(e),7391),s0(e)||a0(e)?[e]:e.getFilters()}function s0(t){return t instanceof ye}function a0(t){return t instanceof Re&&Vw(t)}function rV(t){return s0(t)||a0(t)||function(n){if(n instanceof Re&&Xv(n)){for(const i of n.getFilters())if(!s0(i)&&!a0(i))return!1;return!0}return!1}(t)}function o0(t){if(X(t instanceof ye||t instanceof Re,34018),t instanceof ye)return t;if(t.filters.length===1)return o0(t.filters[0]);const e=t.filters.map(i=>o0(i));let n=Re.create(e,t.op);return n=sp(n),rV(n)?n:(X(n instanceof Re,64498),X(ql(n),40251),X(n.filters.length>1,57927),n.filters.reduce((i,r)=>Gw(i,r)))}function Gw(t,e){let n;return X(t instanceof ye||t instanceof Re,38388),X(e instanceof ye||e instanceof Re,25473),n=t instanceof ye?e instanceof ye?function(r,s){return Re.create([r,s],"and")}(t,e):R1(t,e):e instanceof ye?R1(e,t):function(r,s){if(X(r.filters.length>0&&s.filters.length>0,48005),ql(r)&&ql(s))return vk(r,s.getFilters());const a=Xv(r)?r:s,o=Xv(r)?s:r,l=a.filters.map(c=>Gw(c,o));return Re.create(l,"or")}(t,e),sp(n)}function R1(t,e){if(ql(e))return vk(e,t.getFilters());{const n=e.filters.map(i=>Gw(t,i));return Re.create(n,"or")}}function sp(t){if(X(t instanceof ye||t instanceof Re,11850),t instanceof ye)return t;const e=t.getFilters();if(e.length===1)return sp(e[0]);if(yk(t))return t;const n=e.map(r=>sp(r)),i=[];return n.forEach(r=>{r instanceof ye?i.push(r):r instanceof Re&&(r.op===t.op?i.push(...r.filters):i.push(r))}),i.length===1?i[0]:Re.create(i,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y7{constructor(){this.Cn=new $w}addToCollectionParentIndex(e,n){return this.Cn.add(n),M.resolve()}getCollectionParents(e,n){return M.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return M.resolve()}deleteFieldIndex(e,n){return M.resolve()}deleteAllFieldIndexes(e){return M.resolve()}createTargetIndexes(e,n){return M.resolve()}getDocumentsMatchingTarget(e,n){return M.resolve(null)}getIndexType(e,n){return M.resolve(0)}getFieldIndexes(e,n){return M.resolve([])}getNextCollectionGroupToUpdate(e){return M.resolve(null)}getMinOffset(e,n){return M.resolve(Hn.min())}getMinOffsetFromCollectionGroup(e,n){return M.resolve(Hn.min())}updateCollectionGroup(e,n,i){return M.resolve()}updateIndexEntries(e,n){return M.resolve()}}class $w{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n]||new xe(pe.comparator),s=!r.has(i);return this.index[n]=r.add(i),s}has(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(e){return(this.index[e]||new xe(pe.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x1="IndexedDbIndexManager",_f=new Uint8Array(0);class X7{constructor(e,n){this.databaseId=n,this.vn=new $w,this.Fn=new Ur(i=>Ja(i),(i,r)=>wd(i,r)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.vn.has(n)){const i=n.lastSegment(),r=n.popLast();e.addOnCommittedListener(()=>{this.vn.add(n)});const s={collectionId:i,parent:en(r)};return C1(e).put(s)}return M.resolve()}getCollectionParents(e,n){const i=[],r=IDBKeyRange.bound([n,""],[jN(n),""],!1,!0);return C1(e).J(r).next(s=>{for(const a of s){if(a.collectionId!==n)break;i.push(zi(a.parent))}return i})}addFieldIndex(e,n){const i=au(e),r=function(o){return{indexId:o.indexId,collectionGroup:o.collectionGroup,fields:o.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])}}(n);delete r.indexId;const s=i.add(r);if(n.indexState){const a=Do(e);return s.next(o=>{a.put(T1(o,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return s.next()}deleteFieldIndex(e,n){const i=au(e),r=Do(e),s=Po(e);return i.delete(n.indexId).next(()=>r.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=au(e),i=Po(e),r=Do(e);return n.Z().next(()=>i.Z()).next(()=>r.Z())}createTargetIndexes(e,n){return M.forEach(this.Mn(n),i=>this.getIndexType(e,i).next(r=>{if(r===0||r===1){const s=new I1(i).Dn();if(s!=null)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,n){const i=Po(e);let r=!0;const s=new Map;return M.forEach(this.Mn(n),a=>this.xn(e,a).next(o=>{r&&(r=!!o),s.set(a,o)})).next(()=>{if(r){let a=ce();const o=[];return M.forEach(s,(l,c)=>{q(x1,`Using index ${function(_){return`id=${_.indexId}|cg=${_.collectionGroup}|f=${_.fields.map(C=>`${C.fieldPath}:${C.kind}`).join(",")}`}(l)} to execute ${Ja(n)}`);const h=function(_,C){const V=qv(C);if(V===void 0)return null;for(const O of np(_,V.fieldPath))switch(O.op){case"array-contains-any":return O.value.arrayValue.values||[];case"array-contains":return[O.value]}return null}(c,l),d=function(_,C){const V=new Map;for(const O of va(C))for(const S of np(_,O.fieldPath))switch(S.op){case"==":case"in":V.set(O.fieldPath.canonicalString(),S.value);break;case"not-in":case"!=":return V.set(O.fieldPath.canonicalString(),S.value),Array.from(V.values())}return null}(c,l),f=function(_,C){const V=[];let O=!0;for(const S of va(C)){const b=S.kind===0?a1(_,S.fieldPath,_.startAt):o1(_,S.fieldPath,_.startAt);V.push(b.value),O&&(O=b.inclusive)}return new Fs(V,O)}(c,l),p=function(_,C){const V=[];let O=!0;for(const S of va(C)){const b=S.kind===0?o1(_,S.fieldPath,_.endAt):a1(_,S.fieldPath,_.endAt);V.push(b.value),O&&(O=b.inclusive)}return new Fs(V,O)}(c,l),w=this.On(l,c,f),E=this.On(l,c,p),A=this.Nn(l,c,d),T=this.Bn(l.indexId,h,w,f.inclusive,E,p.inclusive,A);return M.forEach(T,v=>i.Y(v,n.limit).next(_=>{_.forEach(C=>{const V=$.fromSegments(C.documentKey);a.has(V)||(a=a.add(V),o.push(V))})}))}).next(()=>o)}return M.resolve(null)})}Mn(e){let n=this.Fn.get(e);return n||(e.filters.length===0?n=[e]:n=W7(Re.create(e.filters,"and")).map(i=>Zv(e.path,e.collectionGroup,e.orderBy,i.getFilters(),e.limit,e.startAt,e.endAt)),this.Fn.set(e,n),n)}Bn(e,n,i,r,s,a,o){const l=(n!=null?n.length:1)*Math.max(i.length,s.length),c=l/(n!=null?n.length:1),h=[];for(let d=0;d<l;++d){const f=n?this.Ln(n[d/c]):_f,p=this.kn(e,f,i[d%c],r),w=this.qn(e,f,s[d%c],a),E=o.map(A=>this.kn(e,f,A,!0));h.push(...this.createRange(p,w,E))}return h}kn(e,n,i,r){const s=new Ia(e,$.empty(),n,i);return r?s:s.An()}qn(e,n,i,r){const s=new Ia(e,$.empty(),n,i);return r?s.An():s}xn(e,n){const i=new I1(n),r=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,r).next(s=>{let a=null;for(const o of s)i.yn(o)&&(!a||o.fields.length>a.fields.length)&&(a=o);return a})}getIndexType(e,n){let i=2;const r=this.Mn(n);return M.forEach(r,s=>this.xn(e,s).next(a=>{a?i!==0&&a.fields.length<function(l){let c=new xe(We.comparator),h=!1;for(const d of l.filters)for(const f of d.getFlattenedFilters())f.field.isKeyField()||(f.op==="array-contains"||f.op==="array-contains-any"?h=!0:c=c.add(f.field));for(const d of l.orderBy)d.field.isKeyField()||(c=c.add(d.field));return c.size+(h?1:0)}(s)&&(i=1):i=0})).next(()=>function(a){return a.limit!==null}(n)&&r.length>1&&i===2?1:i)}Qn(e,n){const i=new su;for(const r of va(e)){const s=n.data.field(r.fieldPath);if(s==null)return null;const a=i.Pn(r.kind);Sa.Kt.Dt(s,a)}return i.un()}Ln(e){const n=new su;return Sa.Kt.Dt(e,n.Pn(0)),n.un()}$n(e,n){const i=new su;return Sa.Kt.Dt(Xa(this.databaseId,n),i.Pn(function(s){const a=va(s);return a.length===0?0:a[a.length-1].kind}(e))),i.un()}Nn(e,n,i){if(i===null)return[];let r=[];r.push(new su);let s=0;for(const a of va(e)){const o=i[s++];for(const l of r)if(this.Un(n,a.fieldPath)&&Lh(o))r=this.Kn(r,a,o);else{const c=l.Pn(a.kind);Sa.Kt.Dt(o,c)}}return this.Wn(r)}On(e,n,i){return this.Nn(e,n,i.position)}Wn(e){const n=[];for(let i=0;i<e.length;++i)n[i]=e[i].un();return n}Kn(e,n,i){const r=[...e],s=[];for(const a of i.arrayValue.values||[])for(const o of r){const l=new su;l.seed(o.un()),Sa.Kt.Dt(a,l.Pn(n.kind)),s.push(l)}return s}Un(e,n){return!!e.filters.find(i=>i instanceof ye&&i.field.isEqual(n)&&(i.op==="in"||i.op==="not-in"))}getFieldIndexes(e,n){const i=au(e),r=Do(e);return(n?i.J(Gv,IDBKeyRange.bound(n,n)):i.J()).next(s=>{const a=[];return M.forEach(s,o=>r.get([o.indexId,this.uid]).next(l=>{a.push(function(h,d){const f=d?new Ph(d.sequenceNumber,new Hn(no(d.readTime),new $(zi(d.documentKey)),d.largestBatchId)):Ph.empty(),p=h.fields.map(([w,E])=>new Jf(We.fromServerFormat(w),E));return new Xm(h.indexId,h.collectionGroup,p,f)}(o,l))})).next(()=>a)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((i,r)=>{const s=i.indexState.sequenceNumber-r.indexState.sequenceNumber;return s!==0?s:se(i.collectionGroup,r.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,i){const r=au(e),s=Do(e);return this.Gn(e).next(a=>r.J(Gv,IDBKeyRange.bound(n,n)).next(o=>M.forEach(o,l=>s.put(T1(l.indexId,this.uid,a,i)))))}updateIndexEntries(e,n){const i=new Map;return M.forEach(n,(r,s)=>{const a=i.get(r.collectionGroup);return(a?M.resolve(a):this.getFieldIndexes(e,r.collectionGroup)).next(o=>(i.set(r.collectionGroup,o),M.forEach(o,l=>this.zn(e,r,l).next(c=>{const h=this.jn(s,l);return c.isEqual(h)?M.resolve():this.Jn(e,s,l,c,h)}))))})}Hn(e,n,i,r){return Po(e).put(r.Rn(this.uid,this.$n(i,n.key),n.key))}Yn(e,n,i,r){return Po(e).delete(r.Vn(this.uid,this.$n(i,n.key),n.key))}zn(e,n,i){const r=Po(e);let s=new xe(Xr);return r.ee({index:ek,range:IDBKeyRange.only([i.indexId,this.uid,am(this.$n(i,n))])},(a,o)=>{s=s.add(new Ia(i.indexId,n,S1(o.arrayValue),S1(o.directionalValue)))}).next(()=>s)}jn(e,n){let i=new xe(Xr);const r=this.Qn(n,e);if(r==null)return i;const s=qv(n);if(s!=null){const a=e.data.field(s.fieldPath);if(Lh(a))for(const o of a.arrayValue.values||[])i=i.add(new Ia(n.indexId,e.key,this.Ln(o),r))}else i=i.add(new Ia(n.indexId,e.key,_f,r));return i}Jn(e,n,i,r,s){q(x1,"Updating index entries for document '%s'",n.key);const a=[];return function(l,c,h,d,f){const p=l.getIterator(),w=c.getIterator();let E=xo(p),A=xo(w);for(;E||A;){let T=!1,v=!1;if(E&&A){const _=h(E,A);_<0?v=!0:_>0&&(T=!0)}else E!=null?v=!0:T=!0;T?(d(A),A=xo(w)):v?(f(E),E=xo(p)):(E=xo(p),A=xo(w))}}(r,s,Xr,o=>{a.push(this.Hn(e,n,i,o))},o=>{a.push(this.Yn(e,n,i,o))}),M.waitFor(a)}Gn(e){let n=1;return Do(e).ee({index:ZN,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(i,r,s)=>{s.done(),n=r.sequenceNumber+1}).next(()=>n)}createRange(e,n,i){i=i.sort((a,o)=>Xr(a,o)).filter((a,o,l)=>!o||Xr(a,l[o-1])!==0);const r=[];r.push(e);for(const a of i){const o=Xr(a,e),l=Xr(a,n);if(o===0)r[0]=e.An();else if(o>0&&l<0)r.push(a),r.push(a.An());else if(l>0)break}r.push(n);const s=[];for(let a=0;a<r.length;a+=2){if(this.Zn(r[a],r[a+1]))return[];const o=r[a].Vn(this.uid,_f,$.empty()),l=r[a+1].Vn(this.uid,_f,$.empty());s.push(IDBKeyRange.bound(o,l))}return s}Zn(e,n){return Xr(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(P1)}getMinOffset(e,n){return M.mapArray(this.Mn(n),i=>this.xn(e,i).next(r=>r||W(44426))).next(P1)}}function C1(t){return Rt(t,Vh)}function Po(t){return Rt(t,Yu)}function au(t){return Rt(t,Cw)}function Do(t){return Rt(t,Wu)}function P1(t){X(t.length!==0,28825);let e=t[0].indexState.offset,n=e.largestBatchId;for(let i=1;i<t.length;i++){const r=t[i].indexState.offset;Iw(r,e)<0&&(e=r),n<r.largestBatchId&&(n=r.largestBatchId)}return new Hn(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D1={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},sV=41943040;class Qt{static withCacheSize(e){return new Qt(e,Qt.DEFAULT_COLLECTION_PERCENTILE,Qt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aV(t,e,n){const i=t.store(_i),r=t.store(Ll),s=[],a=IDBKeyRange.only(n.batchId);let o=0;const l=i.ee({range:a},(h,d,f)=>(o++,f.delete()));s.push(l.next(()=>{X(o===1,47070,{batchId:n.batchId})}));const c=[];for(const h of n.mutations){const d=YN(e,h.key.path,n.batchId);s.push(r.delete(d)),c.push(h.key)}return M.waitFor(s).next(()=>c)}function ap(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw W(14731);e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Qt.DEFAULT_COLLECTION_PERCENTILE=10,Qt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Qt.DEFAULT=new Qt(sV,Qt.DEFAULT_COLLECTION_PERCENTILE,Qt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Qt.DISABLED=new Qt(-1,0,0);class mg{constructor(e,n,i,r){this.userId=e,this.serializer=n,this.indexManager=i,this.referenceDelegate=r,this.Xn={}}static wt(e,n,i,r){X(e.uid!=="",64387);const s=e.isAuthenticated()?e.uid:"";return new mg(s,n,i,r)}checkEmpty(e){let n=!0;const i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Jr(e).ee({index:Ca,range:i},(r,s,a)=>{n=!1,a.done()}).next(()=>n)}addMutationBatch(e,n,i,r){const s=Bo(e),a=Jr(e);return a.add({}).next(o=>{X(typeof o=="number",49019);const l=new zw(o,n,i,r),c=function(p,w,E){const A=E.baseMutations.map(v=>jh(p.yt,v)),T=E.mutations.map(v=>jh(p.yt,v));return{userId:w,batchId:E.batchId,localWriteTimeMs:E.localWriteTime.toMillis(),baseMutations:A,mutations:T}}(this.serializer,this.userId,l),h=[];let d=new xe((f,p)=>se(f.canonicalString(),p.canonicalString()));for(const f of r){const p=YN(this.userId,f.key.path,o);d=d.add(f.key.path.popLast()),h.push(a.put(c)),h.push(s.put(p,D8))}return d.forEach(f=>{h.push(this.indexManager.addToCollectionParentIndex(e,f))}),e.addOnCommittedListener(()=>{this.Xn[o]=l.keys()}),M.waitFor(h).next(()=>l)})}lookupMutationBatch(e,n){return Jr(e).get(n).next(i=>i?(X(i.userId===this.userId,48,"Unexpected user for mutation batch",{userId:i.userId,batchId:n}),Aa(this.serializer,i)):null)}er(e,n){return this.Xn[n]?M.resolve(this.Xn[n]):this.lookupMutationBatch(e,n).next(i=>{if(i){const r=i.keys();return this.Xn[n]=r,r}return null})}getNextMutationBatchAfterBatchId(e,n){const i=n+1,r=IDBKeyRange.lowerBound([this.userId,i]);let s=null;return Jr(e).ee({index:Ca,range:r},(a,o,l)=>{o.userId===this.userId&&(X(o.batchId>=i,47524,{tr:i}),s=Aa(this.serializer,o)),l.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let i=Cs;return Jr(e).ee({index:Ca,range:n,reverse:!0},(r,s,a)=>{i=s.batchId,a.done()}).next(()=>i)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,Cs],[this.userId,Number.POSITIVE_INFINITY]);return Jr(e).J(Ca,n).next(i=>i.map(r=>Aa(this.serializer,r)))}getAllMutationBatchesAffectingDocumentKey(e,n){const i=Zf(this.userId,n.path),r=IDBKeyRange.lowerBound(i),s=[];return Bo(e).ee({range:r},(a,o,l)=>{const[c,h,d]=a,f=zi(h);if(c===this.userId&&n.path.isEqual(f))return Jr(e).get(d).next(p=>{if(!p)throw W(61480,{nr:a,batchId:d});X(p.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:p.userId,batchId:d}),s.push(Aa(this.serializer,p))});l.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new xe(se);const r=[];return n.forEach(s=>{const a=Zf(this.userId,s.path),o=IDBKeyRange.lowerBound(a),l=Bo(e).ee({range:o},(c,h,d)=>{const[f,p,w]=c,E=zi(p);f===this.userId&&s.path.isEqual(E)?i=i.add(w):d.done()});r.push(l)}),M.waitFor(r).next(()=>this.rr(e,i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,r=i.length+1,s=Zf(this.userId,i),a=IDBKeyRange.lowerBound(s);let o=new xe(se);return Bo(e).ee({range:a},(l,c,h)=>{const[d,f,p]=l,w=zi(f);d===this.userId&&i.isPrefixOf(w)?w.length===r&&(o=o.add(p)):h.done()}).next(()=>this.rr(e,o))}rr(e,n){const i=[],r=[];return n.forEach(s=>{r.push(Jr(e).get(s).next(a=>{if(a===null)throw W(35274,{batchId:s});X(a.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:a.userId,batchId:s}),i.push(Aa(this.serializer,a))}))}),M.waitFor(r).next(()=>i)}removeMutationBatch(e,n){return aV(e.le,this.userId,n).next(i=>(e.addOnCommittedListener(()=>{this.ir(n.batchId)}),M.forEach(i,r=>this.referenceDelegate.markPotentiallyOrphaned(e,r))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return M.resolve();const i=IDBKeyRange.lowerBound(function(a){return[a]}(this.userId)),r=[];return Bo(e).ee({range:i},(s,a,o)=>{if(s[0]===this.userId){const l=zi(s[1]);r.push(l)}else o.done()}).next(()=>{X(r.length===0,56720,{sr:r.map(s=>s.canonicalString())})})})}containsKey(e,n){return oV(e,this.userId,n)}_r(e){return lV(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:Cs,lastStreamToken:""})}}function oV(t,e,n){const i=Zf(e,n.path),r=i[1],s=IDBKeyRange.lowerBound(i);let a=!1;return Bo(t).ee({range:s,X:!0},(o,l,c)=>{const[h,d,f]=o;h===e&&d===r&&(a=!0),c.done()}).next(()=>a)}function Jr(t){return Rt(t,_i)}function Bo(t){return Rt(t,Ll)}function lV(t){return Rt(t,Nh)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class io{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new io(0)}static cr(){return new io(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J7{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.lr(e).next(n=>{const i=new io(n.highestTargetId);return n.highestTargetId=i.next(),this.hr(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.lr(e).next(n=>Z.fromTimestamp(new Ae(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.lr(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,i){return this.lr(e).next(r=>(r.highestListenSequenceNumber=n,i&&(r.lastRemoteSnapshotVersion=i.toTimestamp()),n>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=n),this.hr(e,r)))}addTargetData(e,n){return this.Pr(e,n).next(()=>this.lr(e).next(i=>(i.targetCount+=1,this.Tr(n,i),this.hr(e,i))))}updateTargetData(e,n){return this.Pr(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>No(e).delete(n.targetId)).next(()=>this.lr(e)).next(i=>(X(i.targetCount>0,8065),i.targetCount-=1,this.hr(e,i)))}removeTargets(e,n,i){let r=0;const s=[];return No(e).ee((a,o)=>{const l=bu(o);l.sequenceNumber<=n&&i.get(l.targetId)===null&&(r++,s.push(this.removeTargetData(e,l)))}).next(()=>M.waitFor(s)).next(()=>r)}forEachTarget(e,n){return No(e).ee((i,r)=>{const s=bu(r);n(s)})}lr(e){return N1(e).get(ep).next(n=>(X(n!==null,2888),n))}hr(e,n){return N1(e).put(ep,n)}Pr(e,n){return No(e).put(nV(this.serializer,n))}Tr(e,n){let i=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,i=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,i=!0),i}getTargetCount(e){return this.lr(e).next(n=>n.targetCount)}getTargetData(e,n){const i=Ja(n),r=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]);let s=null;return No(e).ee({range:r,index:JN},(a,o,l)=>{const c=bu(o);wd(n,c.target)&&(s=c,l.done())}).next(()=>s)}addMatchingKeys(e,n,i){const r=[],s=ls(e);return n.forEach(a=>{const o=en(a.path);r.push(s.put({targetId:i,path:o})),r.push(this.referenceDelegate.addReference(e,i,a))}),M.waitFor(r)}removeMatchingKeys(e,n,i){const r=ls(e);return M.forEach(n,s=>{const a=en(s.path);return M.waitFor([r.delete([i,a]),this.referenceDelegate.removeReference(e,i,s)])})}removeMatchingKeysForTargetId(e,n){const i=ls(e),r=IDBKeyRange.bound([n],[n+1],!1,!0);return i.delete(r)}getMatchingKeysForTargetId(e,n){const i=IDBKeyRange.bound([n],[n+1],!1,!0),r=ls(e);let s=ce();return r.ee({range:i,X:!0},(a,o,l)=>{const c=zi(a[1]),h=new $(c);s=s.add(h)}).next(()=>s)}containsKey(e,n){const i=en(n.path),r=IDBKeyRange.bound([i],[jN(i)],!1,!0);let s=0;return ls(e).ee({index:xw,X:!0,range:r},([a,o],l,c)=>{a!==0&&(s++,c.done())}).next(()=>s>0)}At(e,n){return No(e).get(n).next(i=>i?bu(i):null)}}function No(t){return Rt(t,Ul)}function N1(t){return Rt(t,ja)}function ls(t){return Rt(t,zl)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k1="LruGarbageCollector",Z7=1048576;function V1([t,e],[n,i]){const r=se(t,n);return r===0?se(e,i):r}class eH{constructor(e){this.Ir=e,this.buffer=new xe(V1),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();V1(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class cV{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){q(k1,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){ea(n)?q(k1,"Ignoring IndexedDB error during garbage collection: ",n):await Zs(n)}await this.Vr(3e5)})}}class tH{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(i=>Math.floor(n/100*i))}nthSequenceNumber(e,n){if(n===0)return M.resolve(vn.ce);const i=new eH(n);return this.mr.forEachTarget(e,r=>i.Ar(r.sequenceNumber)).next(()=>this.mr.pr(e,r=>i.Ar(r))).next(()=>i.maxValue)}removeTargets(e,n,i){return this.mr.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(q("LruGarbageCollector","Garbage collection skipped; disabled"),M.resolve(D1)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(q("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),D1):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let i,r,s,a,o,l,c;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(q("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),r=this.params.maximumSequenceNumbersToCollect):r=d,a=Date.now(),this.nthSequenceNumber(e,r))).next(d=>(i=d,o=Date.now(),this.removeTargets(e,i,n))).next(d=>(s=d,l=Date.now(),this.removeOrphanedDocuments(e,i))).next(d=>(c=Date.now(),Lo()<=fe.DEBUG&&q("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-h}ms
	Determined least recently used ${r} in `+(o-a)+`ms
	Removed ${s} targets in `+(l-o)+`ms
	Removed ${d} documents in `+(c-l)+`ms
Total Duration: ${c-h}ms`),M.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:d})))}}function uV(t,e){return new tH(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nH{constructor(e,n){this.db=e,this.garbageCollector=uV(this,n)}gr(e){const n=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next(i=>n.next(r=>i+r))}wr(e){let n=0;return this.pr(e,i=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}pr(e,n){return this.Sr(e,(i,r)=>n(r))}addReference(e,n,i){return vf(e,i)}removeReference(e,n,i){return vf(e,i)}removeTargets(e,n,i){return this.db.getTargetCache().removeTargets(e,n,i)}markPotentiallyOrphaned(e,n){return vf(e,n)}br(e,n){return function(r,s){let a=!1;return lV(r).te(o=>oV(r,o,s).next(l=>(l&&(a=!0),M.resolve(!l)))).next(()=>a)}(e,n)}removeOrphanedDocuments(e,n){const i=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let s=0;return this.Sr(e,(a,o)=>{if(o<=n){const l=this.br(e,a).next(c=>{if(!c)return s++,i.getEntry(e,a).next(()=>(i.removeEntry(a,Z.min()),ls(e).delete(function(d){return[0,en(d.path)]}(a))))});r.push(l)}}).next(()=>M.waitFor(r)).next(()=>i.apply(e)).next(()=>s)}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,i)}updateLimboDocument(e,n){return vf(e,n)}Sr(e,n){const i=ls(e);let r,s=vn.ce;return i.ee({index:xw},([a,o],{path:l,sequenceNumber:c})=>{a===0?(s!==vn.ce&&n(new $(zi(r)),s),s=c,r=l):s=vn.ce}).next(()=>{s!==vn.ce&&n(new $(zi(r)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function vf(t,e){return ls(t).put(function(i,r){return{targetId:0,path:en(i.path),sequenceNumber:r}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hV{constructor(){this.changes=new Ur(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Be.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?M.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iH{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,i){return da(e).put(i)}removeEntry(e,n,i){return da(e).delete(function(s,a){const o=s.path.toArray();return[o.slice(0,o.length-2),o[o.length-2],rp(a),o[o.length-1]]}(n,i))}updateMetadata(e,n){return this.getMetadata(e).next(i=>(i.byteSize+=n,this.Dr(e,i)))}getEntry(e,n){let i=Be.newInvalidDocument(n);return da(e).ee({index:em,range:IDBKeyRange.only(ou(n))},(r,s)=>{i=this.Cr(n,s)}).next(()=>i)}vr(e,n){let i={size:0,document:Be.newInvalidDocument(n)};return da(e).ee({index:em,range:IDBKeyRange.only(ou(n))},(r,s)=>{i={document:this.Cr(n,s),size:ap(s)}}).next(()=>i)}getEntries(e,n){let i=wn();return this.Fr(e,n,(r,s)=>{const a=this.Cr(r,s);i=i.insert(r,a)}).next(()=>i)}Mr(e,n){let i=wn(),r=new Le($.comparator);return this.Fr(e,n,(s,a)=>{const o=this.Cr(s,a);i=i.insert(s,o),r=r.insert(s,ap(a))}).next(()=>({documents:i,Or:r}))}Fr(e,n,i){if(n.isEmpty())return M.resolve();let r=new xe(L1);n.forEach(l=>r=r.add(l));const s=IDBKeyRange.bound(ou(r.first()),ou(r.last())),a=r.getIterator();let o=a.getNext();return da(e).ee({index:em,range:s},(l,c,h)=>{const d=$.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;o&&L1(o,d)<0;)i(o,null),o=a.getNext();o&&o.isEqual(d)&&(i(o,c),o=a.hasNext()?a.getNext():null),o?h.j(ou(o)):h.done()}).next(()=>{for(;o;)i(o,null),o=a.hasNext()?a.getNext():null})}getDocumentsMatchingQuery(e,n,i,r,s){const a=n.path,o=[a.popLast().toArray(),a.lastSegment(),rp(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],l=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return da(e).J(IDBKeyRange.bound(o,l,!0)).next(c=>{s==null||s.incrementDocumentReadCount(c.length);let h=wn();for(const d of c){const f=this.Cr($.fromSegments(d.prefixPath.concat(d.collectionGroup,d.documentId)),d);f.isFoundDocument()&&(Ed(n,f)||r.has(f.key))&&(h=h.insert(f.key,f))}return h})}getAllFromCollectionGroup(e,n,i,r){let s=wn();const a=M1(n,i),o=M1(n,Hn.max());return da(e).ee({index:XN,range:IDBKeyRange.bound(a,o,!0)},(l,c,h)=>{const d=this.Cr($.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);s=s.insert(d.key,d),s.size===r&&h.done()}).next(()=>s)}newChangeBuffer(e){return new rH(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return O1(e).get(Hv).next(n=>(X(!!n,20021),n))}Dr(e,n){return O1(e).put(Hv,n)}Cr(e,n){if(n){const i=F7(this.serializer,n);if(!(i.isNoDocument()&&i.version.isEqual(Z.min())))return i}return Be.newInvalidDocument(e)}}function dV(t){return new iH(t)}class rH extends hV{constructor(e,n){super(),this.Nr=e,this.trackRemovals=n,this.Br=new Ur(i=>i.toString(),(i,r)=>i.isEqual(r))}applyChanges(e){const n=[];let i=0,r=new xe((s,a)=>se(s.canonicalString(),a.canonicalString()));return this.changes.forEach((s,a)=>{const o=this.Br.get(s);if(n.push(this.Nr.removeEntry(e,s,o.readTime)),a.isValidDocument()){const l=_1(this.Nr.serializer,a);r=r.add(s.path.popLast());const c=ap(l);i+=c-o.size,n.push(this.Nr.addEntry(e,s,l))}else if(i-=o.size,this.trackRemovals){const l=_1(this.Nr.serializer,a.convertToNoDocument(Z.min()));n.push(this.Nr.addEntry(e,s,l))}}),r.forEach(s=>{n.push(this.Nr.indexManager.addToCollectionParentIndex(e,s))}),n.push(this.Nr.updateMetadata(e,i)),M.waitFor(n)}getFromCache(e,n){return this.Nr.vr(e,n).next(i=>(this.Br.set(n,{size:i.size,readTime:i.document.readTime}),i.document))}getAllFromCache(e,n){return this.Nr.Mr(e,n).next(({documents:i,Or:r})=>(r.forEach((s,a)=>{this.Br.set(s,{size:a,readTime:i.get(s).readTime})}),i))}}function O1(t){return Rt(t,kh)}function da(t){return Rt(t,Zm)}function ou(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function M1(t,e){const n=e.documentKey.path.toArray();return[t,rp(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function L1(t,e){const n=t.path.toArray(),i=e.path.toArray();let r=0;for(let s=0;s<n.length-2&&s<i.length-2;++s)if(r=se(n[s],i[s]),r)return r;return r=se(n.length,i.length),r||(r=se(n[n.length-2],i[i.length-2]),r||se(n[n.length-1],i[i.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sH{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fV{constructor(e,n,i,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(i!==null&&Zu(i.mutation,r,Tn.empty(),Ae.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,ce()).next(()=>i))}getLocalViewOfDocuments(e,n,i=ce()){const r=ji();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,i).next(s=>{let a=Tu();return s.forEach((o,l)=>{a=a.insert(o,l.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const i=ji();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,ce()))}populateOverlays(e,n,i){const r=[];return i.forEach(s=>{n.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(e,r).next(s=>{s.forEach((a,o)=>{n.set(a,o)})})}computeViews(e,n,i,r){let s=wn();const a=Ju(),o=function(){return Ju()}();return n.forEach((l,c)=>{const h=i.get(c.key);r.has(c.key)&&(h===void 0||h.mutation instanceof zr)?s=s.insert(c.key,c):h!==void 0?(a.set(c.key,h.mutation.getFieldMask()),Zu(h.mutation,c,h.mutation.getFieldMask(),Ae.now())):a.set(c.key,Tn.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,h)=>a.set(c,h)),n.forEach((c,h)=>o.set(c,new sH(h,a.get(c)??null))),o))}recalculateAndSaveOverlays(e,n){const i=Ju();let r=new Le((a,o)=>a-o),s=ce();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const o of a)o.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let h=i.get(l)||Tn.empty();h=o.applyToLocalView(c,h),i.set(l,h);const d=(r.get(o.batchId)||ce()).add(l);r=r.insert(o.batchId,d)})}).next(()=>{const a=[],o=r.getReverseIterator();for(;o.hasNext();){const l=o.getNext(),c=l.key,h=l.value,d=Ck();h.forEach(f=>{if(!s.has(f)){const p=Mk(n.get(f),i.get(f));p!==null&&d.set(f,p),s=s.add(f)}}),a.push(this.documentOverlayCache.saveOverlays(e,c,d))}return M.waitFor(a)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,r){return function(a){return $.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Ow(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,r):this.getDocumentsMatchingCollectionQuery(e,n,i,r)}getNextDocuments(e,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,r).next(s=>{const a=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,r-s.size):M.resolve(ji());let o=Ml,l=s;return a.next(c=>M.forEach(c,(h,d)=>(o<d.largestBatchId&&(o=d.largestBatchId),s.get(h)?M.resolve():this.remoteDocumentCache.getEntry(e,h).next(f=>{l=l.insert(h,f)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,ce())).next(h=>({batchId:o,changes:xk(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new $(n)).next(i=>{let r=Tu();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,i,r){const s=n.collectionGroup;let a=Tu();return this.indexManager.getCollectionParents(e,s).next(o=>M.forEach(o,l=>{const c=function(d,f){return new Lr(f,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,i,r).next(h=>{h.forEach((d,f)=>{a=a.insert(d,f)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,i,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,s,r))).next(a=>{s.forEach((l,c)=>{const h=c.getKey();a.get(h)===null&&(a=a.insert(h,Be.newInvalidDocument(h)))});let o=Tu();return a.forEach((l,c)=>{const h=s.get(l);h!==void 0&&Zu(h.mutation,c,Tn.empty(),Ae.now()),Ed(n,c)&&(o=o.insert(l,c))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aH{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return M.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:mt(r.createTime)}}(n)),M.resolve()}getNamedQuery(e,n){return M.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(r){return{name:r.name,query:Hw(r.bundledQuery),readTime:mt(r.readTime)}}(n)),M.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oH{constructor(){this.overlays=new Le($.comparator),this.qr=new Map}getOverlay(e,n){return M.resolve(this.overlays.get(n))}getOverlays(e,n){const i=ji();return M.forEach(n,r=>this.getOverlay(e,r).next(s=>{s!==null&&i.set(r,s)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((r,s)=>{this.St(e,n,s)}),M.resolve()}removeOverlaysForBatchId(e,n,i){const r=this.qr.get(i);return r!==void 0&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.qr.delete(i)),M.resolve()}getOverlaysForCollection(e,n,i){const r=ji(),s=n.length+1,a=new $(n.child("")),o=this.overlays.getIteratorFrom(a);for(;o.hasNext();){const l=o.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>i&&r.set(l.getKey(),l)}return M.resolve(r)}getOverlaysForCollectionGroup(e,n,i,r){let s=new Le((c,h)=>c-h);const a=this.overlays.getIterator();for(;a.hasNext();){const c=a.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>i){let h=s.get(c.largestBatchId);h===null&&(h=ji(),s=s.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const o=ji(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,h)=>o.set(c,h)),!(o.size()>=r)););return M.resolve(o)}St(e,n,i){const r=this.overlays.get(i.key);if(r!==null){const a=this.qr.get(r.largestBatchId).delete(i.key);this.qr.set(r.largestBatchId,a)}this.overlays=this.overlays.insert(i.key,new Bw(n,i));let s=this.qr.get(n);s===void 0&&(s=ce(),this.qr.set(n,s)),this.qr.set(n,s.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lH{constructor(){this.sessionToken=at.EMPTY_BYTE_STRING}getSessionToken(e){return M.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,M.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kw{constructor(){this.Qr=new xe(Ct.$r),this.Ur=new xe(Ct.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const i=new Ct(e,n);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.Gr(new Ct(e,n))}zr(e,n){e.forEach(i=>this.removeReference(i,n))}jr(e){const n=new $(new pe([])),i=new Ct(n,e),r=new Ct(n,e+1),s=[];return this.Ur.forEachInRange([i,r],a=>{this.Gr(a),s.push(a.key)}),s}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new $(new pe([])),i=new Ct(n,e),r=new Ct(n,e+1);let s=ce();return this.Ur.forEachInRange([i,r],a=>{s=s.add(a.key)}),s}containsKey(e){const n=new Ct(e,0),i=this.Qr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class Ct{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return $.comparator(e.key,n.key)||se(e.Yr,n.Yr)}static Kr(e,n){return se(e.Yr,n.Yr)||$.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cH{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new xe(Ct.$r)}checkEmpty(e){return M.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,r){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new zw(s,n,i,r);this.mutationQueue.push(a);for(const o of r)this.Zr=this.Zr.add(new Ct(o.key,s)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return M.resolve(a)}lookupMutationBatch(e,n){return M.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,r=this.ei(i),s=r<0?0:r;return M.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return M.resolve(this.mutationQueue.length===0?Cs:this.tr-1)}getAllMutationBatches(e){return M.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new Ct(n,0),r=new Ct(n,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([i,r],a=>{const o=this.Xr(a.Yr);s.push(o)}),M.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new xe(se);return n.forEach(r=>{const s=new Ct(r,0),a=new Ct(r,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,a],o=>{i=i.add(o.Yr)})}),M.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,r=i.length+1;let s=i;$.isDocumentKey(s)||(s=s.child(""));const a=new Ct(new $(s),0);let o=new xe(se);return this.Zr.forEachWhile(l=>{const c=l.key.path;return!!i.isPrefixOf(c)&&(c.length===r&&(o=o.add(l.Yr)),!0)},a),M.resolve(this.ti(o))}ti(e){const n=[];return e.forEach(i=>{const r=this.Xr(i);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){X(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return M.forEach(n.mutations,r=>{const s=new Ct(r.key,n.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Zr=i})}ir(e){}containsKey(e,n){const i=new Ct(n,0),r=this.Zr.firstAfterOrEqual(i);return M.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,M.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uH{constructor(e){this.ri=e,this.docs=function(){return new Le($.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,r=this.docs.get(i),s=r?r.size:0,a=this.ri(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return M.resolve(i?i.document.mutableCopy():Be.newInvalidDocument(n))}getEntries(e,n){let i=wn();return n.forEach(r=>{const s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():Be.newInvalidDocument(r))}),M.resolve(i)}getDocumentsMatchingQuery(e,n,i,r){let s=wn();const a=n.path,o=new $(a.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(o);for(;l.hasNext();){const{key:c,value:{document:h}}=l.getNext();if(!a.isPrefixOf(c.path))break;c.path.length>a.length+1||Iw(GN(h),i)<=0||(r.has(h.key)||Ed(n,h))&&(s=s.insert(h.key,h.mutableCopy()))}return M.resolve(s)}getAllFromCollectionGroup(e,n,i,r){W(9500)}ii(e,n){return M.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new hH(this)}getSize(e){return M.resolve(this.size)}}class hH extends hV{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?n.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(i)}),M.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dH{constructor(e){this.persistence=e,this.si=new Ur(n=>Ja(n),wd),this.lastRemoteSnapshotVersion=Z.min(),this.highestTargetId=0,this.oi=0,this._i=new Kw,this.targetCount=0,this.ai=io.ur()}forEachTarget(e,n){return this.si.forEach((i,r)=>n(r)),M.resolve()}getLastRemoteSnapshotVersion(e){return M.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return M.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),M.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.oi&&(this.oi=n),M.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new io(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,M.resolve()}updateTargetData(e,n){return this.Pr(n),M.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,M.resolve()}removeTargets(e,n,i){let r=0;const s=[];return this.si.forEach((a,o)=>{o.sequenceNumber<=n&&i.get(o.targetId)===null&&(this.si.delete(a),s.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)}),M.waitFor(s).next(()=>r)}getTargetCount(e){return M.resolve(this.targetCount)}getTargetData(e,n){const i=this.si.get(n)||null;return M.resolve(i)}addMatchingKeys(e,n,i){return this._i.Wr(n,i),M.resolve()}removeMatchingKeys(e,n,i){this._i.zr(n,i);const r=this.persistence.referenceDelegate,s=[];return r&&n.forEach(a=>{s.push(r.markPotentiallyOrphaned(e,a))}),M.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),M.resolve()}getMatchingKeysForTargetId(e,n){const i=this._i.Hr(n);return M.resolve(i)}containsKey(e,n){return M.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qw{constructor(e,n){this.ui={},this.overlays={},this.ci=new vn(0),this.li=!1,this.li=!0,this.hi=new lH,this.referenceDelegate=e(this),this.Pi=new dH(this),this.indexManager=new Y7,this.remoteDocumentCache=function(r){return new uH(r)}(i=>this.referenceDelegate.Ti(i)),this.serializer=new tV(n),this.Ii=new aH(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new oH,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.ui[e.toKey()];return i||(i=new cH(n,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,i){q("MemoryPersistence","Starting transaction:",e);const r=new fH(this.ci.next());return this.referenceDelegate.Ei(),i(r).next(s=>this.referenceDelegate.di(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Ai(e,n){return M.or(Object.values(this.ui).map(i=>()=>i.containsKey(e,n)))}}class fH extends KN{constructor(e){super(),this.currentSequenceNumber=e}}class pg{constructor(e){this.persistence=e,this.Ri=new Kw,this.Vi=null}static mi(e){return new pg(e)}get fi(){if(this.Vi)return this.Vi;throw W(60996)}addReference(e,n,i){return this.Ri.addReference(i,n),this.fi.delete(i.toString()),M.resolve()}removeReference(e,n,i){return this.Ri.removeReference(i,n),this.fi.add(i.toString()),M.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),M.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(r=>this.fi.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(s=>this.fi.add(s.toString()))}).next(()=>i.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return M.forEach(this.fi,i=>{const r=$.fromPath(i);return this.gi(e,r).next(s=>{s||n.removeEntry(r,Z.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(i=>{i?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return M.or([()=>M.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class op{constructor(e,n){this.persistence=e,this.pi=new Ur(i=>en(i.path),(i,r)=>i.isEqual(r)),this.garbageCollector=uV(this,n)}static mi(e,n){return new op(e,n)}Ei(){}di(e){return M.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>n.next(r=>i+r))}wr(e){let n=0;return this.pr(e,i=>{n++}).next(()=>n)}pr(e,n){return M.forEach(this.pi,(i,r)=>this.br(e,i,r).next(s=>s?M.resolve():n(r)))}removeTargets(e,n,i){return this.persistence.getTargetCache().removeTargets(e,n,i)}removeOrphanedDocuments(e,n){let i=0;const r=this.persistence.getRemoteDocumentCache(),s=r.newChangeBuffer();return r.ii(e,a=>this.br(e,a,n).next(o=>{o||(i++,s.removeEntry(a,Z.min()))})).next(()=>s.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),M.resolve()}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,n,i){return this.pi.set(i,e.currentSequenceNumber),M.resolve()}removeReference(e,n,i){return this.pi.set(i,e.currentSequenceNumber),M.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),M.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=nm(e.data.value)),n}br(e,n,i){return M.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const r=this.pi.get(n);return M.resolve(r!==void 0&&r>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mH{constructor(e){this.serializer=e}k(e,n,i,r){const s=new rg("createOrUpgrade",n);i<1&&r>=1&&(function(l){l.createObjectStore(Td)}(e),function(l){l.createObjectStore(Nh,{keyPath:P8}),l.createObjectStore(_i,{keyPath:QI,autoIncrement:!0}).createIndex(Ca,WI,{unique:!0}),l.createObjectStore(Ll)}(e),U1(e),function(l){l.createObjectStore(Ta)}(e));let a=M.resolve();return i<3&&r>=3&&(i!==0&&(function(l){l.deleteObjectStore(zl),l.deleteObjectStore(Ul),l.deleteObjectStore(ja)}(e),U1(e)),a=a.next(()=>function(l){const c=l.store(ja),h={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Z.min().toTimestamp(),targetCount:0};return c.put(ep,h)}(s))),i<4&&r>=4&&(i!==0&&(a=a.next(()=>function(l,c){return c.store(_i).J().next(d=>{l.deleteObjectStore(_i),l.createObjectStore(_i,{keyPath:QI,autoIncrement:!0}).createIndex(Ca,WI,{unique:!0});const f=c.store(_i),p=d.map(w=>f.put(w));return M.waitFor(p)})}(e,s))),a=a.next(()=>{(function(l){l.createObjectStore(jl,{keyPath:z8})})(e)})),i<5&&r>=5&&(a=a.next(()=>this.yi(s))),i<6&&r>=6&&(a=a.next(()=>(function(l){l.createObjectStore(kh)}(e),this.wi(s)))),i<7&&r>=7&&(a=a.next(()=>this.Si(s))),i<8&&r>=8&&(a=a.next(()=>this.bi(e,s))),i<9&&r>=9&&(a=a.next(()=>{(function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")})(e)})),i<10&&r>=10&&(a=a.next(()=>this.Di(s))),i<11&&r>=11&&(a=a.next(()=>{(function(l){l.createObjectStore(sg,{keyPath:j8})})(e),function(l){l.createObjectStore(ag,{keyPath:B8})}(e)})),i<12&&r>=12&&(a=a.next(()=>{(function(l){const c=l.createObjectStore(og,{keyPath:Q8});c.createIndex($v,W8,{unique:!1}),c.createIndex(tk,Y8,{unique:!1})})(e)})),i<13&&r>=13&&(a=a.next(()=>function(l){const c=l.createObjectStore(Zm,{keyPath:N8});c.createIndex(em,k8),c.createIndex(XN,V8)}(e)).next(()=>this.Ci(e,s)).next(()=>e.deleteObjectStore(Ta))),i<14&&r>=14&&(a=a.next(()=>this.Fi(e,s))),i<15&&r>=15&&(a=a.next(()=>function(l){l.createObjectStore(Cw,{keyPath:F8,autoIncrement:!0}).createIndex(Gv,q8,{unique:!1}),l.createObjectStore(Wu,{keyPath:H8}).createIndex(ZN,G8,{unique:!1}),l.createObjectStore(Yu,{keyPath:$8}).createIndex(ek,K8,{unique:!1})}(e))),i<16&&r>=16&&(a=a.next(()=>{n.objectStore(Wu).clear()}).next(()=>{n.objectStore(Yu).clear()})),i<17&&r>=17&&(a=a.next(()=>{(function(l){l.createObjectStore(Pw,{keyPath:X8})})(e)})),i<18&&r>=18&&v2()&&(a=a.next(()=>{n.objectStore(Wu).clear()}).next(()=>{n.objectStore(Yu).clear()})),a}wi(e){let n=0;return e.store(Ta).ee((i,r)=>{n+=ap(r)}).next(()=>{const i={byteSize:n};return e.store(kh).put(Hv,i)})}yi(e){const n=e.store(Nh),i=e.store(_i);return n.J().next(r=>M.forEach(r,s=>{const a=IDBKeyRange.bound([s.userId,Cs],[s.userId,s.lastAcknowledgedBatchId]);return i.J(Ca,a).next(o=>M.forEach(o,l=>{X(l.userId===s.userId,18650,"Cannot process batch from unexpected user",{batchId:l.batchId});const c=Aa(this.serializer,l);return aV(e,s.userId,c).next(()=>{})}))}))}Si(e){const n=e.store(zl),i=e.store(Ta);return e.store(ja).get(ep).next(r=>{const s=[];return i.ee((a,o)=>{const l=new pe(a),c=function(d){return[0,en(d)]}(l);s.push(n.get(c).next(h=>h?M.resolve():(d=>n.put({targetId:0,path:en(d),sequenceNumber:r.highestListenSequenceNumber}))(l)))}).next(()=>M.waitFor(s))})}bi(e,n){e.createObjectStore(Vh,{keyPath:U8});const i=n.store(Vh),r=new $w,s=a=>{if(r.add(a)){const o=a.lastSegment(),l=a.popLast();return i.put({collectionId:o,parent:en(l)})}};return n.store(Ta).ee({X:!0},(a,o)=>{const l=new pe(a);return s(l.popLast())}).next(()=>n.store(Ll).ee({X:!0},([a,o,l],c)=>{const h=zi(o);return s(h.popLast())}))}Di(e){const n=e.store(Ul);return n.ee((i,r)=>{const s=bu(r),a=nV(this.serializer,s);return n.put(a)})}Ci(e,n){const i=n.store(Ta),r=[];return i.ee((s,a)=>{const o=n.store(Zm),l=function(d){return d.document?new $(pe.fromString(d.document.name).popFirst(5)):d.noDocument?$.fromSegments(d.noDocument.path):d.unknownDocument?$.fromSegments(d.unknownDocument.path):W(36783)}(a).path.toArray(),c={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:a.readTime||[0,0],unknownDocument:a.unknownDocument,noDocument:a.noDocument,document:a.document,hasCommittedMutations:!!a.hasCommittedMutations};r.push(o.put(c))}).next(()=>M.waitFor(r))}Fi(e,n){const i=n.store(_i),r=dV(this.serializer),s=new Qw(pg.mi,this.serializer.yt);return i.J().next(a=>{const o=new Map;return a.forEach(l=>{let c=o.get(l.userId)??ce();Aa(this.serializer,l).keys().forEach(h=>c=c.add(h)),o.set(l.userId,c)}),M.forEach(o,(l,c)=>{const h=new Dt(c),d=fg.wt(this.serializer,h),f=s.getIndexManager(h),p=mg.wt(h,this.serializer,f,s.referenceDelegate);return new fV(r,p,d,f).recalculateAndSaveOverlaysForDocumentKeys(new Kv(n,vn.ce),l).next()})})}}function U1(t){t.createObjectStore(zl,{keyPath:M8}).createIndex(xw,L8,{unique:!0}),t.createObjectStore(Ul,{keyPath:"targetId"}).createIndex(JN,O8,{unique:!0}),t.createObjectStore(ja)}const Zr="IndexedDbPersistence",a_=18e5,o_=5e3,l_="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",mV="main";class Ww{constructor(e,n,i,r,s,a,o,l,c,h,d=18){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=i,this.Mi=s,this.window=a,this.document=o,this.xi=c,this.Oi=h,this.Ni=d,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=f=>Promise.resolve(),!Ww.v())throw new F(U.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new nH(this,r),this.$i=n+mV,this.serializer=new tV(l),this.Ui=new Fi(this.$i,this.Ni,new mH(this.serializer)),this.hi=new H7,this.Pi=new J7(this.referenceDelegate,this.serializer),this.remoteDocumentCache=dV(this.serializer),this.Ii=new q7,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,h===!1&&dt(Zr,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new F(U.FAILED_PRECONDITION,l_);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Pi.getHighestSequenceNumber(e))}).then(e=>{this.ci=new vn(e,this.xi)}).then(()=>{this.li=!0}).catch(e=>(this.Ui&&this.Ui.close(),Promise.reject(e)))}Ji(e){return this.Qi=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget(async()=>{this.started&&await this.Wi()}))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Tf(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Hi(e).next(n=>{n||(this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)))})}).next(()=>this.Yi(e)).next(n=>this.isPrimary&&!n?this.Zi(e).next(()=>!1):!!n&&this.Xi(e).next(()=>!0))).catch(e=>{if(ea(e))return q(Zr,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return q(Zr,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable(()=>this.Qi(e)),this.isPrimary=e})}Hi(e){return lu(e).get(Ro).next(n=>M.resolve(this.es(n)))}ts(e){return Tf(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,a_)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const i=Rt(n,jl);return i.J().next(r=>{const s=this.ss(r,a_),a=r.filter(o=>s.indexOf(o)===-1);return M.forEach(a,o=>i.delete(o.clientId)).next(()=>a)})}).catch(()=>[]);if(this.Ki)for(const n of e)this.Ki.removeItem(this._s(n.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Wi().then(()=>this.ns()).then(()=>this.ji()))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?M.resolve(!0):lu(e).get(Ro).next(n=>{if(n!==null&&this.rs(n.leaseTimestampMs,o_)&&!this.us(n.ownerId)){if(this.es(n)&&this.networkEnabled)return!0;if(!this.es(n)){if(!n.allowTabSynchronization)throw new F(U.FAILED_PRECONDITION,l_);return!1}}return!(!this.networkEnabled||!this.inForeground)||Tf(e).J().next(i=>this.ss(i,o_).find(r=>{if(this.clientId!==r.clientId){const s=!this.networkEnabled&&r.networkEnabled,a=!this.inForeground&&r.inForeground,o=this.networkEnabled===r.networkEnabled;if(s||a&&o)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&q(Zr,`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[Td,jl],e=>{const n=new Kv(e,vn.ce);return this.Zi(n).next(()=>this.ts(n))}),this.Ui.close(),this.Ps()}ss(e,n){return e.filter(i=>this.rs(i.updateTimeMs,n)&&!this.us(i.clientId))}Ts(){return this.runTransaction("getActiveClients","readonly",e=>Tf(e).J().next(n=>this.ss(n,a_).map(i=>i.clientId)))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,n){return mg.wt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new X7(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return fg.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,n,i){q(Zr,"Starting transaction:",e);const r=n==="readonly"?"readonly":"readwrite",s=function(l){return l===18?e7:l===17?sk:l===16?Z8:l===15?Dw:l===14?rk:l===13?ik:l===12?J8:l===11?nk:void W(60245)}(this.Ni);let a;return this.Ui.runTransaction(e,r,s,o=>(a=new Kv(o,this.ci?this.ci.next():vn.ce),n==="readwrite-primary"?this.Hi(a).next(l=>!!l||this.Yi(a)).next(l=>{if(!l)throw dt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)),new F(U.FAILED_PRECONDITION,$N);return i(a)}).next(l=>this.Xi(a).next(()=>l)):this.Is(a).next(()=>i(a)))).then(o=>(a.raiseOnCommittedEvent(),o))}Is(e){return lu(e).get(Ro).next(n=>{if(n!==null&&this.rs(n.leaseTimestampMs,o_)&&!this.us(n.ownerId)&&!this.es(n)&&!(this.Oi||this.allowTabSynchronization&&n.allowTabSynchronization))throw new F(U.FAILED_PRECONDITION,l_)})}Xi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return lu(e).put(Ro,n)}static v(){return Fi.v()}Zi(e){const n=lu(e);return n.get(Ro).next(i=>this.es(i)?(q(Zr,"Releasing primary lease."),n.delete(Ro)):M.resolve())}rs(e,n){const i=Date.now();return!(e<i-n)&&(!(e>i)||(dt(`Detected an update time that is in the future: ${e} > ${i}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi()))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){var e;typeof((e=this.window)==null?void 0:e.addEventListener)=="function"&&(this.Bi=()=>{this.cs();const n=/(?:Version|Mobile)\/1[456]/;_2()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){var n;try{const i=((n=this.Ki)==null?void 0:n.getItem(this._s(e)))!==null;return q(Zr,`Client '${e}' ${i?"is":"is not"} zombied in LocalStorage`),i}catch(i){return dt(Zr,"Failed to get zombied client id.",i),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){dt("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function lu(t){return Rt(t,Td)}function Tf(t){return Rt(t,jl)}function Yw(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xw{constructor(e,n,i,r){this.targetId=e,this.fromCache=n,this.Es=i,this.ds=r}static As(e,n){let i=ce(),r=ce();for(const s of n.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new Xw(e,n.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pH{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pV{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return _2()?8:QN(Ze())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,i,r){const s={result:null};return this.ys(e,n).next(a=>{s.result=a}).next(()=>{if(!s.result)return this.ws(e,n,r,i).next(a=>{s.result=a})}).next(()=>{if(s.result)return;const a=new pH;return this.Ss(e,n,a).next(o=>{if(s.result=o,this.Vs)return this.bs(e,n,a,o.size)})}).next(()=>s.result)}bs(e,n,i,r){return i.documentReadCount<this.fs?(Lo()<=fe.DEBUG&&q("QueryEngine","SDK will not create cache indexes for query:",Uo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),M.resolve()):(Lo()<=fe.DEBUG&&q("QueryEngine","Query:",Uo(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.gs*r?(Lo()<=fe.DEBUG&&q("QueryEngine","The SDK decides to create cache indexes for query:",Uo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,hn(n))):M.resolve())}ys(e,n){if(l1(n))return M.resolve(null);let i=hn(n);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=ip(n,null,"F"),i=hn(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(s=>{const a=ce(...s);return this.ps.getDocuments(e,a).next(o=>this.indexManager.getMinOffset(e,i).next(l=>{const c=this.Ds(n,o);return this.Cs(n,c,a,l.readTime)?this.ys(e,ip(n,null,"F")):this.vs(e,c,n,l)}))})))}ws(e,n,i,r){return l1(n)||r.isEqual(Z.min())?M.resolve(null):this.ps.getDocuments(e,i).next(s=>{const a=this.Ds(n,s);return this.Cs(n,a,i,r)?M.resolve(null):(Lo()<=fe.DEBUG&&q("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Uo(n)),this.vs(e,a,n,HN(r,Ml)).next(o=>o))})}Ds(e,n){let i=new xe(Ik(e));return n.forEach((r,s)=>{Ed(e,s)&&(i=i.add(s))}),i}Cs(e,n,i,r){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Ss(e,n,i){return Lo()<=fe.DEBUG&&q("QueryEngine","Using full collection scan to execute query:",Uo(n)),this.ps.getDocumentsMatchingQuery(e,n,Hn.min(),i)}vs(e,n,i,r){return this.ps.getDocumentsMatchingQuery(e,i,r).next(s=>(n.forEach(a=>{s=s.insert(a.key,a)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jw="LocalStore",gH=3e8;class yH{constructor(e,n,i,r){this.persistence=e,this.Fs=n,this.serializer=r,this.Ms=new Le(se),this.xs=new Ur(s=>Ja(s),wd),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new fV(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function gV(t,e,n,i){return new yH(t,e,n,i)}async function yV(t,e){const n=Q(t);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,n.Bs(e),n.mutationQueue.getAllMutationBatches(i))).next(s=>{const a=[],o=[];let l=ce();for(const c of r){a.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}for(const c of s){o.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}return n.localDocuments.getDocuments(i,l).next(c=>({Ls:c,removedBatchIds:a,addedBatchIds:o}))})})}function _H(t,e){const n=Q(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=e.batch.keys(),s=n.Ns.newChangeBuffer({trackRemovals:!0});return function(o,l,c,h){const d=c.batch,f=d.keys();let p=M.resolve();return f.forEach(w=>{p=p.next(()=>h.getEntry(l,w)).next(E=>{const A=c.docVersions.get(w);X(A!==null,48541),E.version.compareTo(A)<0&&(d.applyToRemoteDocument(E,c),E.isValidDocument()&&(E.setReadTime(c.commitVersion),h.addEntry(E)))})}),p.next(()=>o.mutationQueue.removeMutationBatch(l,d))}(n,i,e,s).next(()=>s.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(o){let l=ce();for(let c=0;c<o.mutationResults.length;++c)o.mutationResults[c].transformResults.length>0&&(l=l.add(o.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(i,r))})}function _V(t){const e=Q(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function vH(t,e){const n=Q(t),i=e.snapshotVersion;let r=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const a=n.Ns.newChangeBuffer({trackRemovals:!0});r=n.Ms;const o=[];e.targetChanges.forEach((h,d)=>{const f=r.get(d);if(!f)return;o.push(n.Pi.removeMatchingKeys(s,h.removedDocuments,d).next(()=>n.Pi.addMatchingKeys(s,h.addedDocuments,d)));let p=f.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(d)!==null?p=p.withResumeToken(at.EMPTY_BYTE_STRING,Z.min()).withLastLimboFreeSnapshotVersion(Z.min()):h.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(h.resumeToken,i)),r=r.insert(d,p),function(E,A,T){return E.resumeToken.approximateByteSize()===0||A.snapshotVersion.toMicroseconds()-E.snapshotVersion.toMicroseconds()>=gH?!0:T.addedDocuments.size+T.modifiedDocuments.size+T.removedDocuments.size>0}(f,p,h)&&o.push(n.Pi.updateTargetData(s,p))});let l=wn(),c=ce();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(s,h))}),o.push(vV(s,a,e.documentUpdates).next(h=>{l=h.ks,c=h.qs})),!i.isEqual(Z.min())){const h=n.Pi.getLastRemoteSnapshotVersion(s).next(d=>n.Pi.setTargetsMetadata(s,s.currentSequenceNumber,i));o.push(h)}return M.waitFor(o).next(()=>a.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(n.Ms=r,s))}function vV(t,e,n){let i=ce(),r=ce();return n.forEach(s=>i=i.add(s)),e.getEntries(t,i).next(s=>{let a=wn();return n.forEach((o,l)=>{const c=s.get(o);l.isFoundDocument()!==c.isFoundDocument()&&(r=r.add(o)),l.isNoDocument()&&l.version.isEqual(Z.min())?(e.removeEntry(o,l.readTime),a=a.insert(o,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),a=a.insert(o,l)):q(Jw,"Ignoring outdated watch update for ",o,". Current version:",c.version," Watch version:",l.version)}),{ks:a,qs:r}})}function TH(t,e){const n=Q(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=Cs),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function Kl(t,e){const n=Q(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return n.Pi.getTargetData(i,e).next(s=>s?(r=s,M.resolve(r)):n.Pi.allocateTargetId(i).next(a=>(r=new dr(e,a,"TargetPurposeListen",i.currentSequenceNumber),n.Pi.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=n.Ms.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(i.targetId,i),n.xs.set(e,i.targetId)),i})}async function Ql(t,e,n){const i=Q(t),r=i.Ms.get(e),s=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",s,a=>i.persistence.referenceDelegate.removeTarget(a,r))}catch(a){if(!ea(a))throw a;q(Jw,`Failed to update sequence numbers for target ${e}: ${a}`)}i.Ms=i.Ms.remove(e),i.xs.delete(r.target)}function lp(t,e,n){const i=Q(t);let r=Z.min(),s=ce();return i.persistence.runTransaction("Execute query","readwrite",a=>function(l,c,h){const d=Q(l),f=d.xs.get(h);return f!==void 0?M.resolve(d.Ms.get(f)):d.Pi.getTargetData(c,h)}(i,a,hn(e)).next(o=>{if(o)return r=o.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(a,o.targetId).next(l=>{s=l})}).next(()=>i.Fs.getDocumentsMatchingQuery(a,e,n?r:Z.min(),n?s:ce())).next(o=>(bV(i,Sk(e),o),{documents:o,Qs:s})))}function TV(t,e){const n=Q(t),i=Q(n.Pi),r=n.Ms.get(e);return r?Promise.resolve(r.target):n.persistence.runTransaction("Get target data","readonly",s=>i.At(s,e).next(a=>a?a.target:null))}function wV(t,e){const n=Q(t),i=n.Os.get(e)||Z.min();return n.persistence.runTransaction("Get new document changes","readonly",r=>n.Ns.getAllFromCollectionGroup(r,e,HN(i,Ml),Number.MAX_SAFE_INTEGER)).then(r=>(bV(n,e,r),r))}function bV(t,e,n){let i=t.Os.get(e)||Z.min();n.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),t.Os.set(e,i)}async function wH(t,e,n,i){const r=Q(t);let s=ce(),a=wn();for(const c of n){const h=e.$s(c.metadata.name);c.document&&(s=s.add(h));const d=e.Us(c);d.setReadTime(e.Ks(c.metadata.readTime)),a=a.insert(h,d)}const o=r.Ns.newChangeBuffer({trackRemovals:!0}),l=await Kl(r,function(h){return hn(vc(pe.fromString(`__bundle__/docs/${h}`)))}(i));return r.persistence.runTransaction("Apply bundle documents","readwrite",c=>vV(c,o,a).next(h=>(o.apply(c),h)).next(h=>r.Pi.removeMatchingKeysForTargetId(c,l.targetId).next(()=>r.Pi.addMatchingKeys(c,s,l.targetId)).next(()=>r.localDocuments.getLocalViewOfDocuments(c,h.ks,h.qs)).next(()=>h.ks)))}async function bH(t,e,n=ce()){const i=await Kl(t,hn(Hw(e.bundledQuery))),r=Q(t);return r.persistence.runTransaction("Save named query","readwrite",s=>{const a=mt(e.readTime);if(i.snapshotVersion.compareTo(a)>=0)return r.Ii.saveNamedQuery(s,e);const o=i.withResumeToken(at.EMPTY_BYTE_STRING,a);return r.Ms=r.Ms.insert(o.targetId,o),r.Pi.updateTargetData(s,o).next(()=>r.Pi.removeMatchingKeysForTargetId(s,i.targetId)).next(()=>r.Pi.addMatchingKeys(s,n,i.targetId)).next(()=>r.Ii.saveNamedQuery(s,e))})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EV="firestore_clients";function z1(t,e){return`${EV}_${t}_${e}`}const AV="firestore_mutations";function j1(t,e,n){let i=`${AV}_${t}_${n}`;return e.isAuthenticated()&&(i+=`_${e.uid}`),i}const SV="firestore_targets";function c_(t,e){return`${SV}_${t}_${e}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ci="SharedClientState";class cp{constructor(e,n,i,r){this.user=e,this.batchId=n,this.state=i,this.error=r}static Ws(e,n,i){const r=JSON.parse(i);let s,a=typeof r=="object"&&["pending","acknowledged","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return a&&r.error&&(a=typeof r.error.message=="string"&&typeof r.error.code=="string",a&&(s=new F(r.error.code,r.error.message))),a?new cp(e,n,r.state,s):(dt(Ci,`Failed to parse mutation state for ID '${n}': ${i}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class eh{constructor(e,n,i){this.targetId=e,this.state=n,this.error=i}static Ws(e,n){const i=JSON.parse(n);let r,s=typeof i=="object"&&["not-current","current","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return s&&i.error&&(s=typeof i.error.message=="string"&&typeof i.error.code=="string",s&&(r=new F(i.error.code,i.error.message))),s?new eh(e,i.state,r):(dt(Ci,`Failed to parse target state for ID '${e}': ${n}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class up{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Ws(e,n){const i=JSON.parse(n);let r=typeof i=="object"&&i.activeTargetIds instanceof Array,s=Mw();for(let a=0;r&&a<i.activeTargetIds.length;++a)r=WN(i.activeTargetIds[a]),s=s.add(i.activeTargetIds[a]);return r?new up(e,s):(dt(Ci,`Failed to parse client data for instance '${e}': ${n}`),null)}}class Zw{constructor(e,n){this.clientId=e,this.onlineState=n}static Ws(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new Zw(n.clientId,n.onlineState):(dt(Ci,`Failed to parse online state: ${e}`),null)}}class l0{constructor(){this.activeTargetIds=Mw()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class u_{constructor(e,n,i,r,s){this.window=e,this.Mi=n,this.persistenceKey=i,this.Js=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Hs=this.Ys.bind(this),this.Zs=new Le(se),this.started=!1,this.Xs=[];const a=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.eo=z1(this.persistenceKey,this.Js),this.no=function(l){return`firestore_sequence_number_${l}`}(this.persistenceKey),this.Zs=this.Zs.insert(this.Js,new l0),this.ro=new RegExp(`^${EV}_${a}_([^_]*)$`),this.io=new RegExp(`^${AV}_${a}_(\\d+)(?:_(.*))?$`),this.so=new RegExp(`^${SV}_${a}_(\\d+)$`),this.oo=function(l){return`firestore_online_state_${l}`}(this.persistenceKey),this._o=function(l){return`firestore_bundle_loaded_v2_${l}`}(this.persistenceKey),this.window.addEventListener("storage",this.Hs)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Ts();for(const i of e){if(i===this.Js)continue;const r=this.getItem(z1(this.persistenceKey,i));if(r){const s=up.Ws(i,r);s&&(this.Zs=this.Zs.insert(s.clientId,s))}}this.ao();const n=this.storage.getItem(this.oo);if(n){const i=this.uo(n);i&&this.co(i)}for(const i of this.Xs)this.Ys(i);this.Xs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.no,JSON.stringify(e))}getAllActiveQueryTargets(){return this.lo(this.Zs)}isActiveQueryTarget(e){let n=!1;return this.Zs.forEach((i,r)=>{r.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.ho(e,"pending")}updateMutationState(e,n,i){this.ho(e,n,i),this.Po(e)}addLocalQueryTarget(e,n=!0){let i="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(c_(this.persistenceKey,e));if(r){const s=eh.Ws(e,r);s&&(i=s.state)}}return n&&this.To.zs(e),this.ao(),i}removeLocalQueryTarget(e){this.To.js(e),this.ao()}isLocalQueryTarget(e){return this.To.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(c_(this.persistenceKey,e))}updateQueryState(e,n,i){this.Io(e,n,i)}handleUserChange(e,n,i){n.forEach(r=>{this.Po(r)}),this.currentUser=e,i.forEach(r=>{this.addPendingMutation(r)})}setOnlineState(e){this.Eo(e)}notifyBundleLoaded(e){this.Ao(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Hs),this.removeItem(this.eo),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return q(Ci,"READ",e,n),n}setItem(e,n){q(Ci,"SET",e,n),this.storage.setItem(e,n)}removeItem(e){q(Ci,"REMOVE",e),this.storage.removeItem(e)}Ys(e){const n=e;if(n.storageArea===this.storage){if(q(Ci,"EVENT",n.key,n.newValue),n.key===this.eo)return void dt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Mi.enqueueRetryable(async()=>{if(this.started){if(n.key!==null){if(this.ro.test(n.key)){if(n.newValue==null){const i=this.Ro(n.key);return this.Vo(i,null)}{const i=this.mo(n.key,n.newValue);if(i)return this.Vo(i.clientId,i)}}else if(this.io.test(n.key)){if(n.newValue!==null){const i=this.fo(n.key,n.newValue);if(i)return this.po(i)}}else if(this.so.test(n.key)){if(n.newValue!==null){const i=this.yo(n.key,n.newValue);if(i)return this.wo(i)}}else if(n.key===this.oo){if(n.newValue!==null){const i=this.uo(n.newValue);if(i)return this.co(i)}}else if(n.key===this.no){const i=function(s){let a=vn.ce;if(s!=null)try{const o=JSON.parse(s);X(typeof o=="number",30636,{So:s}),a=o}catch(o){dt(Ci,"Failed to read sequence number from WebStorage",o)}return a}(n.newValue);i!==vn.ce&&this.sequenceNumberHandler(i)}else if(n.key===this._o){const i=this.bo(n.newValue);await Promise.all(i.map(r=>this.syncEngine.Do(r)))}}}else this.Xs.push(n)})}}get To(){return this.Zs.get(this.Js)}ao(){this.setItem(this.eo,this.To.Gs())}ho(e,n,i){const r=new cp(this.currentUser,e,n,i),s=j1(this.persistenceKey,this.currentUser,e);this.setItem(s,r.Gs())}Po(e){const n=j1(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Eo(e){const n={clientId:this.Js,onlineState:e};this.storage.setItem(this.oo,JSON.stringify(n))}Io(e,n,i){const r=c_(this.persistenceKey,e),s=new eh(e,n,i);this.setItem(r,s.Gs())}Ao(e){const n=JSON.stringify(Array.from(e));this.setItem(this._o,n)}Ro(e){const n=this.ro.exec(e);return n?n[1]:null}mo(e,n){const i=this.Ro(e);return up.Ws(i,n)}fo(e,n){const i=this.io.exec(e),r=Number(i[1]),s=i[2]!==void 0?i[2]:null;return cp.Ws(new Dt(s),r,n)}yo(e,n){const i=this.so.exec(e),r=Number(i[1]);return eh.Ws(r,n)}uo(e){return Zw.Ws(e)}bo(e){return JSON.parse(e)}async po(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Co(e.batchId,e.state,e.error);q(Ci,`Ignoring mutation for non-active user ${e.user.uid}`)}wo(e){return this.syncEngine.vo(e.targetId,e.state,e.error)}Vo(e,n){const i=n?this.Zs.insert(e,n):this.Zs.remove(e),r=this.lo(this.Zs),s=this.lo(i),a=[],o=[];return s.forEach(l=>{r.has(l)||a.push(l)}),r.forEach(l=>{s.has(l)||o.push(l)}),this.syncEngine.Fo(a,o).then(()=>{this.Zs=i})}co(e){this.Zs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}lo(e){let n=Mw();return e.forEach((i,r)=>{n=n.unionWith(r.activeTargetIds)}),n}}class IV{constructor(){this.Mo=new l0,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,i){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new l0,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EH{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B1="ConnectivityMonitor";class F1{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){q(B1,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){q(B1,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wf=null;function c0(){return wf===null?wf=function(){return 268435456+Math.round(2147483648*Math.random())}():wf++,"0x"+wf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h_="RestConnection",AH={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class SH{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${i}/databases/${r}`,this.Wo=this.databaseId.database===Qv?`project_id=${i}`:`project_id=${i}&database_id=${r}`}Go(e,n,i,r,s){const a=c0(),o=this.zo(e,n.toUriEncodedString());q(h_,`Sending RPC '${e}' ${a}:`,o,i);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,r,s);const{host:c}=new URL(o),h=Xs(c);return this.Jo(e,o,l,i,h).then(d=>(q(h_,`Received RPC '${e}' ${a}: `,d),d),d=>{throw Wi(h_,`RPC '${e}' ${a} failed with error: `,d,"url: ",o,"request:",i),d})}Ho(e,n,i,r,s,a){return this.Go(e,n,i,r,s)}jo(e,n,i){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+_c}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((r,s)=>e[s]=r),i&&i.headers.forEach((r,s)=>e[s]=r)}zo(e,n){const i=AH[e];return`${this.Uo}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IH{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $t="WebChannelConnection";class RH extends SH{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,i,r,s){const a=c0();return new Promise((o,l)=>{const c=new kN;c.setWithCredentials(!0),c.listenOnce(VN.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Xf.NO_ERROR:const d=c.getResponseJson();q($t,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(d)),o(d);break;case Xf.TIMEOUT:q($t,`RPC '${e}' ${a} timed out`),l(new F(U.DEADLINE_EXCEEDED,"Request time out"));break;case Xf.HTTP_ERROR:const f=c.getStatus();if(q($t,`RPC '${e}' ${a} failed with status:`,f,"response text:",c.getResponseText()),f>0){let p=c.getResponseJson();Array.isArray(p)&&(p=p[0]);const w=p==null?void 0:p.error;if(w&&w.status&&w.message){const E=function(T){const v=T.toLowerCase().replace(/_/g,"-");return Object.values(U).indexOf(v)>=0?v:U.UNKNOWN}(w.status);l(new F(E,w.message))}else l(new F(U.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new F(U.UNAVAILABLE,"Connection failed."));break;default:W(9055,{l_:e,streamId:a,h_:c.getLastErrorCode(),P_:c.getLastError()})}}finally{q($t,`RPC '${e}' ${a} completed.`)}});const h=JSON.stringify(r);q($t,`RPC '${e}' ${a} sending request:`,r),c.send(n,"POST",h,i,15)})}T_(e,n,i){const r=c0(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=LN(),o=MN(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,n,i),l.encodeInitMessageHeaders=!0;const h=s.join("");q($t,`Creating RPC '${e}' stream ${r}: ${h}`,l);const d=a.createWebChannel(h,l);this.I_(d);let f=!1,p=!1;const w=new IH({Yo:A=>{p?q($t,`Not sending because RPC '${e}' stream ${r} is closed:`,A):(f||(q($t,`Opening RPC '${e}' stream ${r} transport.`),d.open(),f=!0),q($t,`RPC '${e}' stream ${r} sending:`,A),d.send(A))},Zo:()=>d.close()}),E=(A,T,v)=>{A.listen(T,_=>{try{v(_)}catch(C){setTimeout(()=>{throw C},0)}})};return E(d,vu.EventType.OPEN,()=>{p||(q($t,`RPC '${e}' stream ${r} transport opened.`),w.o_())}),E(d,vu.EventType.CLOSE,()=>{p||(p=!0,q($t,`RPC '${e}' stream ${r} transport closed`),w.a_(),this.E_(d))}),E(d,vu.EventType.ERROR,A=>{p||(p=!0,Wi($t,`RPC '${e}' stream ${r} transport errored. Name:`,A.name,"Message:",A.message),w.a_(new F(U.UNAVAILABLE,"The operation could not be completed")))}),E(d,vu.EventType.MESSAGE,A=>{var T;if(!p){const v=A.data[0];X(!!v,16349);const _=v,C=(_==null?void 0:_.error)||((T=_[0])==null?void 0:T.error);if(C){q($t,`RPC '${e}' stream ${r} received error:`,C);const V=C.status;let O=function(R){const D=gt[R];if(D!==void 0)return zk(D)}(V),S=C.message;O===void 0&&(O=U.INTERNAL,S="Unknown error status: "+V+" with message "+C.message),p=!0,w.a_(new F(O,S)),d.close()}else q($t,`RPC '${e}' stream ${r} received:`,v),w.u_(v)}}),E(o,ON.STAT_EVENT,A=>{A.stat===Bv.PROXY?q($t,`RPC '${e}' stream ${r} detected buffering proxy`):A.stat===Bv.NOPROXY&&q($t,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{w.__()},0),w}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RV(){return typeof window<"u"?window:null}function om(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rd(t){return new N7(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eb{constructor(e,n,i=1e3,r=1.5,s=6e4){this.Mi=e,this.timerId=n,this.d_=i,this.A_=r,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),r=Math.max(0,n-i);r>0&&q("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q1="PersistentStream";class xV{constructor(e,n,i,r,s,a,o,l){this.Mi=e,this.S_=i,this.b_=r,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=o,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new eb(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===U.RESOURCE_EXHAUSTED?(dt(n.toString()),dt("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===U.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.D_===n&&this.G_(i,r)},i=>{e(()=>{const r=new F(U.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(r)})})}G_(e,n){const i=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{i(()=>this.listener.Xo())}),this.stream.t_(()=>{i(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(r=>{i(()=>this.z_(r))}),this.stream.onMessage(r=>{i(()=>++this.F_==1?this.J_(r):this.onNext(r))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return q(q1,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(q(q1,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class xH extends xV{constructor(e,n,i,r,s,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,a),this.serializer=s}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=O7(this.serializer,e),i=function(s){if(!("targetChange"in s))return Z.min();const a=s.targetChange;return a.targetIds&&a.targetIds.length?Z.min():a.readTime?mt(a.readTime):Z.min()}(e);return this.listener.H_(n,i)}Y_(e){const n={};n.database=i0(this.serializer),n.addTarget=function(s,a){let o;const l=a.target;if(o=tp(l)?{documents:Wk(s,l)}:{query:Yk(s,l).ft},o.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){o.resumeToken=qk(s,a.resumeToken);const c=t0(s,a.expectedCount);c!==null&&(o.expectedCount=c)}else if(a.snapshotVersion.compareTo(Z.min())>0){o.readTime=$l(s,a.snapshotVersion.toTimestamp());const c=t0(s,a.expectedCount);c!==null&&(o.expectedCount=c)}return o}(this.serializer,e);const i=L7(this.serializer,e);i&&(n.labels=i),this.q_(n)}Z_(e){const n={};n.database=i0(this.serializer),n.removeTarget=e,this.q_(n)}}class CH extends xV{constructor(e,n,i,r,s,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,a),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return X(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,X(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){X(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=M7(e.writeResults,e.commitTime),i=mt(e.commitTime);return this.listener.na(i,n)}ra(){const e={};e.database=i0(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(i=>jh(this.serializer,i))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PH{}class DH extends PH{constructor(e,n,i,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new F(U.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,i,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Go(e,n0(n,i),r,s,a)).catch(s=>{throw s.name==="FirebaseError"?(s.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new F(U.UNKNOWN,s.toString())})}Ho(e,n,i,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,o])=>this.connection.Ho(e,n0(n,i),r,a,o,s)).catch(a=>{throw a.name==="FirebaseError"?(a.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new F(U.UNKNOWN,a.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class NH{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(dt(n),this.aa=!1):q("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ro="RemoteStore";class kH{constructor(e,n,i,r,s){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo(a=>{i.enqueueAndForget(async()=>{na(this)&&(q(ro,"Restarting streams for network reachability change."),await async function(l){const c=Q(l);c.Ea.add(4),await bc(c),c.Ra.set("Unknown"),c.Ea.delete(4),await xd(c)}(this))})}),this.Ra=new NH(i,r)}}async function xd(t){if(na(t))for(const e of t.da)await e(!0)}async function bc(t){for(const e of t.da)await e(!1)}function gg(t,e){const n=Q(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),ib(n)?nb(n):Ac(n).O_()&&tb(n,e))}function Wl(t,e){const n=Q(t),i=Ac(n);n.Ia.delete(e),i.O_()&&CV(n,e),n.Ia.size===0&&(i.O_()?i.L_():na(n)&&n.Ra.set("Unknown"))}function tb(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Z.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ac(t).Y_(e)}function CV(t,e){t.Va.Ue(e),Ac(t).Z_(e)}function nb(t){t.Va=new x7({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Ac(t).start(),t.Ra.ua()}function ib(t){return na(t)&&!Ac(t).x_()&&t.Ia.size>0}function na(t){return Q(t).Ea.size===0}function PV(t){t.Va=void 0}async function VH(t){t.Ra.set("Online")}async function OH(t){t.Ia.forEach((e,n)=>{tb(t,e)})}async function MH(t,e){PV(t),ib(t)?(t.Ra.ha(e),nb(t)):t.Ra.set("Unknown")}async function LH(t,e,n){if(t.Ra.set("Online"),e instanceof Fk&&e.state===2&&e.cause)try{await async function(r,s){const a=s.cause;for(const o of s.targetIds)r.Ia.has(o)&&(await r.remoteSyncer.rejectListen(o,a),r.Ia.delete(o),r.Va.removeTarget(o))}(t,e)}catch(i){q(ro,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await hp(t,i)}else if(e instanceof sm?t.Va.Ze(e):e instanceof Bk?t.Va.st(e):t.Va.tt(e),!n.isEqual(Z.min()))try{const i=await _V(t.localStore);n.compareTo(i)>=0&&await function(s,a){const o=s.Va.Tt(a);return o.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const h=s.Ia.get(c);h&&s.Ia.set(c,h.withResumeToken(l.resumeToken,a))}}),o.targetMismatches.forEach((l,c)=>{const h=s.Ia.get(l);if(!h)return;s.Ia.set(l,h.withResumeToken(at.EMPTY_BYTE_STRING,h.snapshotVersion)),CV(s,l);const d=new dr(h.target,l,c,h.sequenceNumber);tb(s,d)}),s.remoteSyncer.applyRemoteEvent(o)}(t,n)}catch(i){q(ro,"Failed to raise snapshot:",i),await hp(t,i)}}async function hp(t,e,n){if(!ea(e))throw e;t.Ea.add(1),await bc(t),t.Ra.set("Offline"),n||(n=()=>_V(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{q(ro,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await xd(t)})}function DV(t,e){return e().catch(n=>hp(t,n,e))}async function Ec(t){const e=Q(t),n=qs(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Cs;for(;UH(e);)try{const r=await TH(e.localStore,i);if(r===null){e.Ta.length===0&&n.L_();break}i=r.batchId,zH(e,r)}catch(r){await hp(e,r)}NV(e)&&kV(e)}function UH(t){return na(t)&&t.Ta.length<10}function zH(t,e){t.Ta.push(e);const n=qs(t);n.O_()&&n.X_&&n.ea(e.mutations)}function NV(t){return na(t)&&!qs(t).x_()&&t.Ta.length>0}function kV(t){qs(t).start()}async function jH(t){qs(t).ra()}async function BH(t){const e=qs(t);for(const n of t.Ta)e.ea(n.mutations)}async function FH(t,e,n){const i=t.Ta.shift(),r=jw.from(i,e,n);await DV(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),await Ec(t)}async function qH(t,e){e&&qs(t).X_&&await async function(i,r){if(function(a){return Uk(a)&&a!==U.ABORTED}(r.code)){const s=i.Ta.shift();qs(i).B_(),await DV(i,()=>i.remoteSyncer.rejectFailedWrite(s.batchId,r)),await Ec(i)}}(t,e),NV(t)&&kV(t)}async function H1(t,e){const n=Q(t);n.asyncQueue.verifyOperationInProgress(),q(ro,"RemoteStore received new credentials");const i=na(n);n.Ea.add(3),await bc(n),i&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await xd(n)}async function u0(t,e){const n=Q(t);e?(n.Ea.delete(2),await xd(n)):e||(n.Ea.add(2),await bc(n),n.Ra.set("Unknown"))}function Ac(t){return t.ma||(t.ma=function(n,i,r){const s=Q(n);return s.sa(),new xH(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(t.datastore,t.asyncQueue,{Xo:VH.bind(null,t),t_:OH.bind(null,t),r_:MH.bind(null,t),H_:LH.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),ib(t)?nb(t):t.Ra.set("Unknown")):(await t.ma.stop(),PV(t))})),t.ma}function qs(t){return t.fa||(t.fa=function(n,i,r){const s=Q(n);return s.sa(),new CH(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:jH.bind(null,t),r_:qH.bind(null,t),ta:BH.bind(null,t),na:FH.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await Ec(t)):(await t.fa.stop(),t.Ta.length>0&&(q(ro,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rb{constructor(e,n,i,r,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new qt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,r,s){const a=Date.now()+i,o=new rb(e,n,a,r,s);return o.start(i),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new F(U.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Sc(t,e){if(dt("AsyncQueue",`${e}: ${t}`),ea(t))return new F(U.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _l{static emptySet(e){return new _l(e.comparator)}constructor(e){this.comparator=e?(n,i)=>e(n,i)||$.comparator(n.key,i.key):(n,i)=>$.comparator(n.key,i.key),this.keyedMap=Tu(),this.sortedSet=new Le(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof _l)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new _l;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G1{constructor(){this.ga=new Le($.comparator)}track(e){const n=e.doc.key,i=this.ga.get(n);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(n,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(n):e.type===1&&i.type===2?this.ga=this.ga.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):W(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,i)=>{e.push(i)}),e}}class Yl{constructor(e,n,i,r,s,a,o,l,c){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=o,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,i,r,s){const a=[];return n.forEach(o=>{a.push({type:0,doc:o})}),new Yl(e,n,_l.emptySet(n),a,i,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&bd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HH{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class GH{constructor(){this.queries=$1(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,i){const r=Q(n),s=r.queries;r.queries=$1(),s.forEach((a,o)=>{for(const l of o.Sa)l.onError(i)})})(this,new F(U.ABORTED,"Firestore shutting down"))}}function $1(){return new Ur(t=>Ak(t),bd)}async function sb(t,e){const n=Q(t);let i=3;const r=e.query;let s=n.queries.get(r);s?!s.ba()&&e.Da()&&(i=2):(s=new HH,i=e.Da()?0:1);try{switch(i){case 0:s.wa=await n.onListen(r,!0);break;case 1:s.wa=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(a){const o=Sc(a,`Initialization of query '${Uo(e.query)}' failed`);return void e.onError(o)}n.queries.set(r,s),s.Sa.push(e),e.va(n.onlineState),s.wa&&e.Fa(s.wa)&&ob(n)}async function ab(t,e){const n=Q(t),i=e.query;let r=3;const s=n.queries.get(i);if(s){const a=s.Sa.indexOf(e);a>=0&&(s.Sa.splice(a,1),s.Sa.length===0?r=e.Da()?0:1:!s.ba()&&e.Da()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function $H(t,e){const n=Q(t);let i=!1;for(const r of e){const s=r.query,a=n.queries.get(s);if(a){for(const o of a.Sa)o.Fa(r)&&(i=!0);a.wa=r}}i&&ob(n)}function KH(t,e,n){const i=Q(t),r=i.queries.get(e);if(r)for(const s of r.Sa)s.onError(n);i.queries.delete(e)}function ob(t){t.Ca.forEach(e=>{e.next()})}var h0,K1;(K1=h0||(h0={})).Ma="default",K1.Cache="cache";class lb{constructor(e,n,i){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)r.type!==3&&i.push(r);e=new Yl(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const i=n!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Yl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==h0.Cache}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QH{constructor(e,n){this.Qa=e,this.byteLength=n}$a(){return"metadata"in this.Qa}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q1{constructor(e){this.serializer=e}$s(e){return qi(this.serializer,e)}Us(e){return e.metadata.exists?Qk(this.serializer,e.document,!1):Be.newNoDocument(this.$s(e.metadata.name),this.Ks(e.metadata.readTime))}Ks(e){return mt(e)}}class WH{constructor(e,n){this.Ua=e,this.serializer=n,this.Ka=[],this.Wa=[],this.collectionGroups=new Set,this.progress=VV(e)}get queries(){return this.Ka}get documents(){return this.Wa}Ga(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.Qa.namedQuery)this.Ka.push(e.Qa.namedQuery);else if(e.Qa.documentMetadata){this.Wa.push({metadata:e.Qa.documentMetadata}),e.Qa.documentMetadata.exists||++n;const i=pe.fromString(e.Qa.documentMetadata.name);this.collectionGroups.add(i.get(i.length-2))}else e.Qa.document&&(this.Wa[this.Wa.length-1].document=e.Qa.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,{...this.progress}):null}za(e){const n=new Map,i=new Q1(this.serializer);for(const r of e)if(r.metadata.queries){const s=i.$s(r.metadata.name);for(const a of r.metadata.queries){const o=(n.get(a)||ce()).add(s);n.set(a,o)}}return n}async ja(e){const n=await wH(e,new Q1(this.serializer),this.Wa,this.Ua.id),i=this.za(this.documents);for(const r of this.Ka)await bH(e,r,i.get(r.name));return this.progress.taskState="Success",{progress:this.progress,Ja:this.collectionGroups,Ha:n}}}function VV(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OV{constructor(e){this.key=e}}class MV{constructor(e){this.key=e}}class LV{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ce(),this.mutatedKeys=ce(),this.eu=Ik(e),this.tu=new _l(this.eu)}get nu(){return this.Ya}ru(e,n){const i=n?n.iu:new G1,r=n?n.tu:this.tu;let s=n?n.mutatedKeys:this.mutatedKeys,a=r,o=!1;const l=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,c=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((h,d)=>{const f=r.get(h),p=Ed(this.query,d)?d:null,w=!!f&&this.mutatedKeys.has(f.key),E=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let A=!1;f&&p?f.data.isEqual(p.data)?w!==E&&(i.track({type:3,doc:p}),A=!0):this.su(f,p)||(i.track({type:2,doc:p}),A=!0,(l&&this.eu(p,l)>0||c&&this.eu(p,c)<0)&&(o=!0)):!f&&p?(i.track({type:0,doc:p}),A=!0):f&&!p&&(i.track({type:1,doc:f}),A=!0,(l||c)&&(o=!0)),A&&(p?(a=a.add(p),s=E?s.add(h):s.delete(h)):(a=a.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const h=this.query.limitType==="F"?a.last():a.first();a=a.delete(h.key),s=s.delete(h.key),i.track({type:1,doc:h})}return{tu:a,iu:i,Cs:o,mutatedKeys:s}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,r){const s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const a=e.iu.ya();a.sort((h,d)=>function(p,w){const E=A=>{switch(A){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return W(20277,{Rt:A})}};return E(p)-E(w)}(h.type,d.type)||this.eu(h.doc,d.doc)),this.ou(i),r=r??!1;const o=n&&!r?this._u():[],l=this.Xa.size===0&&this.current&&!r?1:0,c=l!==this.Za;return this.Za=l,a.length!==0||c?{snapshot:new Yl(this.query,e.tu,s,a,e.mutatedKeys,l===0,c,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:o}:{au:o}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new G1,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=ce(),this.tu.forEach(i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))});const n=[];return e.forEach(i=>{this.Xa.has(i)||n.push(new MV(i))}),this.Xa.forEach(i=>{e.has(i)||n.push(new OV(i))}),n}cu(e){this.Ya=e.Qs,this.Xa=ce();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Yl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const ia="SyncEngine";class YH{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class XH{constructor(e){this.key=e,this.hu=!1}}class JH{constructor(e,n,i,r,s,a){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new Ur(o=>Ak(o),bd),this.Iu=new Map,this.Eu=new Set,this.du=new Le($.comparator),this.Au=new Map,this.Ru=new Kw,this.Vu={},this.mu=new Map,this.fu=io.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function ZH(t,e,n=!0){const i=yg(t);let r;const s=i.Tu.get(e);return s?(i.sharedClientState.addLocalQueryTarget(s.targetId),r=s.view.lu()):r=await UV(i,e,n,!0),r}async function eG(t,e){const n=yg(t);await UV(n,e,!0,!1)}async function UV(t,e,n,i){const r=await Kl(t.localStore,hn(e)),s=r.targetId,a=t.sharedClientState.addLocalQueryTarget(s,n);let o;return i&&(o=await cb(t,e,s,a==="current",r.resumeToken)),t.isPrimaryClient&&n&&gg(t.remoteStore,r),o}async function cb(t,e,n,i,r){t.pu=(d,f,p)=>async function(E,A,T,v){let _=A.view.ru(T);_.Cs&&(_=await lp(E.localStore,A.query,!1).then(({documents:S})=>A.view.ru(S,_)));const C=v&&v.targetChanges.get(A.targetId),V=v&&v.targetMismatches.get(A.targetId)!=null,O=A.view.applyChanges(_,E.isPrimaryClient,C,V);return d0(E,A.targetId,O.au),O.snapshot}(t,d,f,p);const s=await lp(t.localStore,e,!0),a=new LV(e,s.Qs),o=a.ru(s.documents),l=Id.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",r),c=a.applyChanges(o,t.isPrimaryClient,l);d0(t,n,c.au);const h=new YH(e,n,a);return t.Tu.set(e,h),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),c.snapshot}async function tG(t,e,n){const i=Q(t),r=i.Tu.get(e),s=i.Iu.get(r.targetId);if(s.length>1)return i.Iu.set(r.targetId,s.filter(a=>!bd(a,e))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await Ql(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),n&&Wl(i.remoteStore,r.targetId),Xl(i,r.targetId)}).catch(Zs)):(Xl(i,r.targetId),await Ql(i.localStore,r.targetId,!0))}async function nG(t,e){const n=Q(t),i=n.Tu.get(e),r=n.Iu.get(i.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),Wl(n.remoteStore,i.targetId))}async function iG(t,e,n){const i=fb(t);try{const r=await function(a,o){const l=Q(a),c=Ae.now(),h=o.reduce((p,w)=>p.add(w.key),ce());let d,f;return l.persistence.runTransaction("Locally write mutations","readwrite",p=>{let w=wn(),E=ce();return l.Ns.getEntries(p,h).next(A=>{w=A,w.forEach((T,v)=>{v.isValidDocument()||(E=E.add(T))})}).next(()=>l.localDocuments.getOverlayedDocuments(p,w)).next(A=>{d=A;const T=[];for(const v of o){const _=S7(v,d.get(v.key).overlayedDocument);_!=null&&T.push(new zr(v.key,_,pk(_.value.mapValue),Ye.exists(!0)))}return l.mutationQueue.addMutationBatch(p,c,T,o)}).next(A=>{f=A;const T=A.applyToLocalDocumentSet(d,E);return l.documentOverlayCache.saveOverlays(p,A.batchId,T)})}).then(()=>({batchId:f.batchId,changes:xk(d)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(a,o,l){let c=a.Vu[a.currentUser.toKey()];c||(c=new Le(se)),c=c.insert(o,l),a.Vu[a.currentUser.toKey()]=c}(i,r.batchId,n),await jr(i,r.changes),await Ec(i.remoteStore)}catch(r){const s=Sc(r,"Failed to persist write");n.reject(s)}}async function zV(t,e){const n=Q(t);try{const i=await vH(n.localStore,e);e.targetChanges.forEach((r,s)=>{const a=n.Au.get(s);a&&(X(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?a.hu=!0:r.modifiedDocuments.size>0?X(a.hu,14607):r.removedDocuments.size>0&&(X(a.hu,42227),a.hu=!1))}),await jr(n,i,e)}catch(i){await Zs(i)}}function W1(t,e,n){const i=Q(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const r=[];i.Tu.forEach((s,a)=>{const o=a.view.va(e);o.snapshot&&r.push(o.snapshot)}),function(a,o){const l=Q(a);l.onlineState=o;let c=!1;l.queries.forEach((h,d)=>{for(const f of d.Sa)f.va(o)&&(c=!0)}),c&&ob(l)}(i.eventManager,e),r.length&&i.Pu.H_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function rG(t,e,n){const i=Q(t);i.sharedClientState.updateQueryState(e,"rejected",n);const r=i.Au.get(e),s=r&&r.key;if(s){let a=new Le($.comparator);a=a.insert(s,Be.newNoDocument(s,Z.min()));const o=ce().add(s),l=new Sd(Z.min(),new Map,new Le(se),a,o);await zV(i,l),i.du=i.du.remove(s),i.Au.delete(e),db(i)}else await Ql(i.localStore,e,!1).then(()=>Xl(i,e,n)).catch(Zs)}async function sG(t,e){const n=Q(t),i=e.batch.batchId;try{const r=await _H(n.localStore,e);hb(n,i,null),ub(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await jr(n,r)}catch(r){await Zs(r)}}async function aG(t,e,n){const i=Q(t);try{const r=await function(a,o){const l=Q(a);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let h;return l.mutationQueue.lookupMutationBatch(c,o).next(d=>(X(d!==null,37113),h=d.keys(),l.mutationQueue.removeMutationBatch(c,d))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,h,o)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,h)).next(()=>l.localDocuments.getDocuments(c,h))})}(i.localStore,e);hb(i,e,n),ub(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await jr(i,r)}catch(r){await Zs(r)}}async function oG(t,e){const n=Q(t);na(n.remoteStore)||q(ia,"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const i=await function(a){const o=Q(a);return o.persistence.runTransaction("Get highest unacknowledged batch id","readonly",l=>o.mutationQueue.getHighestUnacknowledgedBatchId(l))}(n.localStore);if(i===Cs)return void e.resolve();const r=n.mu.get(i)||[];r.push(e),n.mu.set(i,r)}catch(i){const r=Sc(i,"Initialization of waitForPendingWrites() operation failed");e.reject(r)}}function ub(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function hb(t,e,n){const i=Q(t);let r=i.Vu[i.currentUser.toKey()];if(r){const s=r.get(e);s&&(n?s.reject(n):s.resolve(),r=r.remove(e)),i.Vu[i.currentUser.toKey()]=r}}function Xl(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Iu.get(e))t.Tu.delete(i),n&&t.Pu.yu(i,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(i=>{t.Ru.containsKey(i)||jV(t,i)})}function jV(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Wl(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),db(t))}function d0(t,e,n){for(const i of n)i instanceof OV?(t.Ru.addReference(i.key,e),lG(t,i)):i instanceof MV?(q(ia,"Document no longer in limbo: "+i.key),t.Ru.removeReference(i.key,e),t.Ru.containsKey(i.key)||jV(t,i.key)):W(19791,{wu:i})}function lG(t,e){const n=e.key,i=n.path.canonicalString();t.du.get(n)||t.Eu.has(i)||(q(ia,"New document in limbo: "+n),t.Eu.add(i),db(t))}function db(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new $(pe.fromString(e)),i=t.fu.next();t.Au.set(i,new XH(n)),t.du=t.du.insert(n,i),gg(t.remoteStore,new dr(hn(vc(n.path)),i,"TargetPurposeLimboResolution",vn.ce))}}async function jr(t,e,n){const i=Q(t),r=[],s=[],a=[];i.Tu.isEmpty()||(i.Tu.forEach((o,l)=>{a.push(i.pu(l,e,n).then(c=>{var h;if((c||n)&&i.isPrimaryClient){const d=c?!c.fromCache:(h=n==null?void 0:n.targetChanges.get(l.targetId))==null?void 0:h.current;i.sharedClientState.updateQueryState(l.targetId,d?"current":"not-current")}if(c){r.push(c);const d=Xw.As(l.targetId,c);s.push(d)}}))}),await Promise.all(a),i.Pu.H_(r),await async function(l,c){const h=Q(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>M.forEach(c,f=>M.forEach(f.Es,p=>h.persistence.referenceDelegate.addReference(d,f.targetId,p)).next(()=>M.forEach(f.ds,p=>h.persistence.referenceDelegate.removeReference(d,f.targetId,p)))))}catch(d){if(!ea(d))throw d;q(Jw,"Failed to update sequence numbers: "+d)}for(const d of c){const f=d.targetId;if(!d.fromCache){const p=h.Ms.get(f),w=p.snapshotVersion,E=p.withLastLimboFreeSnapshotVersion(w);h.Ms=h.Ms.insert(f,E)}}}(i.localStore,s))}async function cG(t,e){const n=Q(t);if(!n.currentUser.isEqual(e)){q(ia,"User change. New user:",e.toKey());const i=await yV(n.localStore,e);n.currentUser=e,function(s,a){s.mu.forEach(o=>{o.forEach(l=>{l.reject(new F(U.CANCELLED,a))})}),s.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await jr(n,i.Ls)}}function uG(t,e){const n=Q(t),i=n.Au.get(e);if(i&&i.hu)return ce().add(i.key);{let r=ce();const s=n.Iu.get(e);if(!s)return r;for(const a of s){const o=n.Tu.get(a);r=r.unionWith(o.view.nu)}return r}}async function hG(t,e){const n=Q(t),i=await lp(n.localStore,e.query,!0),r=e.view.cu(i);return n.isPrimaryClient&&d0(n,e.targetId,r.au),r}async function dG(t,e){const n=Q(t);return wV(n.localStore,e).then(i=>jr(n,i))}async function fG(t,e,n,i){const r=Q(t),s=await function(o,l){const c=Q(o),h=Q(c.mutationQueue);return c.persistence.runTransaction("Lookup mutation documents","readonly",d=>h.er(d,l).next(f=>f?c.localDocuments.getDocuments(d,f):M.resolve(null)))}(r.localStore,e);s!==null?(n==="pending"?await Ec(r.remoteStore):n==="acknowledged"||n==="rejected"?(hb(r,e,i||null),ub(r,e),function(o,l){Q(Q(o).mutationQueue).ir(l)}(r.localStore,e)):W(6720,"Unknown batchState",{Su:n}),await jr(r,s)):q(ia,"Cannot apply mutation batch with id: "+e)}async function mG(t,e){const n=Q(t);if(yg(n),fb(n),e===!0&&n.gu!==!0){const i=n.sharedClientState.getAllActiveQueryTargets(),r=await Y1(n,i.toArray());n.gu=!0,await u0(n.remoteStore,!0);for(const s of r)gg(n.remoteStore,s)}else if(e===!1&&n.gu!==!1){const i=[];let r=Promise.resolve();n.Iu.forEach((s,a)=>{n.sharedClientState.isLocalQueryTarget(a)?i.push(a):r=r.then(()=>(Xl(n,a),Ql(n.localStore,a,!0))),Wl(n.remoteStore,a)}),await r,await Y1(n,i),function(a){const o=Q(a);o.Au.forEach((l,c)=>{Wl(o.remoteStore,c)}),o.Ru.Jr(),o.Au=new Map,o.du=new Le($.comparator)}(n),n.gu=!1,await u0(n.remoteStore,!1)}}async function Y1(t,e,n){const i=Q(t),r=[],s=[];for(const a of e){let o;const l=i.Iu.get(a);if(l&&l.length!==0){o=await Kl(i.localStore,hn(l[0]));for(const c of l){const h=i.Tu.get(c),d=await hG(i,h);d.snapshot&&s.push(d.snapshot)}}else{const c=await TV(i.localStore,a);o=await Kl(i.localStore,c),await cb(i,BV(c),a,!1,o.resumeToken)}r.push(o)}return i.Pu.H_(s),r}function BV(t){return Ek(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function pG(t){return function(n){return Q(Q(n).persistence).Ts()}(Q(t).localStore)}async function gG(t,e,n,i){const r=Q(t);if(r.gu)return void q(ia,"Ignoring unexpected query state notification.");const s=r.Iu.get(e);if(s&&s.length>0)switch(n){case"current":case"not-current":{const a=await wV(r.localStore,Sk(s[0])),o=Sd.createSynthesizedRemoteEventForCurrentChange(e,n==="current",at.EMPTY_BYTE_STRING);await jr(r,a,o);break}case"rejected":await Ql(r.localStore,e,!0),Xl(r,e,i);break;default:W(64155,n)}}async function yG(t,e,n){const i=yg(t);if(i.gu){for(const r of e){if(i.Iu.has(r)&&i.sharedClientState.isActiveQueryTarget(r)){q(ia,"Adding an already active target "+r);continue}const s=await TV(i.localStore,r),a=await Kl(i.localStore,s);await cb(i,BV(s),a.targetId,!1,a.resumeToken),gg(i.remoteStore,a)}for(const r of n)i.Iu.has(r)&&await Ql(i.localStore,r,!1).then(()=>{Wl(i.remoteStore,r),Xl(i,r)}).catch(Zs)}}function yg(t){const e=Q(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=zV.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=uG.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=rG.bind(null,e),e.Pu.H_=$H.bind(null,e.eventManager),e.Pu.yu=KH.bind(null,e.eventManager),e}function fb(t){const e=Q(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=sG.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=aG.bind(null,e),e}function _G(t,e,n){const i=Q(t);(async function(s,a,o){try{const l=await a.getMetadata();if(await function(p,w){const E=Q(p),A=mt(w.createTime);return E.persistence.runTransaction("hasNewerBundle","readonly",T=>E.Ii.getBundleMetadata(T,w.id)).then(T=>!!T&&T.createTime.compareTo(A)>=0)}(s.localStore,l))return await a.close(),o._completeWith(function(p){return{taskState:"Success",documentsLoaded:p.totalDocuments,bytesLoaded:p.totalBytes,totalDocuments:p.totalDocuments,totalBytes:p.totalBytes}}(l)),Promise.resolve(new Set);o._updateProgress(VV(l));const c=new WH(l,a.serializer);let h=await a.bu();for(;h;){const f=await c.Ga(h);f&&o._updateProgress(f),h=await a.bu()}const d=await c.ja(s.localStore);return await jr(s,d.Ha,void 0),await function(p,w){const E=Q(p);return E.persistence.runTransaction("Save bundle","readwrite",A=>E.Ii.saveBundleMetadata(A,w))}(s.localStore,l),o._completeWith(d.progress),Promise.resolve(d.Ja)}catch(l){return Wi(ia,`Loading bundle failed with ${l}`),o._failWith(l),Promise.resolve(new Set)}})(i,e,n).then(r=>{i.sharedClientState.notifyBundleLoaded(r)})}class Bh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Rd(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return gV(this.persistence,new pV,e.initialUser,this.serializer)}Cu(e){return new Qw(pg.mi,this.serializer)}Du(e){return new IV}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Bh.provider={build:()=>new Bh};class vG extends Bh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){X(this.persistence.referenceDelegate instanceof op,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new cV(i,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Qt.withCacheSize(this.cacheSizeBytes):Qt.DEFAULT;return new Qw(i=>op.mi(i,n),this.serializer)}}class FV extends Bh{constructor(e,n,i){super(),this.xu=e,this.cacheSizeBytes=n,this.forceOwnership=i,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await fb(this.xu.syncEngine),await Ec(this.xu.remoteStore),await this.persistence.Ji(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}vu(e){return gV(this.persistence,new pV,e.initialUser,this.serializer)}Fu(e,n){const i=this.persistence.referenceDelegate.garbageCollector;return new cV(i,e.asyncQueue,n)}Mu(e,n){const i=new x8(n,this.persistence);return new R8(e.asyncQueue,i)}Cu(e){const n=Yw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),i=this.cacheSizeBytes!==void 0?Qt.withCacheSize(this.cacheSizeBytes):Qt.DEFAULT;return new Ww(this.synchronizeTabs,n,e.clientId,i,e.asyncQueue,RV(),om(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new IV}}class TG extends FV{constructor(e,n){super(e,n,!1),this.xu=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.xu.syncEngine;this.sharedClientState instanceof u_&&(this.sharedClientState.syncEngine={Co:fG.bind(null,n),vo:gG.bind(null,n),Fo:yG.bind(null,n),Ts:pG.bind(null,n),Do:dG.bind(null,n)},await this.sharedClientState.start()),await this.persistence.Ji(async i=>{await mG(this.xu.syncEngine,i),this.gcScheduler&&(i&&!this.gcScheduler.started?this.gcScheduler.start():i||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(i&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():i||this.indexBackfillerScheduler.stop())})}Du(e){const n=RV();if(!u_.v(n))throw new F(U.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const i=Yw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new u_(n,e.asyncQueue,i,e.clientId,e.initialUser)}}class Fh{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>W1(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=cG.bind(null,this.syncEngine),await u0(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new GH}()}createDatastore(e){const n=Rd(e.databaseInfo.databaseId),i=function(s){return new RH(s)}(e.databaseInfo);return function(s,a,o,l){return new DH(s,a,o,l)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,r,s,a,o){return new kH(i,r,s,a,o)}(this.localStore,this.datastore,e.asyncQueue,n=>W1(this.syncEngine,n,0),function(){return F1.v()?new F1:new EH}())}createSyncEngine(e,n){return function(r,s,a,o,l,c,h){const d=new JH(r,s,a,o,l,c);return h&&(d.gu=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(r){const s=Q(r);q(ro,"RemoteStore shutting down."),s.Ea.add(5),await bc(s),s.Aa.shutdown(),s.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Fh.provider={build:()=>new Fh};function X1(t,e=10240){let n=0;return{async read(){if(n<t.byteLength){const i={value:t.slice(n,n+e),done:!1};return n+=e,i}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _g{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):dt("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wG{constructor(e,n){this.Bu=e,this.serializer=n,this.metadata=new qt,this.buffer=new Uint8Array,this.Lu=function(){return new TextDecoder("utf-8")}(),this.ku().then(i=>{i&&i.$a()?this.metadata.resolve(i.Qa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(i==null?void 0:i.Qa)}`))},i=>this.metadata.reject(i))}close(){return this.Bu.cancel()}async getMetadata(){return this.metadata.promise}async bu(){return await this.getMetadata(),this.ku()}async ku(){const e=await this.qu();if(e===null)return null;const n=this.Lu.decode(e),i=Number(n);isNaN(i)&&this.Qu(`length string (${n}) is not valid number`);const r=await this.$u(i);return new QH(JSON.parse(r),e.length+i)}Uu(){return this.buffer.findIndex(e=>e===123)}async qu(){for(;this.Uu()<0&&!await this.Ku(););if(this.buffer.length===0)return null;const e=this.Uu();e<0&&this.Qu("Reached the end of bundle when a length string is expected.");const n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n}async $u(e){for(;this.buffer.length<e;)await this.Ku()&&this.Qu("Reached the end of bundle when more is expected.");const n=this.Lu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n}Qu(e){throw this.Bu.cancel(),new Error(`Invalid bundle format: ${e}`)}async Ku(){const e=await this.Bu.read();if(!e.done){const n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bG{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new F(U.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await async function(r,s){const a=Q(r),o={documents:s.map(d=>zh(a.serializer,d))},l=await a.Ho("BatchGetDocuments",a.serializer.databaseId,pe.emptyPath(),o,s.length),c=new Map;l.forEach(d=>{const f=V7(a.serializer,d);c.set(f.key.toString(),f)});const h=[];return s.forEach(d=>{const f=c.get(d.toString());X(!!f,55234,{key:d}),h.push(f)}),h}(this.datastore,e);return n.forEach(i=>this.recordVersion(i)),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(i){this.lastTransactionError=i}this.writtenDocs.add(e.toString())}delete(e){this.write(new wc(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,i)=>{const r=$.fromPath(i);this.mutations.push(new Uw(r,this.precondition(r)))}),await async function(i,r){const s=Q(i),a={writes:r.map(o=>jh(s.serializer,o))};await s.Go("Commit",s.serializer.databaseId,pe.emptyPath(),a)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw W(50498,{Gu:e.constructor.name});n=Z.min()}const i=this.readVersions.get(e.key.toString());if(i){if(!n.isEqual(i))throw new F(U.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(Z.min())?Ye.exists(!1):Ye.updateTime(n):Ye.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(Z.min()))throw new F(U.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ye.updateTime(n)}return Ye.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EG{constructor(e,n,i,r,s){this.asyncQueue=e,this.datastore=n,this.options=i,this.updateFunction=r,this.deferred=s,this.zu=i.maxAttempts,this.M_=new eb(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_(async()=>{const e=new bG(this.datastore),n=this.Hu(e);n&&n.then(i=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(i)}).catch(r=>{this.Yu(r)}))}).catch(i=>{this.Yu(i)})})}Hu(e){try{const n=this.updateFunction(e);return!vd(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Yu(e){this.zu>0&&this.Zu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget(()=>(this.Ju(),Promise.resolve()))):this.deferred.reject(e)}Zu(e){if((e==null?void 0:e.name)==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!Uk(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hs="FirestoreClient";class AG{constructor(e,n,i,r,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=Dt.UNAUTHENTICATED,this.clientId=Aw.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(i,async a=>{q(Hs,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(i,a=>(q(Hs,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new qt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=Sc(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function d_(t,e){t.asyncQueue.verifyOperationInProgress(),q(Hs,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(async r=>{i.isEqual(r)||(await yV(e.localStore,r),i=r)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function J1(t,e){t.asyncQueue.verifyOperationInProgress();const n=await mb(t);q(Hs,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(i=>H1(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,r)=>H1(e.remoteStore,r)),t._onlineComponents=e}async function mb(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){q(Hs,"Using user provided OfflineComponentProvider");try{await d_(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(r){return r.name==="FirebaseError"?r.code===U.FAILED_PRECONDITION||r.code===U.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(n))throw n;Wi("Error using user provided cache. Falling back to memory cache: "+n),await d_(t,new Bh)}}else q(Hs,"Using default OfflineComponentProvider"),await d_(t,new vG(void 0));return t._offlineComponents}async function vg(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(q(Hs,"Using user provided OnlineComponentProvider"),await J1(t,t._uninitializedComponentsProvider._online)):(q(Hs,"Using default OnlineComponentProvider"),await J1(t,new Fh))),t._onlineComponents}function qV(t){return mb(t).then(e=>e.persistence)}function pb(t){return mb(t).then(e=>e.localStore)}function HV(t){return vg(t).then(e=>e.remoteStore)}function gb(t){return vg(t).then(e=>e.syncEngine)}function SG(t){return vg(t).then(e=>e.datastore)}async function Jl(t){const e=await vg(t),n=e.eventManager;return n.onListen=ZH.bind(null,e.syncEngine),n.onUnlisten=tG.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=eG.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=nG.bind(null,e.syncEngine),n}function IG(t){return t.asyncQueue.enqueue(async()=>{const e=await qV(t),n=await HV(t);return e.setNetworkEnabled(!0),function(r){const s=Q(r);return s.Ea.delete(0),xd(s)}(n)})}function RG(t){return t.asyncQueue.enqueue(async()=>{const e=await qV(t),n=await HV(t);return e.setNetworkEnabled(!1),async function(r){const s=Q(r);s.Ea.add(0),await bc(s),s.Ra.set("Offline")}(n)})}function xG(t,e){const n=new qt;return t.asyncQueue.enqueueAndForget(async()=>async function(r,s,a){try{const o=await function(c,h){const d=Q(c);return d.persistence.runTransaction("read document","readonly",f=>d.localDocuments.getDocument(f,h))}(r,s);o.isFoundDocument()?a.resolve(o):o.isNoDocument()?a.resolve(null):a.reject(new F(U.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(o){const l=Sc(o,`Failed to get document '${s} from cache`);a.reject(l)}}(await pb(t),e,n)),n.promise}function GV(t,e,n={}){const i=new qt;return t.asyncQueue.enqueueAndForget(async()=>function(s,a,o,l,c){const h=new _g({next:f=>{h.Nu(),a.enqueueAndForget(()=>ab(s,d));const p=f.docs.has(o);!p&&f.fromCache?c.reject(new F(U.UNAVAILABLE,"Failed to get document because the client is offline.")):p&&f.fromCache&&l&&l.source==="server"?c.reject(new F(U.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(f)},error:f=>c.reject(f)}),d=new lb(vc(o.path),h,{includeMetadataChanges:!0,qa:!0});return sb(s,d)}(await Jl(t),t.asyncQueue,e,n,i)),i.promise}function CG(t,e){const n=new qt;return t.asyncQueue.enqueueAndForget(async()=>async function(r,s,a){try{const o=await lp(r,s,!0),l=new LV(s,o.Qs),c=l.ru(o.documents),h=l.applyChanges(c,!1);a.resolve(h.snapshot)}catch(o){const l=Sc(o,`Failed to execute query '${s} against cache`);a.reject(l)}}(await pb(t),e,n)),n.promise}function $V(t,e,n={}){const i=new qt;return t.asyncQueue.enqueueAndForget(async()=>function(s,a,o,l,c){const h=new _g({next:f=>{h.Nu(),a.enqueueAndForget(()=>ab(s,d)),f.fromCache&&l.source==="server"?c.reject(new F(U.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(f)},error:f=>c.reject(f)}),d=new lb(o,h,{includeMetadataChanges:!0,qa:!0});return sb(s,d)}(await Jl(t),t.asyncQueue,e,n,i)),i.promise}function PG(t,e){const n=new _g(e);return t.asyncQueue.enqueueAndForget(async()=>function(r,s){Q(r).Ca.add(s),s.next()}(await Jl(t),n)),()=>{n.Nu(),t.asyncQueue.enqueueAndForget(async()=>function(r,s){Q(r).Ca.delete(s)}(await Jl(t),n))}}function DG(t,e,n,i){const r=function(a,o){let l;return l=typeof a=="string"?jk().encode(a):a,function(h,d){return new wG(h,d)}(function(h,d){if(h instanceof Uint8Array)return X1(h,d);if(h instanceof ArrayBuffer)return X1(new Uint8Array(h),d);if(h instanceof ReadableStream)return h.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(l),o)}(n,Rd(e));t.asyncQueue.enqueueAndForget(async()=>{_G(await gb(t),r,i)})}function NG(t,e){return t.asyncQueue.enqueue(async()=>function(i,r){const s=Q(i);return s.persistence.runTransaction("Get named query","readonly",a=>s.Ii.getNamedQuery(a,r))}(await pb(t),e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KV(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z1=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QV="firestore.googleapis.com",eR=!0;class tR{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new F(U.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=QV,this.ssl=eR}else this.host=e.host,this.ssl=e.ssl??eR;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=sV;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Z7)throw new F(U.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}BN("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=KV(e.experimentalLongPollingOptions??{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new F(U.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new F(U.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new F(U.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Cd{constructor(e,n,i,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new tR({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new F(U.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new F(U.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new tR(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new p8;switch(i.type){case"firstParty":return new v8(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new F(U.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=Z1.get(n);i&&(q("ComponentProvider","Removing Datastore"),Z1.delete(n),i.terminate())}(this),Promise.resolve()}}function kG(t,e,n,i={}){var c;t=we(t,Cd);const r=Xs(e),s=t._getSettings(),a={...s,emulatorOptions:t._getEmulatorOptions()},o=`${e}:${n}`;r&&(WT(`https://${o}`),YT("Firestore",!0)),s.host!==QV&&s.host!==o&&Wi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l={...s,host:o,ssl:r,emulatorOptions:i};if(!Os(l,a)&&(t._setSettings(l),i.mockUserToken)){let h,d;if(typeof i.mockUserToken=="string")h=i.mockUserToken,d=Dt.MOCK_USER;else{h=m2(i.mockUserToken,(c=t._app)==null?void 0:c.options.projectId);const f=i.mockUserToken.sub||i.mockUserToken.user_id;if(!f)throw new F(U.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new Dt(f)}t._authCredentials=new g8(new zN(h,d))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dn=class WV{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new WV(this.firestore,e,this._query)}},Me=class Eu{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ps(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Eu(this.firestore,e,this._key)}toJSON(){return{type:Eu._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,i){if(_d(n,Eu._jsonSchema))return new Eu(e,i||null,new $(pe.fromString(n.referencePath)))}};Me._jsonSchemaVersion="firestore/documentReference/1.0",Me._jsonSchema={type:bt("string",Me._jsonSchemaVersion),referencePath:bt("string")};let Ps=class YV extends dn{constructor(e,n,i){super(e,n,vc(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Me(this.firestore,null,new $(e))}withConverter(e){return new YV(this.firestore,e,this._path)}};function XV(t,e,...n){if(t=J(t),Sw("collection","path",e),t instanceof Cd){const i=pe.fromString(e,...n);return qI(i),new Ps(t,null,i)}{if(!(t instanceof Me||t instanceof Ps))throw new F(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(pe.fromString(e,...n));return qI(i),new Ps(t.firestore,null,i)}}function VG(t,e){if(t=we(t,Cd),Sw("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new F(U.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new dn(t,null,function(i){return new Lr(pe.emptyPath(),i)}(e))}function dp(t,e,...n){if(t=J(t),arguments.length===1&&(e=Aw.newId()),Sw("doc","path",e),t instanceof Cd){const i=pe.fromString(e,...n);return FI(i),new Me(t,null,new $(i))}{if(!(t instanceof Me||t instanceof Ps))throw new F(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(pe.fromString(e,...n));return FI(i),new Me(t.firestore,t instanceof Ps?t.converter:null,new $(i))}}function JV(t,e){return t=J(t),e=J(e),(t instanceof Me||t instanceof Ps)&&(e instanceof Me||e instanceof Ps)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function ZV(t,e){return t=J(t),e=J(e),t instanceof dn&&e instanceof dn&&t.firestore===e.firestore&&bd(t._query,e._query)&&t.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nR="AsyncQueue";class iR{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new eb(this,"async_queue_retry"),this._c=()=>{const i=om();i&&q(nR,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const n=om();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=om();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new qt;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!ea(e))throw e;q(nR,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(i=>{throw this.nc=i,this.rc=!1,dt("INTERNAL UNHANDLED ERROR: ",rR(i)),i}).then(i=>(this.rc=!1,i))));return this.ac=n,n}enqueueAfterDelay(e,n,i){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const r=rb.createAndSchedule(this,e,n,i,s=>this.hc(s));return this.tc.push(r),r}uc(){this.nc&&W(47125,{Pc:rR(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function rR(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f0(t){return function(n,i){if(typeof n!="object"||n===null)return!1;const r=n;for(const s of i)if(s in r&&typeof r[s]=="function")return!0;return!1}(t,["next","error","complete"])}class OG{constructor(){this._progressObserver={},this._taskCompletionResolver=new qt,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,i){this._progressObserver={next:e,error:n,complete:i}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MG=-1;let pt=class extends Cd{constructor(e,n,i,r){super(e,n,i,r),this.type="firestore",this._queue=new iR,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new iR(e),this._firestoreClient=void 0,await e}}};function tn(t){if(t._terminated)throw new F(U.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||eO(t),t._firestoreClient}function eO(t){var i,r,s;const e=t._freezeSettings(),n=function(o,l,c,h){return new i7(o,l,c,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,KV(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(t._databaseId,((i=t._app)==null?void 0:i.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(r=e.localCache)!=null&&r._offlineComponentProvider&&((s=e.localCache)!=null&&s._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new AG(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(o){const l=o==null?void 0:o._online.build();return{_offline:o==null?void 0:o._offline.build(l),_online:l}}(t._componentsProvider))}function LG(t,e){Wi("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings();return tO(t,Fh.provider,{build:i=>new FV(i,n.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}async function UG(t){Wi("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=t._freezeSettings();tO(t,Fh.provider,{build:n=>new TG(n,e.cacheSizeBytes)})}function tO(t,e,n){if((t=we(t,pt))._firestoreClient||t._terminated)throw new F(U.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new F(U.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:n},eO(t)}function zG(t){if(t._initialized&&!t._terminated)throw new F(U.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new qt;return t._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(i){if(!Fi.v())return Promise.resolve();const r=i+mV;await Fi.delete(r)}(Yw(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}}),e.promise}function jG(t){return function(n){const i=new qt;return n.asyncQueue.enqueueAndForget(async()=>oG(await gb(n),i)),i.promise}(tn(t=we(t,pt)))}function BG(t){return IG(tn(t=we(t,pt)))}function FG(t){return RG(tn(t=we(t,pt)))}function qG(t,e){const n=tn(t=we(t,pt)),i=new OG;return DG(n,t._databaseId,e,i),i}function HG(t,e){return NG(tn(t=we(t,pt)),e).then(n=>n?new dn(t,null,n.query):null)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Wt(at.fromBase64String(e))}catch(n){throw new F(U.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Wt(at.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Wt._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(_d(e,Wt._jsonSchema))return Wt.fromBase64String(e.bytes)}}Wt._jsonSchemaVersion="firestore/bytes/1.0",Wt._jsonSchema={type:bt("string",Wt._jsonSchemaVersion),bytes:bt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gs=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new F(U.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new We(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let go=class{constructor(e){this._methodName=e}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ti{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new F(U.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new F(U.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return se(this._lat,e._lat)||se(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ti._jsonSchemaVersion}}static fromJSON(e){if(_d(e,Ti._jsonSchema))return new Ti(e.latitude,e.longitude)}}Ti._jsonSchemaVersion="firestore/geoPoint/1.0",Ti._jsonSchema={type:bt("string",Ti._jsonSchemaVersion),latitude:bt("number"),longitude:bt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,r){if(i.length!==r.length)return!1;for(let s=0;s<i.length;++s)if(i[s]!==r[s])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Hi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(_d(e,Hi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Hi(e.vectorValues);throw new F(U.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Hi._jsonSchemaVersion="firestore/vectorValue/1.0",Hi._jsonSchema={type:bt("string",Hi._jsonSchemaVersion),vectorValues:bt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GG=/^__.*__$/;class $G{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new zr(e,this.data,this.fieldMask,n,this.fieldTransforms):new Tc(e,this.data,n,this.fieldTransforms)}}class nO{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new zr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function iO(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw W(40011,{Ac:t})}}class Tg{constructor(e,n,i,r,s,a){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Tg({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var r;const n=(r=this.path)==null?void 0:r.child(e),i=this.Vc({path:n,fc:!1});return i.gc(e),i}yc(e){var r;const n=(r=this.path)==null?void 0:r.child(e),i=this.Vc({path:n,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return fp(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(iO(this.Ac)&&GG.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class KG{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||Rd(e)}Cc(e,n,i,r=!1){return new Tg({Ac:e,methodName:n,Dc:i,path:We.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function yo(t){const e=t._freezeSettings(),n=Rd(t._databaseId);return new KG(t._databaseId,!!e.ignoreUndefinedProperties,n)}function wg(t,e,n,i,r,s={}){const a=t.Cc(s.merge||s.mergeFields?2:0,e,n,r);Eb("Data must be an object, but it was:",a,i);const o=aO(i,a);let l,c;if(s.merge)l=new Tn(a.fieldMask),c=a.fieldTransforms;else if(s.mergeFields){const h=[];for(const d of s.mergeFields){const f=m0(e,d,n);if(!a.contains(f))throw new F(U.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);lO(h,f)||h.push(f)}l=new Tn(h),c=a.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,c=a.fieldTransforms;return new $G(new jt(o),l,c)}class Pd extends go{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Pd}}function rO(t,e,n){return new Tg({Ac:3,Dc:e.settings.Dc,methodName:t._methodName,fc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class yb extends go{_toFieldTransform(e){return new Ad(e.path,new Hl)}isEqual(e){return e instanceof yb}}class _b extends go{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=rO(this,e,!0),i=this.vc.map(s=>_o(s,n)),r=new Za(i);return new Ad(e.path,r)}isEqual(e){return e instanceof _b&&Os(this.vc,e.vc)}}class vb extends go{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=rO(this,e,!0),i=this.vc.map(s=>_o(s,n)),r=new eo(i);return new Ad(e.path,r)}isEqual(e){return e instanceof vb&&Os(this.vc,e.vc)}}class Tb extends go{constructor(e,n){super(e),this.Fc=n}_toFieldTransform(e){const n=new Gl(e.serializer,Dk(e.serializer,this.Fc));return new Ad(e.path,n)}isEqual(e){return e instanceof Tb&&this.Fc===e.Fc}}function wb(t,e,n,i){const r=t.Cc(1,e,n);Eb("Data must be an object, but it was:",r,i);const s=[],a=jt.empty();ta(i,(l,c)=>{const h=Ab(e,l,n);c=J(c);const d=r.yc(h);if(c instanceof Pd)s.push(h);else{const f=_o(c,d);f!=null&&(s.push(h),a.set(h,f))}});const o=new Tn(s);return new nO(a,o,r.fieldTransforms)}function bb(t,e,n,i,r,s){const a=t.Cc(1,e,n),o=[m0(e,i,n)],l=[r];if(s.length%2!=0)throw new F(U.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<s.length;f+=2)o.push(m0(e,s[f])),l.push(s[f+1]);const c=[],h=jt.empty();for(let f=o.length-1;f>=0;--f)if(!lO(c,o[f])){const p=o[f];let w=l[f];w=J(w);const E=a.yc(p);if(w instanceof Pd)c.push(p);else{const A=_o(w,E);A!=null&&(c.push(p),h.set(p,A))}}const d=new Tn(c);return new nO(h,d,a.fieldTransforms)}function sO(t,e,n,i=!1){return _o(n,t.Cc(i?4:3,e))}function _o(t,e){if(oO(t=J(t)))return Eb("Unsupported field value:",e,t),aO(t,e);if(t instanceof go)return function(i,r){if(!iO(r.Ac))throw r.Sc(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Sc(`${i._methodName}() is not currently supported inside arrays`);const s=i._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(i,r){const s=[];let a=0;for(const o of i){let l=_o(o,r.wc(a));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),a++}return{arrayValue:{values:s}}}(t,e)}return function(i,r){if((i=J(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return Dk(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const s=Ae.fromDate(i);return{timestampValue:$l(r.serializer,s)}}if(i instanceof Ae){const s=new Ae(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:$l(r.serializer,s)}}if(i instanceof Ti)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Wt)return{bytesValue:qk(r.serializer,i._byteString)};if(i instanceof Me){const s=r.databaseId,a=i.firestore._databaseId;if(!a.isEqual(s))throw r.Sc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:qw(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof Hi)return function(a,o){return{mapValue:{fields:{[Nw]:{stringValue:kw},[Bl]:{arrayValue:{values:a.toArray().map(c=>{if(typeof c!="number")throw o.Sc("VectorValues must only contain numeric values.");return Lw(o.serializer,c)})}}}}}}(i,r);throw r.Sc(`Unsupported field value: ${ig(i)}`)}(t,e)}function aO(t,e){const n={};return ak(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ta(t,(i,r)=>{const s=_o(r,e.mc(i));s!=null&&(n[i]=s)}),{mapValue:{fields:n}}}function oO(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ae||t instanceof Ti||t instanceof Wt||t instanceof Me||t instanceof go||t instanceof Hi)}function Eb(t,e,n){if(!oO(n)||!FN(n)){const i=ig(n);throw i==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+i)}}function m0(t,e,n){if((e=J(e))instanceof Gs)return e._internalPath;if(typeof e=="string")return Ab(t,e);throw fp("Field path arguments must be of type string or ",t,!1,void 0,n)}const QG=new RegExp("[~\\*/\\[\\]]");function Ab(t,e,n){if(e.search(QG)>=0)throw fp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Gs(...e.split("."))._internalPath}catch{throw fp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function fp(t,e,n,i,r){const s=i&&!i.isEmpty(),a=r!==void 0;let o=`Function ${e}() called with invalid data`;n&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(s||a)&&(l+=" (found",s&&(l+=` in field ${i}`),a&&(l+=` in document ${r}`),l+=")"),new F(U.INVALID_ARGUMENT,o+t+l)}function lO(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qh{constructor(e,n,i,r,s){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Me(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new WG(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(bg("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class WG extends qh{data(){return super.data()}}function bg(t,e){return typeof e=="string"?Ab(t,e):e instanceof Gs?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cO(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new F(U.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Sb{}class Dd extends Sb{}function es(t,e,...n){let i=[];e instanceof Sb&&i.push(e),i=i.concat(n),function(s){const a=s.filter(l=>l instanceof Ib).length,o=s.filter(l=>l instanceof Eg).length;if(a>1||a>0&&o>0)throw new F(U.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const r of i)t=r._apply(t);return t}class Eg extends Dd{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new Eg(e,n,i)}_apply(e){const n=this._parse(e);return hO(e._query,n),new dn(e.firestore,e.converter,e0(e._query,n))}_parse(e){const n=yo(e.firestore);return function(s,a,o,l,c,h,d){let f;if(c.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new F(U.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){aR(d,h);const w=[];for(const E of d)w.push(sR(l,s,E));f={arrayValue:{values:w}}}else f=sR(l,s,d)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||aR(d,h),f=sO(o,a,d,h==="in"||h==="not-in");return ye.create(c,h,f)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function YG(t,e,n){const i=e,r=bg("where",t);return Eg._create(r,i,n)}class Ib extends Sb{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Ib(e,n)}_parse(e){const n=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return n.length===1?n[0]:Re.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(r,s){let a=r;const o=s.getFlattenedFilters();for(const l of o)hO(a,l),a=e0(a,l)}(e._query,n),new dn(e.firestore,e.converter,e0(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Rb extends Dd{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Rb(e,n)}_apply(e){const n=function(r,s,a){if(r.startAt!==null)throw new F(U.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new F(U.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Uh(s,a)}(e._query,this._field,this._direction);return new dn(e.firestore,e.converter,function(r,s){const a=r.explicitOrderBy.concat([s]);return new Lr(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,n))}}function XG(t,e="asc"){const n=e,i=bg("orderBy",t);return Rb._create(i,n)}class Ag extends Dd{constructor(e,n,i){super(),this.type=e,this._limit=n,this._limitType=i}static _create(e,n,i){return new Ag(e,n,i)}_apply(e){return new dn(e.firestore,e.converter,ip(e._query,this._limit,this._limitType))}}function JG(t){return qN("limit",t),Ag._create("limit",t,"F")}function ZG(t){return qN("limitToLast",t),Ag._create("limitToLast",t,"L")}class Sg extends Dd{constructor(e,n,i){super(),this.type=e,this._docOrFields=n,this._inclusive=i}static _create(e,n,i){return new Sg(e,n,i)}_apply(e){const n=uO(e,this.type,this._docOrFields,this._inclusive);return new dn(e.firestore,e.converter,function(r,s){return new Lr(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,s,r.endAt)}(e._query,n))}}function e$(...t){return Sg._create("startAt",t,!0)}function t$(...t){return Sg._create("startAfter",t,!1)}class Ig extends Dd{constructor(e,n,i){super(),this.type=e,this._docOrFields=n,this._inclusive=i}static _create(e,n,i){return new Ig(e,n,i)}_apply(e){const n=uO(e,this.type,this._docOrFields,this._inclusive);return new dn(e.firestore,e.converter,function(r,s){return new Lr(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,s)}(e._query,n))}}function n$(...t){return Ig._create("endBefore",t,!1)}function i$(...t){return Ig._create("endAt",t,!0)}function uO(t,e,n,i){if(n[0]=J(n[0]),n[0]instanceof qh)return function(s,a,o,l,c){if(!l)throw new F(U.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${o}().`);const h=[];for(const d of yl(s))if(d.field.isKeyField())h.push(Xa(a,l.key));else{const f=l.data.field(d.field);if(lg(f))throw new F(U.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+d.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(f===null){const p=d.field.canonicalString();throw new F(U.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${p}' (used as the orderBy) does not exist.`)}h.push(f)}return new Fs(h,c)}(t._query,t.firestore._databaseId,e,n[0]._document,i);{const r=yo(t.firestore);return function(a,o,l,c,h,d){const f=a.explicitOrderBy;if(h.length>f.length)throw new F(U.INVALID_ARGUMENT,`Too many arguments provided to ${c}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const p=[];for(let w=0;w<h.length;w++){const E=h[w];if(f[w].field.isKeyField()){if(typeof E!="string")throw new F(U.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${c}(), but got a ${typeof E}`);if(!Ow(a)&&E.indexOf("/")!==-1)throw new F(U.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${c}() must be a plain document ID, but '${E}' contains a slash.`);const A=a.path.child(pe.fromString(E));if(!$.isDocumentKey(A))throw new F(U.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${c}() must result in a valid document path, but '${A}' is not because it contains an odd number of segments.`);const T=new $(A);p.push(Xa(o,T))}else{const A=sO(l,c,E);p.push(A)}}return new Fs(p,d)}(t._query,t.firestore._databaseId,r,e,n,i)}}function sR(t,e,n){if(typeof(n=J(n))=="string"){if(n==="")throw new F(U.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ow(e)&&n.indexOf("/")!==-1)throw new F(U.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(pe.fromString(n));if(!$.isDocumentKey(i))throw new F(U.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Xa(t,new $(i))}if(n instanceof Me)return Xa(t,n._key);throw new F(U.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ig(n)}.`)}function aR(t,e){if(!Array.isArray(t)||t.length===0)throw new F(U.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function hO(t,e){const n=function(r,s){for(const a of r)for(const o of a.getFlattenedFilters())if(s.indexOf(o.op)>=0)return o.op;return null}(t.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new F(U.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new F(U.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class xb{convertValue(e,n="none"){switch(js(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Qe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Dr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw W(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return ta(e,(r,s)=>{i[r]=this.convertValue(s,n)}),i}convertVectorValue(e){var i,r,s;const n=(s=(r=(i=e.fields)==null?void 0:i[Bl].arrayValue)==null?void 0:r.values)==null?void 0:s.map(a=>Qe(a.doubleValue));return new Hi(n)}convertGeoPoint(e){return new Ti(Qe(e.latitude),Qe(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":const i=cg(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(Oh(e));default:return null}}convertTimestamp(e){const n=Pr(e);return new Ae(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=pe.fromString(e);X(eV(i),9688,{name:e});const r=new zs(i.get(1),i.get(3)),s=new $(i.popFirst(5));return r.isEqual(n)||dt(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rg(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}class r$ extends xb{constructor(e){super(),this.firestore=e}convertBytes(e){return new Wt(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Me(this.firestore,null,n)}}class Pa{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}let ci=class dO extends qh{constructor(e,n,i,r,s,a){super(e,n,i,r,a),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new th(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(bg("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new F(U.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=dO._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}};ci._jsonSchemaVersion="firestore/documentSnapshot/1.0",ci._jsonSchema={type:bt("string",ci._jsonSchemaVersion),bundleSource:bt("string","DocumentSnapshot"),bundleName:bt("string"),bundle:bt("string")};let th=class extends ci{data(e={}){return super.data(e)}},wi=class fO{constructor(e,n,i,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new Pa(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new th(this._firestore,this._userDataWriter,i.key,i,new Pa(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new F(U.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(o=>{const l=new th(r._firestore,r._userDataWriter,o.doc.key,o.doc,new Pa(r._snapshot.mutatedKeys.has(o.doc.key),r._snapshot.fromCache),r.query.converter);return o.doc,{type:"added",doc:l,oldIndex:-1,newIndex:a++}})}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(o=>s||o.type!==3).map(o=>{const l=new th(r._firestore,r._userDataWriter,o.doc.key,o.doc,new Pa(r._snapshot.mutatedKeys.has(o.doc.key),r._snapshot.fromCache),r.query.converter);let c=-1,h=-1;return o.type!==0&&(c=a.indexOf(o.doc.key),a=a.delete(o.doc.key)),o.type!==1&&(a=a.add(o.doc),h=a.indexOf(o.doc.key)),{type:s$(o.type),doc:l,oldIndex:c,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new F(U.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=fO._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Aw.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],r=[];return this.docs.forEach(s=>{s._document!==null&&(n.push(s._document),i.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),r.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function s$(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return W(61501,{type:t})}}function mO(t,e){return t instanceof ci&&e instanceof ci?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof wi&&e instanceof wi&&t._firestore===e._firestore&&ZV(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a$(t){t=we(t,Me);const e=we(t.firestore,pt);return GV(tn(e),t._key).then(n=>Cb(e,t,n))}wi._jsonSchemaVersion="firestore/querySnapshot/1.0",wi._jsonSchema={type:bt("string",wi._jsonSchemaVersion),bundleSource:bt("string","QuerySnapshot"),bundleName:bt("string"),bundle:bt("string")};class vo extends xb{constructor(e){super(),this.firestore=e}convertBytes(e){return new Wt(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Me(this.firestore,null,n)}}function o$(t){t=we(t,Me);const e=we(t.firestore,pt),n=tn(e),i=new vo(e);return xG(n,t._key).then(r=>new ci(e,i,t._key,r,new Pa(r!==null&&r.hasLocalMutations,!0),t.converter))}function l$(t){t=we(t,Me);const e=we(t.firestore,pt);return GV(tn(e),t._key,{source:"server"}).then(n=>Cb(e,t,n))}function c$(t){t=we(t,dn);const e=we(t.firestore,pt),n=tn(e),i=new vo(e);return cO(t._query),$V(n,t._query).then(r=>new wi(e,i,t,r))}function u$(t){t=we(t,dn);const e=we(t.firestore,pt),n=tn(e),i=new vo(e);return CG(n,t._query).then(r=>new wi(e,i,t,r))}function h$(t){t=we(t,dn);const e=we(t.firestore,pt),n=tn(e),i=new vo(e);return $V(n,t._query,{source:"server"}).then(r=>new wi(e,i,t,r))}function oR(t,e,n){t=we(t,Me);const i=we(t.firestore,pt),r=Rg(t.converter,e,n);return Nd(i,[wg(yo(i),"setDoc",t._key,r,t.converter!==null,n).toMutation(t._key,Ye.none())])}function lR(t,e,n,...i){t=we(t,Me);const r=we(t.firestore,pt),s=yo(r);let a;return a=typeof(e=J(e))=="string"||e instanceof Gs?bb(s,"updateDoc",t._key,e,n,i):wb(s,"updateDoc",t._key,e),Nd(r,[a.toMutation(t._key,Ye.exists(!0))])}function d$(t){return Nd(we(t.firestore,pt),[new wc(t._key,Ye.none())])}function f$(t,e){const n=we(t.firestore,pt),i=dp(t),r=Rg(t.converter,e);return Nd(n,[wg(yo(t.firestore),"addDoc",i._key,r,t.converter!==null,{}).toMutation(i._key,Ye.exists(!1))]).then(()=>i)}function pO(t,...e){var l,c,h;t=J(t);let n={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||f0(e[i])||(n=e[i++]);const r={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(f0(e[i])){const d=e[i];e[i]=(l=d.next)==null?void 0:l.bind(d),e[i+1]=(c=d.error)==null?void 0:c.bind(d),e[i+2]=(h=d.complete)==null?void 0:h.bind(d)}let s,a,o;if(t instanceof Me)a=we(t.firestore,pt),o=vc(t._key.path),s={next:d=>{e[i]&&e[i](Cb(a,t,d))},error:e[i+1],complete:e[i+2]};else{const d=we(t,dn);a=we(d.firestore,pt),o=d._query;const f=new vo(a);s={next:p=>{e[i]&&e[i](new wi(a,f,d,p))},error:e[i+1],complete:e[i+2]},cO(t._query)}return function(f,p,w,E){const A=new _g(E),T=new lb(p,A,w);return f.asyncQueue.enqueueAndForget(async()=>sb(await Jl(f),T)),()=>{A.Nu(),f.asyncQueue.enqueueAndForget(async()=>ab(await Jl(f),T))}}(tn(a),o,r,s)}function m$(t,e){return PG(tn(t=we(t,pt)),f0(e)?e:{next:e})}function Nd(t,e){return function(i,r){const s=new qt;return i.asyncQueue.enqueueAndForget(async()=>iG(await gb(i),r,s)),s.promise}(tn(t),e)}function Cb(t,e,n){const i=n.docs.get(e._key),r=new vo(t);return new ci(t,r,e._key,i,new Pa(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p$={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let g$=class{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=yo(e)}set(e,n,i){this._verifyNotCommitted();const r=gs(e,this._firestore),s=Rg(r.converter,n,i),a=wg(this._dataReader,"WriteBatch.set",r._key,s,r.converter!==null,i);return this._mutations.push(a.toMutation(r._key,Ye.none())),this}update(e,n,i,...r){this._verifyNotCommitted();const s=gs(e,this._firestore);let a;return a=typeof(n=J(n))=="string"||n instanceof Gs?bb(this._dataReader,"WriteBatch.update",s._key,n,i,r):wb(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(a.toMutation(s._key,Ye.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=gs(e,this._firestore);return this._mutations=this._mutations.concat(new wc(n._key,Ye.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new F(U.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function gs(t,e){if((t=J(t)).firestore!==e)throw new F(U.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y${constructor(e,n){this._firestore=e,this._transaction=n,this._dataReader=yo(e)}get(e){const n=gs(e,this._firestore),i=new r$(this._firestore);return this._transaction.lookup([n._key]).then(r=>{if(!r||r.length!==1)return W(24041);const s=r[0];if(s.isFoundDocument())return new qh(this._firestore,i,s.key,s,n.converter);if(s.isNoDocument())return new qh(this._firestore,i,n._key,null,n.converter);throw W(18433,{doc:s})})}set(e,n,i){const r=gs(e,this._firestore),s=Rg(r.converter,n,i),a=wg(this._dataReader,"Transaction.set",r._key,s,r.converter!==null,i);return this._transaction.set(r._key,a),this}update(e,n,i,...r){const s=gs(e,this._firestore);let a;return a=typeof(n=J(n))=="string"||n instanceof Gs?bb(this._dataReader,"Transaction.update",s._key,n,i,r):wb(this._dataReader,"Transaction.update",s._key,n),this._transaction.update(s._key,a),this}delete(e){const n=gs(e,this._firestore);return this._transaction.delete(n._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _$=class extends y${constructor(e,n){super(e,n),this._firestore=e}get(e){const n=gs(e,this._firestore),i=new vo(this._firestore);return super.get(e).then(r=>new ci(this._firestore,i,n._key,r._document,new Pa(!1,!1),n.converter))}};function v$(t,e,n){t=we(t,pt);const i={...p$,...n};return function(s){if(s.maxAttempts<1)throw new F(U.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function(s,a,o){const l=new qt;return s.asyncQueue.enqueueAndForget(async()=>{const c=await SG(s);new EG(s.asyncQueue,c,o,a,l).ju()}),l.promise}(tn(t),r=>e(new _$(t,r)),i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T$(){return new Pd("deleteField")}function w$(){return new yb("serverTimestamp")}function b$(...t){return new _b("arrayUnion",t)}function E$(...t){return new vb("arrayRemove",t)}function A$(t){return new Tb("increment",t)}(function(e,n=!0){(function(r){_c=r})(Vr),xr(new hi("firestore",(i,{instanceIdentifier:r,options:s})=>{const a=i.getProvider("app").getImmediate(),o=new pt(new y8(i.getProvider("auth-internal")),new T8(a,i.getProvider("app-check-internal")),function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new F(U.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new zs(c.options.projectId,h)}(a,r),a);return s={useFetchStreams:n,...s},o._setSettings(s),o},"PUBLIC").setMultipleInstances(!0)),jn(UI,zI,e),jn(UI,zI,"esm2020")})();const S$="@firebase/firestore-compat",I$="0.4.2";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pb(t,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new F("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cR(){if(typeof Uint8Array>"u")throw new F("unimplemented","Uint8Arrays are not available in this environment.")}function uR(){if(!t7())throw new F("unimplemented","Blobs are unavailable in Firestore in this environment.")}let gO=class p0{constructor(e){this._delegate=e}static fromBase64String(e){return uR(),new p0(Wt.fromBase64String(e))}static fromUint8Array(e){return cR(),new p0(Wt.fromUint8Array(e))}toBase64(){return uR(),this._delegate.toBase64()}toUint8Array(){return cR(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g0(t){return R$(t,["next","error","complete"])}function R$(t,e){if(typeof t!="object"||t===null)return!1;const n=t;for(const i of e)if(i in n&&typeof n[i]=="function")return!0;return!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x${enableIndexedDbPersistence(e,n){return LG(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return UG(e._delegate)}clearIndexedDbPersistence(e){return zG(e._delegate)}}class yO{constructor(e,n,i){this._delegate=n,this._persistenceProvider=i,this.INTERNAL={delete:()=>this.terminate()},e instanceof zs||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&Wi("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e={...n,...e},delete e.merge),this._delegate._setSettings(e)}useEmulator(e,n,i={}){kG(this._delegate,e,n,i)}enableNetwork(){return BG(this._delegate)}disableNetwork(){return FG(this._delegate)}enablePersistence(e){let n=!1,i=!1;return e&&(n=!!e.synchronizeTabs,i=!!e.experimentalForceOwningTab,BN("synchronizeTabs",n,"experimentalForceOwningTab",i)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,i)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return jG(this._delegate)}onSnapshotsInSync(e){return m$(this._delegate,e)}get app(){if(!this._appCompat)throw new F("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Zl(this,XV(this._delegate,e))}catch(n){throw ln(n,"collection()","Firestore.collection()")}}doc(e){try{return new si(this,dp(this._delegate,e))}catch(n){throw ln(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new on(this,VG(this._delegate,e))}catch(n){throw ln(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return v$(this._delegate,n=>e(new _O(this,n)))}batch(){return tn(this._delegate),new vO(new g$(this._delegate,e=>Nd(this._delegate,e)))}loadBundle(e){return qG(this._delegate,e)}namedQuery(e){return HG(this._delegate,e).then(n=>n?new on(this,n):null)}}class xg extends xb{constructor(e){super(),this.firestore=e}convertBytes(e){return new gO(new Wt(e))}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return si.forKey(n,this.firestore,null)}}function C$(t){f8(t)}class _O{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new xg(e)}get(e){const n=Da(e);return this._delegate.get(n).then(i=>new Hh(this._firestore,new ci(this._firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,n.converter)))}set(e,n,i){const r=Da(e);return i?(Pb("Transaction.set",i),this._delegate.set(r,n,i)):this._delegate.set(r,n),this}update(e,n,i,...r){const s=Da(e);return arguments.length===2?this._delegate.update(s,n):this._delegate.update(s,n,i,...r),this}delete(e){const n=Da(e);return this._delegate.delete(n),this}}class vO{constructor(e){this._delegate=e}set(e,n,i){const r=Da(e);return i?(Pb("WriteBatch.set",i),this._delegate.set(r,n,i)):this._delegate.set(r,n),this}update(e,n,i,...r){const s=Da(e);return arguments.length===2?this._delegate.update(s,n):this._delegate.update(s,n,i,...r),this}delete(e){const n=Da(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}}class so{constructor(e,n,i){this._firestore=e,this._userDataWriter=n,this._delegate=i}fromFirestore(e,n){const i=new th(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Gh(this._firestore,i),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){const i=so.INSTANCES;let r=i.get(e);r||(r=new WeakMap,i.set(e,r));let s=r.get(n);return s||(s=new so(e,new xg(e),n),r.set(n,s)),s}}so.INSTANCES=new WeakMap;class si{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new xg(e)}static forPath(e,n,i){if(e.length%2!==0)throw new F("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new si(n,new Me(n._delegate,i,new $(e)))}static forKey(e,n,i){return new si(n,new Me(n._delegate,i,e))}get id(){return this._delegate.id}get parent(){return new Zl(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Zl(this.firestore,XV(this._delegate,e))}catch(n){throw ln(n,"collection()","DocumentReference.collection()")}}isEqual(e){return e=J(e),e instanceof Me?JV(this._delegate,e):!1}set(e,n){n=Pb("DocumentReference.set",n);try{return n?oR(this._delegate,e,n):oR(this._delegate,e)}catch(i){throw ln(i,"setDoc()","DocumentReference.set()")}}update(e,n,...i){try{return arguments.length===1?lR(this._delegate,e):lR(this._delegate,e,n,...i)}catch(r){throw ln(r,"updateDoc()","DocumentReference.update()")}}delete(){return d$(this._delegate)}onSnapshot(...e){const n=TO(e),i=wO(e,r=>new Hh(this.firestore,new ci(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)));return pO(this._delegate,n,i)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=o$(this._delegate):(e==null?void 0:e.source)==="server"?n=l$(this._delegate):n=a$(this._delegate),n.then(i=>new Hh(this.firestore,new ci(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)))}withConverter(e){return new si(this.firestore,e?this._delegate.withConverter(so.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function ln(t,e,n){return t.message=t.message.replace(e,n),t}function TO(t){for(const e of t)if(typeof e=="object"&&!g0(e))return e;return{}}function wO(t,e){var i,r;let n;return g0(t[0])?n=t[0]:g0(t[1])?n=t[1]:typeof t[0]=="function"?n={next:t[0],error:t[1],complete:t[2]}:n={next:t[1],error:t[2],complete:t[3]},{next:s=>{n.next&&n.next(e(s))},error:(i=n.error)==null?void 0:i.bind(n),complete:(r=n.complete)==null?void 0:r.bind(n)}}class Hh{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new si(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return mO(this._delegate,e._delegate)}}class Gh extends Hh{data(e){const n=this._delegate.data(e);return this._delegate._converter||m8(n!==void 0,"Document in a QueryDocumentSnapshot should exist"),n}}class on{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new xg(e)}where(e,n,i){try{return new on(this.firestore,es(this._delegate,YG(e,n,i)))}catch(r){throw ln(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new on(this.firestore,es(this._delegate,XG(e,n)))}catch(i){throw ln(i,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new on(this.firestore,es(this._delegate,JG(e)))}catch(n){throw ln(n,"limit()","Query.limit()")}}limitToLast(e){try{return new on(this.firestore,es(this._delegate,ZG(e)))}catch(n){throw ln(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new on(this.firestore,es(this._delegate,e$(...e)))}catch(n){throw ln(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new on(this.firestore,es(this._delegate,t$(...e)))}catch(n){throw ln(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new on(this.firestore,es(this._delegate,n$(...e)))}catch(n){throw ln(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new on(this.firestore,es(this._delegate,i$(...e)))}catch(n){throw ln(n,"endAt()","Query.endAt()")}}isEqual(e){return ZV(this._delegate,e._delegate)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=u$(this._delegate):(e==null?void 0:e.source)==="server"?n=h$(this._delegate):n=c$(this._delegate),n.then(i=>new y0(this.firestore,new wi(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)))}onSnapshot(...e){const n=TO(e),i=wO(e,r=>new y0(this.firestore,new wi(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)));return pO(this._delegate,n,i)}withConverter(e){return new on(this.firestore,e?this._delegate.withConverter(so.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class P${constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new Gh(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class y0{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new on(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Gh(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new P$(this._firestore,n))}forEach(e,n){this._delegate.forEach(i=>{e.call(n,new Gh(this._firestore,i))})}isEqual(e){return mO(this._delegate,e._delegate)}}class Zl extends on{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new si(this.firestore,e):null}doc(e){try{return e===void 0?new si(this.firestore,dp(this._delegate)):new si(this.firestore,dp(this._delegate,e))}catch(n){throw ln(n,"doc()","CollectionReference.doc()")}}add(e){return f$(this._delegate,e).then(n=>new si(this.firestore,n))}isEqual(e){return JV(this._delegate,e._delegate)}withConverter(e){return new Zl(this.firestore,e?this._delegate.withConverter(so.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Da(t){return we(t,Me)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Db{constructor(...e){this._delegate=new Gs(...e)}static documentId(){return new Db(We.keyField().canonicalString())}isEqual(e){return e=J(e),e instanceof Gs?this._delegate._internalPath.isEqual(e._internalPath):!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ra{static serverTimestamp(){const e=w$();return e._methodName="FieldValue.serverTimestamp",new Ra(e)}static delete(){const e=T$();return e._methodName="FieldValue.delete",new Ra(e)}static arrayUnion(...e){const n=b$(...e);return n._methodName="FieldValue.arrayUnion",new Ra(n)}static arrayRemove(...e){const n=E$(...e);return n._methodName="FieldValue.arrayRemove",new Ra(n)}static increment(e){const n=A$(e);return n._methodName="FieldValue.increment",new Ra(n)}constructor(e){this._delegate=e}isEqual(e){return this._delegate.isEqual(e._delegate)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D$={Firestore:yO,GeoPoint:Ti,Timestamp:Ae,Blob:gO,Transaction:_O,WriteBatch:vO,DocumentReference:si,DocumentSnapshot:Hh,Query:on,QueryDocumentSnapshot:Gh,QuerySnapshot:y0,CollectionReference:Zl,FieldPath:Db,FieldValue:Ra,setLogLevel:C$,CACHE_SIZE_UNLIMITED:MG};function N$(t,e){t.INTERNAL.registerComponent(new hi("firestore-compat",n=>{const i=n.getProvider("app-compat").getImmediate(),r=n.getProvider("firestore").getImmediate();return e(i,r)},"PUBLIC").setServiceProps({...D$}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k$(t){N$(t,(e,n)=>new yO(e,n,new x$)),t.registerVersion(S$,I$)}k$(Yt);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bO="firebasestorage.googleapis.com",EO="storageBucket",V$=2*60*1e3,O$=10*60*1e3,M$=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tt extends Zt{constructor(e,n,i=0){super(f_(e),`Firebase Storage: ${n} (${f_(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,tt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return f_(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var $e;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})($e||($e={}));function f_(t){return"storage/"+t}function Nb(){const t="An unknown error occurred, please check the error payload for server response.";return new tt($e.UNKNOWN,t)}function L$(t){return new tt($e.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function U$(t){return new tt($e.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function z$(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new tt($e.UNAUTHENTICATED,t)}function j$(){return new tt($e.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function B$(t){return new tt($e.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function AO(){return new tt($e.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function SO(){return new tt($e.CANCELED,"User canceled the upload/download.")}function F$(t){return new tt($e.INVALID_URL,"Invalid URL '"+t+"'.")}function q$(t){return new tt($e.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function H$(){return new tt($e.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+EO+"' property when initializing the app?")}function IO(){return new tt($e.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function G$(){return new tt($e.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function $$(){return new tt($e.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function K$(t){return new tt($e.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function vl(t){return new tt($e.INVALID_ARGUMENT,t)}function RO(){return new tt($e.APP_DELETED,"The Firebase app was deleted.")}function xO(t){return new tt($e.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function nh(t,e){return new tt($e.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function cu(t){throw new tt($e.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let i;try{i=Xt.makeFromUrl(e,n)}catch{return new Xt(e,"")}if(i.path==="")return i;throw q$(e)}static makeFromUrl(e,n){let i=null;const r="([A-Za-z0-9.\\-_]+)";function s(C){C.path.charAt(C.path.length-1)==="/"&&(C.path_=C.path_.slice(0,-1))}const a="(/(.*))?$",o=new RegExp("^gs://"+r+a,"i"),l={bucket:1,path:3};function c(C){C.path_=decodeURIComponent(C.path)}const h="v[A-Za-z0-9_]+",d=n.replace(/[.]/g,"\\."),f="(/([^?#]*).*)?$",p=new RegExp(`^https?://${d}/${h}/b/${r}/o${f}`,"i"),w={bucket:1,path:3},E=n===bO?"(?:storage.googleapis.com|storage.cloud.google.com)":n,A="([^?#]*)",T=new RegExp(`^https?://${E}/${r}/${A}`,"i"),_=[{regex:o,indices:l,postModify:s},{regex:p,indices:w,postModify:c},{regex:T,indices:{bucket:1,path:2},postModify:c}];for(let C=0;C<_.length;C++){const V=_[C],O=V.regex.exec(e);if(O){const S=O[V.indices.bucket];let b=O[V.indices.path];b||(b=""),i=new Xt(S,b),V.postModify(i);break}}if(i==null)throw F$(e);return i}}class Q${constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W$(t,e,n){let i=1,r=null,s=null,a=!1,o=0;function l(){return o===2}let c=!1;function h(...A){c||(c=!0,e.apply(null,A))}function d(A){r=setTimeout(()=>{r=null,t(p,l())},A)}function f(){s&&clearTimeout(s)}function p(A,...T){if(c){f();return}if(A){f(),h.call(null,A,...T);return}if(l()||a){f(),h.call(null,A,...T);return}i<64&&(i*=2);let _;o===1?(o=2,_=0):_=(i+Math.random())*1e3,d(_)}let w=!1;function E(A){w||(w=!0,f(),!c&&(r!==null?(A||(o=2),clearTimeout(r),d(0)):A||(o=1)))}return d(0),s=setTimeout(()=>{a=!0,E(!0)},n),E}function Y$(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X$(t){return t!==void 0}function J$(t){return typeof t=="function"}function Z$(t){return typeof t=="object"&&!Array.isArray(t)}function Cg(t){return typeof t=="string"||t instanceof String}function hR(t){return kb()&&t instanceof Blob}function kb(){return typeof Blob<"u"}function _0(t,e,n,i){if(i<e)throw vl(`Invalid value for '${t}'. Expected ${e} or greater.`);if(i>n)throw vl(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ra(t,e,n){let i=e;return n==null&&(i=`https://${e}`),`${n}://${i}/v0${t}`}function CO(t){const e=encodeURIComponent;let n="?";for(const i in t)if(t.hasOwnProperty(i)){const r=e(i)+"="+e(t[i]);n=n+r+"&"}return n=n.slice(0,-1),n}var Ba;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Ba||(Ba={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PO(t,e){const n=t>=500&&t<600,r=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||r||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eK{constructor(e,n,i,r,s,a,o,l,c,h,d,f=!0,p=!1){this.url_=e,this.method_=n,this.headers_=i,this.body_=r,this.successCodes_=s,this.additionalRetryCodes_=a,this.callback_=o,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=h,this.connectionFactory_=d,this.retry=f,this.isUsingEmulator=p,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((w,E)=>{this.resolve_=w,this.reject_=E,this.start_()})}start_(){const e=(i,r)=>{if(r){i(!1,new bf(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const a=o=>{const l=o.loaded,c=o.lengthComputable?o.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&s.addUploadProgressListener(a),s.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(a),this.pendingConnection_=null;const o=s.getErrorCode()===Ba.NO_ERROR,l=s.getStatus();if(!o||PO(l,this.additionalRetryCodes_)&&this.retry){const h=s.getErrorCode()===Ba.ABORT;i(!1,new bf(!1,null,h));return}const c=this.successCodes_.indexOf(l)!==-1;i(!0,new bf(c,s))})},n=(i,r)=>{const s=this.resolve_,a=this.reject_,o=r.connection;if(r.wasSuccessCode)try{const l=this.callback_(o,o.getResponse());X$(l)?s(l):s()}catch(l){a(l)}else if(o!==null){const l=Nb();l.serverResponse=o.getErrorText(),this.errorCallback_?a(this.errorCallback_(o,l)):a(l)}else if(r.canceled){const l=this.appDelete_?RO():SO();a(l)}else{const l=AO();a(l)}};this.canceled_?n(!1,new bf(!1,null,!0)):this.backoffId_=W$(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&Y$(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class bf{constructor(e,n,i){this.wasSuccessCode=e,this.connection=n,this.canceled=!!i}}function tK(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function nK(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function iK(t,e){e&&(t["X-Firebase-GMPID"]=e)}function rK(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function sK(t,e,n,i,r,s,a=!0,o=!1){const l=CO(t.urlParams),c=t.url+l,h=Object.assign({},t.headers);return iK(h,e),tK(h,n),nK(h,s),rK(h,i),new eK(c,t.method,h,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,r,a,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aK(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function oK(...t){const e=aK();if(e!==void 0){const n=new e;for(let i=0;i<t.length;i++)n.append(t[i]);return n.getBlob()}else{if(kb())return new Blob(t);throw new tt($e.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function lK(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cK(t){if(typeof atob>"u")throw K$("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ai={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class m_{constructor(e,n){this.data=e,this.contentType=n||null}}function DO(t,e){switch(t){case ai.RAW:return new m_(NO(e));case ai.BASE64:case ai.BASE64URL:return new m_(kO(t,e));case ai.DATA_URL:return new m_(hK(e),dK(e))}throw Nb()}function NO(t){const e=[];for(let n=0;n<t.length;n++){let i=t.charCodeAt(n);if(i<=127)e.push(i);else if(i<=2047)e.push(192|i>>6,128|i&63);else if((i&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const s=i,a=t.charCodeAt(++n);i=65536|(s&1023)<<10|a&1023,e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63)}else(i&64512)===56320?e.push(239,191,189):e.push(224|i>>12,128|i>>6&63,128|i&63)}return new Uint8Array(e)}function uK(t){let e;try{e=decodeURIComponent(t)}catch{throw nh(ai.DATA_URL,"Malformed data URL.")}return NO(e)}function kO(t,e){switch(t){case ai.BASE64:{const r=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(r||s)throw nh(t,"Invalid character '"+(r?"-":"_")+"' found: is it base64url encoded?");break}case ai.BASE64URL:{const r=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(r||s)throw nh(t,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=cK(e)}catch(r){throw r.message.includes("polyfill")?r:nh(t,"Invalid character found")}const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}class VO{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw nh(ai.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=n[1]||null;i!=null&&(this.base64=fK(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=e.substring(e.indexOf(",")+1)}}function hK(t){const e=new VO(t);return e.base64?kO(ai.BASE64,e.rest):uK(e.rest)}function dK(t){return new VO(t).contentType}function fK(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or{constructor(e,n){let i=0,r="";hR(e)?(this.data_=e,i=e.size,r=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),i=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),i=e.length),this.size_=i,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,n){if(hR(this.data_)){const i=this.data_,r=lK(i,e,n);return r===null?null:new or(r)}else{const i=new Uint8Array(this.data_.buffer,e,n-e);return new or(i,!0)}}static getBlob(...e){if(kb()){const n=e.map(i=>i instanceof or?i.data_:i);return new or(oK.apply(null,n))}else{const n=e.map(a=>Cg(a)?DO(ai.RAW,a).data:a.data_);let i=0;n.forEach(a=>{i+=a.byteLength});const r=new Uint8Array(i);let s=0;return n.forEach(a=>{for(let o=0;o<a.length;o++)r[s++]=a[o]}),new or(r,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vb(t){let e;try{e=JSON.parse(t)}catch{return null}return Z$(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mK(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function pK(t,e){const n=e.split("/").filter(i=>i.length>0).join("/");return t.length===0?n:t+"/"+n}function OO(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gK(t,e){return e}class sn{constructor(e,n,i,r){this.server=e,this.local=n||e,this.writable=!!i,this.xform=r||gK}}let Ef=null;function yK(t){return!Cg(t)||t.length<2?t:OO(t)}function Pg(){if(Ef)return Ef;const t=[];t.push(new sn("bucket")),t.push(new sn("generation")),t.push(new sn("metageneration")),t.push(new sn("name","fullPath",!0));function e(s,a){return yK(a)}const n=new sn("name");n.xform=e,t.push(n);function i(s,a){return a!==void 0?Number(a):a}const r=new sn("size");return r.xform=i,t.push(r),t.push(new sn("timeCreated")),t.push(new sn("updated")),t.push(new sn("md5Hash",null,!0)),t.push(new sn("cacheControl",null,!0)),t.push(new sn("contentDisposition",null,!0)),t.push(new sn("contentEncoding",null,!0)),t.push(new sn("contentLanguage",null,!0)),t.push(new sn("contentType",null,!0)),t.push(new sn("metadata","customMetadata",!0)),Ef=t,Ef}function _K(t,e){function n(){const i=t.bucket,r=t.fullPath,s=new Xt(i,r);return e._makeStorageReference(s)}Object.defineProperty(t,"ref",{get:n})}function vK(t,e,n){const i={};i.type="file";const r=n.length;for(let s=0;s<r;s++){const a=n[s];i[a.local]=a.xform(i,e[a.server])}return _K(i,t),i}function MO(t,e,n){const i=Vb(e);return i===null?null:vK(t,i,n)}function TK(t,e,n,i){const r=Vb(e);if(r===null||!Cg(r.downloadTokens))return null;const s=r.downloadTokens;if(s.length===0)return null;const a=encodeURIComponent;return s.split(",").map(c=>{const h=t.bucket,d=t.fullPath,f="/b/"+a(h)+"/o/"+a(d),p=ra(f,n,i),w=CO({alt:"media",token:c});return p+w})[0]}function Ob(t,e){const n={},i=e.length;for(let r=0;r<i;r++){const s=e[r];s.writable&&(n[s.server]=t[s.local])}return JSON.stringify(n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dR="prefixes",fR="items";function wK(t,e,n){const i={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[dR])for(const r of n[dR]){const s=r.replace(/\/$/,""),a=t._makeStorageReference(new Xt(e,s));i.prefixes.push(a)}if(n[fR])for(const r of n[fR]){const s=t._makeStorageReference(new Xt(e,r.name));i.items.push(s)}return i}function bK(t,e,n){const i=Vb(n);return i===null?null:wK(t,e,i)}class Br{constructor(e,n,i,r){this.url=e,this.method=n,this.handler=i,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gi(t){if(!t)throw Nb()}function Dg(t,e){function n(i,r){const s=MO(t,r,e);return Gi(s!==null),s}return n}function EK(t,e){function n(i,r){const s=bK(t,e,r);return Gi(s!==null),s}return n}function AK(t,e){function n(i,r){const s=MO(t,r,e);return Gi(s!==null),TK(s,r,t.host,t._protocol)}return n}function Ic(t){function e(n,i){let r;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?r=j$():r=z$():n.getStatus()===402?r=U$(t.bucket):n.getStatus()===403?r=B$(t.path):r=i,r.status=n.getStatus(),r.serverResponse=i.serverResponse,r}return e}function Ng(t){const e=Ic(t);function n(i,r){let s=e(i,r);return i.getStatus()===404&&(s=L$(t.path)),s.serverResponse=r.serverResponse,s}return n}function LO(t,e,n){const i=e.fullServerUrl(),r=ra(i,t.host,t._protocol),s="GET",a=t.maxOperationRetryTime,o=new Br(r,s,Dg(t,n),a);return o.errorHandler=Ng(e),o}function SK(t,e,n,i,r){const s={};e.isRoot?s.prefix="":s.prefix=e.path+"/",n.length>0&&(s.delimiter=n),i&&(s.pageToken=i),r&&(s.maxResults=r);const a=e.bucketOnlyServerUrl(),o=ra(a,t.host,t._protocol),l="GET",c=t.maxOperationRetryTime,h=new Br(o,l,EK(t,e.bucket),c);return h.urlParams=s,h.errorHandler=Ic(e),h}function IK(t,e,n){const i=e.fullServerUrl(),r=ra(i,t.host,t._protocol),s="GET",a=t.maxOperationRetryTime,o=new Br(r,s,AK(t,n),a);return o.errorHandler=Ng(e),o}function RK(t,e,n,i){const r=e.fullServerUrl(),s=ra(r,t.host,t._protocol),a="PATCH",o=Ob(n,i),l={"Content-Type":"application/json; charset=utf-8"},c=t.maxOperationRetryTime,h=new Br(s,a,Dg(t,i),c);return h.headers=l,h.body=o,h.errorHandler=Ng(e),h}function xK(t,e){const n=e.fullServerUrl(),i=ra(n,t.host,t._protocol),r="DELETE",s=t.maxOperationRetryTime;function a(l,c){}const o=new Br(i,r,a,s);return o.successCodes=[200,204],o.errorHandler=Ng(e),o}function CK(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function UO(t,e,n){const i=Object.assign({},n);return i.fullPath=t.path,i.size=e.size(),i.contentType||(i.contentType=CK(null,e)),i}function PK(t,e,n,i,r){const s=e.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"};function o(){let _="";for(let C=0;C<2;C++)_=_+Math.random().toString().slice(2);return _}const l=o();a["Content-Type"]="multipart/related; boundary="+l;const c=UO(e,i,r),h=Ob(c,n),d="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+h+`\r
--`+l+`\r
Content-Type: `+c.contentType+`\r
\r
`,f=`\r
--`+l+"--",p=or.getBlob(d,i,f);if(p===null)throw IO();const w={name:c.fullPath},E=ra(s,t.host,t._protocol),A="POST",T=t.maxUploadRetryTime,v=new Br(E,A,Dg(t,n),T);return v.urlParams=w,v.headers=a,v.body=p.uploadData(),v.errorHandler=Ic(e),v}class mp{constructor(e,n,i,r){this.current=e,this.total=n,this.finalized=!!i,this.metadata=r||null}}function Mb(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch{Gi(!1)}return Gi(!!n&&(e||["active"]).indexOf(n)!==-1),n}function DK(t,e,n,i,r){const s=e.bucketOnlyServerUrl(),a=UO(e,i,r),o={name:a.fullPath},l=ra(s,t.host,t._protocol),c="POST",h={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${i.size()}`,"X-Goog-Upload-Header-Content-Type":a.contentType,"Content-Type":"application/json; charset=utf-8"},d=Ob(a,n),f=t.maxUploadRetryTime;function p(E){Mb(E);let A;try{A=E.getResponseHeader("X-Goog-Upload-URL")}catch{Gi(!1)}return Gi(Cg(A)),A}const w=new Br(l,c,p,f);return w.urlParams=o,w.headers=h,w.body=d,w.errorHandler=Ic(e),w}function NK(t,e,n,i){const r={"X-Goog-Upload-Command":"query"};function s(c){const h=Mb(c,["active","final"]);let d=null;try{d=c.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Gi(!1)}d||Gi(!1);const f=Number(d);return Gi(!isNaN(f)),new mp(f,i.size(),h==="final")}const a="POST",o=t.maxUploadRetryTime,l=new Br(n,a,s,o);return l.headers=r,l.errorHandler=Ic(e),l}const mR=256*1024;function kK(t,e,n,i,r,s,a,o){const l=new mp(0,0);if(a?(l.current=a.current,l.total=a.total):(l.current=0,l.total=i.size()),i.size()!==l.total)throw G$();const c=l.total-l.current;let h=c;r>0&&(h=Math.min(h,r));const d=l.current,f=d+h;let p="";h===0?p="finalize":c===h?p="upload, finalize":p="upload";const w={"X-Goog-Upload-Command":p,"X-Goog-Upload-Offset":`${l.current}`},E=i.slice(d,f);if(E===null)throw IO();function A(C,V){const O=Mb(C,["active","final"]),S=l.current+h,b=i.size();let R;return O==="final"?R=Dg(e,s)(C,V):R=null,new mp(S,b,O==="final",R)}const T="POST",v=e.maxUploadRetryTime,_=new Br(n,T,A,v);return _.headers=w,_.body=E.uploadData(),_.progressCallback=o||null,_.errorHandler=Ic(t),_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VK={STATE_CHANGED:"state_changed"},cn={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function p_(t){switch(t){case"running":case"pausing":case"canceling":return cn.RUNNING;case"paused":return cn.PAUSED;case"success":return cn.SUCCESS;case"canceled":return cn.CANCELED;case"error":return cn.ERROR;default:return cn.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OK{constructor(e,n,i){if(J$(e)||n!=null||i!=null)this.next=e,this.error=n??void 0,this.complete=i??void 0;else{const s=e;this.next=s.next,this.error=s.error,this.complete=s.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ko(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}class MK{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Ba.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Ba.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Ba.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,i,r,s){if(this.sent_)throw cu("cannot .send() more than once");if(Xs(e)&&i&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),s!==void 0)for(const a in s)s.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,s[a].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw cu("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw cu("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw cu("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw cu("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class LK extends MK{initXhr(){this.xhr_.responseType="text"}}function Vi(){return new LK}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zO{isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}constructor(e,n,i=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=i,this._mappings=Pg(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=r=>{if(this._request=void 0,this._chunkMultiplier=1,r._codeEquals($e.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const s=this.isExponentialBackoffExpired();if(PO(r.status,[]))if(s)r=AO();else{this.sleepTime=Math.max(this.sleepTime*2,M$),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=r,this._transition("error")}},this._metadataErrorHandler=r=>{this._request=void 0,r._codeEquals($e.CANCELED)?this.completeTransitions_():(this._error=r,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((r,s)=>{this._resolve=r,this._reject=s,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,i])=>{switch(this._state){case"running":e(n,i);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,n)=>{const i=DK(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(i,Vi,e,n);this._request=r,r.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((n,i)=>{const r=NK(this._ref.storage,this._ref._location,e,this._blob),s=this._ref.storage._makeRequest(r,Vi,n,i);this._request=s,s.getPromise().then(a=>{a=a,this._request=void 0,this._updateProgress(a.current),this._needToFetchStatus=!1,a.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=mR*this._chunkMultiplier,n=new mp(this._transferred,this._blob.size()),i=this._uploadUrl;this._resolveToken((r,s)=>{let a;try{a=kK(this._ref._location,this._ref.storage,i,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(l){this._error=l,this._transition("error");return}const o=this._ref.storage._makeRequest(a,Vi,r,s,!1);this._request=o,o.getPromise().then(l=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(l.current),l.finalized?(this._metadata=l.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){mR*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{const i=LO(this._ref.storage,this._ref._location,this._mappings),r=this._ref.storage._makeRequest(i,Vi,e,n);this._request=r,r.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{const i=PK(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(i,Vi,e,n);this._request=r,r.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const n=this._state==="paused";this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=SO(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=p_(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,i,r){const s=new OK(n||void 0,i||void 0,r||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const n=this._observers.indexOf(e);n!==-1&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(p_(this._state)){case cn.SUCCESS:ko(this._resolve.bind(null,this.snapshot))();break;case cn.CANCELED:case cn.ERROR:const n=this._reject;ko(n.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(p_(this._state)){case cn.RUNNING:case cn.PAUSED:e.next&&ko(e.next.bind(e,this.snapshot))();break;case cn.SUCCESS:e.complete&&ko(e.complete.bind(e))();break;case cn.CANCELED:case cn.ERROR:e.error&&ko(e.error.bind(e,this._error))();break;default:e.error&&ko(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ao{constructor(e,n){this._service=e,n instanceof Xt?this._location=n:this._location=Xt.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new ao(e,n)}get root(){const e=new Xt(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return OO(this._location.path)}get storage(){return this._service}get parent(){const e=mK(this._location.path);if(e===null)return null;const n=new Xt(this._location.bucket,e);return new ao(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw xO(e)}}function UK(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new zO(t,new or(e),n)}function zK(t){const e={prefixes:[],items:[]};return jO(t,e).then(()=>e)}async function jO(t,e,n){const r=await BO(t,{pageToken:n});e.prefixes.push(...r.prefixes),e.items.push(...r.items),r.nextPageToken!=null&&await jO(t,e,r.nextPageToken)}function BO(t,e){e!=null&&typeof e.maxResults=="number"&&_0("options.maxResults",1,1e3,e.maxResults);const n=e||{},i=SK(t.storage,t._location,"/",n.pageToken,n.maxResults);return t.storage.makeRequestWithTokens(i,Vi)}function jK(t){t._throwIfRoot("getMetadata");const e=LO(t.storage,t._location,Pg());return t.storage.makeRequestWithTokens(e,Vi)}function BK(t,e){t._throwIfRoot("updateMetadata");const n=RK(t.storage,t._location,e,Pg());return t.storage.makeRequestWithTokens(n,Vi)}function FK(t){t._throwIfRoot("getDownloadURL");const e=IK(t.storage,t._location,Pg());return t.storage.makeRequestWithTokens(e,Vi).then(n=>{if(n===null)throw $$();return n})}function qK(t){t._throwIfRoot("deleteObject");const e=xK(t.storage,t._location);return t.storage.makeRequestWithTokens(e,Vi)}function FO(t,e){const n=pK(t._location.path,e),i=new Xt(t._location.bucket,n);return new ao(t.storage,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HK(t){return/^[A-Za-z]+:\/\//.test(t)}function GK(t,e){return new ao(t,e)}function qO(t,e){if(t instanceof Lb){const n=t;if(n._bucket==null)throw H$();const i=new ao(n,n._bucket);return e!=null?qO(i,e):i}else return e!==void 0?FO(t,e):t}function $K(t,e){if(e&&HK(e)){if(t instanceof Lb)return GK(t,e);throw vl("To use ref(service, url), the first argument must be a Storage instance.")}else return qO(t,e)}function pR(t,e){const n=e==null?void 0:e[EO];return n==null?null:Xt.makeFromBucketSpec(n,t)}function KK(t,e,n,i={}){t.host=`${e}:${n}`;const r=Xs(e);r&&(WT(`https://${t.host}/b`),YT("Storage",!0)),t._isUsingEmulator=!0,t._protocol=r?"https":"http";const{mockUserToken:s}=i;s&&(t._overrideAuthToken=typeof s=="string"?s:m2(s,t.app.options.projectId))}class Lb{constructor(e,n,i,r,s,a=!1){this.app=e,this._authProvider=n,this._appCheckProvider=i,this._url=r,this._firebaseVersion=s,this._isUsingEmulator=a,this._bucket=null,this._host=bO,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=V$,this._maxUploadRetryTime=O$,this._requests=new Set,r!=null?this._bucket=Xt.makeFromBucketSpec(r,this._host):this._bucket=pR(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Xt.makeFromBucketSpec(this._url,e):this._bucket=pR(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){_0("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){_0("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(Fe(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new ao(this,e)}_makeRequest(e,n,i,r,s=!0){if(this._deleted)return new Q$(RO());{const a=sK(e,this._appId,i,r,n,this._firebaseVersion,s,this._isUsingEmulator);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}async makeRequestWithTokens(e,n){const[i,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,i,r).getPromise()}}const gR="@firebase/storage",yR="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QK="storage";function WK(t,e,n){return t=J(t),UK(t,e,n)}function YK(t){return t=J(t),jK(t)}function XK(t,e){return t=J(t),BK(t,e)}function JK(t,e){return t=J(t),BO(t,e)}function ZK(t){return t=J(t),zK(t)}function eQ(t){return t=J(t),FK(t)}function tQ(t){return t=J(t),qK(t)}function _R(t,e){return t=J(t),$K(t,e)}function nQ(t,e){return FO(t,e)}function iQ(t,e,n,i={}){KK(t,e,n,i)}function rQ(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),r=t.getProvider("app-check-internal");return new Lb(n,i,r,e,Vr)}function sQ(){xr(new hi(QK,rQ,"PUBLIC").setMultipleInstances(!0)),jn(gR,yR,""),jn(gR,yR,"esm2020")}sQ();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Af{constructor(e,n,i){this._delegate=e,this.task=n,this.ref=i}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vR{constructor(e,n){this._delegate=e,this._ref=n,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new Af(this._delegate.snapshot,this,this._ref)}then(e,n){return this._delegate.then(i=>{if(e)return e(new Af(i,this,this._ref))},n)}on(e,n,i,r){let s;return n&&(typeof n=="function"?s=a=>n(new Af(a,this,this._ref)):s={next:n.next?a=>n.next(new Af(a,this,this._ref)):void 0,complete:n.complete||void 0,error:n.error||void 0}),this._delegate.on(e,s,i||void 0,r||void 0)}}class TR{constructor(e,n){this._delegate=e,this._service=n}get prefixes(){return this._delegate.prefixes.map(e=>new _r(e,this._service))}get items(){return this._delegate.items.map(e=>new _r(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *  http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _r{constructor(e,n){this._delegate=e,this.storage=n}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const n=nQ(this._delegate,e);return new _r(n,this.storage)}get root(){return new _r(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return e==null?null:new _r(e,this.storage)}put(e,n){return this._throwIfRoot("put"),new vR(WK(this._delegate,e,n),this)}putString(e,n=ai.RAW,i){this._throwIfRoot("putString");const r=DO(n,e),s={...i};return s.contentType==null&&r.contentType!=null&&(s.contentType=r.contentType),new vR(new zO(this._delegate,new or(r.data,!0),s),this)}listAll(){return ZK(this._delegate).then(e=>new TR(e,this.storage))}list(e){return JK(this._delegate,e||void 0).then(n=>new TR(n,this.storage))}getMetadata(){return YK(this._delegate)}updateMetadata(e){return XK(this._delegate,e)}getDownloadURL(){return eQ(this._delegate)}delete(){return this._throwIfRoot("delete"),tQ(this._delegate)}_throwIfRoot(e){if(this._delegate._location.path==="")throw xO(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HO{constructor(e,n){this.app=e,this._delegate=n}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(wR(e))throw vl("ref() expected a child path but got a URL, use refFromURL instead.");return new _r(_R(this._delegate,e),this)}refFromURL(e){if(!wR(e))throw vl("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Xt.makeFromUrl(e,this._delegate.host)}catch{throw vl("refFromUrl() expected a valid full URL but got an invalid one.")}return new _r(_R(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,n,i={}){iQ(this._delegate,e,n,i)}}function wR(t){return/^[A-Za-z]+:\/\//.test(t)}const aQ="@firebase/storage-compat",oQ="0.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lQ="storage-compat";function cQ(t,{instanceIdentifier:e}){const n=t.getProvider("app-compat").getImmediate(),i=t.getProvider("storage").getImmediate({identifier:e});return new HO(n,i)}function uQ(t){const e={TaskState:cn,TaskEvent:VK,StringFormat:ai,Storage:HO,Reference:_r};t.INTERNAL.registerComponent(new hi(lQ,cQ,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),t.registerVersion(aQ,oQ)}uQ(Yt);const hQ={apiKey:"AIzaSyDzEay5fGB-2r5_V9UXOO8cOv-nJdHwDRg",authDomain:"rush-coffee.firebaseapp.com",projectId:"rush-coffee",storageBucket:"rush-coffee.appspot.com",messagingSenderId:"423413538635",appId:"1:423413538635:web:ded0369f50c3a9086bd2ce"};Yt.apps.length||Yt.initializeApp(hQ);const rr=Yt.auth(),ut=Yt.firestore(),WZ=Yt.storage(),GO=x.createContext(void 0),Rc=()=>{const t=x.useContext(GO);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t},bR=async t=>{var r,s,a;const e=ut.collection("users").doc(t),n=await e.get();if(!n.exists){console.log(`Creating missing Firestore profile for user: ${t}`);const o=rr.currentUser;if(!o)throw new Error("User not authenticated");const l=((r=o.displayName)==null?void 0:r.split(" "))||["User",""],c=l[0],h=l.slice(1).join(" ")||"",d={email:o.email||"",displayName:o.displayName||`${c} ${h}`,firstName:c,lastName:h,phone:o.phoneNumber||"",photoURL:o.photoURL||void 0,createdAt:new Date,role:"customer",totalOrders:0,totalSpent:0,currentPoints:0,lifetimePoints:0,loyaltyPoints:0,tier:"bronze",rewardsHistory:[],preferences:{notifications:{push:!0,emailUpdates:!0,marketing:!1},theme:"auto",privacy:{shareUsageData:!0,personalizedRecs:!0}},cart:[]};await e.set(d);const p=(await e.get()).data();return{uid:t,email:p.email,displayName:p.displayName,firstName:p.firstName||"User",lastName:p.lastName||"",phone:p.phone||"",photoURL:p.photoURL,createdAt:((s=p.createdAt)==null?void 0:s.toDate())||new Date,role:p.role,totalOrders:p.totalOrders??0,totalSpent:p.totalSpent??0,currentPoints:p.currentPoints??0,lifetimePoints:p.lifetimePoints??0,loyaltyPoints:p.loyaltyPoints??0,tier:p.tier||"bronze",rewardsHistory:(p.rewardsHistory||[]).map(w=>({...w,date:w.date&&typeof w.date.toDate=="function"?w.date.toDate():w.date})).sort((w,E)=>{const A=w.date instanceof Date?w.date:new Date(w.date);return(E.date instanceof Date?E.date:new Date(E.date)).getTime()-A.getTime()}),preferences:p.preferences||{notifications:{push:!0,emailUpdates:!0,marketing:!1},theme:"auto",privacy:{shareUsageData:!0,personalizedRecs:!0}}}}const i=n.data();return{uid:t,email:i.email,displayName:i.displayName||`${i.firstName} ${i.lastName}`,firstName:i.firstName||"User",lastName:i.lastName||"",phone:i.phone||"",photoURL:i.photoURL,createdAt:((a=i.createdAt)==null?void 0:a.toDate())||new Date,role:i.role,totalOrders:i.totalOrders??0,totalSpent:i.totalSpent??0,currentPoints:i.currentPoints??0,lifetimePoints:i.lifetimePoints??0,loyaltyPoints:i.loyaltyPoints??0,tier:i.tier||"bronze",rewardsHistory:(i.rewardsHistory||[]).map(o=>({...o,date:o.date&&typeof o.date.toDate=="function"?o.date.toDate():o.date})).sort((o,l)=>{const c=o.date instanceof Date?o.date:new Date(o.date);return(l.date instanceof Date?l.date:new Date(l.date)).getTime()-c.getTime()}),preferences:i.preferences||{notifications:{push:!0,emailUpdates:!0,marketing:!1},theme:"auto",privacy:{shareUsageData:!0,personalizedRecs:!0}}}},dQ=({children:t})=>{const[e,n]=x.useState(null),[i,r]=x.useState(!0);x.useEffect(()=>{let A;const T=rr.onAuthStateChanged(async v=>{A&&A(),v?A=ut.collection("users").doc(v.uid).onSnapshot(C=>{var V;if(C.exists){const O=C.data(),S={uid:v.uid,email:v.email,firstName:O.firstName||"User",lastName:O.lastName||"",phone:O.phone||"",photoURL:O.photoURL,createdAt:((V=O.createdAt)==null?void 0:V.toDate())||new Date,role:O.role,totalOrders:O.totalOrders??0,totalSpent:O.totalSpent??0,currentPoints:O.currentPoints??0,lifetimePoints:O.lifetimePoints??0,tier:O.tier||"bronze",rewardsHistory:(O.rewardsHistory||[]).map(b=>({...b,date:b.date&&typeof b.date.toDate=="function"?b.date.toDate():b.date})).sort((b,R)=>{const D=b.date instanceof Date?b.date:new Date(b.date);return(R.date instanceof Date?R.date:new Date(R.date)).getTime()-D.getTime()}),preferences:O.preferences||{notifications:{push:!0,emailUpdates:!0,marketing:!1},theme:"auto",privacy:{shareUsageData:!0,personalizedRecs:!0}}};n(S)}else console.log("User document not found for UID:",v.uid);r(!1)},C=>{console.error("Error listening to user document:",C),n(null),r(!1)}):(n(null),r(!1))});return()=>{T(),A&&A()}},[]);const E={currentUser:e,loading:i,register:async(A,T,v,_,C)=>{const O=(await rr.createUserWithEmailAndPassword(A,T)).user,S={id:`rh-${Date.now()}`,type:"earned",points:25,description:"Welcome Bonus",date:new Date},b={firstName:v,lastName:_,phone:C||"",createdAt:new Date,role:"customer",totalOrders:0,totalSpent:0,currentPoints:25,lifetimePoints:25,tier:"bronze",rewardsHistory:[S],preferences:{notifications:{push:!0,emailUpdates:!0,marketing:!1},theme:"auto",privacy:{shareUsageData:!0,personalizedRecs:!0}},cart:[]};return await ut.collection("users").doc(O.uid).set(b),bR(O.uid)},login:async(A,T,v)=>{var C;console.log(" AuthContext.login called with:",{email:A,rememberMe:v});const _=v?Yt.auth.Auth.Persistence.LOCAL:Yt.auth.Auth.Persistence.SESSION;await rr.setPersistence(_),console.log(" Attempting Firebase authentication..."),sessionStorage.setItem("requires2FA","true");try{const O=(await rr.signInWithEmailAndPassword(A,T)).user.uid;console.log(" Firebase auth successful, userId:",O);const S=Math.floor(1e5+Math.random()*9e5).toString(),b=new Date(Date.now()+10*60*1e3);console.log(" Storing verification code in Firestore..."),await ut.collection("emailVerifications").doc(O).set({code:S,email:A,createdAt:new Date,expiresAt:b,verified:!1}),console.log(` Verification code for ${A}: ${S}`);const D=(C=(await ut.collection("users").doc(O).get()).data())==null?void 0:C.role;return console.log(" Returning verification needed response with role:",D),{needsVerification:!0,userId:O,email:A,role:D}}catch(V){throw sessionStorage.removeItem("requires2FA"),console.error("Login failed, cleared 2FA flag:",V),V}},logout:async()=>{await rr.signOut()},sendPasswordReset:async A=>{await rr.sendPasswordResetEmail(A)},signInWithGoogle:async()=>{var C;const A=new Yt.auth.GoogleAuthProvider,T=await rr.signInWithPopup(A),v=T.user,_=T.additionalUserInfo;if(_!=null&&_.isNewUser){const V=((C=v.displayName)==null?void 0:C.split(" "))||["New","User"],O=V[0],S=V.slice(1).join(" ")||"",b={id:`rh-${Date.now()}`,type:"earned",points:25,description:"Welcome Bonus",date:new Date},R={firstName:O,lastName:S,photoURL:v.photoURL||void 0,createdAt:new Date,role:"customer",totalOrders:0,totalSpent:0,currentPoints:25,lifetimePoints:25,tier:"bronze",rewardsHistory:[b],preferences:{notifications:{push:!0,emailUpdates:!0,marketing:!1},theme:"auto",privacy:{shareUsageData:!0,personalizedRecs:!0}},cart:[]};await ut.collection("users").doc(v.uid).set(R)}return bR(v.uid)},updateUserProfile:async A=>{if(!e)return;await ut.collection("users").doc(e.uid).update(A)},updateUserPhoto:async A=>{if(!e)return;await ut.collection("users").doc(e.uid).update({photoURL:A})},sendEmailVerificationCode:async(A,T)=>{const v=Math.floor(1e5+Math.random()*9e5).toString(),_=new Date(Date.now()+10*60*1e3);await ut.collection("emailVerifications").doc(A).set({code:v,email:T,createdAt:new Date,expiresAt:_}),console.log(` Verification code for ${T}: ${v}`)},verifyEmailCode:async(A,T)=>{const v=ut.collection("emailVerifications").doc(A),_=await v.get();if(!_.exists)return console.error("No verification code found for user"),!1;const C=_.data();if(!C)return!1;const V=new Date,O=C.expiresAt.toDate();return V>O?(console.error("Verification code expired"),!1):C.code===T?(await v.update({verified:!0}),!0):!1},updateUserPassword:async(A,T)=>{const v=rr.currentUser;if(!v||!v.email)throw new Error("No user logged in");const _=Yt.auth.EmailAuthProvider.credential(v.email,A);await v.reauthenticateWithCredential(_),await v.updatePassword(T)}};return y.jsx(GO.Provider,{value:E,children:!i&&t})},he=t=>`/RushCoffee-Capstone/${t}`,Sf=[{id:"cb-01",name:"Spanish Latte",description:"A creamy and sweet latte with a Spanish twist, featuring condensed milk for a rich flavor.",category:"Coffee Based",sizes:[{name:"Grande",size:"16oz",price:59},{name:"Venti",size:"22oz",price:69}],imageUrl:he("coffee-based/spanish-latte.png"),available:!0,stock:99,popular:!0,displayOrder:1,recipe:[{ingredientId:"espresso-shot",quantity:2},{ingredientId:"milk",quantity:150},{ingredientId:"condensed-milk",quantity:30}]},{id:"cb-02",name:"Rush Coffee Blend",description:"Our signature house blend, perfectly balanced for a smooth and satisfying coffee experience.",category:"Coffee Based",sizes:[{name:"Grande",size:"16oz",price:69},{name:"Venti",size:"22oz",price:89}],imageUrl:he("coffee-based/rush-coffee-blend.png"),available:!0,stock:99,popular:!0,displayOrder:2,recipe:[{ingredientId:"coffee-beans",quantity:18},{ingredientId:"hot-water",quantity:200}]},{id:"cb-03",name:"Caramel Chocolate Mocha",description:"A decadent mix of rich chocolate, espresso, and creamy caramel for the ultimate treat.",category:"Coffee Based",sizes:[{name:"Grande",size:"16oz",price:59},{name:"Venti",size:"22oz",price:69}],imageUrl:he("coffee-based/caramel-chocolate-mocha.jpg"),available:!0,stock:99,popular:!0,displayOrder:3,recipe:[{ingredientId:"espresso-shot",quantity:2},{ingredientId:"milk",quantity:150},{ingredientId:"chocolate-sauce",quantity:20},{ingredientId:"caramel-sauce",quantity:15}]},{id:"cb-04",name:"Dark Chocolate Mocha",description:"A bold and intense mocha experience with premium dark chocolate and strong espresso.",category:"Coffee Based",sizes:[{name:"Grande",size:"16oz",price:59},{name:"Venti",size:"22oz",price:69}],imageUrl:he("coffee-based/dark-chocolate-mocha.jpg"),available:!0,stock:99,displayOrder:4,recipe:[{ingredientId:"espresso-shot",quantity:2},{ingredientId:"milk",quantity:150},{ingredientId:"chocolate-sauce",quantity:25}]},{id:"cb-05",name:"Mocha Latte",description:"A classic blend of smooth espresso, rich chocolate sauce, and steamed milk.",category:"Coffee Based",sizes:[{name:"Grande",size:"16oz",price:59},{name:"Venti",size:"22oz",price:69}],imageUrl:he("coffee-based/mocha-latte.jpg"),available:!0,stock:99,displayOrder:5,recipe:[{ingredientId:"espresso-shot",quantity:2},{ingredientId:"milk",quantity:180},{ingredientId:"chocolate-sauce",quantity:20}]},{id:"cb-06",name:"Americano",description:"Bold espresso shots topped with hot water to create a light layer of crema.",category:"Coffee Based",sizes:[{name:"Grande",size:"16oz",price:59},{name:"Venti",size:"22oz",price:69}],imageUrl:he("coffee-based/americano.jpg"),available:!0,stock:99,displayOrder:6,recipe:[{ingredientId:"espresso-shot",quantity:2},{ingredientId:"hot-water",quantity:220}]},{id:"cb-07",name:"Biscoff Latte",description:"An indulgent latte infused with the irresistible flavor of caramelized Biscoff cookies.",category:"Coffee Based",sizes:[{name:"Grande",size:"16oz",price:99},{name:"Venti",size:"22oz",price:199}],imageUrl:he("coffee-based/biscoff-latte.jpg"),available:!0,stock:99,displayOrder:7,recipe:[{ingredientId:"espresso-shot",quantity:2},{ingredientId:"milk",quantity:170},{ingredientId:"biscoff-spread",quantity:30}]},{id:"cb-08",name:"Reeses Latte",description:"The perfect combination of peanut butter, chocolate, and espresso. A candy lover's dream.",category:"Coffee Based",sizes:[{name:"Grande",size:"16oz",price:79},{name:"Venti",size:"22oz",price:99}],imageUrl:he("coffee-based/reeses-latte.jpg"),available:!0,stock:99,displayOrder:8,recipe:[{ingredientId:"espresso-shot",quantity:2},{ingredientId:"milk",quantity:160},{ingredientId:"chocolate-sauce",quantity:15},{ingredientId:"peanut-butter",quantity:20}]},{id:"cb-09",name:"Brown Sugar Latte",description:"A comforting latte sweetened with rich, molasses-like brown sugar syrup.",category:"Coffee Based",sizes:[{name:"Grande",size:"16oz",price:59},{name:"Venti",size:"22oz",price:79}],imageUrl:he("coffee-based/brown-sugar-latte.jpg"),available:!0,stock:99,displayOrder:9,recipe:[{ingredientId:"espresso-shot",quantity:2},{ingredientId:"milk",quantity:180},{ingredientId:"brown-sugar-syrup",quantity:25}]},{id:"cb-10",name:"Iced Latte",description:"A simple classic. Chilled espresso with cold milk served over ice.",category:"Coffee Based",sizes:[{name:"Grande",size:"16oz",price:69},{name:"Venti",size:"22oz",price:69}],imageUrl:he("coffee-based/iced-latte.jpg"),available:!0,stock:99,displayOrder:10,recipe:[{ingredientId:"espresso-shot",quantity:2},{ingredientId:"milk",quantity:180},{ingredientId:"ice-cubes",quantity:100}]},{id:"cb-11",name:"Orange Latte",description:"A unique and refreshing latte with a zesty hint of natural orange flavor.",category:"Coffee Based",sizes:[{name:"Grande",size:"16oz",price:79},{name:"Venti",size:"22oz",price:89}],imageUrl:he("coffee-based/orange-latte.jpg"),available:!0,stock:99,displayOrder:11,recipe:[{ingredientId:"espresso-shot",quantity:2},{ingredientId:"milk",quantity:170},{ingredientId:"orange-syrup",quantity:20}]},{id:"cb-12",name:"Coffee Jelly",description:"A delightful iced coffee drink with chewy, coffee-flavored jelly cubes.",category:"Coffee Based",sizes:[{name:"Grande",size:"16oz",price:89},{name:"Venti",size:"22oz",price:99}],imageUrl:he("coffee-based/coffee-jelly.jpg"),available:!0,stock:99,displayOrder:12,recipe:[{ingredientId:"espresso-shot",quantity:2},{ingredientId:"milk",quantity:150},{ingredientId:"coffee-jelly",quantity:80},{ingredientId:"ice-cubes",quantity:80}]},{id:"nc-01",name:"Red Velvet",description:"A sweet and creamy drink inspired by the classic red velvet cake, with hints of cocoa and vanilla.",category:"Non-Coffee Based",sizes:[{name:"Grande",size:"16oz",price:89},{name:"Venti",size:"22oz",price:109}],imageUrl:he("non-coffee/red-velvet.jpg"),available:!0,stock:99,displayOrder:13,recipe:[{ingredientId:"milk",quantity:200},{ingredientId:"red-velvet-powder",quantity:25},{ingredientId:"chocolate-sauce",quantity:10},{ingredientId:"vanilla-syrup",quantity:15}]},{id:"nc-02",name:"Red Velvet Matcha Latte",description:"A beautiful and delicious blend of earthy matcha and sweet red velvet flavors.",category:"Non-Coffee Based",sizes:[{name:"Grande",size:"16oz",price:89},{name:"Venti",size:"22oz",price:109}],imageUrl:he("non-coffee/red-velvet-matcha-latte.jpg"),available:!0,stock:99,displayOrder:14,recipe:[{ingredientId:"milk",quantity:180},{ingredientId:"matcha-powder",quantity:5},{ingredientId:"red-velvet-powder",quantity:15},{ingredientId:"vanilla-syrup",quantity:10}]},{id:"nc-03",name:"Milky Choco",description:"A rich and comforting chocolate drink made with high-quality cocoa and fresh milk.",category:"Non-Coffee Based",sizes:[{name:"Grande",size:"16oz",price:89},{name:"Venti",size:"22oz",price:109}],imageUrl:he("non-coffee/milky-choco.jpg"),available:!0,stock:99,displayOrder:15,recipe:[{ingredientId:"milk",quantity:220},{ingredientId:"chocolate-sauce",quantity:30}]},{id:"nc-04",name:"Strawberry Milk",description:"A refreshing and creamy drink made with real strawberries and fresh milk.",category:"Non-Coffee Based",sizes:[{name:"Grande",size:"16oz",price:89},{name:"Venti",size:"22oz",price:109}],imageUrl:he("non-coffee/strawberry-milk.jpg"),available:!0,stock:99,displayOrder:16,recipe:[{ingredientId:"milk",quantity:200},{ingredientId:"strawberry-puree",quantity:50}]},{id:"nc-05",name:"Biscoff Milky",description:"A non-coffee treat blending the sweet, caramelized taste of Biscoff with creamy milk.",category:"Non-Coffee Based",sizes:[{name:"Grande",size:"16oz",price:89},{name:"Venti",size:"22oz",price:109}],imageUrl:he("non-coffee/biscoff-milky.jpg"),available:!0,stock:99,displayOrder:17,recipe:[{ingredientId:"milk",quantity:200},{ingredientId:"biscoff-spread",quantity:35}]},{id:"nc-06",name:"Oreo Latte",description:"A fun and delicious drink packed with the classic cookies and cream flavor of Oreos.",category:"Non-Coffee Based",sizes:[{name:"Grande",size:"16oz",price:89},{name:"Venti",size:"22oz",price:109}],imageUrl:he("non-coffee/oreo-latte.jpg"),available:!0,stock:99,displayOrder:18,recipe:[{ingredientId:"milk",quantity:180},{ingredientId:"oreo-crumbs",quantity:40},{ingredientId:"chocolate-sauce",quantity:15}]},{id:"ms-01",name:"Matcha Latte",description:"Premium Japanese matcha green tea with steamed milk, a perfect balance of earthy and creamy.",category:"Matcha Series",sizes:[{name:"Grande",size:"16oz",price:69},{name:"Venti",size:"22oz",price:89}],imageUrl:he("matcha-series/matcha-latte.jpg"),available:!0,stock:99,popular:!0,displayOrder:19,recipe:[{ingredientId:"matcha-powder",quantity:5},{ingredientId:"milk",quantity:200}]},{id:"ms-02",name:"Strawberry Matcha",description:"A delightful pairing of sweet strawberry puree and high-quality matcha green tea.",category:"Matcha Series",sizes:[{name:"Grande",size:"16oz",price:99},{name:"Venti",size:"22oz",price:109}],imageUrl:he("matcha-series/strawberry-matcha.jpg"),available:!0,stock:99,displayOrder:20,recipe:[{ingredientId:"matcha-powder",quantity:5},{ingredientId:"milk",quantity:180},{ingredientId:"strawberry-puree",quantity:40}]},{id:"ms-03",name:"Matcha Cream Cheese",description:"Earthy matcha topped with a rich, savory, and slightly sweet cream cheese foam.",category:"Matcha Series",sizes:[{name:"Grande",size:"16oz",price:99},{name:"Venti",size:"22oz",price:109}],imageUrl:he("matcha-series/matcha-cream-cheese.jpg"),available:!0,stock:99,displayOrder:21,recipe:[{ingredientId:"matcha-powder",quantity:5},{ingredientId:"milk",quantity:180},{ingredientId:"cream-cheese",quantity:30}]},{id:"ms-04",name:"Matcha Oreo",description:"A creative blend of matcha and crushed Oreo cookies for a unique texture and flavor.",category:"Matcha Series",sizes:[{name:"Grande",size:"16oz",price:79},{name:"Venti",size:"22oz",price:99}],imageUrl:he("matcha-series/matcha-oreo.jpg"),available:!0,stock:99,displayOrder:22,recipe:[{ingredientId:"matcha-powder",quantity:5},{ingredientId:"milk",quantity:180},{ingredientId:"oreo-crumbs",quantity:35}]},{id:"rf-01",name:"Flamangooverload Shake",description:"An explosive mix of flamingo and mango for an overload of fruity goodness.",category:"Refreshments",sizes:[{name:"Grande",size:"16oz",price:69},{name:"Venti",size:"22oz",price:79}],imageUrl:he("refreshments/flamangooverload.jpg"),available:!0,stock:99,displayOrder:23,recipe:[{ingredientId:"mango-puree",quantity:100},{ingredientId:"strawberry-puree",quantity:50},{ingredientId:"ice-cubes",quantity:120},{ingredientId:"milk",quantity:80}]},{id:"rf-02",name:"Mangoberry Shake",description:"A delightful blend of sweet mangoes and tangy berries, perfectly refreshing.",category:"Refreshments",sizes:[{name:"Grande",size:"16oz",price:79},{name:"Venti",size:"22oz",price:99}],imageUrl:he("refreshments/mangoberry.jpg"),available:!0,stock:99,displayOrder:24,recipe:[{ingredientId:"mango-puree",quantity:80},{ingredientId:"mixed-berries",quantity:50},{ingredientId:"ice-cubes",quantity:120},{ingredientId:"milk",quantity:80}]},{id:"rf-03",name:"Mango Caramel Shake",description:"Creamy mango shake drizzled with rich, buttery caramel sauce.",category:"Refreshments",sizes:[{name:"Grande",size:"16oz",price:79},{name:"Venti",size:"22oz",price:99}],imageUrl:he("refreshments/mango-caramel.jpg"),available:!0,stock:99,displayOrder:25,recipe:[{ingredientId:"mango-puree",quantity:100},{ingredientId:"caramel-sauce",quantity:20},{ingredientId:"ice-cubes",quantity:120},{ingredientId:"milk",quantity:80}]},{id:"rf-04",name:"Blueberry Shake",description:"A classic fruit shake made with sweet and juicy blueberries.",category:"Refreshments",sizes:[{name:"Grande",size:"16oz",price:79},{name:"Venti",size:"22oz",price:99}],imageUrl:he("refreshments/blueberry-shake.jpg"),available:!0,stock:99,displayOrder:26,recipe:[{ingredientId:"blueberry-puree",quantity:100},{ingredientId:"ice-cubes",quantity:120},{ingredientId:"milk",quantity:100}]},{id:"rf-05",name:"Strawberry Shake",description:"A creamy and delicious shake made with ripe, sweet strawberries.",category:"Refreshments",sizes:[{name:"Grande",size:"16oz",price:79},{name:"Venti",size:"22oz",price:99}],imageUrl:he("refreshments/strawberry-shake.jpg"),available:!0,stock:99,displayOrder:27,recipe:[{ingredientId:"strawberry-puree",quantity:100},{ingredientId:"ice-cubes",quantity:120},{ingredientId:"milk",quantity:100}]},{id:"rf-06",name:"Green Apple Shake",description:"A tart and refreshing shake with the crisp taste of green apples.",category:"Refreshments",sizes:[{name:"Grande",size:"16oz",price:79},{name:"Venti",size:"22oz",price:99}],imageUrl:he("refreshments/green-apple-shake.jpg"),available:!0,stock:99,displayOrder:28,recipe:[{ingredientId:"green-apple-puree",quantity:100},{ingredientId:"ice-cubes",quantity:120},{ingredientId:"milk",quantity:100}]},{id:"rf-07",name:"Blueberry Soda Pop",description:"Fizzy and fun, this soda pop is bursting with sweet blueberry flavor.",category:"Refreshments",sizes:[{name:"Grande",size:"16oz",price:69},{name:"Venti",size:"22oz",price:79}],imageUrl:he("refreshments/blueberry-soda.jpg"),available:!0,stock:99,displayOrder:29,recipe:[{ingredientId:"blueberry-puree",quantity:60},{ingredientId:"soda-water",quantity:200},{ingredientId:"ice-cubes",quantity:100}]},{id:"rf-08",name:"Strawberry Soda Pop",description:"A refreshing soda pop with the sweet taste of summer strawberries.",category:"Refreshments",sizes:[{name:"Grande",size:"16oz",price:69},{name:"Venti",size:"22oz",price:79}],imageUrl:he("refreshments/strawberry-soda.jpg"),available:!0,stock:99,displayOrder:30,recipe:[{ingredientId:"strawberry-puree",quantity:60},{ingredientId:"soda-water",quantity:200},{ingredientId:"ice-cubes",quantity:100}]},{id:"rf-09",name:"Green Apple Soda Pop",description:"A crisp and bubbly soda with a tangy green apple twist.",category:"Refreshments",sizes:[{name:"Grande",size:"16oz",price:69},{name:"Venti",size:"22oz",price:79}],imageUrl:he("refreshments/green-apple-soda.jpg"),available:!0,stock:99,displayOrder:31,recipe:[{ingredientId:"green-apple-puree",quantity:60},{ingredientId:"soda-water",quantity:200},{ingredientId:"ice-cubes",quantity:100}]},{id:"rf-10",name:"Lemon Soda Pop",description:"A zesty and invigorating soda pop with a classic lemon flavor.",category:"Refreshments",sizes:[{name:"Grande",size:"16oz",price:69},{name:"Venti",size:"22oz",price:79}],imageUrl:he("refreshments/lemon-soda.jpg"),available:!0,stock:99,displayOrder:32,recipe:[{ingredientId:"lemon-juice",quantity:60},{ingredientId:"soda-water",quantity:200},{ingredientId:"ice-cubes",quantity:100}]},{id:"rf-11",name:"Lychee Soda Pop",description:"An exotic and fragrant soda pop with the sweet, floral taste of lychee.",category:"Refreshments",sizes:[{name:"Grande",size:"16oz",price:69},{name:"Venti",size:"22oz",price:79}],imageUrl:he("refreshments/lychee-soda.jpg"),available:!0,stock:99,displayOrder:33,recipe:[{ingredientId:"lychee-syrup",quantity:60},{ingredientId:"soda-water",quantity:200},{ingredientId:"ice-cubes",quantity:100}]},{id:"rf-12",name:"Mango Soda Pop",description:"A tropical and bubbly soda bursting with sweet mango flavor.",category:"Refreshments",sizes:[{name:"Grande",size:"16oz",price:69},{name:"Venti",size:"22oz",price:79}],imageUrl:he("refreshments/mango-soda.jpg"),available:!0,stock:99,displayOrder:34,recipe:[{ingredientId:"mango-puree",quantity:60},{ingredientId:"soda-water",quantity:200},{ingredientId:"ice-cubes",quantity:100}]},{id:"ml-01",name:"Breaded Bacon",description:"Crispy breaded bacon served with creamy white sauce and golden fries.",category:"Meals",sizes:[{name:"Ala Carte",size:"w/ Fries",price:119},{name:"Combo Meal",size:"w/ Fries & Drink",price:139}],imageUrl:he("menu/ala-carte-breaded-bacon-with-white-sauce and fries.jpg"),comboImageUrl:he("menu/combo-meals-breaded-bacon-with-white-sauce,-fries-and-a-drink.jpg"),available:!0,stock:99,popular:!0,displayOrder:35,recipe:[{ingredientId:"bacon-strips",quantity:.15},{ingredientId:"bread-crumbs",quantity:50},{ingredientId:"french-fries",quantity:.15},{ingredientId:"white-sauce",quantity:30},{ingredientId:"cooking-oil",quantity:100},{ingredientId:"takeout-pack",quantity:1}]},{id:"ml-02",name:"Breaded Porkchop",description:"A juicy breaded porkchop fried to perfection, served with white sauce and fries.",category:"Meals",sizes:[{name:"Ala Carte",size:"w/ Fries",price:129},{name:"Combo Meal",size:"w/ Fries & Drink",price:149}],imageUrl:he("menu/ala-carte-breaded-porkchop-with-white-sauce-and-fries.jpg"),comboImageUrl:he("menu/combo-meals-breaded-porkchop-with-white-sauce-and-fries-w-drink.jpg"),available:!0,stock:99,popular:!0,displayOrder:36,recipe:[{ingredientId:"porkchop",quantity:.2},{ingredientId:"bread-crumbs",quantity:60},{ingredientId:"french-fries",quantity:.15},{ingredientId:"white-sauce",quantity:30},{ingredientId:"cooking-oil",quantity:120},{ingredientId:"takeout-pack",quantity:1}]},{id:"ml-03",name:"Breaded Chicken",description:"Tender breaded chicken fillet with a side of fries and our signature white sauce.",category:"Meals",sizes:[{name:"Ala Carte",size:"w/ Fries",price:119},{name:"Combo Meal",size:"w/ Fries & Drink",price:139}],imageUrl:he("menu/ala-carte-chicken-with-white-sauce-and-fries.jpg"),comboImageUrl:he("menu/combo-meals-breaded-chicken-with-white-sauce,-fries-and-a-drink.jpg"),available:!0,stock:99,displayOrder:37,recipe:[{ingredientId:"chicken-fillet",quantity:.2},{ingredientId:"bread-crumbs",quantity:55},{ingredientId:"french-fries",quantity:.15},{ingredientId:"white-sauce",quantity:30},{ingredientId:"cooking-oil",quantity:110},{ingredientId:"takeout-pack",quantity:1}]}],$O=x.createContext(void 0),fQ=()=>{const t=x.useContext($O);if(!t)throw new Error("useProduct must be used within a ProductProvider");return t},mQ=({children:t})=>{const[e,n]=x.useState([]),[i,r]=x.useState(!0),[s,a]=x.useState(null),o=x.useCallback(async()=>{r(!0),a(null);try{const f=ut.collection("products"),p=f.orderBy("displayOrder","asc"),w=await p.get();if(w.empty){console.log("Products collection is empty. Seeding products with specific IDs...");const v=ut.batch();Sf.forEach(V=>{const{id:O,...S}=V,b=f.doc(O);v.set(b,S)}),await v.commit(),console.log(`Successfully seeded ${Sf.length} products to Firestore!`);const C=(await p.get()).docs.map(V=>({id:V.id,...V.data()}));n(C);return}const E=w.docs.map(v=>({id:v.id,...v.data()}));n(E);const A=ut.batch();let T=!1;Sf.forEach(v=>{const _=E.find(C=>C.id===v.id);if(_){const C=JSON.stringify(_.recipe||[]),V=JSON.stringify(v.recipe||[]);if(C!==V){const O=f.doc(v.id);A.update(O,{recipe:v.recipe}),T=!0,console.log(`Syncing recipe for ${v.name}`)}}}),T&&(await A.commit(),console.log(" Recipes synced from code to Firestore"))}catch(f){f.code==="permission-denied"?console.info("Firestore permission denied. This is expected if security rules are not yet configured or if you are offline. Falling back to mock data for demonstration."):console.warn("Error fetching products from Firestore. Falling back to mock data.",f),n(Sf),a(null)}finally{r(!1)}},[]);x.useEffect(()=>{o()},[o]);const d={products:e,isLoading:i,error:s,addProduct:async f=>{try{await ut.collection("products").add(f),await o()}catch(p){throw console.error("Error adding product: ",p),new Error("Failed to add product.")}},updateProduct:async(f,p)=>{try{await ut.collection("products").doc(f).update(p),await o()}catch(w){throw console.error("Error updating product: ",w),new Error("Failed to update product.")}},deleteProduct:async f=>{try{await ut.collection("products").doc(f).delete(),await o()}catch(p){throw console.error("Error deleting product: ",p),new Error("Failed to delete product.")}}};return y.jsx($O.Provider,{value:d,children:t})},KO=x.createContext(void 0),QO=()=>{const t=x.useContext(KO);if(t===void 0)throw new Error("useCart must be used within a CartProvider");return t},pQ=({children:t})=>{const[e,n]=x.useState([]),[i,r]=x.useState(!1),[s,a]=x.useState(null),[o,l]=x.useState(!0),[c,h]=x.useState([]),{currentUser:d}=Rc(),{products:f,isLoading:p}=fQ();x.useEffect(()=>{if(s){const k=setTimeout(()=>a(null),4e3);return()=>clearTimeout(k)}},[s]);const w=x.useCallback(k=>{a(k)},[]);x.useEffect(()=>{d?(async()=>{var P;if(!(!d||p)){l(!0);try{const ee=await ut.collection("users").doc(d.uid).get();if(ee.exists){const Y=(((P=ee.data())==null?void 0:P.cart)||[]).map(B=>{const te=f.find(Kn=>Kn.id===B.productId);if(!te)return null;const oe=te.sizes.find(Kn=>Kn.name===B.sizeName);if(!oe)return null;const $n=B.customizations?JSON.stringify(B.customizations):"";return{id:`${te.id}-${oe.name}-${$n}`,product:te,selectedSize:oe,quantity:B.quantity,customizations:B.customizations}}).filter(B=>B!==null);n(Y)}}catch(ie){console.error("Error fetching cart from Firestore:",ie),w("Couldn't load your cart.")}finally{l(!1)}}})():(n([]),l(!1))},[d,f,p,w]);const E=x.useCallback(async k=>{if(d)try{const P=ut.collection("users").doc(d.uid),ie=k.map(ee=>{const G={};return ee.customizations&&(ee.customizations.sugarLevel!==void 0&&(G.sugarLevel=ee.customizations.sugarLevel),ee.customizations.iceLevel!==void 0&&(G.iceLevel=ee.customizations.iceLevel),ee.customizations.toppings!==void 0&&(G.toppings=ee.customizations.toppings)),{productId:ee.product.id,sizeName:ee.selectedSize.name,quantity:ee.quantity,...Object.keys(G).length>0&&{customizations:G}}});await P.set({cart:ie},{merge:!0})}catch(P){console.error("Error updating Firestore cart:",P),w("Error saving your cart.")}},[d,w]),A=x.useMemo(()=>e.reduce((k,P)=>k+P.quantity,0),[e]),T=()=>r(!0),v=()=>r(!1),_=(k,P,ie,ee=1)=>{const G=ie?JSON.stringify(ie):"",Y=`${k.id}-${P.name}-${G}`;let B;e.find(oe=>oe.id===Y)?B=e.map(oe=>oe.id===Y?{...oe,quantity:Math.min(oe.quantity+ee,k.stock)}:oe):B=[...e,{id:Y,product:k,selectedSize:P,quantity:Math.min(ee,k.stock),customizations:ie}],n(B),E(B),w(`${k.name} (${P.name}) added to cart!`),T()},C=k=>{if(!k||k.length===0)return;let P=[...e],ie=0;k.forEach(ee=>{const G=ee.customizations?JSON.stringify(ee.customizations):"",Y=`${ee.product.id}-${ee.selectedSize.name}-${G}`,B=P.findIndex(te=>te.id===Y);if(B>-1){const te=P[B],oe=te.quantity+ee.quantity;P[B]={...te,quantity:Math.min(oe,ee.product.stock)}}else P.push({id:Y,product:ee.product,selectedSize:ee.selectedSize,quantity:Math.min(ee.quantity,ee.product.stock),customizations:ee.customizations});ie+=ee.quantity}),n(P),E(P),w(`${ie} item(s) added to your cart!`),T()},V=(k,P)=>{let ie;P<1?ie=e.filter(ee=>ee.id!==k):ie=e.map(ee=>ee.id===k?{...ee,quantity:Math.min(P,ee.product.stock)}:ee),n(ie),E(ie)},O=k=>{const P=e.find(ee=>ee.id===k),ie=e.filter(ee=>ee.id!==k);n(ie),E(ie),P&&w(`${P.product.name} (${P.selectedSize.name}) removed from cart.`)},S=()=>{n([]),h([]),E([])},b=k=>{h(P=>P.includes(k)?P.filter(ie=>ie!==k):[...P,k])},R=()=>{h(e.map(k=>k.id))},D=()=>{h([])};x.useEffect(()=>{const k=e.map(P=>P.id);h(P=>{const ie=P.filter(G=>k.includes(G)),ee=k.filter(G=>!P.includes(G));return[...ie,...ee]})},[e]);const N={cartItems:e,isCartOpen:i,toastMessage:s,totalCartItems:A,isCartLoading:o,selectedItemIds:c,addToCart:_,addMultipleToCart:C,updateQuantity:V,removeFromCart:O,openCart:T,closeCart:v,showToast:w,toggleItemSelection:b,selectAllItems:R,deselectAllItems:D,clearCart:S};return y.jsx(KO.Provider,{value:N,children:t})},$s=({className:t,...e})=>y.jsxs("svg",{viewBox:"0 0 241 175",xmlns:"http://www.w3.org/2000/svg",className:t,fill:"currentColor",...e,children:[y.jsx("path",{d:"M153.092 78.5C178.275 50.84 210.393 19.4076 222.5 17.5C234.607 15.5924 239.5 30 239.5 30C239.5 30 244.137 46.596 236.388 72.8253C228.64 99.0547 199 128.5 199 128.5C199 128.5 177.5 152.5 147.5 167C147.5 167 114.686 183.001 104.889 169.159C95.0912 155.316 127.909 106.16 153.092 78.5Z"}),y.jsx("path",{d:"M8.99445 86.0801C8.99445 86.0801 -16.2682 31.1886 17.8826 14.4198C33.7618 9.56756 76 55.675 76 64.5C76 70 63.7899 86.337 59 101.5C54.887 114.52 55.557 134.266 52.0896 135.774C48.0468 137.533 37.3644 137.835 8.99445 86.0801Z"}),y.jsx("path",{d:"M47 12.5C41.0274 7.52362 41.5502 -7.59339e-06 52.5 0C63.4498 7.5934e-06 69.3348 2.24286 82.0884 7.45282C95.3718 12.8792 105.888 16.4103 109.463 23.875C111.5 32.5 107.979 33.026 103.5 38.5C99.0205 43.9741 96 44.1666 91 43.5C83.5342 42.5047 52.9726 17.4764 47 12.5Z"}),y.jsx("path",{d:"M200.048 20.8891C212.988 11.4339 207.491 2.52815 200.048 2.97405C192.604 3.41995 127.379 9.72972 89.5542 67.6673C85.4261 73.9905 72.4385 95.2439 69.1452 112.455C65.6022 130.971 65.8681 149.097 73.6272 157.74C81.0528 166.012 88.1891 164.145 92.2823 156.482C96.4277 148.721 97.4982 135.065 100.004 127.882C104.983 113.605 104.907 116.382 109.393 106.379C114.278 95.4879 120.938 86.2377 126.993 78.4363C154.543 42.9442 190.775 27.6646 200.048 20.8891Z"})]}),gQ=({children:t,className:e="",hover:n=!1,variant:i="default",padding:r="md",clickable:s=!1,onClick:a})=>{const o="rounded-2xl transition-all duration-300 ease-out",l={default:"border border-gray-100 bg-white/80 backdrop-blur-sm shadow-lg",elevated:"bg-white shadow-xl border-0",outlined:"border-2 border-primary-200 bg-white",glass:"bg-white/70 backdrop-blur-md border border-white/20 shadow-xl"},c={none:"",sm:"p-4",md:"p-6",lg:"p-8"},h=n?"hover:shadow-2xl hover:-translate-y-1 hover:scale-[1.02]":"",d=s?"cursor-pointer active:scale-[0.98]":"";return y.jsx("div",{className:`${o} ${l[i]} ${c[r]} ${h} ${d} ${e}`,onClick:s?a:void 0,role:s?"button":void 0,tabIndex:s?0:void 0,children:t})},yQ=({isOpen:t,onClose:e,title:n,children:i,footer:r,size:s="md",hideHeader:a=!1,hideCloseButton:o=!1,className:l=""})=>{const[c,h]=x.useState(!1);if(x.useEffect(()=>{const f=p=>{p.key==="Escape"&&e()};return document.addEventListener("keydown",f),()=>document.removeEventListener("keydown",f)},[e]),x.useEffect(()=>{window.getComputedStyle(document.body).overflow;const f=document.getElementById("admin-main-content");return t?(document.body.style.overflow="hidden",f&&(window.getComputedStyle(f).overflow,f.style.overflow="hidden")):(document.body.style.overflow="",f&&(f.style.overflow="")),()=>{document.body.style.overflow="",f&&(f.style.overflow="")}},[t]),x.useEffect(()=>{if(t){h(!0);const f=setTimeout(()=>{h(!1)},1e3);return()=>clearTimeout(f)}},[t,s,i]),!t)return null;const d={sm:"max-w-sm",md:"max-w-md",lg:"max-w-lg",xl:"max-w-2xl"};return typeof document<"u"?sC.createPortal(y.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 p-4 backdrop-blur-sm animate-fade-in",role:"dialog","aria-modal":"true","aria-labelledby":n?"modal-title":void 0,onClick:e,children:y.jsx("div",{className:`relative w-full transform transition-all ${d[s]} ${l} max-h-[90vh] flex flex-col animate-scale-in`,onClick:f=>f.stopPropagation(),children:y.jsxs(gQ,{variant:"elevated",className:"rounded-3xl p-0 shadow-2xl flex flex-col max-h-full overflow-hidden bg-white",children:[!o&&y.jsx("button",{onClick:e,className:"absolute right-6 top-6 z-10 rounded-full p-2 text-gray-400 transition-all hover:bg-gray-100 hover:text-gray-600 active:scale-95","aria-label":"Close modal",children:y.jsx(qp,{className:"h-6 w-6"})}),!a&&n&&y.jsx("div",{className:"px-8 pt-8 pb-2 flex-shrink-0",children:y.jsx("h3",{id:"modal-title",className:"text-2xl font-bold text-gray-900",children:n})}),y.jsx("div",{className:`${a&&!n?"p-6 pb-10":"px-6 py-6 pb-10"} overflow-y-auto custom-scrollbar ${c?"scrollbar-flash":""} flex-1`,children:i}),r&&y.jsx("div",{className:"flex justify-end gap-3 px-6 pb-2 pt-2 flex-shrink-0",children:r})]})})}),document.body):null},_Q=()=>y.jsxs("svg",{className:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[y.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),y.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),y.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l3.66-2.84z",fill:"#FBBC05"}),y.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),vQ=({onForgotPassword:t,onRegister:e,onSuccess:n,onVerificationNeeded:i})=>{const[r,s]=x.useState(""),[a,o]=x.useState(""),[l,c]=x.useState(!1),[h,d]=x.useState(!1),[f,p]=x.useState(!1),[w,E]=x.useState(!1),[A,T]=x.useState(null),{login:v,signInWithGoogle:_}=Rc(),C=async O=>{if(O.preventDefault(),!r||!a){T("Please fill in all fields");return}p(!0),T(null);try{const S=await v(r,a,l);S.needsVerification&&S.userId?i(r,S.userId,S.role):n(S.role)}catch(S){T(S.message||"Failed to login")}finally{p(!1)}},V=async()=>{E(!0),T(null);try{const O=await _();n(O.role)}catch(O){T(O.message||"Failed to sign in with Google")}finally{E(!1)}};return y.jsxs("div",{className:"w-full max-w-md mx-auto",children:[y.jsxs("div",{className:"text-center mb-8",children:[y.jsx($s,{className:"mx-auto h-16 w-16 text-coffee-600 mb-4"}),y.jsx("h2",{className:"font-display text-4xl font-bold text-gray-900",children:"Rush Coffee"})]}),y.jsxs("form",{onSubmit:C,className:"space-y-4",children:[A&&y.jsxs("div",{className:"flex items-start gap-2 rounded-lg bg-red-50 p-3 text-sm text-red-800 border border-red-200",children:[y.jsx(l2,{className:"h-5 w-5 flex-shrink-0"}),y.jsx("span",{children:A})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email address"}),y.jsxs("div",{className:"relative",children:[y.jsx(qT,{className:"absolute left-4 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),y.jsx("input",{type:"email",value:r,onChange:O=>s(O.target.value),className:"w-full pl-12 pr-4 py-3.5 bg-coffee-50 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-coffee-500 focus:border-coffee-500 focus:bg-white transition-all placeholder:text-gray-400",placeholder:"name@example.com"})]})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),y.jsxs("div",{className:"relative",children:[y.jsx(xv,{className:"absolute left-4 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),y.jsx("input",{type:h?"text":"password",value:a,onChange:O=>o(O.target.value),className:"w-full pl-12 pr-12 py-3.5 bg-coffee-50 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-coffee-500 focus:border-coffee-500 focus:bg-white transition-all placeholder:text-gray-400",placeholder:"Enter your password"}),y.jsx("button",{type:"button",onClick:()=>d(!h),className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors",children:h?y.jsx(c2,{className:"h-5 w-5"}):y.jsx(u2,{className:"h-5 w-5"})})]})]}),y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsxs("label",{className:"flex items-center cursor-pointer",children:[y.jsx("input",{type:"checkbox",checked:l,onChange:O=>c(O.target.checked),className:"w-4 h-4 rounded border-gray-300 text-coffee-600 focus:ring-coffee-500"}),y.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Remember me"})]}),y.jsx("button",{type:"button",onClick:t,className:"text-sm text-coffee-600 hover:text-coffee-700 font-medium transition-colors",children:"Forgot your password?"})]}),y.jsx("button",{type:"submit",disabled:f,className:"w-full bg-coffee-600 hover:bg-coffee-700 text-white font-semibold py-3.5 rounded-xl transition-all transform hover:scale-[1.02] active:scale-[0.98] disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none shadow-md hover:shadow-lg",children:f?y.jsxs("span",{className:"flex items-center justify-center gap-2",children:[y.jsx(bh,{className:"h-5 w-5 animate-spin"}),"Logging in..."]}):"Login"}),y.jsxs("div",{className:"relative my-6",children:[y.jsx("div",{className:"absolute inset-0 flex items-center",children:y.jsx("div",{className:"w-full border-t border-gray-200"})}),y.jsx("div",{className:"relative flex justify-center text-sm",children:y.jsx("span",{className:"px-4 bg-white text-gray-500",children:"Or continue with"})})]}),y.jsxs("button",{type:"button",onClick:V,disabled:w,className:"w-full flex items-center justify-center gap-3 border-2 border-gray-200 hover:border-gray-300 hover:bg-gray-50 py-3.5 rounded-xl transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:[w?y.jsx(bh,{className:"h-5 w-5 animate-spin"}):y.jsx(_Q,{}),y.jsx("span",{className:"font-semibold text-gray-700",children:"Google"})]}),y.jsxs("p",{className:"text-center text-sm text-gray-600 mt-6",children:["Don't have an account?"," ",y.jsx("button",{type:"button",onClick:e,className:"text-coffee-600 font-semibold hover:text-coffee-700 transition-colors",children:"Sign up"})]})]})]})},TQ=x.createContext(void 0),wQ=()=>{const t=x.useContext(TQ);return t||{executeRecaptcha:async()=>"mock-token"}},bQ=({onLogin:t,onSuccess:e,onVerificationNeeded:n})=>{const[i,r]=x.useState({firstName:"",lastName:"",email:"",phone:"",password:"",confirmPassword:""}),[s,a]=x.useState(!1),[o,l]=x.useState(!1),[c,h]=x.useState(null),{register:d}=Rc(),{executeRecaptcha:f}=wQ(),p=async w=>{if(w.preventDefault(),h(null),i.password!==i.confirmPassword){h("Passwords don't match");return}l(!0);try{await f();const E=await d(i.email,i.password,i.firstName,i.lastName,i.phone);n(i.email,E.uid,E.role)}catch(E){h(E.message||"Failed to register")}finally{l(!1)}};return y.jsxs("div",{className:"w-full max-w-2xl mx-auto",children:[y.jsxs("div",{className:"text-center mb-6",children:[y.jsx($s,{className:"mx-auto h-16 w-16 text-coffee-600 mb-4"}),y.jsx("h2",{className:"font-display text-4xl font-bold text-gray-900",children:"Join Rush Coffee"}),y.jsxs("p",{className:"mt-2 text-gray-600 flex items-center justify-center gap-1",children:["Start skipping the line today ",y.jsx("span",{children:""})]})]}),y.jsxs("form",{onSubmit:p,className:"space-y-4",children:[c&&y.jsxs("div",{className:"flex items-start gap-2 rounded-lg bg-red-50 p-3 text-sm text-red-800 border border-red-200",children:[y.jsx(l2,{className:"h-5 w-5 flex-shrink-0"}),y.jsx("span",{children:c})]}),y.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"First Name"}),y.jsxs("div",{className:"relative",children:[y.jsx(Cv,{className:"absolute left-4 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),y.jsx("input",{type:"text",required:!0,value:i.firstName,onChange:w=>r({...i,firstName:w.target.value}),className:"w-full pl-12 pr-4 py-3.5 bg-coffee-50 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-coffee-500 focus:border-coffee-500 focus:bg-white transition-all placeholder:text-gray-400",placeholder:"Enter first name"})]})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Last Name"}),y.jsxs("div",{className:"relative",children:[y.jsx(Cv,{className:"absolute left-4 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),y.jsx("input",{type:"text",required:!0,value:i.lastName,onChange:w=>r({...i,lastName:w.target.value}),className:"w-full pl-12 pr-4 py-3.5 bg-coffee-50 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-coffee-500 focus:border-coffee-500 focus:bg-white transition-all placeholder:text-gray-400",placeholder:"Enter last name"})]})]})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email address"}),y.jsxs("div",{className:"relative",children:[y.jsx(qT,{className:"absolute left-4 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),y.jsx("input",{type:"email",required:!0,value:i.email,onChange:w=>r({...i,email:w.target.value}),className:"w-full pl-12 pr-4 py-3.5 bg-coffee-50 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-coffee-500 focus:border-coffee-500 focus:bg-white transition-all placeholder:text-gray-400",placeholder:"name@example.com"})]})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number (Optional)"}),y.jsxs("div",{className:"relative",children:[y.jsx(HT,{className:"absolute left-4 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),y.jsx("input",{type:"tel",value:i.phone,onChange:w=>r({...i,phone:w.target.value}),className:"w-full pl-12 pr-4 py-3.5 bg-coffee-50 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-coffee-500 focus:border-coffee-500 focus:bg-white transition-all placeholder:text-gray-400",placeholder:"09xxxxxxxxx"})]})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),y.jsxs("div",{className:"relative",children:[y.jsx(xv,{className:"absolute left-4 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),y.jsx("input",{type:s?"text":"password",required:!0,value:i.password,onChange:w=>r({...i,password:w.target.value}),className:"w-full pl-12 pr-12 py-3.5 bg-coffee-50 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-coffee-500 focus:border-coffee-500 focus:bg-white transition-all placeholder:text-gray-400",placeholder:"Create a password"}),y.jsx("button",{type:"button",onClick:()=>a(!s),className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors",children:s?y.jsx(c2,{className:"h-5 w-5"}):y.jsx(u2,{className:"h-5 w-5"})})]})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm Password"}),y.jsxs("div",{className:"relative",children:[y.jsx(xv,{className:"absolute left-4 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),y.jsx("input",{type:s?"text":"password",required:!0,value:i.confirmPassword,onChange:w=>r({...i,confirmPassword:w.target.value}),className:"w-full pl-12 pr-4 py-3.5 bg-coffee-50 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-coffee-500 focus:border-coffee-500 focus:bg-white transition-all placeholder:text-gray-400",placeholder:"Confirm your password"})]})]}),y.jsx("button",{type:"submit",disabled:o,className:"w-full bg-coffee-600 hover:bg-coffee-700 text-white font-semibold py-3.5 rounded-xl transition-all transform hover:scale-[1.02] active:scale-[0.98] disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none shadow-md hover:shadow-lg",children:o?y.jsxs("span",{className:"flex items-center justify-center gap-2",children:[y.jsx(bh,{className:"h-5 w-5 animate-spin"}),"Creating account..."]}):"Create Account"}),y.jsxs("p",{className:"text-center text-sm text-gray-600 mt-6",children:["Already have an account?"," ",y.jsx("button",{type:"button",onClick:t,className:"text-coffee-600 font-semibold hover:text-coffee-700 transition-colors",children:"Login"})]})]})]})},EQ=({isOpen:t,onClose:e,initialView:n="login",onVerificationNeeded:i,onAuthSuccess:r})=>{const[s,a]=hm.useState(n);return hm.useEffect(()=>{t&&a(n)},[t,n]),y.jsx(yQ,{isOpen:t,onClose:e,hideHeader:!0,size:s==="register"?"xl":"md",children:s==="login"?y.jsx(vQ,{onForgotPassword:()=>{},onRegister:()=>a("register"),onSuccess:o=>r(o),onVerificationNeeded:(o,l,c)=>i==null?void 0:i(o,l,c)},"login"):y.jsx(bQ,{onLogin:()=>a("login"),onSuccess:()=>r(),onVerificationNeeded:(o,l,c)=>i==null?void 0:i(o,l,c)},"register")})},AQ=[{href:"/",label:"Home"},{href:"/about",label:"About"},{href:"/menu",label:"Menu"},{href:"/contact",label:"Contact"}],SQ=[{href:"/menu",label:"Menu"},{href:"/queue",label:"Queue"},{href:"/rewards",label:"Rewards"}],ER=[{href:"/profile",label:"My Profile",Icon:Cv},{href:"/rewards",label:"My Rewards",Icon:Y3},{href:"/about",label:"About",Icon:h2},{href:"/contact",label:"Contact",Icon:HT}],IQ=()=>{const[t,e]=x.useState(!1),[n,i]=x.useState(!1),r=x.useRef(null),[s,a]=x.useState(!1),[o,l]=x.useState("login"),[c,h]=x.useState(!1),[d,f]=x.useState(""),[p,w]=x.useState(""),{currentUser:E,logout:A}=Rc(),{totalCartItems:T,openCart:v}=QO(),_=fc(),C=fi(),[V]=A3(),O=C.pathname==="/auth/verify-email",S=sessionStorage.getItem("requires2FA")==="true",b=E&&!O&&!S&&!s&&C.pathname!=="/",R=b?SQ:AQ,D=()=>e(!1),N=B=>{l(B),a(!0),D()};x.useEffect(()=>{const B=V.get("auth");B==="login"?(l("login"),a(!0)):B==="register"&&(l("register"),a(!0))},[V]);const k=(B,te,oe)=>{a(!1),P(oe)},P=B=>{a(!1),h(!1),sessionStorage.removeItem("requires2FA");const te=B||(E==null?void 0:E.role);_(te==="admin"?"/admin":te==="employee"?"/employee":"/menu")};x.useEffect(()=>{const B=te=>{r.current&&!r.current.contains(te.target)&&i(!1)};return document.addEventListener("mousedown",B),()=>document.removeEventListener("mousedown",B)},[]),x.useEffect(()=>{const B=()=>{window.innerWidth>=768&&e(!1)};return window.addEventListener("resize",B),()=>window.removeEventListener("resize",B)},[]),x.useEffect(()=>(t?document.body.style.overflow="hidden":document.body.style.overflow="auto",()=>{document.body.style.overflow="auto"}),[t]);const ie=async()=>{await A(),D(),i(!1),_("/")},ee=()=>e(!t),G=(B=!1)=>{const te="rounded-full text-sm font-semibold transition-colors",oe="block w-full text-center py-3 text-base",$n="px-6 py-2";return b?y.jsxs("div",{className:`relative ${B?"w-full":""}`,ref:r,children:[y.jsxs("button",{onClick:()=>i(!n),className:`flex w-full items-center justify-center gap-2 rounded-full border border-primary-600 px-4 py-2 text-sm font-semibold text-primary-600 transition-colors hover:bg-primary-50 ${B?"text-base":""}`,"aria-haspopup":"true","aria-expanded":n,children:[y.jsxs("span",{children:["Welcome, ",E.firstName,"!"]}),y.jsx(z3,{className:`h-4 w-4 transition-transform ${n?"rotate-180":""}`})]}),n&&!B&&y.jsx("div",{className:"absolute right-0 mt-2 w-56 origin-top-right rounded-md bg-white shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none animate-fade-in-up",children:y.jsxs("div",{className:"py-1",role:"menu","aria-orientation":"vertical",children:[ER.map(In=>y.jsxs(pi,{to:In.href,onClick:()=>i(!1),className:({isActive:Kn})=>`flex items-center gap-3 px-4 py-2 text-sm transition-colors hover:bg-gray-100 ${Kn?"text-primary-600 font-semibold":"text-gray-700"}`,role:"menuitem",children:[y.jsx(In.Icon,{className:"h-4 w-4"}),In.label]},In.label)),(E.role==="employee"||E.role==="admin")&&y.jsxs(y.Fragment,{children:[y.jsx("hr",{className:"my-1"}),y.jsxs(pi,{to:"/employee",onClick:()=>i(!1),className:"flex items-center gap-3 px-4 py-2 text-sm font-semibold text-blue-700 transition-colors hover:bg-blue-50",role:"menuitem",children:[y.jsx(ff,{className:"h-4 w-4"}),"Employee Portal"]})]}),E.role==="admin"&&y.jsxs(pi,{to:"/admin",onClick:()=>i(!1),className:"flex items-center gap-3 px-4 py-2 text-sm font-semibold text-yellow-700 transition-colors hover:bg-yellow-50",role:"menuitem",children:[y.jsx(ff,{className:"h-4 w-4"}),"Admin Dashboard"]}),y.jsx("hr",{className:"my-1"}),y.jsxs("button",{onClick:ie,className:"flex w-full items-center gap-3 px-4 py-2 text-left text-sm text-red-600 transition-colors hover:bg-red-50",role:"menuitem",children:[y.jsx(eI,{className:"h-4 w-4"}),"Logout"]})]})})]}):y.jsxs("div",{className:`flex items-center ${B?"flex-col space-y-3":"gap-4"}`,children:[y.jsx("button",{onClick:()=>N("login"),className:`${te} border border-primary-600 text-primary-600 hover:bg-primary-50 ${B?oe:$n}`,children:"Login"}),y.jsx("button",{onClick:()=>N("register"),className:`${te} bg-primary-600 text-white shadow-sm hover:bg-primary-700 ${B?oe:$n}`,children:"Sign Up"})]})},Y=()=>y.jsxs("button",{onClick:v,className:"relative rounded-full p-2 text-gray-700 transition hover:bg-gray-100","aria-label":`Open cart with ${T} items`,children:[y.jsx(gz,{className:"h-6 w-6"}),T>0&&y.jsx("span",{className:"absolute -top-1 -right-1 flex h-5 w-5 items-center justify-center rounded-full bg-red-500 text-xs font-bold text-white","aria-hidden":"true",children:T})]});return y.jsxs(y.Fragment,{children:[y.jsx("header",{className:"sticky top-0 z-50 w-full border-b border-gray-200/80 bg-white/95 shadow-md backdrop-blur-sm",children:y.jsxs("div",{className:"container mx-auto flex h-16 items-center justify-between px-4 sm:h-20 sm:px-6 lg:px-8 md:grid md:grid-cols-3",children:[y.jsxs(pi,{to:"/",className:"flex items-center gap-2 flex-shrink-0 md:justify-self-start",children:[y.jsx($s,{className:"h-7 w-7 text-primary-600 sm:h-8 sm:w-8"}),y.jsx("span",{className:"text-lg font-bold text-primary-600 whitespace-nowrap sm:text-2xl",children:"Rush Coffee"})]}),y.jsx("nav",{className:"hidden items-center justify-center space-x-8 md:flex md:justify-self-center",children:R.map(B=>y.jsx(pi,{to:B.href,className:({isActive:te})=>`relative text-sm font-normal uppercase transition-colors hover:text-primary-600 ${te?"text-primary-600":"text-gray-700"} after:absolute after:bottom-0 after:left-0 after:h-[1px] after:w-full after:origin-center after:transform after:bg-primary-600 after:transition-transform after:duration-300 ${te?"after:scale-x-100":"after:scale-x-0"} hover:after:scale-x-100`,children:B.label},B.label))}),y.jsxs("div",{className:"hidden items-center justify-end gap-4 md:flex md:justify-self-end",children:[G(),b&&y.jsx(Y,{})]}),y.jsxs("div",{className:"flex items-center justify-end gap-2 md:hidden",children:[b&&y.jsx(Y,{}),y.jsx("button",{onClick:ee,className:"rounded-md p-2 text-gray-700 transition hover:bg-gray-100","aria-label":"Toggle menu","aria-expanded":t,children:y.jsx(oz,{className:"h-6 w-6"})})]})]})}),y.jsxs("div",{className:`fixed inset-0 z-[60] md:hidden ${t?"pointer-events-auto":"pointer-events-none"}`,children:[y.jsx("div",{className:`absolute inset-0 bg-black/60 backdrop-blur-sm transition-opacity duration-300 ${t?"opacity-100":"opacity-0"}`,onClick:D,"aria-hidden":"true"}),y.jsxs("div",{className:`absolute top-0 right-0 h-full w-4/5 max-w-sm transform bg-white shadow-2xl transition-transform duration-300 ease-out ${t?"translate-x-0":"translate-x-full"}`,role:"dialog","aria-modal":"true","aria-labelledby":"mobile-menu-title",children:[y.jsxs("div",{className:"flex items-center justify-between border-b p-4",children:[y.jsxs(pi,{to:"/",className:"flex items-center gap-2",onClick:D,children:[y.jsx($s,{className:"h-7 w-7 text-primary-600"}),y.jsx("span",{id:"mobile-menu-title",className:"text-xl font-bold text-primary-600",children:"Rush Coffee"})]}),y.jsx("button",{onClick:D,className:"rounded-full p-2 text-gray-500 transition hover:bg-gray-100 hover:text-gray-700","aria-label":"Close menu",children:y.jsx(qp,{className:"h-6 w-6"})})]}),y.jsxs("nav",{className:"flex flex-1 flex-col gap-2 overflow-y-auto p-4",children:[R.map(B=>y.jsx(pi,{to:B.href,onClick:D,className:({isActive:te})=>`rounded-xl px-4 py-3 text-lg font-medium transition-all ${te?"bg-primary-50 text-primary-700":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"}`,children:B.label},B.label)),b&&y.jsxs("div",{className:"mt-4 border-t pt-4",children:[y.jsx("p",{className:"mb-2 px-4 text-xs font-semibold uppercase tracking-wider text-gray-400",children:"Account"}),ER.map(B=>y.jsxs(pi,{to:B.href,onClick:D,className:({isActive:te})=>`flex items-center gap-3 rounded-xl px-4 py-3 text-base font-medium transition-all ${te?"bg-primary-50 text-primary-700":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"}`,children:[y.jsx(B.Icon,{className:"h-5 w-5"}),B.label]},B.label)),(E.role==="employee"||E.role==="admin")&&y.jsxs(pi,{to:"/employee",onClick:D,className:({isActive:B})=>`flex items-center gap-3 rounded-xl px-4 py-3 text-base font-medium transition-all ${B?"bg-blue-50 text-blue-800":"text-blue-700 hover:bg-blue-50"}`,children:[y.jsx(ff,{className:"h-5 w-5"}),"Employee Portal"]}),E.role==="admin"&&y.jsxs(pi,{to:"/admin",onClick:D,className:({isActive:B})=>`flex items-center gap-3 rounded-xl px-4 py-3 text-base font-medium transition-all ${B?"bg-yellow-50 text-yellow-800":"text-yellow-700 hover:bg-yellow-50"}`,children:[y.jsx(ff,{className:"h-5 w-5"}),"Admin Dashboard"]})]})]}),y.jsx("div",{className:"border-t p-4",children:b?y.jsxs("button",{onClick:ie,className:"flex w-full items-center justify-center gap-2 rounded-xl bg-red-50 px-6 py-3 text-base font-semibold text-red-600 transition-colors hover:bg-red-100",children:[y.jsx(eI,{className:"h-5 w-5"}),"Logout"]}):G(!0)})]})]}),y.jsx(EQ,{isOpen:s,onClose:()=>a(!1),initialView:o,onVerificationNeeded:k,onAuthSuccess:P})]})},RQ=()=>y.jsxs("footer",{className:"relative bg-coffee-900 text-coffee-200",children:[y.jsx("div",{className:"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/cubes.png')] opacity-5"}),y.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/50 to-transparent"}),y.jsxs("div",{className:"container relative z-10 mx-auto grid grid-cols-2 gap-8 px-6 py-12 md:grid-cols-2 lg:grid-cols-4",children:[y.jsxs("div",{className:"col-span-2 space-y-4 md:col-span-1 lg:col-span-1",children:[y.jsxs(Xn,{to:"/",className:"flex items-center gap-2",children:[y.jsx($s,{className:"h-8 w-8 text-primary-500"}),y.jsx("span",{className:"font-display text-2xl font-bold text-white",children:"Rush Coffee"})]}),y.jsx("p",{className:"font-medium text-white",children:"Premium coffee, no waiting."}),y.jsx("p",{className:"text-sm leading-relaxed text-coffee-200/80",children:"Join the digital queue and get your coffee fix faster than ever. Experience the future of coffee ordering."})]}),y.jsxs("div",{children:[y.jsx("h3",{className:"mb-6 font-display text-lg font-bold text-white",children:"Quick Links"}),y.jsxs("ul",{className:"space-y-3",children:[y.jsx("li",{children:y.jsx(Xn,{to:"/",className:"transition-colors hover:text-primary-400 hover:underline",children:"Home"})}),y.jsx("li",{children:y.jsx(Xn,{to:"/about",className:"transition-colors hover:text-primary-400 hover:underline",children:"About Us"})}),y.jsx("li",{children:y.jsx(Xn,{to:"/menu",className:"transition-colors hover:text-primary-400 hover:underline",children:"Menu"})}),y.jsx("li",{children:y.jsx(Xn,{to:"/faq",className:"transition-colors hover:text-primary-400 hover:underline",children:"FAQ"})}),y.jsx("li",{children:y.jsx(Xn,{to:"/contact",className:"transition-colors hover:text-primary-400 hover:underline",children:"Contact"})})]})]}),y.jsxs("div",{children:[y.jsx("h3",{className:"mb-6 font-display text-lg font-bold text-white",children:"Legal"}),y.jsxs("ul",{className:"space-y-3",children:[y.jsx("li",{children:y.jsx(Xn,{to:"/terms",className:"transition-colors hover:text-primary-400 hover:underline",children:"Terms of Service"})}),y.jsx("li",{children:y.jsx(Xn,{to:"/privacy",className:"transition-colors hover:text-primary-400 hover:underline",children:"Privacy Policy"})}),y.jsx("li",{children:y.jsx(Xn,{to:"/cookies",className:"transition-colors hover:text-primary-400 hover:underline",children:"Cookie Policy"})})]})]}),y.jsxs("div",{className:"col-span-2 md:col-span-1 lg:col-span-1",children:[y.jsx("h3",{className:"mb-6 font-display text-lg font-bold text-white",children:"Contact & Connect"}),y.jsx("address",{className:"not-italic",children:y.jsxs("ul",{className:"space-y-4",children:[y.jsxs("li",{className:"flex items-start gap-3",children:[y.jsx(sz,{className:"mt-1 h-5 w-5 flex-shrink-0 text-primary-500"}),y.jsx("span",{children:"11 Visayan Ave. St. Galas, Quezon City, Philippines"})]}),y.jsxs("li",{className:"flex items-center gap-3",children:[y.jsx(HT,{className:"h-5 w-5 flex-shrink-0 text-primary-500"}),y.jsx("a",{href:"tel:09304641022",className:"transition-colors hover:text-white",children:"0930 464 1022"})]}),y.jsxs("li",{className:"flex items-center gap-3",children:[y.jsx(qT,{className:"h-5 w-5 flex-shrink-0 text-primary-500"}),y.jsx("a",{href:"mailto:hello@rushcoffee.ph",className:"transition-colors hover:text-white",children:"hello@rushcoffee.ph"})]})]})}),y.jsxs("div",{className:"mt-8 flex gap-4",children:[y.jsx("a",{href:"https://www.facebook.com/profile.php?id=61551613276320",target:"_blank",rel:"noopener noreferrer","aria-label":"Facebook",className:"rounded-full bg-white/5 p-2 transition-colors hover:bg-primary-600 hover:text-white",children:y.jsx(Q3,{className:"h-5 w-5"})}),y.jsx("a",{href:"https://www.instagram.com/Rush_Coffee2023/",target:"_blank",rel:"noopener noreferrer","aria-label":"Instagram",className:"rounded-full bg-white/5 p-2 transition-colors hover:bg-primary-600 hover:text-white",children:y.jsx(Z3,{className:"h-5 w-5"})})]})]})]}),y.jsx("div",{className:"relative z-10 border-t border-white/10 bg-black/20",children:y.jsxs("div",{className:"container mx-auto flex flex-col items-center justify-between gap-4 px-6 py-6 text-center text-sm text-coffee-300 sm:flex-row",children:[y.jsx("p",{children:" 2023 Rush Coffee. All rights reserved."}),y.jsxs("p",{className:"flex items-center gap-1",children:["Made with ",y.jsx("span",{className:"text-red-500",children:""})," and ",y.jsx("span",{className:"text-amber-500",children:""})]})]})})]}),WO=x.createContext(void 0),YO=()=>{const t=x.useContext(WO);if(t===void 0)throw new Error("useNotification must be used within a NotificationProvider");return t},xQ=({children:t})=>{const[e,n]=x.useState({message:"",type:"info",isVisible:!1}),i=x.useCallback((a,o="info")=>{n({message:a,type:o,isVisible:!0}),setTimeout(()=>{n(l=>({...l,isVisible:!1}))},5e3)},[]),r=x.useCallback(()=>{n(a=>({...a,isVisible:!1}))},[]),s={notification:e,showNotification:i,hideNotification:r};return y.jsx(WO.Provider,{value:s,children:t})},Ub=x.createContext({});function zb(t){const e=x.useRef(null);return e.current===null&&(e.current=t()),e.current}const kg=x.createContext(null),jb=x.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class CQ extends x.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const i=this.props.sizeRef.current;i.height=n.offsetHeight||0,i.width=n.offsetWidth||0,i.top=n.offsetTop,i.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function PQ({children:t,isPresent:e}){const n=x.useId(),i=x.useRef(null),r=x.useRef({width:0,height:0,top:0,left:0}),{nonce:s}=x.useContext(jb);return x.useInsertionEffect(()=>{const{width:a,height:o,top:l,left:c}=r.current;if(e||!i.current||!a||!o)return;i.current.dataset.motionPopId=n;const h=document.createElement("style");return s&&(h.nonce=s),document.head.appendChild(h),h.sheet&&h.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${a}px !important;
            height: ${o}px !important;
            top: ${l}px !important;
            left: ${c}px !important;
          }
        `),()=>{document.head.removeChild(h)}},[e]),y.jsx(CQ,{isPresent:e,childRef:i,sizeRef:r,children:x.cloneElement(t,{ref:i})})}const DQ=({children:t,initial:e,isPresent:n,onExitComplete:i,custom:r,presenceAffectsLayout:s,mode:a})=>{const o=zb(NQ),l=x.useId(),c=x.useCallback(d=>{o.set(d,!0);for(const f of o.values())if(!f)return;i&&i()},[o,i]),h=x.useMemo(()=>({id:l,initial:e,isPresent:n,custom:r,onExitComplete:c,register:d=>(o.set(d,!1),()=>o.delete(d))}),s?[Math.random(),c]:[n,c]);return x.useMemo(()=>{o.forEach((d,f)=>o.set(f,!1))},[n]),x.useEffect(()=>{!n&&!o.size&&i&&i()},[n]),a==="popLayout"&&(t=y.jsx(PQ,{isPresent:n,children:t})),y.jsx(kg.Provider,{value:h,children:t})};function NQ(){return new Map}function XO(t=!0){const e=x.useContext(kg);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:i,register:r}=e,s=x.useId();x.useEffect(()=>{t&&r(s)},[t]);const a=x.useCallback(()=>t&&i&&i(s),[s,i,t]);return!n&&i?[!1,a]:[!0]}const If=t=>t.key||"";function AR(t){const e=[];return x.Children.forEach(t,n=>{x.isValidElement(n)&&e.push(n)}),e}const Bb=typeof window<"u",JO=Bb?x.useLayoutEffect:x.useEffect,kQ=({children:t,custom:e,initial:n=!0,onExitComplete:i,presenceAffectsLayout:r=!0,mode:s="sync",propagate:a=!1})=>{const[o,l]=XO(a),c=x.useMemo(()=>AR(t),[t]),h=a&&!o?[]:c.map(If),d=x.useRef(!0),f=x.useRef(c),p=zb(()=>new Map),[w,E]=x.useState(c),[A,T]=x.useState(c);JO(()=>{d.current=!1,f.current=c;for(let C=0;C<A.length;C++){const V=If(A[C]);h.includes(V)?p.delete(V):p.get(V)!==!0&&p.set(V,!1)}},[A,h.length,h.join("-")]);const v=[];if(c!==w){let C=[...c];for(let V=0;V<A.length;V++){const O=A[V],S=If(O);h.includes(S)||(C.splice(V,0,O),v.push(O))}s==="wait"&&v.length&&(C=v),T(AR(C)),E(c);return}const{forceRender:_}=x.useContext(Ub);return y.jsx(y.Fragment,{children:A.map(C=>{const V=If(C),O=a&&!o?!1:c===A||h.includes(V),S=()=>{if(p.has(V))p.set(V,!0);else return;let b=!0;p.forEach(R=>{R||(b=!1)}),b&&(_==null||_(),T(f.current),a&&(l==null||l()),i&&i())};return y.jsx(DQ,{isPresent:O,initial:!d.current||n?void 0:!1,custom:O?void 0:e,presenceAffectsLayout:r,mode:s,onExitComplete:O?void 0:S,children:C},V)})})},Bn=t=>t;let ZO=Bn;function Fb(t){let e;return()=>(e===void 0&&(e=t()),e)}const ec=(t,e,n)=>{const i=e-t;return i===0?1:(n-t)/i},vr=t=>t*1e3,Tr=t=>t/1e3,VQ={useManualTiming:!1};function OQ(t){let e=new Set,n=new Set,i=!1,r=!1;const s=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1};function o(c){s.has(c)&&(l.schedule(c),t()),c(a)}const l={schedule:(c,h=!1,d=!1)=>{const p=d&&i?e:n;return h&&s.add(c),p.has(c)||p.add(c),c},cancel:c=>{n.delete(c),s.delete(c)},process:c=>{if(a=c,i){r=!0;return}i=!0,[e,n]=[n,e],e.forEach(o),e.clear(),i=!1,r&&(r=!1,l.process(c))}};return l}const Rf=["read","resolveKeyframes","update","preRender","render","postRender"],MQ=40;function eM(t,e){let n=!1,i=!0;const r={delta:0,timestamp:0,isProcessing:!1},s=()=>n=!0,a=Rf.reduce((T,v)=>(T[v]=OQ(s),T),{}),{read:o,resolveKeyframes:l,update:c,preRender:h,render:d,postRender:f}=a,p=()=>{const T=performance.now();n=!1,r.delta=i?1e3/60:Math.max(Math.min(T-r.timestamp,MQ),1),r.timestamp=T,r.isProcessing=!0,o.process(r),l.process(r),c.process(r),h.process(r),d.process(r),f.process(r),r.isProcessing=!1,n&&e&&(i=!1,t(p))},w=()=>{n=!0,i=!0,r.isProcessing||t(p)};return{schedule:Rf.reduce((T,v)=>{const _=a[v];return T[v]=(C,V=!1,O=!1)=>(n||w(),_.schedule(C,V,O)),T},{}),cancel:T=>{for(let v=0;v<Rf.length;v++)a[Rf[v]].cancel(T)},state:r,steps:a}}const{schedule:He,cancel:Ks,state:Ot,steps:g_}=eM(typeof requestAnimationFrame<"u"?requestAnimationFrame:Bn,!0),tM=x.createContext({strict:!1}),SR={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},tc={};for(const t in SR)tc[t]={isEnabled:e=>SR[t].some(n=>!!e[n])};function LQ(t){for(const e in t)tc[e]={...tc[e],...t[e]}}const UQ=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function pp(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||UQ.has(t)}let nM=t=>!pp(t);function zQ(t){t&&(nM=e=>e.startsWith("on")?!pp(e):t(e))}try{zQ(require("@emotion/is-prop-valid").default)}catch{}function jQ(t,e,n){const i={};for(const r in t)r==="values"&&typeof t.values=="object"||(nM(r)||n===!0&&pp(r)||!e&&!pp(r)||t.draggable&&r.startsWith("onDrag"))&&(i[r]=t[r]);return i}function BQ(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...i)=>t(...i);return new Proxy(n,{get:(i,r)=>r==="create"?t:(e.has(r)||e.set(r,t(r)),e.get(r))})}const Vg=x.createContext({});function $h(t){return typeof t=="string"||Array.isArray(t)}function Og(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const qb=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Hb=["initial",...qb];function Mg(t){return Og(t.animate)||Hb.some(e=>$h(t[e]))}function iM(t){return!!(Mg(t)||t.variants)}function FQ(t,e){if(Mg(t)){const{initial:n,animate:i}=t;return{initial:n===!1||$h(n)?n:void 0,animate:$h(i)?i:void 0}}return t.inherit!==!1?e:{}}function qQ(t){const{initial:e,animate:n}=FQ(t,x.useContext(Vg));return x.useMemo(()=>({initial:e,animate:n}),[IR(e),IR(n)])}function IR(t){return Array.isArray(t)?t.join(" "):t}const HQ=Symbol.for("motionComponentSymbol");function tl(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function GQ(t,e,n){return x.useCallback(i=>{i&&t.onMount&&t.onMount(i),e&&(i?e.mount(i):e.unmount()),n&&(typeof n=="function"?n(i):tl(n)&&(n.current=i))},[e])}const Gb=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),$Q="framerAppearId",rM="data-"+Gb($Q),{schedule:$b}=eM(queueMicrotask,!1),sM=x.createContext({});function KQ(t,e,n,i,r){var s,a;const{visualElement:o}=x.useContext(Vg),l=x.useContext(tM),c=x.useContext(kg),h=x.useContext(jb).reducedMotion,d=x.useRef(null);i=i||l.renderer,!d.current&&i&&(d.current=i(t,{visualState:e,parent:o,props:n,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:h}));const f=d.current,p=x.useContext(sM);f&&!f.projection&&r&&(f.type==="html"||f.type==="svg")&&QQ(d.current,n,r,p);const w=x.useRef(!1);x.useInsertionEffect(()=>{f&&w.current&&f.update(n,c)});const E=n[rM],A=x.useRef(!!E&&!(!((s=window.MotionHandoffIsComplete)===null||s===void 0)&&s.call(window,E))&&((a=window.MotionHasOptimisedAnimation)===null||a===void 0?void 0:a.call(window,E)));return JO(()=>{f&&(w.current=!0,window.MotionIsMounted=!0,f.updateFeatures(),$b.render(f.render),A.current&&f.animationState&&f.animationState.animateChanges())}),x.useEffect(()=>{f&&(!A.current&&f.animationState&&f.animationState.animateChanges(),A.current&&(queueMicrotask(()=>{var T;(T=window.MotionHandoffMarkAsComplete)===null||T===void 0||T.call(window,E)}),A.current=!1))}),f}function QQ(t,e,n,i){const{layoutId:r,layout:s,drag:a,dragConstraints:o,layoutScroll:l,layoutRoot:c}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:aM(t.parent)),t.projection.setOptions({layoutId:r,layout:s,alwaysMeasureLayout:!!a||o&&tl(o),visualElement:t,animationType:typeof s=="string"?s:"both",initialPromotionConfig:i,layoutScroll:l,layoutRoot:c})}function aM(t){if(t)return t.options.allowProjection!==!1?t.projection:aM(t.parent)}function WQ({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:i,Component:r}){var s,a;t&&LQ(t);function o(c,h){let d;const f={...x.useContext(jb),...c,layoutId:YQ(c)},{isStatic:p}=f,w=qQ(c),E=i(c,p);if(!p&&Bb){XQ();const A=JQ(f);d=A.MeasureLayout,w.visualElement=KQ(r,E,f,e,A.ProjectionNode)}return y.jsxs(Vg.Provider,{value:w,children:[d&&w.visualElement?y.jsx(d,{visualElement:w.visualElement,...f}):null,n(r,c,GQ(E,w.visualElement,h),E,p,w.visualElement)]})}o.displayName=`motion.${typeof r=="string"?r:`create(${(a=(s=r.displayName)!==null&&s!==void 0?s:r.name)!==null&&a!==void 0?a:""})`}`;const l=x.forwardRef(o);return l[HQ]=r,l}function YQ({layoutId:t}){const e=x.useContext(Ub).id;return e&&t!==void 0?e+"-"+t:t}function XQ(t,e){x.useContext(tM).strict}function JQ(t){const{drag:e,layout:n}=tc;if(!e&&!n)return{};const i={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}const ZQ=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Kb(t){return typeof t!="string"||t.includes("-")?!1:!!(ZQ.indexOf(t)>-1||/[A-Z]/u.test(t))}function RR(t){const e=[{},{}];return t==null||t.values.forEach((n,i)=>{e[0][i]=n.get(),e[1][i]=n.getVelocity()}),e}function Qb(t,e,n,i){if(typeof e=="function"){const[r,s]=RR(i);e=e(n!==void 0?n:t.custom,r,s)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[r,s]=RR(i);e=e(n!==void 0?n:t.custom,r,s)}return e}const v0=t=>Array.isArray(t),eW=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),tW=t=>v0(t)?t[t.length-1]||0:t,Jt=t=>!!(t&&t.getVelocity);function lm(t){const e=Jt(t)?t.get():t;return eW(e)?e.toValue():e}function nW({scrapeMotionValuesFromProps:t,createRenderState:e,onUpdate:n},i,r,s){const a={latestValues:iW(i,r,s,t),renderState:e()};return n&&(a.onMount=o=>n({props:i,current:o,...a}),a.onUpdate=o=>n(o)),a}const oM=t=>(e,n)=>{const i=x.useContext(Vg),r=x.useContext(kg),s=()=>nW(t,e,i,r);return n?s():zb(s)};function iW(t,e,n,i){const r={},s=i(t,{});for(const f in s)r[f]=lm(s[f]);let{initial:a,animate:o}=t;const l=Mg(t),c=iM(t);e&&c&&!l&&t.inherit!==!1&&(a===void 0&&(a=e.initial),o===void 0&&(o=e.animate));let h=n?n.initial===!1:!1;h=h||a===!1;const d=h?o:a;if(d&&typeof d!="boolean"&&!Og(d)){const f=Array.isArray(d)?d:[d];for(let p=0;p<f.length;p++){const w=Qb(t,f[p]);if(w){const{transitionEnd:E,transition:A,...T}=w;for(const v in T){let _=T[v];if(Array.isArray(_)){const C=h?_.length-1:0;_=_[C]}_!==null&&(r[v]=_)}for(const v in E)r[v]=E[v]}}}return r}const xc=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],To=new Set(xc),lM=t=>e=>typeof e=="string"&&e.startsWith(t),cM=lM("--"),rW=lM("var(--"),Wb=t=>rW(t)?sW.test(t.split("/*")[0].trim()):!1,sW=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,uM=(t,e)=>e&&typeof t=="number"?e.transform(t):t,Nr=(t,e,n)=>n>e?e:n<t?t:n,Cc={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Kh={...Cc,transform:t=>Nr(0,1,t)},xf={...Cc,default:1},kd=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),ts=kd("deg"),$i=kd("%"),ne=kd("px"),aW=kd("vh"),oW=kd("vw"),xR={...$i,parse:t=>$i.parse(t)/100,transform:t=>$i.transform(t*100)},lW={borderWidth:ne,borderTopWidth:ne,borderRightWidth:ne,borderBottomWidth:ne,borderLeftWidth:ne,borderRadius:ne,radius:ne,borderTopLeftRadius:ne,borderTopRightRadius:ne,borderBottomRightRadius:ne,borderBottomLeftRadius:ne,width:ne,maxWidth:ne,height:ne,maxHeight:ne,top:ne,right:ne,bottom:ne,left:ne,padding:ne,paddingTop:ne,paddingRight:ne,paddingBottom:ne,paddingLeft:ne,margin:ne,marginTop:ne,marginRight:ne,marginBottom:ne,marginLeft:ne,backgroundPositionX:ne,backgroundPositionY:ne},cW={rotate:ts,rotateX:ts,rotateY:ts,rotateZ:ts,scale:xf,scaleX:xf,scaleY:xf,scaleZ:xf,skew:ts,skewX:ts,skewY:ts,distance:ne,translateX:ne,translateY:ne,translateZ:ne,x:ne,y:ne,z:ne,perspective:ne,transformPerspective:ne,opacity:Kh,originX:xR,originY:xR,originZ:ne},CR={...Cc,transform:Math.round},Yb={...lW,...cW,zIndex:CR,size:ne,fillOpacity:Kh,strokeOpacity:Kh,numOctaves:CR},uW={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},hW=xc.length;function dW(t,e,n){let i="",r=!0;for(let s=0;s<hW;s++){const a=xc[s],o=t[a];if(o===void 0)continue;let l=!0;if(typeof o=="number"?l=o===(a.startsWith("scale")?1:0):l=parseFloat(o)===0,!l||n){const c=uM(o,Yb[a]);if(!l){r=!1;const h=uW[a]||a;i+=`${h}(${c}) `}n&&(e[a]=c)}}return i=i.trim(),n?i=n(e,r?"":i):r&&(i="none"),i}function Xb(t,e,n){const{style:i,vars:r,transformOrigin:s}=t;let a=!1,o=!1;for(const l in e){const c=e[l];if(To.has(l)){a=!0;continue}else if(cM(l)){r[l]=c;continue}else{const h=uM(c,Yb[l]);l.startsWith("origin")?(o=!0,s[l]=h):i[l]=h}}if(e.transform||(a||n?i.transform=dW(e,t.transform,n):i.transform&&(i.transform="none")),o){const{originX:l="50%",originY:c="50%",originZ:h=0}=s;i.transformOrigin=`${l} ${c} ${h}`}}const fW={offset:"stroke-dashoffset",array:"stroke-dasharray"},mW={offset:"strokeDashoffset",array:"strokeDasharray"};function pW(t,e,n=1,i=0,r=!0){t.pathLength=1;const s=r?fW:mW;t[s.offset]=ne.transform(-i);const a=ne.transform(e),o=ne.transform(n);t[s.array]=`${a} ${o}`}function PR(t,e,n){return typeof t=="string"?t:ne.transform(e+n*t)}function gW(t,e,n){const i=PR(e,t.x,t.width),r=PR(n,t.y,t.height);return`${i} ${r}`}function Jb(t,{attrX:e,attrY:n,attrScale:i,originX:r,originY:s,pathLength:a,pathSpacing:o=1,pathOffset:l=0,...c},h,d){if(Xb(t,c,d),h){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:f,style:p,dimensions:w}=t;f.transform&&(w&&(p.transform=f.transform),delete f.transform),w&&(r!==void 0||s!==void 0||p.transform)&&(p.transformOrigin=gW(w,r!==void 0?r:.5,s!==void 0?s:.5)),e!==void 0&&(f.x=e),n!==void 0&&(f.y=n),i!==void 0&&(f.scale=i),a!==void 0&&pW(f,a,o,l,!1)}const Zb=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),hM=()=>({...Zb(),attrs:{}}),eE=t=>typeof t=="string"&&t.toLowerCase()==="svg";function dM(t,{style:e,vars:n},i,r){Object.assign(t.style,e,r&&r.getProjectionStyles(i));for(const s in n)t.style.setProperty(s,n[s])}const fM=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function mM(t,e,n,i){dM(t,e,void 0,i);for(const r in e.attrs)t.setAttribute(fM.has(r)?r:Gb(r),e.attrs[r])}const gp={};function yW(t){Object.assign(gp,t)}function pM(t,{layout:e,layoutId:n}){return To.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!gp[t]||t==="opacity")}function tE(t,e,n){var i;const{style:r}=t,s={};for(const a in r)(Jt(r[a])||e.style&&Jt(e.style[a])||pM(a,t)||((i=n==null?void 0:n.getValue(a))===null||i===void 0?void 0:i.liveStyle)!==void 0)&&(s[a]=r[a]);return s}function gM(t,e,n){const i=tE(t,e,n);for(const r in t)if(Jt(t[r])||Jt(e[r])){const s=xc.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;i[s]=t[r]}return i}function _W(t,e){try{e.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}const DR=["x","y","width","height","cx","cy","r"],vW={useVisualState:oM({scrapeMotionValuesFromProps:gM,createRenderState:hM,onUpdate:({props:t,prevProps:e,current:n,renderState:i,latestValues:r})=>{if(!n)return;let s=!!t.drag;if(!s){for(const o in r)if(To.has(o)){s=!0;break}}if(!s)return;let a=!e;if(e)for(let o=0;o<DR.length;o++){const l=DR[o];t[l]!==e[l]&&(a=!0)}a&&He.read(()=>{_W(n,i),He.render(()=>{Jb(i,r,eE(n.tagName),t.transformTemplate),mM(n,i)})})}})},TW={useVisualState:oM({scrapeMotionValuesFromProps:tE,createRenderState:Zb})};function yM(t,e,n){for(const i in e)!Jt(e[i])&&!pM(i,n)&&(t[i]=e[i])}function wW({transformTemplate:t},e){return x.useMemo(()=>{const n=Zb();return Xb(n,e,t),Object.assign({},n.vars,n.style)},[e])}function bW(t,e){const n=t.style||{},i={};return yM(i,n,t),Object.assign(i,wW(t,e)),i}function EW(t,e){const n={},i=bW(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=i,n}function AW(t,e,n,i){const r=x.useMemo(()=>{const s=hM();return Jb(s,e,eE(i),t.transformTemplate),{...s.attrs,style:{...s.style}}},[e]);if(t.style){const s={};yM(s,t.style,t),r.style={...s,...r.style}}return r}function SW(t=!1){return(n,i,r,{latestValues:s},a)=>{const l=(Kb(n)?AW:EW)(i,s,a,n),c=jQ(i,typeof n=="string",t),h=n!==x.Fragment?{...c,...l,ref:r}:{},{children:d}=i,f=x.useMemo(()=>Jt(d)?d.get():d,[d]);return x.createElement(n,{...h,children:f})}}function IW(t,e){return function(i,{forwardMotionProps:r}={forwardMotionProps:!1}){const a={...Kb(i)?vW:TW,preloadedFeatures:t,useRender:SW(r),createVisualElement:e,Component:i};return WQ(a)}}function _M(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let i=0;i<n;i++)if(e[i]!==t[i])return!1;return!0}function Lg(t,e,n){const i=t.getProps();return Qb(i,e,n!==void 0?n:i.custom,t)}const RW=Fb(()=>window.ScrollTimeline!==void 0);class xW{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,n){for(let i=0;i<this.animations.length;i++)this.animations[i][e]=n}attachTimeline(e,n){const i=this.animations.map(r=>{if(RW()&&r.attachTimeline)return r.attachTimeline(e);if(typeof n=="function")return n(r)});return()=>{i.forEach((r,s)=>{r&&r(),this.animations[s].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let n=0;n<this.animations.length;n++)e=Math.max(e,this.animations[n].duration);return e}runAll(e){this.animations.forEach(n=>n[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class CW extends xW{then(e,n){return Promise.all(this.animations).then(e).catch(n)}}function nE(t,e){return t?t[e]||t.default||t:void 0}const T0=2e4;function vM(t){let e=0;const n=50;let i=t.next(e);for(;!i.done&&e<T0;)e+=n,i=t.next(e);return e>=T0?1/0:e}function iE(t){return typeof t=="function"}function NR(t,e){t.timeline=e,t.onfinish=null}const rE=t=>Array.isArray(t)&&typeof t[0]=="number",PW={linearEasing:void 0};function DW(t,e){const n=Fb(t);return()=>{var i;return(i=PW[e])!==null&&i!==void 0?i:n()}}const yp=DW(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),TM=(t,e,n=10)=>{let i="";const r=Math.max(Math.round(e/n),2);for(let s=0;s<r;s++)i+=t(ec(0,r-1,s))+", ";return`linear(${i.substring(0,i.length-2)})`};function wM(t){return!!(typeof t=="function"&&yp()||!t||typeof t=="string"&&(t in w0||yp())||rE(t)||Array.isArray(t)&&t.every(wM))}const Au=([t,e,n,i])=>`cubic-bezier(${t}, ${e}, ${n}, ${i})`,w0={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Au([0,.65,.55,1]),circOut:Au([.55,0,1,.45]),backIn:Au([.31,.01,.66,-.59]),backOut:Au([.33,1.53,.69,.99])};function bM(t,e){if(t)return typeof t=="function"&&yp()?TM(t,e):rE(t)?Au(t):Array.isArray(t)?t.map(n=>bM(n,e)||w0.easeOut):w0[t]}const gi={x:!1,y:!1};function EM(){return gi.x||gi.y}function NW(t,e,n){var i;if(t instanceof Element)return[t];if(typeof t=="string"){let r=document;const s=(i=void 0)!==null&&i!==void 0?i:r.querySelectorAll(t);return s?Array.from(s):[]}return Array.from(t)}function AM(t,e){const n=NW(t),i=new AbortController,r={passive:!0,...e,signal:i.signal};return[n,r,()=>i.abort()]}function kR(t){return e=>{e.pointerType==="touch"||EM()||t(e)}}function kW(t,e,n={}){const[i,r,s]=AM(t,n),a=kR(o=>{const{target:l}=o,c=e(o);if(typeof c!="function"||!l)return;const h=kR(d=>{c(d),l.removeEventListener("pointerleave",h)});l.addEventListener("pointerleave",h,r)});return i.forEach(o=>{o.addEventListener("pointerenter",a,r)}),s}const SM=(t,e)=>e?t===e?!0:SM(t,e.parentElement):!1,sE=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,VW=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function OW(t){return VW.has(t.tagName)||t.tabIndex!==-1}const Su=new WeakSet;function VR(t){return e=>{e.key==="Enter"&&t(e)}}function y_(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const MW=(t,e)=>{const n=t.currentTarget;if(!n)return;const i=VR(()=>{if(Su.has(n))return;y_(n,"down");const r=VR(()=>{y_(n,"up")}),s=()=>y_(n,"cancel");n.addEventListener("keyup",r,e),n.addEventListener("blur",s,e)});n.addEventListener("keydown",i,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",i),e)};function OR(t){return sE(t)&&!EM()}function LW(t,e,n={}){const[i,r,s]=AM(t,n),a=o=>{const l=o.currentTarget;if(!OR(o)||Su.has(l))return;Su.add(l);const c=e(o),h=(p,w)=>{window.removeEventListener("pointerup",d),window.removeEventListener("pointercancel",f),!(!OR(p)||!Su.has(l))&&(Su.delete(l),typeof c=="function"&&c(p,{success:w}))},d=p=>{h(p,n.useGlobalTarget||SM(l,p.target))},f=p=>{h(p,!1)};window.addEventListener("pointerup",d,r),window.addEventListener("pointercancel",f,r)};return i.forEach(o=>{!OW(o)&&o.getAttribute("tabindex")===null&&(o.tabIndex=0),(n.useGlobalTarget?window:o).addEventListener("pointerdown",a,r),o.addEventListener("focus",c=>MW(c,r),r)}),s}function UW(t){return t==="x"||t==="y"?gi[t]?null:(gi[t]=!0,()=>{gi[t]=!1}):gi.x||gi.y?null:(gi.x=gi.y=!0,()=>{gi.x=gi.y=!1})}const IM=new Set(["width","height","top","left","right","bottom",...xc]);let cm;function zW(){cm=void 0}const Ki={now:()=>(cm===void 0&&Ki.set(Ot.isProcessing||VQ.useManualTiming?Ot.timestamp:performance.now()),cm),set:t=>{cm=t,queueMicrotask(zW)}};function aE(t,e){t.indexOf(e)===-1&&t.push(e)}function oE(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class lE{constructor(){this.subscriptions=[]}add(e){return aE(this.subscriptions,e),()=>oE(this.subscriptions,e)}notify(e,n,i){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](e,n,i);else for(let s=0;s<r;s++){const a=this.subscriptions[s];a&&a(e,n,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function RM(t,e){return e?t*(1e3/e):0}const MR=30,jW=t=>!isNaN(parseFloat(t));class BW{constructor(e,n={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(i,r=!0)=>{const s=Ki.now();this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(i),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),r&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=Ki.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=jW(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new lE);const i=this.events[e].add(n);return e==="change"?()=>{i(),He.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,i){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-i}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Ki.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>MR)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,MR);return RM(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Qh(t,e){return new BW(t,e)}function FW(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Qh(n))}function qW(t,e){const n=Lg(t,e);let{transitionEnd:i={},transition:r={},...s}=n||{};s={...s,...i};for(const a in s){const o=tW(s[a]);FW(t,a,o)}}function HW(t){return!!(Jt(t)&&t.add)}function b0(t,e){const n=t.getValue("willChange");if(HW(n))return n.add(e)}function xM(t){return t.props[rM]}const CM=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,GW=1e-7,$W=12;function KW(t,e,n,i,r){let s,a,o=0;do a=e+(n-e)/2,s=CM(a,i,r)-t,s>0?n=a:e=a;while(Math.abs(s)>GW&&++o<$W);return a}function Vd(t,e,n,i){if(t===e&&n===i)return Bn;const r=s=>KW(s,0,1,t,n);return s=>s===0||s===1?s:CM(r(s),e,i)}const PM=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,DM=t=>e=>1-t(1-e),NM=Vd(.33,1.53,.69,.99),cE=DM(NM),kM=PM(cE),VM=t=>(t*=2)<1?.5*cE(t):.5*(2-Math.pow(2,-10*(t-1))),uE=t=>1-Math.sin(Math.acos(t)),OM=DM(uE),MM=PM(uE),LM=t=>/^0[^.\s]+$/u.test(t);function QW(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||LM(t):!0}const ih=t=>Math.round(t*1e5)/1e5,hE=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function WW(t){return t==null}const YW=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,dE=(t,e)=>n=>!!(typeof n=="string"&&YW.test(n)&&n.startsWith(t)||e&&!WW(n)&&Object.prototype.hasOwnProperty.call(n,e)),UM=(t,e,n)=>i=>{if(typeof i!="string")return i;const[r,s,a,o]=i.match(hE);return{[t]:parseFloat(r),[e]:parseFloat(s),[n]:parseFloat(a),alpha:o!==void 0?parseFloat(o):1}},XW=t=>Nr(0,255,t),__={...Cc,transform:t=>Math.round(XW(t))},Na={test:dE("rgb","red"),parse:UM("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:i=1})=>"rgba("+__.transform(t)+", "+__.transform(e)+", "+__.transform(n)+", "+ih(Kh.transform(i))+")"};function JW(t){let e="",n="",i="",r="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),i=t.substring(5,7),r=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),i=t.substring(3,4),r=t.substring(4,5),e+=e,n+=n,i+=i,r+=r),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(i,16),alpha:r?parseInt(r,16)/255:1}}const E0={test:dE("#"),parse:JW,transform:Na.transform},nl={test:dE("hsl","hue"),parse:UM("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:i=1})=>"hsla("+Math.round(t)+", "+$i.transform(ih(e))+", "+$i.transform(ih(n))+", "+ih(Kh.transform(i))+")"},Kt={test:t=>Na.test(t)||E0.test(t)||nl.test(t),parse:t=>Na.test(t)?Na.parse(t):nl.test(t)?nl.parse(t):E0.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Na.transform(t):nl.transform(t)},ZW=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function eY(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(hE))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(ZW))===null||n===void 0?void 0:n.length)||0)>0}const zM="number",jM="color",tY="var",nY="var(",LR="${}",iY=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Wh(t){const e=t.toString(),n=[],i={color:[],number:[],var:[]},r=[];let s=0;const o=e.replace(iY,l=>(Kt.test(l)?(i.color.push(s),r.push(jM),n.push(Kt.parse(l))):l.startsWith(nY)?(i.var.push(s),r.push(tY),n.push(l)):(i.number.push(s),r.push(zM),n.push(parseFloat(l))),++s,LR)).split(LR);return{values:n,split:o,indexes:i,types:r}}function BM(t){return Wh(t).values}function FM(t){const{split:e,types:n}=Wh(t),i=e.length;return r=>{let s="";for(let a=0;a<i;a++)if(s+=e[a],r[a]!==void 0){const o=n[a];o===zM?s+=ih(r[a]):o===jM?s+=Kt.transform(r[a]):s+=r[a]}return s}}const rY=t=>typeof t=="number"?0:t;function sY(t){const e=BM(t);return FM(t)(e.map(rY))}const Qs={test:eY,parse:BM,createTransformer:FM,getAnimatableNone:sY},aY=new Set(["brightness","contrast","saturate","opacity"]);function oY(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[i]=n.match(hE)||[];if(!i)return t;const r=n.replace(i,"");let s=aY.has(e)?1:0;return i!==n&&(s*=100),e+"("+s+r+")"}const lY=/\b([a-z-]*)\(.*?\)/gu,A0={...Qs,getAnimatableNone:t=>{const e=t.match(lY);return e?e.map(oY).join(" "):t}},cY={...Yb,color:Kt,backgroundColor:Kt,outlineColor:Kt,fill:Kt,stroke:Kt,borderColor:Kt,borderTopColor:Kt,borderRightColor:Kt,borderBottomColor:Kt,borderLeftColor:Kt,filter:A0,WebkitFilter:A0},fE=t=>cY[t];function qM(t,e){let n=fE(t);return n!==A0&&(n=Qs),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const uY=new Set(["auto","none","0"]);function hY(t,e,n){let i=0,r;for(;i<t.length&&!r;){const s=t[i];typeof s=="string"&&!uY.has(s)&&Wh(s).values.length&&(r=t[i]),i++}if(r&&n)for(const s of e)t[s]=qM(n,r)}const UR=t=>t===Cc||t===ne,zR=(t,e)=>parseFloat(t.split(", ")[e]),jR=(t,e)=>(n,{transform:i})=>{if(i==="none"||!i)return 0;const r=i.match(/^matrix3d\((.+)\)$/u);if(r)return zR(r[1],e);{const s=i.match(/^matrix\((.+)\)$/u);return s?zR(s[1],t):0}},dY=new Set(["x","y","z"]),fY=xc.filter(t=>!dY.has(t));function mY(t){const e=[];return fY.forEach(n=>{const i=t.getValue(n);i!==void 0&&(e.push([n,i.get()]),i.set(n.startsWith("scale")?1:0))}),e}const nc={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:jR(4,13),y:jR(5,14)};nc.translateX=nc.x;nc.translateY=nc.y;const Fa=new Set;let S0=!1,I0=!1;function HM(){if(I0){const t=Array.from(Fa).filter(i=>i.needsMeasurement),e=new Set(t.map(i=>i.element)),n=new Map;e.forEach(i=>{const r=mY(i);r.length&&(n.set(i,r),i.render())}),t.forEach(i=>i.measureInitialState()),e.forEach(i=>{i.render();const r=n.get(i);r&&r.forEach(([s,a])=>{var o;(o=i.getValue(s))===null||o===void 0||o.set(a)})}),t.forEach(i=>i.measureEndState()),t.forEach(i=>{i.suspendedScrollY!==void 0&&window.scrollTo(0,i.suspendedScrollY)})}I0=!1,S0=!1,Fa.forEach(t=>t.complete()),Fa.clear()}function GM(){Fa.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(I0=!0)})}function pY(){GM(),HM()}class mE{constructor(e,n,i,r,s,a=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=i,this.motionValue=r,this.element=s,this.isAsync=a}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Fa.add(this),S0||(S0=!0,He.read(GM),He.resolveKeyframes(HM))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:i,motionValue:r}=this;for(let s=0;s<e.length;s++)if(e[s]===null)if(s===0){const a=r==null?void 0:r.get(),o=e[e.length-1];if(a!==void 0)e[0]=a;else if(i&&n){const l=i.readValue(n,o);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=o),r&&a===void 0&&r.set(e[0])}else e[s]=e[s-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Fa.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Fa.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const $M=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),gY=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function yY(t){const e=gY.exec(t);if(!e)return[,];const[,n,i,r]=e;return[`--${n??i}`,r]}function KM(t,e,n=1){const[i,r]=yY(t);if(!i)return;const s=window.getComputedStyle(e).getPropertyValue(i);if(s){const a=s.trim();return $M(a)?parseFloat(a):a}return Wb(r)?KM(r,e,n+1):r}const QM=t=>e=>e.test(t),_Y={test:t=>t==="auto",parse:t=>t},WM=[Cc,ne,$i,ts,oW,aW,_Y],BR=t=>WM.find(QM(t));class YM extends mE{constructor(e,n,i,r,s){super(e,n,i,r,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:i}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let c=e[l];if(typeof c=="string"&&(c=c.trim(),Wb(c))){const h=KM(c,n.current);h!==void 0&&(e[l]=h),l===e.length-1&&(this.finalKeyframe=c)}}if(this.resolveNoneKeyframes(),!IM.has(i)||e.length!==2)return;const[r,s]=e,a=BR(r),o=BR(s);if(a!==o)if(UR(a)&&UR(o))for(let l=0;l<e.length;l++){const c=e[l];typeof c=="string"&&(e[l]=parseFloat(c))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,i=[];for(let r=0;r<e.length;r++)QW(e[r])&&i.push(r);i.length&&hY(e,i,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:i}=this;if(!e||!e.current)return;i==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=nc[i](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const r=n[n.length-1];r!==void 0&&e.getValue(i,r).jump(r,!1)}measureEndState(){var e;const{element:n,name:i,unresolvedKeyframes:r}=this;if(!n||!n.current)return;const s=n.getValue(i);s&&s.jump(this.measuredOrigin,!1);const a=r.length-1,o=r[a];r[a]=nc[i](n.measureViewportBox(),window.getComputedStyle(n.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([l,c])=>{n.getValue(l).set(c)}),this.resolveNoneKeyframes()}}const FR=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Qs.test(t)||t==="0")&&!t.startsWith("url("));function vY(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function TY(t,e,n,i){const r=t[0];if(r===null)return!1;if(e==="display"||e==="visibility")return!0;const s=t[t.length-1],a=FR(r,e),o=FR(s,e);return!a||!o?!1:vY(t)||(n==="spring"||iE(n))&&i}const wY=t=>t!==null;function Ug(t,{repeat:e,repeatType:n="loop"},i){const r=t.filter(wY),s=e&&n!=="loop"&&e%2===1?0:r.length-1;return!s||i===void 0?r[s]:i}const bY=40;class XM{constructor({autoplay:e=!0,delay:n=0,type:i="keyframes",repeat:r=0,repeatDelay:s=0,repeatType:a="loop",...o}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=Ki.now(),this.options={autoplay:e,delay:n,type:i,repeat:r,repeatDelay:s,repeatType:a,...o},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>bY?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&pY(),this._resolved}onKeyframesResolved(e,n){this.resolvedAt=Ki.now(),this.hasAttemptedResolve=!0;const{name:i,type:r,velocity:s,delay:a,onComplete:o,onUpdate:l,isGenerator:c}=this.options;if(!c&&!TY(e,i,r,s))if(a)this.options.duration=0;else{l&&l(Ug(e,this.options,n)),o&&o(),this.resolveFinishedPromise();return}const h=this.initPlayback(e,n);h!==!1&&(this._resolved={keyframes:e,finalKeyframe:n,...h},this.onPostResolved())}onPostResolved(){}then(e,n){return this.currentFinishedPromise.then(e,n)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const Je=(t,e,n)=>t+(e-t)*n;function v_(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function EY({hue:t,saturation:e,lightness:n,alpha:i}){t/=360,e/=100,n/=100;let r=0,s=0,a=0;if(!e)r=s=a=n;else{const o=n<.5?n*(1+e):n+e-n*e,l=2*n-o;r=v_(l,o,t+1/3),s=v_(l,o,t),a=v_(l,o,t-1/3)}return{red:Math.round(r*255),green:Math.round(s*255),blue:Math.round(a*255),alpha:i}}function _p(t,e){return n=>n>0?e:t}const T_=(t,e,n)=>{const i=t*t,r=n*(e*e-i)+i;return r<0?0:Math.sqrt(r)},AY=[E0,Na,nl],SY=t=>AY.find(e=>e.test(t));function qR(t){const e=SY(t);if(!e)return!1;let n=e.parse(t);return e===nl&&(n=EY(n)),n}const HR=(t,e)=>{const n=qR(t),i=qR(e);if(!n||!i)return _p(t,e);const r={...n};return s=>(r.red=T_(n.red,i.red,s),r.green=T_(n.green,i.green,s),r.blue=T_(n.blue,i.blue,s),r.alpha=Je(n.alpha,i.alpha,s),Na.transform(r))},IY=(t,e)=>n=>e(t(n)),Od=(...t)=>t.reduce(IY),R0=new Set(["none","hidden"]);function RY(t,e){return R0.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function xY(t,e){return n=>Je(t,e,n)}function pE(t){return typeof t=="number"?xY:typeof t=="string"?Wb(t)?_p:Kt.test(t)?HR:DY:Array.isArray(t)?JM:typeof t=="object"?Kt.test(t)?HR:CY:_p}function JM(t,e){const n=[...t],i=n.length,r=t.map((s,a)=>pE(s)(s,e[a]));return s=>{for(let a=0;a<i;a++)n[a]=r[a](s);return n}}function CY(t,e){const n={...t,...e},i={};for(const r in n)t[r]!==void 0&&e[r]!==void 0&&(i[r]=pE(t[r])(t[r],e[r]));return r=>{for(const s in i)n[s]=i[s](r);return n}}function PY(t,e){var n;const i=[],r={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const a=e.types[s],o=t.indexes[a][r[a]],l=(n=t.values[o])!==null&&n!==void 0?n:0;i[s]=l,r[a]++}return i}const DY=(t,e)=>{const n=Qs.createTransformer(e),i=Wh(t),r=Wh(e);return i.indexes.var.length===r.indexes.var.length&&i.indexes.color.length===r.indexes.color.length&&i.indexes.number.length>=r.indexes.number.length?R0.has(t)&&!r.values.length||R0.has(e)&&!i.values.length?RY(t,e):Od(JM(PY(i,r),r.values),n):_p(t,e)};function ZM(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?Je(t,e,n):pE(t)(t,e)}const NY=5;function eL(t,e,n){const i=Math.max(e-NY,0);return RM(n-t(i),e-i)}const rt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},w_=.001;function kY({duration:t=rt.duration,bounce:e=rt.bounce,velocity:n=rt.velocity,mass:i=rt.mass}){let r,s,a=1-e;a=Nr(rt.minDamping,rt.maxDamping,a),t=Nr(rt.minDuration,rt.maxDuration,Tr(t)),a<1?(r=c=>{const h=c*a,d=h*t,f=h-n,p=x0(c,a),w=Math.exp(-d);return w_-f/p*w},s=c=>{const d=c*a*t,f=d*n+n,p=Math.pow(a,2)*Math.pow(c,2)*t,w=Math.exp(-d),E=x0(Math.pow(c,2),a);return(-r(c)+w_>0?-1:1)*((f-p)*w)/E}):(r=c=>{const h=Math.exp(-c*t),d=(c-n)*t+1;return-w_+h*d},s=c=>{const h=Math.exp(-c*t),d=(n-c)*(t*t);return h*d});const o=5/t,l=OY(r,s,o);if(t=vr(t),isNaN(l))return{stiffness:rt.stiffness,damping:rt.damping,duration:t};{const c=Math.pow(l,2)*i;return{stiffness:c,damping:a*2*Math.sqrt(i*c),duration:t}}}const VY=12;function OY(t,e,n){let i=n;for(let r=1;r<VY;r++)i=i-t(i)/e(i);return i}function x0(t,e){return t*Math.sqrt(1-e*e)}const MY=["duration","bounce"],LY=["stiffness","damping","mass"];function GR(t,e){return e.some(n=>t[n]!==void 0)}function UY(t){let e={velocity:rt.velocity,stiffness:rt.stiffness,damping:rt.damping,mass:rt.mass,isResolvedFromDuration:!1,...t};if(!GR(t,LY)&&GR(t,MY))if(t.visualDuration){const n=t.visualDuration,i=2*Math.PI/(n*1.2),r=i*i,s=2*Nr(.05,1,1-(t.bounce||0))*Math.sqrt(r);e={...e,mass:rt.mass,stiffness:r,damping:s}}else{const n=kY(t);e={...e,...n,mass:rt.mass},e.isResolvedFromDuration=!0}return e}function tL(t=rt.visualDuration,e=rt.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:i,restDelta:r}=n;const s=n.keyframes[0],a=n.keyframes[n.keyframes.length-1],o={done:!1,value:s},{stiffness:l,damping:c,mass:h,duration:d,velocity:f,isResolvedFromDuration:p}=UY({...n,velocity:-Tr(n.velocity||0)}),w=f||0,E=c/(2*Math.sqrt(l*h)),A=a-s,T=Tr(Math.sqrt(l/h)),v=Math.abs(A)<5;i||(i=v?rt.restSpeed.granular:rt.restSpeed.default),r||(r=v?rt.restDelta.granular:rt.restDelta.default);let _;if(E<1){const V=x0(T,E);_=O=>{const S=Math.exp(-E*T*O);return a-S*((w+E*T*A)/V*Math.sin(V*O)+A*Math.cos(V*O))}}else if(E===1)_=V=>a-Math.exp(-T*V)*(A+(w+T*A)*V);else{const V=T*Math.sqrt(E*E-1);_=O=>{const S=Math.exp(-E*T*O),b=Math.min(V*O,300);return a-S*((w+E*T*A)*Math.sinh(b)+V*A*Math.cosh(b))/V}}const C={calculatedDuration:p&&d||null,next:V=>{const O=_(V);if(p)o.done=V>=d;else{let S=0;E<1&&(S=V===0?vr(w):eL(_,V,O));const b=Math.abs(S)<=i,R=Math.abs(a-O)<=r;o.done=b&&R}return o.value=o.done?a:O,o},toString:()=>{const V=Math.min(vM(C),T0),O=TM(S=>C.next(V*S).value,V,30);return V+"ms "+O}};return C}function $R({keyframes:t,velocity:e=0,power:n=.8,timeConstant:i=325,bounceDamping:r=10,bounceStiffness:s=500,modifyTarget:a,min:o,max:l,restDelta:c=.5,restSpeed:h}){const d=t[0],f={done:!1,value:d},p=b=>o!==void 0&&b<o||l!==void 0&&b>l,w=b=>o===void 0?l:l===void 0||Math.abs(o-b)<Math.abs(l-b)?o:l;let E=n*e;const A=d+E,T=a===void 0?A:a(A);T!==A&&(E=T-d);const v=b=>-E*Math.exp(-b/i),_=b=>T+v(b),C=b=>{const R=v(b),D=_(b);f.done=Math.abs(R)<=c,f.value=f.done?T:D};let V,O;const S=b=>{p(f.value)&&(V=b,O=tL({keyframes:[f.value,w(f.value)],velocity:eL(_,b,f.value),damping:r,stiffness:s,restDelta:c,restSpeed:h}))};return S(0),{calculatedDuration:null,next:b=>{let R=!1;return!O&&V===void 0&&(R=!0,C(b),S(b)),V!==void 0&&b>=V?O.next(b-V):(!R&&C(b),f)}}}const zY=Vd(.42,0,1,1),jY=Vd(0,0,.58,1),nL=Vd(.42,0,.58,1),BY=t=>Array.isArray(t)&&typeof t[0]!="number",FY={linear:Bn,easeIn:zY,easeInOut:nL,easeOut:jY,circIn:uE,circInOut:MM,circOut:OM,backIn:cE,backInOut:kM,backOut:NM,anticipate:VM},KR=t=>{if(rE(t)){ZO(t.length===4);const[e,n,i,r]=t;return Vd(e,n,i,r)}else if(typeof t=="string")return FY[t];return t};function qY(t,e,n){const i=[],r=n||ZM,s=t.length-1;for(let a=0;a<s;a++){let o=r(t[a],t[a+1]);if(e){const l=Array.isArray(e)?e[a]||Bn:e;o=Od(l,o)}i.push(o)}return i}function HY(t,e,{clamp:n=!0,ease:i,mixer:r}={}){const s=t.length;if(ZO(s===e.length),s===1)return()=>e[0];if(s===2&&e[0]===e[1])return()=>e[1];const a=t[0]===t[1];t[0]>t[s-1]&&(t=[...t].reverse(),e=[...e].reverse());const o=qY(e,i,r),l=o.length,c=h=>{if(a&&h<t[0])return e[0];let d=0;if(l>1)for(;d<t.length-2&&!(h<t[d+1]);d++);const f=ec(t[d],t[d+1],h);return o[d](f)};return n?h=>c(Nr(t[0],t[s-1],h)):c}function GY(t,e){const n=t[t.length-1];for(let i=1;i<=e;i++){const r=ec(0,e,i);t.push(Je(n,1,r))}}function $Y(t){const e=[0];return GY(e,t.length-1),e}function KY(t,e){return t.map(n=>n*e)}function QY(t,e){return t.map(()=>e||nL).splice(0,t.length-1)}function vp({duration:t=300,keyframes:e,times:n,ease:i="easeInOut"}){const r=BY(i)?i.map(KR):KR(i),s={done:!1,value:e[0]},a=KY(n&&n.length===e.length?n:$Y(e),t),o=HY(a,e,{ease:Array.isArray(r)?r:QY(e,r)});return{calculatedDuration:t,next:l=>(s.value=o(l),s.done=l>=t,s)}}const WY=t=>{const e=({timestamp:n})=>t(n);return{start:()=>He.update(e,!0),stop:()=>Ks(e),now:()=>Ot.isProcessing?Ot.timestamp:Ki.now()}},YY={decay:$R,inertia:$R,tween:vp,keyframes:vp,spring:tL},XY=t=>t/100;class gE extends XM{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:l}=this.options;l&&l()};const{name:n,motionValue:i,element:r,keyframes:s}=this.options,a=(r==null?void 0:r.KeyframeResolver)||mE,o=(l,c)=>this.onKeyframesResolved(l,c);this.resolver=new a(s,o,n,i,r),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:n="keyframes",repeat:i=0,repeatDelay:r=0,repeatType:s,velocity:a=0}=this.options,o=iE(n)?n:YY[n]||vp;let l,c;o!==vp&&typeof e[0]!="number"&&(l=Od(XY,ZM(e[0],e[1])),e=[0,100]);const h=o({...this.options,keyframes:e});s==="mirror"&&(c=o({...this.options,keyframes:[...e].reverse(),velocity:-a})),h.calculatedDuration===null&&(h.calculatedDuration=vM(h));const{calculatedDuration:d}=h,f=d+r,p=f*(i+1)-r;return{generator:h,mirroredGenerator:c,mapPercentToKeyframes:l,calculatedDuration:d,resolvedDuration:f,totalDuration:p}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,n=!1){const{resolved:i}=this;if(!i){const{keyframes:b}=this.options;return{done:!0,value:b[b.length-1]}}const{finalKeyframe:r,generator:s,mirroredGenerator:a,mapPercentToKeyframes:o,keyframes:l,calculatedDuration:c,totalDuration:h,resolvedDuration:d}=i;if(this.startTime===null)return s.next(0);const{delay:f,repeat:p,repeatType:w,repeatDelay:E,onUpdate:A}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-h/this.speed,this.startTime)),n?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const T=this.currentTime-f*(this.speed>=0?1:-1),v=this.speed>=0?T<0:T>h;this.currentTime=Math.max(T,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=h);let _=this.currentTime,C=s;if(p){const b=Math.min(this.currentTime,h)/d;let R=Math.floor(b),D=b%1;!D&&b>=1&&(D=1),D===1&&R--,R=Math.min(R,p+1),!!(R%2)&&(w==="reverse"?(D=1-D,E&&(D-=E/d)):w==="mirror"&&(C=a)),_=Nr(0,1,D)*d}const V=v?{done:!1,value:l[0]}:C.next(_);o&&(V.value=o(V.value));let{done:O}=V;!v&&c!==null&&(O=this.speed>=0?this.currentTime>=h:this.currentTime<=0);const S=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&O);return S&&r!==void 0&&(V.value=Ug(l,this.options,r)),A&&A(V.value),S&&this.finish(),V}get duration(){const{resolved:e}=this;return e?Tr(e.calculatedDuration):0}get time(){return Tr(this.currentTime)}set time(e){e=vr(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=Tr(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=WY,onPlay:n,startTime:i}=this.options;this.driver||(this.driver=e(s=>this.tick(s))),n&&n();const r=this.driver.now();this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=r):this.startTime=i??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const JY=new Set(["opacity","clipPath","filter","transform"]);function ZY(t,e,n,{delay:i=0,duration:r=300,repeat:s=0,repeatType:a="loop",ease:o="easeInOut",times:l}={}){const c={[e]:n};l&&(c.offset=l);const h=bM(o,r);return Array.isArray(h)&&(c.easing=h),t.animate(c,{delay:i,duration:r,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:s+1,direction:a==="reverse"?"alternate":"normal"})}const eX=Fb(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),Tp=10,tX=2e4;function nX(t){return iE(t.type)||t.type==="spring"||!wM(t.ease)}function iX(t,e){const n=new gE({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let i={done:!1,value:t[0]};const r=[];let s=0;for(;!i.done&&s<tX;)i=n.sample(s),r.push(i.value),s+=Tp;return{times:void 0,keyframes:r,duration:s-Tp,ease:"linear"}}const iL={anticipate:VM,backInOut:kM,circInOut:MM};function rX(t){return t in iL}class QR extends XM{constructor(e){super(e);const{name:n,motionValue:i,element:r,keyframes:s}=this.options;this.resolver=new YM(s,(a,o)=>this.onKeyframesResolved(a,o),n,i,r),this.resolver.scheduleResolve()}initPlayback(e,n){let{duration:i=300,times:r,ease:s,type:a,motionValue:o,name:l,startTime:c}=this.options;if(!o.owner||!o.owner.current)return!1;if(typeof s=="string"&&yp()&&rX(s)&&(s=iL[s]),nX(this.options)){const{onComplete:d,onUpdate:f,motionValue:p,element:w,...E}=this.options,A=iX(e,E);e=A.keyframes,e.length===1&&(e[1]=e[0]),i=A.duration,r=A.times,s=A.ease,a="keyframes"}const h=ZY(o.owner.current,l,e,{...this.options,duration:i,times:r,ease:s});return h.startTime=c??this.calcStartTime(),this.pendingTimeline?(NR(h,this.pendingTimeline),this.pendingTimeline=void 0):h.onfinish=()=>{const{onComplete:d}=this.options;o.set(Ug(e,this.options,n)),d&&d(),this.cancel(),this.resolveFinishedPromise()},{animation:h,duration:i,times:r,type:a,ease:s,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:n}=e;return Tr(n)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:n}=e;return Tr(n.currentTime||0)}set time(e){const{resolved:n}=this;if(!n)return;const{animation:i}=n;i.currentTime=vr(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:n}=e;return n.playbackRate}set speed(e){const{resolved:n}=this;if(!n)return;const{animation:i}=n;i.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:n}=e;return n.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:n}=e;return n.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:n}=this;if(!n)return Bn;const{animation:i}=n;NR(i,e)}return Bn}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:n,keyframes:i,duration:r,type:s,ease:a,times:o}=e;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:c,onUpdate:h,onComplete:d,element:f,...p}=this.options,w=new gE({...p,keyframes:i,duration:r,type:s,ease:a,times:o,isGenerator:!0}),E=vr(this.time);c.setWithVelocity(w.sample(E-Tp).value,w.sample(E).value,Tp)}const{onStop:l}=this.options;l&&l(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:n,name:i,repeatDelay:r,repeatType:s,damping:a,type:o}=e;if(!n||!n.owner||!(n.owner.current instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:c}=n.owner.getProps();return eX()&&i&&JY.has(i)&&!l&&!c&&!r&&s!=="mirror"&&a!==0&&o!=="inertia"}}const sX={type:"spring",stiffness:500,damping:25,restSpeed:10},aX=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),oX={type:"keyframes",duration:.8},lX={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},cX=(t,{keyframes:e})=>e.length>2?oX:To.has(t)?t.startsWith("scale")?aX(e[1]):sX:lX;function uX({when:t,delay:e,delayChildren:n,staggerChildren:i,staggerDirection:r,repeat:s,repeatType:a,repeatDelay:o,from:l,elapsed:c,...h}){return!!Object.keys(h).length}const yE=(t,e,n,i={},r,s)=>a=>{const o=nE(i,t)||{},l=o.delay||i.delay||0;let{elapsed:c=0}=i;c=c-vr(l);let h={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...o,delay:-c,onUpdate:f=>{e.set(f),o.onUpdate&&o.onUpdate(f)},onComplete:()=>{a(),o.onComplete&&o.onComplete()},name:t,motionValue:e,element:s?void 0:r};uX(o)||(h={...h,...cX(t,h)}),h.duration&&(h.duration=vr(h.duration)),h.repeatDelay&&(h.repeatDelay=vr(h.repeatDelay)),h.from!==void 0&&(h.keyframes[0]=h.from);let d=!1;if((h.type===!1||h.duration===0&&!h.repeatDelay)&&(h.duration=0,h.delay===0&&(d=!0)),d&&!s&&e.get()!==void 0){const f=Ug(h.keyframes,o);if(f!==void 0)return He.update(()=>{h.onUpdate(f),h.onComplete()}),new CW([])}return!s&&QR.supports(h)?new QR(h):new gE(h)};function hX({protectedKeys:t,needsAnimating:e},n){const i=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,i}function rL(t,e,{delay:n=0,transitionOverride:i,type:r}={}){var s;let{transition:a=t.getDefaultTransition(),transitionEnd:o,...l}=e;i&&(a=i);const c=[],h=r&&t.animationState&&t.animationState.getState()[r];for(const d in l){const f=t.getValue(d,(s=t.latestValues[d])!==null&&s!==void 0?s:null),p=l[d];if(p===void 0||h&&hX(h,d))continue;const w={delay:n,...nE(a||{},d)};let E=!1;if(window.MotionHandoffAnimation){const T=xM(t);if(T){const v=window.MotionHandoffAnimation(T,d,He);v!==null&&(w.startTime=v,E=!0)}}b0(t,d),f.start(yE(d,f,p,t.shouldReduceMotion&&IM.has(d)?{type:!1}:w,t,E));const A=f.animation;A&&c.push(A)}return o&&Promise.all(c).then(()=>{He.update(()=>{o&&qW(t,o)})}),c}function C0(t,e,n={}){var i;const r=Lg(t,e,n.type==="exit"?(i=t.presenceContext)===null||i===void 0?void 0:i.custom:void 0);let{transition:s=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(s=n.transitionOverride);const a=r?()=>Promise.all(rL(t,r,n)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(c=0)=>{const{delayChildren:h=0,staggerChildren:d,staggerDirection:f}=s;return dX(t,e,h+c,d,f,n)}:()=>Promise.resolve(),{when:l}=s;if(l){const[c,h]=l==="beforeChildren"?[a,o]:[o,a];return c().then(()=>h())}else return Promise.all([a(),o(n.delay)])}function dX(t,e,n=0,i=0,r=1,s){const a=[],o=(t.variantChildren.size-1)*i,l=r===1?(c=0)=>c*i:(c=0)=>o-c*i;return Array.from(t.variantChildren).sort(fX).forEach((c,h)=>{c.notify("AnimationStart",e),a.push(C0(c,e,{...s,delay:n+l(h)}).then(()=>c.notify("AnimationComplete",e)))}),Promise.all(a)}function fX(t,e){return t.sortNodePosition(e)}function mX(t,e,n={}){t.notify("AnimationStart",e);let i;if(Array.isArray(e)){const r=e.map(s=>C0(t,s,n));i=Promise.all(r)}else if(typeof e=="string")i=C0(t,e,n);else{const r=typeof e=="function"?Lg(t,e,n.custom):e;i=Promise.all(rL(t,r,n))}return i.then(()=>{t.notify("AnimationComplete",e)})}const pX=Hb.length;function sL(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?sL(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<pX;n++){const i=Hb[n],r=t.props[i];($h(r)||r===!1)&&(e[i]=r)}return e}const gX=[...qb].reverse(),yX=qb.length;function _X(t){return e=>Promise.all(e.map(({animation:n,options:i})=>mX(t,n,i)))}function vX(t){let e=_X(t),n=WR(),i=!0;const r=l=>(c,h)=>{var d;const f=Lg(t,h,l==="exit"?(d=t.presenceContext)===null||d===void 0?void 0:d.custom:void 0);if(f){const{transition:p,transitionEnd:w,...E}=f;c={...c,...E,...w}}return c};function s(l){e=l(t)}function a(l){const{props:c}=t,h=sL(t.parent)||{},d=[],f=new Set;let p={},w=1/0;for(let A=0;A<yX;A++){const T=gX[A],v=n[T],_=c[T]!==void 0?c[T]:h[T],C=$h(_),V=T===l?v.isActive:null;V===!1&&(w=A);let O=_===h[T]&&_!==c[T]&&C;if(O&&i&&t.manuallyAnimateOnMount&&(O=!1),v.protectedKeys={...p},!v.isActive&&V===null||!_&&!v.prevProp||Og(_)||typeof _=="boolean")continue;const S=TX(v.prevProp,_);let b=S||T===l&&v.isActive&&!O&&C||A>w&&C,R=!1;const D=Array.isArray(_)?_:[_];let N=D.reduce(r(T),{});V===!1&&(N={});const{prevResolvedValues:k={}}=v,P={...k,...N},ie=Y=>{b=!0,f.has(Y)&&(R=!0,f.delete(Y)),v.needsAnimating[Y]=!0;const B=t.getValue(Y);B&&(B.liveStyle=!1)};for(const Y in P){const B=N[Y],te=k[Y];if(p.hasOwnProperty(Y))continue;let oe=!1;v0(B)&&v0(te)?oe=!_M(B,te):oe=B!==te,oe?B!=null?ie(Y):f.add(Y):B!==void 0&&f.has(Y)?ie(Y):v.protectedKeys[Y]=!0}v.prevProp=_,v.prevResolvedValues=N,v.isActive&&(p={...p,...N}),i&&t.blockInitialAnimation&&(b=!1),b&&(!(O&&S)||R)&&d.push(...D.map(Y=>({animation:Y,options:{type:T}})))}if(f.size){const A={};f.forEach(T=>{const v=t.getBaseTarget(T),_=t.getValue(T);_&&(_.liveStyle=!0),A[T]=v??null}),d.push({animation:A})}let E=!!d.length;return i&&(c.initial===!1||c.initial===c.animate)&&!t.manuallyAnimateOnMount&&(E=!1),i=!1,E?e(d):Promise.resolve()}function o(l,c){var h;if(n[l].isActive===c)return Promise.resolve();(h=t.variantChildren)===null||h===void 0||h.forEach(f=>{var p;return(p=f.animationState)===null||p===void 0?void 0:p.setActive(l,c)}),n[l].isActive=c;const d=a(l);for(const f in n)n[f].protectedKeys={};return d}return{animateChanges:a,setActive:o,setAnimateFunction:s,getState:()=>n,reset:()=>{n=WR(),i=!0}}}function TX(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!_M(e,t):!1}function fa(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function WR(){return{animate:fa(!0),whileInView:fa(),whileHover:fa(),whileTap:fa(),whileDrag:fa(),whileFocus:fa(),exit:fa()}}class sa{constructor(e){this.isMounted=!1,this.node=e}update(){}}class wX extends sa{constructor(e){super(e),e.animationState||(e.animationState=vX(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Og(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let bX=0;class EX extends sa{constructor(){super(...arguments),this.id=bX++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const r=this.node.animationState.setActive("exit",!e);n&&!e&&r.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const AX={animation:{Feature:wX},exit:{Feature:EX}};function Yh(t,e,n,i={passive:!0}){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n)}function Md(t){return{point:{x:t.pageX,y:t.pageY}}}const SX=t=>e=>sE(e)&&t(e,Md(e));function rh(t,e,n,i){return Yh(t,e,SX(n),i)}const YR=(t,e)=>Math.abs(t-e);function IX(t,e){const n=YR(t.x,e.x),i=YR(t.y,e.y);return Math.sqrt(n**2+i**2)}class aL{constructor(e,n,{transformPagePoint:i,contextWindow:r,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const d=E_(this.lastMoveEventInfo,this.history),f=this.startEvent!==null,p=IX(d.offset,{x:0,y:0})>=3;if(!f&&!p)return;const{point:w}=d,{timestamp:E}=Ot;this.history.push({...w,timestamp:E});const{onStart:A,onMove:T}=this.handlers;f||(A&&A(this.lastMoveEvent,d),this.startEvent=this.lastMoveEvent),T&&T(this.lastMoveEvent,d)},this.handlePointerMove=(d,f)=>{this.lastMoveEvent=d,this.lastMoveEventInfo=b_(f,this.transformPagePoint),He.update(this.updatePoint,!0)},this.handlePointerUp=(d,f)=>{this.end();const{onEnd:p,onSessionEnd:w,resumeAnimation:E}=this.handlers;if(this.dragSnapToOrigin&&E&&E(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const A=E_(d.type==="pointercancel"?this.lastMoveEventInfo:b_(f,this.transformPagePoint),this.history);this.startEvent&&p&&p(d,A),w&&w(d,A)},!sE(e))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=i,this.contextWindow=r||window;const a=Md(e),o=b_(a,this.transformPagePoint),{point:l}=o,{timestamp:c}=Ot;this.history=[{...l,timestamp:c}];const{onSessionStart:h}=n;h&&h(e,E_(o,this.history)),this.removeListeners=Od(rh(this.contextWindow,"pointermove",this.handlePointerMove),rh(this.contextWindow,"pointerup",this.handlePointerUp),rh(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Ks(this.updatePoint)}}function b_(t,e){return e?{point:e(t.point)}:t}function XR(t,e){return{x:t.x-e.x,y:t.y-e.y}}function E_({point:t},e){return{point:t,delta:XR(t,oL(e)),offset:XR(t,RX(e)),velocity:xX(e,.1)}}function RX(t){return t[0]}function oL(t){return t[t.length-1]}function xX(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,i=null;const r=oL(t);for(;n>=0&&(i=t[n],!(r.timestamp-i.timestamp>vr(e)));)n--;if(!i)return{x:0,y:0};const s=Tr(r.timestamp-i.timestamp);if(s===0)return{x:0,y:0};const a={x:(r.x-i.x)/s,y:(r.y-i.y)/s};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}const lL=1e-4,CX=1-lL,PX=1+lL,cL=.01,DX=0-cL,NX=0+cL;function Gn(t){return t.max-t.min}function kX(t,e,n){return Math.abs(t-e)<=n}function JR(t,e,n,i=.5){t.origin=i,t.originPoint=Je(e.min,e.max,t.origin),t.scale=Gn(n)/Gn(e),t.translate=Je(n.min,n.max,t.origin)-t.originPoint,(t.scale>=CX&&t.scale<=PX||isNaN(t.scale))&&(t.scale=1),(t.translate>=DX&&t.translate<=NX||isNaN(t.translate))&&(t.translate=0)}function sh(t,e,n,i){JR(t.x,e.x,n.x,i?i.originX:void 0),JR(t.y,e.y,n.y,i?i.originY:void 0)}function ZR(t,e,n){t.min=n.min+e.min,t.max=t.min+Gn(e)}function VX(t,e,n){ZR(t.x,e.x,n.x),ZR(t.y,e.y,n.y)}function ex(t,e,n){t.min=e.min-n.min,t.max=t.min+Gn(e)}function ah(t,e,n){ex(t.x,e.x,n.x),ex(t.y,e.y,n.y)}function OX(t,{min:e,max:n},i){return e!==void 0&&t<e?t=i?Je(e,t,i.min):Math.max(t,e):n!==void 0&&t>n&&(t=i?Je(n,t,i.max):Math.min(t,n)),t}function tx(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function MX(t,{top:e,left:n,bottom:i,right:r}){return{x:tx(t.x,n,r),y:tx(t.y,e,i)}}function nx(t,e){let n=e.min-t.min,i=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,i]=[i,n]),{min:n,max:i}}function LX(t,e){return{x:nx(t.x,e.x),y:nx(t.y,e.y)}}function UX(t,e){let n=.5;const i=Gn(t),r=Gn(e);return r>i?n=ec(e.min,e.max-i,t.min):i>r&&(n=ec(t.min,t.max-r,e.min)),Nr(0,1,n)}function zX(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const P0=.35;function jX(t=P0){return t===!1?t=0:t===!0&&(t=P0),{x:ix(t,"left","right"),y:ix(t,"top","bottom")}}function ix(t,e,n){return{min:rx(t,e),max:rx(t,n)}}function rx(t,e){return typeof t=="number"?t:t[e]||0}const sx=()=>({translate:0,scale:1,origin:0,originPoint:0}),il=()=>({x:sx(),y:sx()}),ax=()=>({min:0,max:0}),ct=()=>({x:ax(),y:ax()});function Yn(t){return[t("x"),t("y")]}function uL({top:t,left:e,right:n,bottom:i}){return{x:{min:e,max:n},y:{min:t,max:i}}}function BX({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function FX(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),i=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:i.y,right:i.x}}function A_(t){return t===void 0||t===1}function D0({scale:t,scaleX:e,scaleY:n}){return!A_(t)||!A_(e)||!A_(n)}function wa(t){return D0(t)||hL(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function hL(t){return ox(t.x)||ox(t.y)}function ox(t){return t&&t!=="0%"}function wp(t,e,n){const i=t-n,r=e*i;return n+r}function lx(t,e,n,i,r){return r!==void 0&&(t=wp(t,r,i)),wp(t,n,i)+e}function N0(t,e=0,n=1,i,r){t.min=lx(t.min,e,n,i,r),t.max=lx(t.max,e,n,i,r)}function dL(t,{x:e,y:n}){N0(t.x,e.translate,e.scale,e.originPoint),N0(t.y,n.translate,n.scale,n.originPoint)}const cx=.999999999999,ux=1.0000000000001;function qX(t,e,n,i=!1){const r=n.length;if(!r)return;e.x=e.y=1;let s,a;for(let o=0;o<r;o++){s=n[o],a=s.projectionDelta;const{visualElement:l}=s.options;l&&l.props.style&&l.props.style.display==="contents"||(i&&s.options.layoutScroll&&s.scroll&&s!==s.root&&sl(t,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),a&&(e.x*=a.x.scale,e.y*=a.y.scale,dL(t,a)),i&&wa(s.latestValues)&&sl(t,s.latestValues))}e.x<ux&&e.x>cx&&(e.x=1),e.y<ux&&e.y>cx&&(e.y=1)}function rl(t,e){t.min=t.min+e,t.max=t.max+e}function hx(t,e,n,i,r=.5){const s=Je(t.min,t.max,r);N0(t,e,n,s,i)}function sl(t,e){hx(t.x,e.x,e.scaleX,e.scale,e.originX),hx(t.y,e.y,e.scaleY,e.scale,e.originY)}function fL(t,e){return uL(FX(t.getBoundingClientRect(),e))}function HX(t,e,n){const i=fL(t,n),{scroll:r}=e;return r&&(rl(i.x,r.offset.x),rl(i.y,r.offset.y)),i}const mL=({current:t})=>t?t.ownerDocument.defaultView:null,GX=new WeakMap;class $X{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=ct(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const r=h=>{const{dragSnapToOrigin:d}=this.getProps();d?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Md(h).point)},s=(h,d)=>{const{drag:f,dragPropagation:p,onDragStart:w}=this.getProps();if(f&&!p&&(this.openDragLock&&this.openDragLock(),this.openDragLock=UW(f),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Yn(A=>{let T=this.getAxisMotionValue(A).get()||0;if($i.test(T)){const{projection:v}=this.visualElement;if(v&&v.layout){const _=v.layout.layoutBox[A];_&&(T=Gn(_)*(parseFloat(T)/100))}}this.originPoint[A]=T}),w&&He.postRender(()=>w(h,d)),b0(this.visualElement,"transform");const{animationState:E}=this.visualElement;E&&E.setActive("whileDrag",!0)},a=(h,d)=>{const{dragPropagation:f,dragDirectionLock:p,onDirectionLock:w,onDrag:E}=this.getProps();if(!f&&!this.openDragLock)return;const{offset:A}=d;if(p&&this.currentDirection===null){this.currentDirection=KX(A),this.currentDirection!==null&&w&&w(this.currentDirection);return}this.updateAxis("x",d.point,A),this.updateAxis("y",d.point,A),this.visualElement.render(),E&&E(h,d)},o=(h,d)=>this.stop(h,d),l=()=>Yn(h=>{var d;return this.getAnimationState(h)==="paused"&&((d=this.getAxisMotionValue(h).animation)===null||d===void 0?void 0:d.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new aL(e,{onSessionStart:r,onStart:s,onMove:a,onSessionEnd:o,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,contextWindow:mL(this.visualElement)})}stop(e,n){const i=this.isDragging;if(this.cancel(),!i)return;const{velocity:r}=n;this.startAnimation(r);const{onDragEnd:s}=this.getProps();s&&He.postRender(()=>s(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,i){const{drag:r}=this.getProps();if(!i||!Cf(e,r,this.currentDirection))return;const s=this.getAxisMotionValue(e);let a=this.originPoint[e]+i[e];this.constraints&&this.constraints[e]&&(a=OX(a,this.constraints[e],this.elastic[e])),s.set(a)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:i}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,s=this.constraints;n&&tl(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&r?this.constraints=MX(r.layoutBox,n):this.constraints=!1,this.elastic=jX(i),s!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Yn(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=zX(r.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!tl(e))return!1;const i=e.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const s=HX(i,r.root,this.visualElement.getTransformPagePoint());let a=LX(r.layout.layoutBox,s);if(n){const o=n(BX(a));this.hasMutatedConstraints=!!o,o&&(a=uL(o))}return a}startAnimation(e){const{drag:n,dragMomentum:i,dragElastic:r,dragTransition:s,dragSnapToOrigin:a,onDragTransitionEnd:o}=this.getProps(),l=this.constraints||{},c=Yn(h=>{if(!Cf(h,n,this.currentDirection))return;let d=l&&l[h]||{};a&&(d={min:0,max:0});const f=r?200:1e6,p=r?40:1e7,w={type:"inertia",velocity:i?e[h]:0,bounceStiffness:f,bounceDamping:p,timeConstant:750,restDelta:1,restSpeed:10,...s,...d};return this.startAxisValueAnimation(h,w)});return Promise.all(c).then(o)}startAxisValueAnimation(e,n){const i=this.getAxisMotionValue(e);return b0(this.visualElement,e),i.start(yE(e,i,0,n,this.visualElement,!1))}stopAnimation(){Yn(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Yn(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,i=this.visualElement.getProps(),r=i[n];return r||this.visualElement.getValue(e,(i.initial?i.initial[e]:void 0)||0)}snapToCursor(e){Yn(n=>{const{drag:i}=this.getProps();if(!Cf(n,i,this.currentDirection))return;const{projection:r}=this.visualElement,s=this.getAxisMotionValue(n);if(r&&r.layout){const{min:a,max:o}=r.layout.layoutBox[n];s.set(e[n]-Je(a,o,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:i}=this.visualElement;if(!tl(n)||!i||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};Yn(a=>{const o=this.getAxisMotionValue(a);if(o&&this.constraints!==!1){const l=o.get();r[a]=UX({min:l,max:l},this.constraints[a])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),Yn(a=>{if(!Cf(a,e,null))return;const o=this.getAxisMotionValue(a),{min:l,max:c}=this.constraints[a];o.set(Je(l,c,r[a]))})}addListeners(){if(!this.visualElement.current)return;GX.set(this.visualElement,this);const e=this.visualElement.current,n=rh(e,"pointerdown",l=>{const{drag:c,dragListener:h=!0}=this.getProps();c&&h&&this.start(l)}),i=()=>{const{dragConstraints:l}=this.getProps();tl(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,s=r.addEventListener("measure",i);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),He.read(i);const a=Yh(window,"resize",()=>this.scalePositionWithinConstraints()),o=r.addEventListener("didUpdate",({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(Yn(h=>{const d=this.getAxisMotionValue(h);d&&(this.originPoint[h]+=l[h].translate,d.set(d.get()+l[h].translate))}),this.visualElement.render())});return()=>{a(),n(),s(),o&&o()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:i=!1,dragPropagation:r=!1,dragConstraints:s=!1,dragElastic:a=P0,dragMomentum:o=!0}=e;return{...e,drag:n,dragDirectionLock:i,dragPropagation:r,dragConstraints:s,dragElastic:a,dragMomentum:o}}}function Cf(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function KX(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class QX extends sa{constructor(e){super(e),this.removeGroupControls=Bn,this.removeListeners=Bn,this.controls=new $X(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Bn}unmount(){this.removeGroupControls(),this.removeListeners()}}const dx=t=>(e,n)=>{t&&He.postRender(()=>t(e,n))};class WX extends sa{constructor(){super(...arguments),this.removePointerDownListener=Bn}onPointerDown(e){this.session=new aL(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:mL(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:i,onPanEnd:r}=this.node.getProps();return{onSessionStart:dx(e),onStart:dx(n),onMove:i,onEnd:(s,a)=>{delete this.session,r&&He.postRender(()=>r(s,a))}}}mount(){this.removePointerDownListener=rh(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const um={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function fx(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const uu={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(ne.test(t))t=parseFloat(t);else return t;const n=fx(t,e.target.x),i=fx(t,e.target.y);return`${n}% ${i}%`}},YX={correct:(t,{treeScale:e,projectionDelta:n})=>{const i=t,r=Qs.parse(t);if(r.length>5)return i;const s=Qs.createTransformer(t),a=typeof r[0]!="number"?1:0,o=n.x.scale*e.x,l=n.y.scale*e.y;r[0+a]/=o,r[1+a]/=l;const c=Je(o,l,.5);return typeof r[2+a]=="number"&&(r[2+a]/=c),typeof r[3+a]=="number"&&(r[3+a]/=c),s(r)}};class XX extends x.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:i,layoutId:r}=this.props,{projection:s}=e;yW(JX),s&&(n.group&&n.group.add(s),i&&i.register&&r&&i.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),um.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:i,drag:r,isPresent:s}=this.props,a=i.projection;return a&&(a.isPresent=s,r||e.layoutDependency!==n||n===void 0?a.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?a.promote():a.relegate()||He.postRender(()=>{const o=a.getStack();(!o||!o.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),$b.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:i}=this.props,{projection:r}=e;r&&(r.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(r),i&&i.deregister&&i.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function pL(t){const[e,n]=XO(),i=x.useContext(Ub);return y.jsx(XX,{...t,layoutGroup:i,switchLayoutGroup:x.useContext(sM),isPresent:e,safeToRemove:n})}const JX={borderRadius:{...uu,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:uu,borderTopRightRadius:uu,borderBottomLeftRadius:uu,borderBottomRightRadius:uu,boxShadow:YX};function ZX(t,e,n){const i=Jt(t)?t:Qh(t);return i.start(yE("",i,e,n)),i.animation}function eJ(t){return t instanceof SVGElement&&t.tagName!=="svg"}const tJ=(t,e)=>t.depth-e.depth;class nJ{constructor(){this.children=[],this.isDirty=!1}add(e){aE(this.children,e),this.isDirty=!0}remove(e){oE(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(tJ),this.isDirty=!1,this.children.forEach(e)}}function iJ(t,e){const n=Ki.now(),i=({timestamp:r})=>{const s=r-n;s>=e&&(Ks(i),t(s-e))};return He.read(i,!0),()=>Ks(i)}const gL=["TopLeft","TopRight","BottomLeft","BottomRight"],rJ=gL.length,mx=t=>typeof t=="string"?parseFloat(t):t,px=t=>typeof t=="number"||ne.test(t);function sJ(t,e,n,i,r,s){r?(t.opacity=Je(0,n.opacity!==void 0?n.opacity:1,aJ(i)),t.opacityExit=Je(e.opacity!==void 0?e.opacity:1,0,oJ(i))):s&&(t.opacity=Je(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,i));for(let a=0;a<rJ;a++){const o=`border${gL[a]}Radius`;let l=gx(e,o),c=gx(n,o);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||px(l)===px(c)?(t[o]=Math.max(Je(mx(l),mx(c),i),0),($i.test(c)||$i.test(l))&&(t[o]+="%")):t[o]=c}(e.rotate||n.rotate)&&(t.rotate=Je(e.rotate||0,n.rotate||0,i))}function gx(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const aJ=yL(0,.5,OM),oJ=yL(.5,.95,Bn);function yL(t,e,n){return i=>i<t?0:i>e?1:n(ec(t,e,i))}function yx(t,e){t.min=e.min,t.max=e.max}function Wn(t,e){yx(t.x,e.x),yx(t.y,e.y)}function _x(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function vx(t,e,n,i,r){return t-=e,t=wp(t,1/n,i),r!==void 0&&(t=wp(t,1/r,i)),t}function lJ(t,e=0,n=1,i=.5,r,s=t,a=t){if($i.test(e)&&(e=parseFloat(e),e=Je(a.min,a.max,e/100)-a.min),typeof e!="number")return;let o=Je(s.min,s.max,i);t===s&&(o-=e),t.min=vx(t.min,e,n,o,r),t.max=vx(t.max,e,n,o,r)}function Tx(t,e,[n,i,r],s,a){lJ(t,e[n],e[i],e[r],e.scale,s,a)}const cJ=["x","scaleX","originX"],uJ=["y","scaleY","originY"];function wx(t,e,n,i){Tx(t.x,e,cJ,n?n.x:void 0,i?i.x:void 0),Tx(t.y,e,uJ,n?n.y:void 0,i?i.y:void 0)}function bx(t){return t.translate===0&&t.scale===1}function _L(t){return bx(t.x)&&bx(t.y)}function Ex(t,e){return t.min===e.min&&t.max===e.max}function hJ(t,e){return Ex(t.x,e.x)&&Ex(t.y,e.y)}function Ax(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function vL(t,e){return Ax(t.x,e.x)&&Ax(t.y,e.y)}function Sx(t){return Gn(t.x)/Gn(t.y)}function Ix(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class dJ{constructor(){this.members=[]}add(e){aE(this.members,e),e.scheduleRender()}remove(e){if(oE(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(r=>e===r);if(n===0)return!1;let i;for(let r=n;r>=0;r--){const s=this.members[r];if(s.isPresent!==!1){i=s;break}}return i?(this.promote(i),!0):!1}promote(e,n){const i=this.lead;if(e!==i&&(this.prevLead=i,this.lead=e,e.show(),i)){i.instance&&i.scheduleRender(),e.scheduleRender(),e.resumeFrom=i,n&&(e.resumeFrom.preserveOpacity=!0),i.snapshot&&(e.snapshot=i.snapshot,e.snapshot.latestValues=i.animationValues||i.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;r===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:i}=e;n.onExitComplete&&n.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function fJ(t,e,n){let i="";const r=t.x.translate/e.x,s=t.y.translate/e.y,a=(n==null?void 0:n.z)||0;if((r||s||a)&&(i=`translate3d(${r}px, ${s}px, ${a}px) `),(e.x!==1||e.y!==1)&&(i+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:c,rotate:h,rotateX:d,rotateY:f,skewX:p,skewY:w}=n;c&&(i=`perspective(${c}px) ${i}`),h&&(i+=`rotate(${h}deg) `),d&&(i+=`rotateX(${d}deg) `),f&&(i+=`rotateY(${f}deg) `),p&&(i+=`skewX(${p}deg) `),w&&(i+=`skewY(${w}deg) `)}const o=t.x.scale*e.x,l=t.y.scale*e.y;return(o!==1||l!==1)&&(i+=`scale(${o}, ${l})`),i||"none"}const ba={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},Iu=typeof window<"u"&&window.MotionDebug!==void 0,S_=["","X","Y","Z"],mJ={visibility:"hidden"},Rx=1e3;let pJ=0;function I_(t,e,n,i){const{latestValues:r}=e;r[t]&&(n[t]=r[t],e.setStaticValue(t,0),i&&(i[t]=0))}function TL(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=xM(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:r,layoutId:s}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",He,!(r||s))}const{parent:i}=t;i&&!i.hasCheckedOptimisedAppear&&TL(i)}function wL({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:i,resetTransform:r}){return class{constructor(a={},o=e==null?void 0:e()){this.id=pJ++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Iu&&(ba.totalNodes=ba.resolvedTargetDeltas=ba.recalculatedProjection=0),this.nodes.forEach(_J),this.nodes.forEach(EJ),this.nodes.forEach(AJ),this.nodes.forEach(vJ),Iu&&window.MotionDebug.record(ba)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=o?o.root||o:this,this.path=o?[...o.path,o]:[],this.parent=o,this.depth=o?o.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new nJ)}addEventListener(a,o){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new lE),this.eventHandlers.get(a).add(o)}notifyListeners(a,...o){const l=this.eventHandlers.get(a);l&&l.notify(...o)}hasListeners(a){return this.eventHandlers.has(a)}mount(a,o=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=eJ(a),this.instance=a;const{layoutId:l,layout:c,visualElement:h}=this.options;if(h&&!h.current&&h.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),o&&(c||l)&&(this.isLayoutDirty=!0),t){let d;const f=()=>this.root.updateBlockedByResize=!1;t(a,()=>{this.root.updateBlockedByResize=!0,d&&d(),d=iJ(f,250),um.hasAnimatedSinceResize&&(um.hasAnimatedSinceResize=!1,this.nodes.forEach(Cx))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&h&&(l||c)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:f,hasRelativeTargetChanged:p,layout:w})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const E=this.options.transition||h.getDefaultTransition()||CJ,{onLayoutAnimationStart:A,onLayoutAnimationComplete:T}=h.getProps(),v=!this.targetLayout||!vL(this.targetLayout,w)||p,_=!f&&p;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||_||f&&(v||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(d,_);const C={...nE(E,"layout"),onPlay:A,onComplete:T};(h.shouldReduceMotion||this.options.layoutRoot)&&(C.delay=0,C.type=!1),this.startAnimation(C)}else f||Cx(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=w})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Ks(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(SJ),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&TL(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let h=0;h<this.path.length;h++){const d=this.path[h];d.shouldResetTransform=!0,d.updateScroll("snapshot"),d.options.layoutRoot&&d.willUpdate(!1)}const{layoutId:o,layout:l}=this.options;if(o===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(xx);return}this.isUpdating||this.nodes.forEach(wJ),this.isUpdating=!1,this.nodes.forEach(bJ),this.nodes.forEach(gJ),this.nodes.forEach(yJ),this.clearAllSnapshots();const o=Ki.now();Ot.delta=Nr(0,1e3/60,o-Ot.timestamp),Ot.timestamp=o,Ot.isProcessing=!0,g_.update.process(Ot),g_.preRender.process(Ot),g_.render.process(Ot),Ot.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,$b.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(TJ),this.sharedNodes.forEach(IJ)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,He.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){He.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=ct(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:o}=this.options;o&&o.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let o=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(o=!1),o){const l=i(this.instance);this.scroll={animationId:this.root.animationId,phase:a,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!r)return;const a=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,o=this.projectionDelta&&!_L(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,h=c!==this.prevTransformTemplateValue;a&&(o||wa(this.latestValues)||h)&&(r(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const o=this.measurePageBox();let l=this.removeElementScroll(o);return a&&(l=this.removeTransform(l)),PJ(l),{animationId:this.root.animationId,measuredBox:o,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var a;const{visualElement:o}=this.options;if(!o)return ct();const l=o.measureViewportBox();if(!(((a=this.scroll)===null||a===void 0?void 0:a.wasRoot)||this.path.some(DJ))){const{scroll:h}=this.root;h&&(rl(l.x,h.offset.x),rl(l.y,h.offset.y))}return l}removeElementScroll(a){var o;const l=ct();if(Wn(l,a),!((o=this.scroll)===null||o===void 0)&&o.wasRoot)return l;for(let c=0;c<this.path.length;c++){const h=this.path[c],{scroll:d,options:f}=h;h!==this.root&&d&&f.layoutScroll&&(d.wasRoot&&Wn(l,a),rl(l.x,d.offset.x),rl(l.y,d.offset.y))}return l}applyTransform(a,o=!1){const l=ct();Wn(l,a);for(let c=0;c<this.path.length;c++){const h=this.path[c];!o&&h.options.layoutScroll&&h.scroll&&h!==h.root&&sl(l,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),wa(h.latestValues)&&sl(l,h.latestValues)}return wa(this.latestValues)&&sl(l,this.latestValues),l}removeTransform(a){const o=ct();Wn(o,a);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!wa(c.latestValues))continue;D0(c.latestValues)&&c.updateSnapshot();const h=ct(),d=c.measurePageBox();Wn(h,d),wx(o,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,h)}return wa(this.latestValues)&&wx(o,this.latestValues),o}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Ot.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var o;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(a||c&&this.isSharedProjectionDirty||this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:f}=this.options;if(!(!this.layout||!(d||f))){if(this.resolvedRelativeTargetAt=Ot.timestamp,!this.targetDelta&&!this.relativeTarget){const p=this.getClosestProjectingParent();p&&p.layout&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ct(),this.relativeTargetOrigin=ct(),ah(this.relativeTargetOrigin,this.layout.layoutBox,p.layout.layoutBox),Wn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=ct(),this.targetWithTransforms=ct()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),VX(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Wn(this.target,this.layout.layoutBox),dL(this.target,this.targetDelta)):Wn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const p=this.getClosestProjectingParent();p&&!!p.resumingFrom==!!this.resumingFrom&&!p.options.layoutScroll&&p.target&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ct(),this.relativeTargetOrigin=ct(),ah(this.relativeTargetOrigin,this.target,p.target),Wn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Iu&&ba.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||D0(this.parent.latestValues)||hL(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var a;const o=this.getLead(),l=!!this.resumingFrom||this!==o;let c=!0;if((this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===Ot.timestamp&&(c=!1),c)return;const{layout:h,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(h||d))return;Wn(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,p=this.treeScale.y;qX(this.layoutCorrected,this.treeScale,this.path,l),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=ct());const{target:w}=o;if(!w){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(_x(this.prevProjectionDelta.x,this.projectionDelta.x),_x(this.prevProjectionDelta.y,this.projectionDelta.y)),sh(this.projectionDelta,this.layoutCorrected,w,this.latestValues),(this.treeScale.x!==f||this.treeScale.y!==p||!Ix(this.projectionDelta.x,this.prevProjectionDelta.x)||!Ix(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",w)),Iu&&ba.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){var o;if((o=this.options.visualElement)===null||o===void 0||o.scheduleRender(),a){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=il(),this.projectionDelta=il(),this.projectionDeltaWithTransform=il()}setAnimationOrigin(a,o=!1){const l=this.snapshot,c=l?l.latestValues:{},h={...this.latestValues},d=il();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!o;const f=ct(),p=l?l.source:void 0,w=this.layout?this.layout.source:void 0,E=p!==w,A=this.getStack(),T=!A||A.members.length<=1,v=!!(E&&!T&&this.options.crossfade===!0&&!this.path.some(xJ));this.animationProgress=0;let _;this.mixTargetDelta=C=>{const V=C/1e3;Px(d.x,a.x,V),Px(d.y,a.y,V),this.setTargetDelta(d),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(ah(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),RJ(this.relativeTarget,this.relativeTargetOrigin,f,V),_&&hJ(this.relativeTarget,_)&&(this.isProjectionDirty=!1),_||(_=ct()),Wn(_,this.relativeTarget)),E&&(this.animationValues=h,sJ(h,c,this.latestValues,V,v,T)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=V},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Ks(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=He.update(()=>{um.hasAnimatedSinceResize=!0,this.currentAnimation=ZX(0,Rx,{...a,onUpdate:o=>{this.mixTargetDelta(o),a.onUpdate&&a.onUpdate(o)},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Rx),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:o,target:l,layout:c,latestValues:h}=a;if(!(!o||!l||!c)){if(this!==a&&this.layout&&c&&bL(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||ct();const d=Gn(this.layout.layoutBox.x);l.x.min=a.target.x.min,l.x.max=l.x.min+d;const f=Gn(this.layout.layoutBox.y);l.y.min=a.target.y.min,l.y.max=l.y.min+f}Wn(o,l),sl(o,h),sh(this.projectionDeltaWithTransform,this.layoutCorrected,o,h)}}registerSharedNode(a,o){this.sharedNodes.has(a)||this.sharedNodes.set(a,new dJ),this.sharedNodes.get(a).add(o);const c=o.options.initialPromotionConfig;o.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(o):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var a;const{layoutId:o}=this.options;return o?((a=this.getStack())===null||a===void 0?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:o}=this.options;return o?(a=this.getStack())===null||a===void 0?void 0:a.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:o,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),a&&(this.projectionDelta=void 0,this.needsReset=!0),o&&this.setOptions({transition:o})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetSkewAndRotation(){const{visualElement:a}=this.options;if(!a)return;let o=!1;const{latestValues:l}=a;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(o=!0),!o)return;const c={};l.z&&I_("z",a,c,this.animationValues);for(let h=0;h<S_.length;h++)I_(`rotate${S_[h]}`,a,c,this.animationValues),I_(`skew${S_[h]}`,a,c,this.animationValues);a.render();for(const h in c)a.setStaticValue(h,c[h]),this.animationValues&&(this.animationValues[h]=c[h]);a.scheduleRender()}getProjectionStyles(a){var o,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return mJ;const c={visibility:""},h=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=lm(a==null?void 0:a.pointerEvents)||"",c.transform=h?h(this.latestValues,""):"none",c;const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){const E={};return this.options.layoutId&&(E.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,E.pointerEvents=lm(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!wa(this.latestValues)&&(E.transform=h?h({},""):"none",this.hasProjected=!1),E}const f=d.animationValues||d.latestValues;this.applyTransformsToTarget(),c.transform=fJ(this.projectionDeltaWithTransform,this.treeScale,f),h&&(c.transform=h(f,c.transform));const{x:p,y:w}=this.projectionDelta;c.transformOrigin=`${p.origin*100}% ${w.origin*100}% 0`,d.animationValues?c.opacity=d===this?(l=(o=f.opacity)!==null&&o!==void 0?o:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:c.opacity=d===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const E in gp){if(f[E]===void 0)continue;const{correct:A,applyTo:T}=gp[E],v=c.transform==="none"?f[E]:A(f[E],d);if(T){const _=T.length;for(let C=0;C<_;C++)c[T[C]]=v}else c[E]=v}return this.options.layoutId&&(c.pointerEvents=d===this?lm(a==null?void 0:a.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var o;return(o=a.currentAnimation)===null||o===void 0?void 0:o.stop()}),this.root.nodes.forEach(xx),this.root.sharedNodes.clear()}}}function gJ(t){t.updateLayout()}function yJ(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:i,measuredBox:r}=t.layout,{animationType:s}=t.options,a=n.source!==t.layout.source;s==="size"?Yn(d=>{const f=a?n.measuredBox[d]:n.layoutBox[d],p=Gn(f);f.min=i[d].min,f.max=f.min+p}):bL(s,n.layoutBox,i)&&Yn(d=>{const f=a?n.measuredBox[d]:n.layoutBox[d],p=Gn(i[d]);f.max=f.min+p,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[d].max=t.relativeTarget[d].min+p)});const o=il();sh(o,i,n.layoutBox);const l=il();a?sh(l,t.applyTransform(r,!0),n.measuredBox):sh(l,i,n.layoutBox);const c=!_L(o);let h=!1;if(!t.resumeFrom){const d=t.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:f,layout:p}=d;if(f&&p){const w=ct();ah(w,n.layoutBox,f.layoutBox);const E=ct();ah(E,i,p.layoutBox),vL(w,E)||(h=!0),d.options.layoutRoot&&(t.relativeTarget=E,t.relativeTargetOrigin=w,t.relativeParent=d)}}}t.notifyListeners("didUpdate",{layout:i,snapshot:n,delta:l,layoutDelta:o,hasLayoutChanged:c,hasRelativeTargetChanged:h})}else if(t.isLead()){const{onExitComplete:i}=t.options;i&&i()}t.options.transition=void 0}function _J(t){Iu&&ba.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function vJ(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function TJ(t){t.clearSnapshot()}function xx(t){t.clearMeasurements()}function wJ(t){t.isLayoutDirty=!1}function bJ(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function Cx(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function EJ(t){t.resolveTargetDelta()}function AJ(t){t.calcProjection()}function SJ(t){t.resetSkewAndRotation()}function IJ(t){t.removeLeadSnapshot()}function Px(t,e,n){t.translate=Je(e.translate,0,n),t.scale=Je(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function Dx(t,e,n,i){t.min=Je(e.min,n.min,i),t.max=Je(e.max,n.max,i)}function RJ(t,e,n,i){Dx(t.x,e.x,n.x,i),Dx(t.y,e.y,n.y,i)}function xJ(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const CJ={duration:.45,ease:[.4,0,.1,1]},Nx=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),kx=Nx("applewebkit/")&&!Nx("chrome/")?Math.round:Bn;function Vx(t){t.min=kx(t.min),t.max=kx(t.max)}function PJ(t){Vx(t.x),Vx(t.y)}function bL(t,e,n){return t==="position"||t==="preserve-aspect"&&!kX(Sx(e),Sx(n),.2)}function DJ(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const NJ=wL({attachResizeListener:(t,e)=>Yh(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),R_={current:void 0},EL=wL({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!R_.current){const t=new NJ({});t.mount(window),t.setOptions({layoutScroll:!0}),R_.current=t}return R_.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),kJ={pan:{Feature:WX},drag:{Feature:QX,ProjectionNode:EL,MeasureLayout:pL}};function Ox(t,e,n){const{props:i}=t;t.animationState&&i.whileHover&&t.animationState.setActive("whileHover",n==="Start");const r="onHover"+n,s=i[r];s&&He.postRender(()=>s(e,Md(e)))}class VJ extends sa{mount(){const{current:e}=this.node;e&&(this.unmount=kW(e,n=>(Ox(this.node,n,"Start"),i=>Ox(this.node,i,"End"))))}unmount(){}}class OJ extends sa{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Od(Yh(this.node.current,"focus",()=>this.onFocus()),Yh(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Mx(t,e,n){const{props:i}=t;t.animationState&&i.whileTap&&t.animationState.setActive("whileTap",n==="Start");const r="onTap"+(n==="End"?"":n),s=i[r];s&&He.postRender(()=>s(e,Md(e)))}class MJ extends sa{mount(){const{current:e}=this.node;e&&(this.unmount=LW(e,n=>(Mx(this.node,n,"Start"),(i,{success:r})=>Mx(this.node,i,r?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const k0=new WeakMap,x_=new WeakMap,LJ=t=>{const e=k0.get(t.target);e&&e(t)},UJ=t=>{t.forEach(LJ)};function zJ({root:t,...e}){const n=t||document;x_.has(n)||x_.set(n,{});const i=x_.get(n),r=JSON.stringify(e);return i[r]||(i[r]=new IntersectionObserver(UJ,{root:t,...e})),i[r]}function jJ(t,e,n){const i=zJ(e);return k0.set(t,n),i.observe(t),()=>{k0.delete(t),i.unobserve(t)}}const BJ={some:0,all:1};class FJ extends sa{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:i,amount:r="some",once:s}=e,a={root:n?n.current:void 0,rootMargin:i,threshold:typeof r=="number"?r:BJ[r]},o=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,s&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:h,onViewportLeave:d}=this.node.getProps(),f=c?h:d;f&&f(l)};return jJ(this.node.current,a,o)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(qJ(e,n))&&this.startObserver()}unmount(){}}function qJ({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const HJ={inView:{Feature:FJ},tap:{Feature:MJ},focus:{Feature:OJ},hover:{Feature:VJ}},GJ={layout:{ProjectionNode:EL,MeasureLayout:pL}},V0={current:null},AL={current:!1};function $J(){if(AL.current=!0,!!Bb)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>V0.current=t.matches;t.addListener(e),e()}else V0.current=!1}const KJ=[...WM,Kt,Qs],QJ=t=>KJ.find(QM(t)),Lx=new WeakMap;function WJ(t,e,n){for(const i in e){const r=e[i],s=n[i];if(Jt(r))t.addValue(i,r);else if(Jt(s))t.addValue(i,Qh(r,{owner:t}));else if(s!==r)if(t.hasValue(i)){const a=t.getValue(i);a.liveStyle===!0?a.jump(r):a.hasAnimated||a.set(r)}else{const a=t.getStaticValue(i);t.addValue(i,Qh(a!==void 0?a:r,{owner:t}))}}for(const i in n)e[i]===void 0&&t.removeValue(i);return e}const Ux=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class YJ{scrapeMotionValuesFromProps(e,n,i){return{}}constructor({parent:e,props:n,presenceContext:i,reducedMotionConfig:r,blockInitialAnimation:s,visualState:a},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=mE,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const p=Ki.now();this.renderScheduledAt<p&&(this.renderScheduledAt=p,He.render(this.render,!1,!0))};const{latestValues:l,renderState:c,onUpdate:h}=a;this.onUpdate=h,this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=c,this.parent=e,this.props=n,this.presenceContext=i,this.depth=e?e.depth+1:0,this.reducedMotionConfig=r,this.options=o,this.blockInitialAnimation=!!s,this.isControllingVariants=Mg(n),this.isVariantNode=iM(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:d,...f}=this.scrapeMotionValuesFromProps(n,{},this);for(const p in f){const w=f[p];l[p]!==void 0&&Jt(w)&&w.set(l[p],!1)}}mount(e){this.current=e,Lx.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,i)=>this.bindToMotionValue(i,n)),AL.current||$J(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:V0.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){Lx.delete(this.current),this.projection&&this.projection.unmount(),Ks(this.notifyUpdate),Ks(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const i=To.has(e),r=n.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&He.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0)}),s=n.on("renderRequest",this.scheduleRender);let a;window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{r(),s(),a&&a(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in tc){const n=tc[e];if(!n)continue;const{isEnabled:i,Feature:r}=n;if(!this.features[e]&&r&&i(this.props)&&(this.features[e]=new r(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):ct()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let i=0;i<Ux.length;i++){const r=Ux[i];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const s="on"+r,a=e[s];a&&(this.propEventSubscriptions[r]=this.on(r,a))}this.prevMotionValues=WJ(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const i=this.values.get(e);n!==i&&(i&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let i=this.values.get(e);return i===void 0&&n!==void 0&&(i=Qh(n===null?void 0:n,{owner:this}),this.addValue(e,i)),i}readValue(e,n){var i;let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(i=this.getBaseTargetFromProps(this.props,e))!==null&&i!==void 0?i:this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&($M(r)||LM(r))?r=parseFloat(r):!QJ(r)&&Qs.test(n)&&(r=qM(e,n)),this.setBaseTarget(e,Jt(r)?r.get():r)),Jt(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:i}=this.props;let r;if(typeof i=="string"||typeof i=="object"){const a=Qb(this.props,i,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);a&&(r=a[e])}if(i&&r!==void 0)return r;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!Jt(s)?s:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new lE),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class SL extends YJ{constructor(){super(...arguments),this.KeyframeResolver=YM}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:i}){delete n[e],delete i[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Jt(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function XJ(t){return window.getComputedStyle(t)}class JJ extends SL{constructor(){super(...arguments),this.type="html",this.renderInstance=dM}readValueFromInstance(e,n){if(To.has(n)){const i=fE(n);return i&&i.default||0}else{const i=XJ(e),r=(cM(n)?i.getPropertyValue(n):i[n])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(e,{transformPagePoint:n}){return fL(e,n)}build(e,n,i){Xb(e,n,i.transformTemplate)}scrapeMotionValuesFromProps(e,n,i){return tE(e,n,i)}}class ZJ extends SL{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=ct}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(To.has(n)){const i=fE(n);return i&&i.default||0}return n=fM.has(n)?n:Gb(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,i){return gM(e,n,i)}build(e,n,i){Jb(e,n,this.isSVGTag,i.transformTemplate)}renderInstance(e,n,i,r){mM(e,n,i,r)}mount(e){this.isSVGTag=eE(e.tagName),super.mount(e)}}const eZ=(t,e)=>Kb(t)?new ZJ(e):new JJ(e,{allowProjection:t!==x.Fragment}),tZ=IW({...AX,...HJ,...kJ,...GJ},eZ),nZ=BQ(tZ),iZ=()=>{const{notification:t,hideNotification:e}=YO(),n={success:y.jsx(F3,{className:"h-6 w-6 text-green-500"}),info:y.jsx(h2,{className:"h-6 w-6 text-blue-500"}),warning:y.jsx(Tz,{className:"h-6 w-6 text-amber-500"}),error:y.jsx(H3,{className:"h-6 w-6 text-red-500"})},i={success:"bg-white border-green-100",info:"bg-white border-blue-100",warning:"bg-white border-amber-100",error:"bg-white border-red-100"};return y.jsx(kQ,{children:t.isVisible&&y.jsxs(nZ.div,{initial:{opacity:0,y:-50},animate:{opacity:1,y:0},exit:{opacity:0,y:-50},transition:{type:"spring",stiffness:300,damping:30},className:`fixed top-6 left-0 right-0 z-[100] mx-auto flex w-[90%] max-w-md items-center gap-3 rounded-xl border p-4 shadow-xl ${i[t.type]}`,children:[y.jsx("div",{className:"flex-shrink-0",children:n[t.type]}),y.jsx("div",{className:"flex-1",children:y.jsx("p",{className:"font-medium text-gray-900",children:t.message})}),y.jsx("button",{onClick:e,className:"flex-shrink-0 rounded-full p-1 text-gray-400 hover:bg-gray-100 hover:text-gray-500",children:y.jsx(qp,{className:"h-4 w-4"})})]})})},IL=x.createContext(void 0),XZ=()=>{const t=x.useContext(IL);if(t===void 0)throw new Error("useOrder must be used within an OrderProvider");return t},rZ=({children:t})=>{const[e,n]=x.useState(null),[i,r]=x.useState([]),[s,a]=x.useState(!0),{currentUser:o}=Rc(),{showNotification:l}=YO(),c=x.useRef(void 0);x.useEffect(()=>{let f;return o?(a(!0),f=ut.collection("orders").where("userId","==",o.uid).onSnapshot(E=>{const A=E.docs.map(v=>{var _;return{id:v.id,...v.data(),timestamp:((_=v.data().timestamp)==null?void 0:_.toDate())||new Date}});E.docChanges().forEach(v=>{if(v.type==="modified"){const _=v.doc.data();_.status==="cancelled"&&l(`Your order ${_.orderNumber} has been cancelled. Reason: ${_.cancellationReason||"No reason provided"}`,"error")}}),A.sort((v,_)=>_.timestamp.getTime()-v.timestamp.getTime()),r(A);const T=A.find(v=>v.status!=="completed"&&v.status!=="cancelled")||null;n(T),a(!1)},E=>{console.error("Error listening to order history:",E),a(!1)})):(r([]),n(null),a(!1)),()=>{f&&f()}},[o,l]),x.useEffect(()=>{const f=e==null?void 0:e.status,p=c.current;if(f==="ready"&&p!=="ready"){const w=e==null?void 0:e.orderItems.map(E=>E.productName).join(", ");l(`Your order for ${w} is ready!`,"success")}c.current=f},[e==null?void 0:e.status,e==null?void 0:e.orderItems,l]);const d={activeOrder:e,setActiveOrder:n,orderHistory:i,addOrderToHistory:async f=>{try{const p=await ut.collection("orders").add({...f,timestamp:Yt.firestore.FieldValue.serverTimestamp()}),w={...f,id:p.id,timestamp:new Date};r(E=>[w,...E]),n(w)}catch(p){console.error("Error adding order to Firestore:",p)}},isHistoryLoading:s};return y.jsx(IL.Provider,{value:d,children:t})},sZ=({children:t,className:e="",variant:n="solid",color:i="primary",size:r="md"})=>{const s="inline-flex items-center gap-1.5 rounded-full font-medium",a={xs:"px-2 py-0.5 text-xs",sm:"px-2.5 py-1 text-xs",md:"px-3 py-1 text-sm",lg:"px-4 py-1.5 text-base"},o={primary:"bg-primary-100 text-primary-800",success:"bg-green-100 text-green-800",warning:"bg-amber-100 text-amber-800",error:"bg-red-100 text-red-800",info:"bg-blue-100 text-blue-800",gray:"bg-gray-100 text-gray-800"},l={primary:"border-2 border-primary-300 text-primary-700 bg-transparent",success:"border-2 border-green-300 text-green-700 bg-transparent",warning:"border-2 border-amber-300 text-amber-700 bg-transparent",error:"border-2 border-red-300 text-red-700 bg-transparent",info:"border-2 border-blue-300 text-blue-700 bg-transparent",gray:"border-2 border-gray-300 text-gray-700 bg-transparent"},c={primary:"bg-primary-500",success:"bg-green-500",warning:"bg-amber-500",error:"bg-red-500",info:"bg-blue-500",gray:"bg-gray-500"},h=n==="outline"?l[i]:o[i];return y.jsxs("span",{className:`${s} ${a[r]} ${h} ${e}`,children:[n==="dot"&&y.jsx("span",{className:`h-2 w-2 rounded-full ${c[i]} animate-pulse`}),t]})},aZ=()=>{const[t,e]=x.useState([]),[n,i]=x.useState(!0),[r,s]=x.useState(null);return x.useEffect(()=>{(async()=>{try{i(!0);const l=await ut.collection("ingredients").where("isTopping","==",!0).get(),c=[];l.forEach(h=>{const d=h.data();d.stock>0&&d.toppingPrice!==void 0&&d.portionSize!==void 0&&c.push({id:h.id,name:d.name,price:d.toppingPrice,stock:d.stock,portionSize:d.portionSize})}),c.sort((h,d)=>h.name.localeCompare(d.name)),e(c),s(null)}catch(o){console.error("Error fetching toppings:",o),s("Failed to load toppings"),e([{id:"pearls",name:"Pearls",price:10,stock:3e3,portionSize:30},{id:"pudding",name:"Pudding",price:15,stock:2e3,portionSize:40},{id:"grass-jelly",name:"Grass Jelly",price:15,stock:2500,portionSize:35}])}finally{i(!1)}})()},[]),{toppings:t,isLoading:n,error:r}},oZ=({cartItems:t,isOpen:e,onClose:n,onUpdateQuantity:i,onRemoveItem:r,onCheckout:s,selectedItemIds:a,onToggleItemSelection:o,onSelectAll:l,onDeselectAll:c})=>{const h=fc(),d=t.reduce((_,C)=>_+C.quantity,0),{toppings:f}=aZ(),p=t.length>0&&a.length===t.length,w=a.length>0&&a.length<t.length,E=_=>_?_.reduce((C,V)=>{const O=f.find(S=>S.name===V);return C+((O==null?void 0:O.price)||0)},0):0,A=t.filter(_=>a.includes(_.id)).reduce((_,C)=>{var O;const V=E((O=C.customizations)==null?void 0:O.toppings);return _+(C.selectedSize.price+V)*C.quantity},0),T=()=>{n(),h("/menu")},v=()=>{p?c():l()};return y.jsxs(y.Fragment,{children:[y.jsx("div",{onClick:n,className:`fixed inset-0 z-40 bg-black/50 transition-opacity duration-300 ${e?"opacity-100":"opacity-0 pointer-events-none"}`,"aria-hidden":"true"}),y.jsx("aside",{className:`fixed top-0 right-0 z-50 h-full w-full transform bg-white shadow-2xl transition-transform duration-300 ease-in-out sm:w-96 md:w-[450px] ${e?"translate-x-0":"translate-x-full"}`,role:"dialog","aria-modal":"true","aria-labelledby":"cart-heading",children:y.jsxs("div",{className:"flex h-full flex-col",children:[y.jsxs("header",{className:"flex items-center justify-between border-b border-gray-200 p-6",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("h2",{id:"cart-heading",className:"font-display text-xl font-bold text-coffee-900",children:"Your Order"}),d>0&&y.jsxs(sZ,{children:[d," ",d===1?"item":"items"]})]}),y.jsx("button",{onClick:n,className:"rounded-md p-2 text-gray-500 transition-colors hover:bg-gray-100 hover:text-gray-800","aria-label":"Close cart",children:y.jsx(qp,{className:"h-6 w-6"})})]}),t.length>0&&y.jsx("div",{className:"border-b border-gray-200 px-6 py-3 bg-gray-50/50 backdrop-blur-sm sticky top-0 z-10",children:y.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group select-none",children:[y.jsxs("div",{className:"relative flex items-center justify-center h-5 w-5",children:[y.jsx("input",{type:"checkbox",checked:p,onChange:v,className:"peer h-5 w-5 cursor-pointer appearance-none rounded-md border-2 border-gray-300 bg-white transition-all checked:border-coffee-600 checked:bg-coffee-600 hover:border-coffee-500 focus:ring-2 focus:ring-coffee-500/20"}),y.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none opacity-0 peer-checked:opacity-100 transition-opacity duration-200",children:w&&!p?y.jsx(tI,{className:"h-3.5 w-3.5 text-white",strokeWidth:3}):y.jsx(ZS,{className:"h-3.5 w-3.5 text-white",strokeWidth:3})})]}),y.jsx("span",{className:"text-sm font-semibold text-gray-700 group-hover:text-coffee-700 transition-colors",children:p?"Deselect All":"Select All"}),a.length>0&&y.jsxs("span",{className:"ml-auto text-xs font-medium text-coffee-600 bg-coffee-50 px-2 py-1 rounded-full",children:[a.length," selected"]})]})}),t.length===0?y.jsxs("div",{className:"flex flex-1 flex-col items-center justify-center gap-4 p-6 text-center",children:[y.jsx($s,{className:"h-24 w-24 text-gray-300 opacity-50"}),y.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Your cart is empty"}),y.jsx("p",{className:"text-gray-500",children:"Looks like you haven't added anything yet."}),y.jsx("button",{onClick:T,className:"mt-4 rounded-full bg-coffee-600 px-6 py-2 text-sm font-semibold text-white shadow-sm transition-colors hover:bg-coffee-700",children:"Start Ordering"})]}):y.jsx("div",{className:"flex-1 overflow-y-auto px-6",children:y.jsx("ul",{className:"-my-6 divide-y divide-gray-100",children:t.map(_=>{var D;const C=_.selectedSize.name==="Combo Meal",V=C?`${_.product.name} (${_.selectedSize.name})`:_.product.name,O=C&&_.product.comboImageUrl?_.product.comboImageUrl:_.product.imageUrl,S=E((D=_.customizations)==null?void 0:D.toppings),b=_.selectedSize.price+S,R=a.includes(_.id);return y.jsxs("li",{className:`relative flex gap-4 py-6 transition-colors ${R?"bg-coffee-50/30 -mx-6 px-6":""}`,children:[y.jsxs("div",{className:"pt-1 relative flex items-center justify-center h-5 w-5",children:[y.jsx("input",{type:"checkbox",checked:R,onChange:()=>o(_.id),className:"peer h-5 w-5 cursor-pointer appearance-none rounded-md border-2 border-gray-300 bg-white transition-all checked:border-coffee-600 checked:bg-coffee-600 hover:border-coffee-500 focus:ring-2 focus:ring-coffee-500/20"}),y.jsx(ZS,{className:"absolute h-3.5 w-3.5 text-white opacity-0 peer-checked:opacity-100 transition-opacity duration-200 pointer-events-none",strokeWidth:3})]}),y.jsx("div",{className:"h-20 w-20 flex-shrink-0 overflow-hidden rounded-lg border border-gray-100 shadow-sm",children:y.jsx("img",{src:O,alt:V,className:"h-full w-full object-cover object-center"})}),y.jsxs("div",{className:"flex-1 min-w-0",children:[y.jsx("h4",{className:"font-bold text-gray-900 truncate text-base",children:V}),y.jsxs("p",{className:"text-sm font-medium text-gray-500 mt-0.5",children:[_.selectedSize.size," - ",_.selectedSize.price.toFixed(2)]}),_.customizations&&y.jsxs("div",{className:"mt-2 space-y-1",children:[(_.customizations.sugarLevel||_.customizations.iceLevel)&&y.jsxs("div",{className:"flex flex-wrap gap-2 text-xs text-gray-500",children:[_.customizations.sugarLevel&&y.jsxs("span",{className:"inline-flex items-center rounded-md bg-gray-50 px-2 py-1 ring-1 ring-inset ring-gray-500/10",children:["Sugar: ",_.customizations.sugarLevel]}),_.customizations.iceLevel&&y.jsxs("span",{className:"inline-flex items-center rounded-md bg-gray-50 px-2 py-1 ring-1 ring-inset ring-gray-500/10",children:["Ice: ",_.customizations.iceLevel]})]}),_.customizations.toppings&&_.customizations.toppings.length>0&&y.jsxs("div",{className:"flex flex-col gap-1 pt-1",children:[y.jsx("span",{className:"text-xs font-medium text-gray-500",children:"Toppings:"}),_.customizations.toppings.map(N=>{const k=f.find(ie=>ie.name===N),P=(k==null?void 0:k.price)||0;return y.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-600",children:[y.jsx("span",{children:N}),y.jsxs("span",{className:"font-medium text-gray-900",children:["+",P.toFixed(2)]})]},N)})]})]}),y.jsx("div",{className:"mt-3 flex items-center gap-3",children:y.jsxs("div",{className:"flex items-center rounded-full border border-gray-200 bg-white shadow-sm",children:[y.jsx("button",{onClick:()=>i(_.id,_.quantity-1),disabled:_.quantity===1,className:"flex h-8 w-8 items-center justify-center rounded-l-full text-gray-500 transition hover:bg-gray-50 hover:text-gray-700 disabled:cursor-not-allowed disabled:opacity-50","aria-label":`Decrease quantity of ${V}`,children:y.jsx(tI,{className:"h-3.5 w-3.5"})}),y.jsx("span",{className:"w-8 text-center text-sm font-semibold text-gray-900","aria-live":"polite",children:_.quantity}),y.jsx("button",{onClick:()=>i(_.id,_.quantity+1),className:"flex h-8 w-8 items-center justify-center rounded-r-full text-gray-500 transition hover:bg-gray-50 hover:text-gray-700","aria-label":`Increase quantity of ${V}`,children:y.jsx(hz,{className:"h-3.5 w-3.5"})})]})})]}),y.jsxs("div",{className:"flex flex-col items-end justify-between",children:[y.jsx("button",{onClick:()=>r(_.id),className:"rounded-full p-2 text-gray-400 transition-all hover:bg-red-50 hover:text-red-600","aria-label":`Remove ${V} from cart`,children:y.jsx(_z,{className:"h-4 w-4"})}),y.jsxs("p",{className:"font-bold text-lg text-gray-900",children:["",(b*_.quantity).toFixed(2)]})]})]},_.id)})})}),t.length>0&&y.jsxs("footer",{className:"mt-auto border-t border-gray-200 p-6 bg-gray-50/50",children:[y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsx("span",{className:"text-base font-medium text-gray-600",children:"Subtotal"}),y.jsxs("span",{className:"text-xl font-bold text-gray-900",children:["",A.toFixed(2)]})]}),a.length<t.length&&y.jsx("p",{className:"mt-1 text-xs text-amber-600",children:a.length===0?"Please select items to checkout":`${t.length-a.length} item(s) not selected`}),y.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Taxes and service fee calculated at checkout."}),y.jsx("div",{className:"mt-6",children:y.jsxs("button",{onClick:s,disabled:a.length===0,className:"flex w-full items-center justify-center gap-2 rounded-xl bg-gradient-to-r from-coffee-600 to-coffee-700 px-6 py-3.5 text-base font-bold text-white shadow-lg shadow-coffee-600/20 transition-all hover:shadow-xl hover:scale-[1.02] active:scale-[0.98] focus:outline-none focus:ring-2 focus:ring-coffee-500 focus:ring-offset-2 disabled:cursor-not-allowed disabled:bg-gray-400 disabled:opacity-50 disabled:shadow-none disabled:scale-100",children:["Proceed to Checkout",y.jsx(M3,{className:"h-5 w-5"})]})})]})]})})]})},lZ=()=>{const{pathname:t}=fi();return x.useEffect(()=>{window.scrollTo(0,0)},[t]),null},zx=({allowedRoles:t,redirectTo:e})=>{const{currentUser:n,loading:i}=Rc(),r=fi();return i?y.jsx("div",{className:"flex h-screen w-full items-center justify-center bg-gray-50",children:y.jsx(bh,{className:"h-12 w-12 animate-spin text-primary-600"})}):n?!t||t.length===0?y.jsx(YS,{}):n.role&&t.includes(n.role)?y.jsx(YS,{}):y.jsx("div",{className:"flex min-h-screen flex-col items-center justify-center bg-gradient-to-br from-red-50 to-orange-50 px-4",children:y.jsxs("div",{className:"max-w-md text-center",children:[y.jsx("div",{className:"mx-auto mb-6 flex h-20 w-20 items-center justify-center rounded-full bg-red-100",children:y.jsx(fz,{className:"h-10 w-10 text-red-600"})}),y.jsx("h1",{className:"mb-3 font-display text-4xl font-bold text-gray-900",children:"Access Denied"}),y.jsx("p",{className:"mb-6 text-lg text-gray-600",children:"You don't have permission to access this page."}),y.jsxs("p",{className:"mb-8 text-sm text-gray-500",children:["Your role: ",y.jsx("span",{className:"font-semibold capitalize",children:n.role||"customer"}),y.jsx("br",{}),"Required role: ",y.jsx("span",{className:"font-semibold capitalize",children:t.join(" or ")})]}),y.jsx("button",{onClick:()=>window.history.back(),className:"rounded-lg bg-primary-600 px-6 py-3 font-semibold text-white transition-colors hover:bg-primary-700",children:"Go Back"})]})}):y.jsx(Q5,{to:e||"/auth/login",state:{from:r},replace:!0})},cZ=()=>y.jsx("div",{className:"flex min-h-screen flex-col items-center justify-center bg-coffee-50",children:y.jsxs("div",{className:"flex flex-col items-center gap-4 animate-pulse",children:[y.jsx($s,{className:"h-16 w-16 text-coffee-600"}),y.jsxs("div",{className:"flex items-center gap-2 text-coffee-800",children:[y.jsx(bh,{className:"h-6 w-6 animate-spin"}),y.jsx("span",{className:"font-medium",children:"Brewing your page..."})]})]})}),uZ=x.lazy(()=>De(()=>import("./HomePage-BWZQv-zI.js"),__vite__mapDeps([0,1,2,3,4]))),hZ=x.lazy(()=>De(()=>import("./LoginPage-CFSxC9Az.js"),[])),dZ=x.lazy(()=>De(()=>import("./RegisterPage-E7q8ZjxD.js"),[])),fZ=x.lazy(()=>De(()=>import("./ForgotPasswordPage-Bk_s_0ds.js"),__vite__mapDeps([5,6]))),mZ=x.lazy(()=>De(()=>import("./MenuPage-CrLAhPtD.js"),__vite__mapDeps([7,8,9,10,11,12,13,14,15]))),pZ=x.lazy(()=>De(()=>import("./CheckoutPage-BQ7w1Crp.js"),__vite__mapDeps([16,2,17,18,19,20,21,22]))),gZ=x.lazy(()=>De(()=>import("./QueuePage-CO4aCqz9.js"),__vite__mapDeps([23,24,25,4,21,1,8,26,19,20,11,12,13,27,28,9]))),yZ=x.lazy(()=>De(()=>import("./RewardsPage-BfFY8Ui3.js"),__vite__mapDeps([29,24,27,30,31,32,33,10,18,9]))),_Z=x.lazy(()=>De(()=>import("./ProfilePage-BTGQz1vT.js"),__vite__mapDeps([34,24,21,8,33,31,32,35,19,36,6,4,37,22,26,38,39,40]))),vZ=x.lazy(()=>De(()=>import("./AboutPage-D8fi1FXL.js"),__vite__mapDeps([41,24,21,42,3,1]))),TZ=x.lazy(()=>De(()=>import("./ContactPage-C6BMd3Eg.js"),__vite__mapDeps([43,24,6,44,22,38]))),wZ=x.lazy(()=>De(()=>import("./FAQPage-BLFZU60G.js"),__vite__mapDeps([45,24,14]))),bZ=x.lazy(()=>De(()=>import("./TermsPage-CXXSo_fY.js"),__vite__mapDeps([46,47,3,48,27,36]))),EZ=x.lazy(()=>De(()=>import("./PrivacyPolicyPage-DPRH50ZP.js"),__vite__mapDeps([49,4,50]))),AZ=x.lazy(()=>De(()=>import("./CookiePolicyPage-CoSkJRuO.js"),__vite__mapDeps([51,39,42,52]))),SZ=x.lazy(()=>De(()=>import("./AdminLayout-CdCndSLW.js"),__vite__mapDeps([53,54,24,55,21,22,30,3,52,39]))),IZ=x.lazy(()=>De(()=>import("./AdminDashboardPage-Cym-D3QQ.js"),__vite__mapDeps([56,57,28,55,1,33,15,36,58,21,3,52,8,42]))),jx=x.lazy(()=>De(()=>import("./AdminQueuePage-Plhj6cS0.js"),__vite__mapDeps([59,25,24,60,13,1,21,47]))),Bx=x.lazy(()=>De(()=>import("./AdminInventoryPage-FmKFpIgX.js"),__vite__mapDeps([61,35,24,12,13,36,33,55,9,14,62,21]))),RZ=x.lazy(()=>De(()=>import("./AdminProductsPage-DtzORaM3.js"),__vite__mapDeps([63,24,35,55,8,14,62,21,40]))),xZ=x.lazy(()=>De(()=>import("./AdminAnalyticsPage-DaZTruDz.js"),__vite__mapDeps([64,57,28,55,1,33,15,22,8,26]))),CZ=x.lazy(()=>De(()=>import("./AdminFeedbackPage-C93aJLCv.js"),__vite__mapDeps([65,37,32,8,22,24,38,66]))),PZ=x.lazy(()=>De(()=>import("./AdminSettingsPage-Bz7OSiOi.js"),__vite__mapDeps([67,24,6,44,68,1,35]))),Fx=x.lazy(()=>De(()=>import("./AdminOrdersHistoryPage-Bo6wjOX3.js"),__vite__mapDeps([69,1,55,48,47,14,33,68,17]))),DZ=x.lazy(()=>De(()=>import("./AdminUsersPage-D0TxHaF-.js"),__vite__mapDeps([70,3,14,66,33,28,15]))),NZ=x.lazy(()=>De(()=>import("./EmployeeLayout-CZ4S_2X4.js"),__vite__mapDeps([71,54,24,55,30]))),kZ=x.lazy(()=>De(()=>import("./POSDashboard-sP90MDWs.js"),__vite__mapDeps([72,42,28,58,21,55,1]))),VZ=x.lazy(()=>De(()=>import("./POSPage-DjGxwM_m.js"),__vite__mapDeps([73,11,12,13,17,48,50,60,14]))),OZ=()=>y.jsxs("div",{className:"flex min-h-screen flex-col",children:[y.jsx(IQ,{}),y.jsx("main",{className:"flex flex-1 items-center justify-center bg-gradient-to-br from-primary-50 to-coffee-50",children:y.jsxs("div",{className:"p-4 text-center",children:[y.jsx($s,{className:"mx-auto mb-4 h-16 w-16 text-gray-400 opacity-50"}),y.jsx("h1",{className:"mb-4 font-display text-4xl font-bold text-gray-900",children:"404 - Page Not Found"}),y.jsx("p",{className:"mb-8 text-gray-600",children:"This coffee blend doesn't exist on our menu. Maybe it got lost in the daily grind?"}),y.jsx(Xn,{to:"/",className:"font-medium text-primary-600 transition-colors hover:text-primary-700",children:" Back to Home"})]})}),y.jsx(RQ,{})]}),MZ=()=>{const{isCartOpen:t,closeCart:e,cartItems:n,updateQuantity:i,removeFromCart:r,toastMessage:s,selectedItemIds:a,toggleItemSelection:o,selectAllItems:l,deselectAllItems:c}=QO(),h=fc(),d=()=>{e(),h("/checkout")};return y.jsxs(y.Fragment,{children:[y.jsx(lZ,{}),y.jsx(iZ,{}),y.jsx(x.Suspense,{fallback:y.jsx(cZ,{}),children:y.jsxs(Y5,{children:[y.jsx(_e,{path:"/",element:y.jsx(uZ,{})}),y.jsx(_e,{path:"/about",element:y.jsx(vZ,{})}),y.jsx(_e,{path:"/menu",element:y.jsx(mZ,{})}),y.jsx(_e,{path:"/contact",element:y.jsx(TZ,{})}),y.jsx(_e,{path:"/auth/login",element:y.jsx(hZ,{})}),y.jsx(_e,{path:"/auth/register",element:y.jsx(dZ,{})}),y.jsx(_e,{path:"/auth/forgot-password",element:y.jsx(fZ,{})}),y.jsx(_e,{path:"/checkout",element:y.jsx(pZ,{})}),y.jsx(_e,{path:"/queue",element:y.jsx(gZ,{})}),y.jsx(_e,{path:"/rewards",element:y.jsx(yZ,{})}),y.jsx(_e,{path:"/profile",element:y.jsx(_Z,{})}),y.jsx(_e,{path:"/faq",element:y.jsx(wZ,{})}),y.jsx(_e,{path:"/terms",element:y.jsx(bZ,{})}),y.jsx(_e,{path:"/privacy",element:y.jsx(EZ,{})}),y.jsx(_e,{path:"/cookies",element:y.jsx(AZ,{})}),y.jsx(_e,{element:y.jsx(zx,{}),children:y.jsxs(_e,{path:"/admin",element:y.jsx(SZ,{}),children:[y.jsx(_e,{index:!0,element:y.jsx(IZ,{})}),y.jsx(_e,{path:"queue",element:y.jsx(jx,{})}),y.jsx(_e,{path:"history",element:y.jsx(Fx,{})}),y.jsx(_e,{path:"users",element:y.jsx(DZ,{})}),y.jsx(_e,{path:"inventory",element:y.jsx(Bx,{})}),y.jsx(_e,{path:"products",element:y.jsx(RZ,{})}),y.jsx(_e,{path:"analytics",element:y.jsx(xZ,{})}),y.jsx(_e,{path:"feedback",element:y.jsx(CZ,{})}),y.jsx(_e,{path:"settings",element:y.jsx(PZ,{})})]})}),y.jsx(_e,{element:y.jsx(zx,{allowedRoles:["employee","admin"]}),children:y.jsxs(_e,{path:"/employee",element:y.jsx(NZ,{}),children:[y.jsx(_e,{index:!0,element:y.jsx(kZ,{})}),y.jsx(_e,{path:"pos",element:y.jsx(VZ,{})}),y.jsx(_e,{path:"queue",element:y.jsx(jx,{})}),y.jsx(_e,{path:"inventory",element:y.jsx(Bx,{})}),y.jsx(_e,{path:"history",element:y.jsx(Fx,{})})]})}),y.jsx(_e,{path:"*",element:y.jsx(OZ,{})})]})}),y.jsx(oZ,{isOpen:t,onClose:e,cartItems:n,onUpdateQuantity:i,onRemoveItem:r,onCheckout:d,selectedItemIds:a,onToggleItemSelection:o,onSelectAll:l,onDeselectAll:c}),s&&y.jsx("div",{className:"fixed bottom-4 right-4 z-[100] animate-fade-in-up rounded-lg bg-gray-900 px-4 py-3 text-white shadow-lg",children:s})]})},LZ=()=>y.jsx(dQ,{children:y.jsx(xQ,{children:y.jsx(mQ,{children:y.jsx(rZ,{children:y.jsx(pQ,{children:y.jsx(T3,{children:y.jsx(MZ,{})})})})})})}),RL=document.getElementById("root");if(!RL)throw new Error("Could not find root element to mount to");const UZ=e5.createRoot(RL);UZ.render(y.jsx(hm.StrictMode,{children:y.jsx(LZ,{})}));export{h2 as $,M3 as A,sZ as B,gQ as C,fi as D,Sf as E,RQ as F,Y3 as G,IQ as H,hz as I,xv as J,tI as K,Xn as L,oz as M,yQ as N,ff as O,HT as P,Tz as Q,$s as R,gz as S,_z as T,Cv as U,c2 as V,u2 as W,qp as X,sz as Y,Q3 as Z,Z3 as _,XV as a,YS as a0,pi as a1,eI as a2,H3 as a3,hm as a4,WZ as a5,qx as a6,zZ as a7,XG as a8,pO as a9,a$ as b,Ne as c,ut as d,dp as e,fc as f,c$ as g,l2 as h,F3 as i,y as j,qT as k,bh as l,fQ as m,QO as n,ZS as o,nZ as p,es as q,x as r,XZ as s,aZ as t,Rc as u,Yt as v,YG as w,sC as x,kQ as y,z3 as z};
