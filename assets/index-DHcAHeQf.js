const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/HomePage-BSJCX0uE.js","assets/Button-BDTKXWE1.js","assets/clock-0Uo9UIOV.js","assets/wallet-BaI-EDBj.js","assets/users-5fH-FVne.js","assets/bell-BYQ9zKno.js","assets/ForgotPasswordPage-CmX4GhxU.js","assets/Input-g7Er6idI.js","assets/MenuPage-C6jWVeeV.js","assets/star-BMyvbWjY.js","assets/sparkles-ClMuEFWe.js","assets/ProductCardSkeleton-gfMPI_-E.js","assets/search-BesHf0yP.js","assets/arrow-up-down-B9ZtYWHG.js","assets/CheckoutPage-CUkXkmr4.js","assets/banknote-DA5nL-lE.js","assets/mockAvailableRewards-2NOuBi-T.js","assets/shopping-bag-kJAxq3ZP.js","assets/coffee-Dx1IuoBV.js","assets/message-square-BMaloNBE.js","assets/QueuePage-B0DSZx7c.js","assets/DigitalReceipt-DkrMEFKi.js","assets/thumbs-up-DDbyeCo6.js","assets/award-BJkdE89C.js","assets/trending-up-BWPc5uBB.js","assets/RewardsPage-Dx36EKCj.js","assets/history--kZiAp-v.js","assets/format-BoV-TgZi.js","assets/en-US-wfBU2YNu.js","assets/calendar-BxXKl4bH.js","assets/ProfilePage-ZaZ0Ktjg.js","assets/save-BgdPls6M.js","assets/chevron-right--3mb6D5a.js","assets/StarRating-CGNExaUV.js","assets/send-Cr5Wqpfb.js","assets/settings-CsGPNjBO.js","assets/square-pen-C3cKzfqv.js","assets/AboutPage-RXfybdNN.js","assets/zap-C3WdTx1n.js","assets/ContactPage-BpQ0ogNa.js","assets/Textarea-C4MT-fAv.js","assets/FAQPage-Yivoi05P.js","assets/TermsPage-BVZyIGqz.js","assets/file-text-B66KpPJ_.js","assets/credit-card-VBQKIJL8.js","assets/PrivacyPolicyPage-DMXw8ncZ.js","assets/circle-check-DoL2uGyj.js","assets/CookiePolicyPage-XK0bosDC.js","assets/chart-column-C7o2ZEGo.js","assets/AdminLayout-cQleChr4.js","assets/ConfirmLogoutModal-CUAuY5pd.js","assets/package-DD8lbFcv.js","assets/AdminDashboardPage-DXEHeQJY.js","assets/SalesOverview-BEDKZYLW.js","assets/activity-CeltS4PY.js","assets/AdminQueuePage-CWtX1AH9.js","assets/inventoryDeduction-CWohbU-U.js","assets/AdminInventoryPage-CU4fQKq2.js","assets/snowflake-CACc29g1.js","assets/AdminProductsPage-DpJhRUin.js","assets/AdminAnalyticsPage-DYqMYtmM.js","assets/AdminFeedbackPage-V4BWGt2A.js","assets/funnel-CAwceInL.js","assets/AdminSettingsPage-DkSZRvHN.js","assets/store-CgYXyxnA.js","assets/AdminOrdersHistoryPage-C7X31--d.js","assets/AdminUsersPage-B4syeM3X.js","assets/EmployeeLayout-D5r9U2Z7.js","assets/POSDashboard-ML0Rbp9g.js","assets/POSPage-Ob7Tx5wO.js"])))=>i.map(i=>d[i]);
function c4(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in t)){const s=Object.getOwnPropertyDescriptor(i,r);s&&Object.defineProperty(t,r,s.get?s:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();function $R(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var KR={exports:{}},xp={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var u4=Symbol.for("react.transitional.element"),h4=Symbol.for("react.fragment");function WR(t,e,n){var i=null;if(n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),"key"in e){n={};for(var r in e)r!=="key"&&(n[r]=e[r])}else n=e;return e=n.ref,{$$typeof:u4,type:t,key:i,ref:e!==void 0?e:null,props:n}}xp.Fragment=h4;xp.jsx=WR;xp.jsxs=WR;KR.exports=xp;var g=KR.exports,QR={exports:{}},oe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var j0=Symbol.for("react.transitional.element"),d4=Symbol.for("react.portal"),f4=Symbol.for("react.fragment"),m4=Symbol.for("react.strict_mode"),p4=Symbol.for("react.profiler"),g4=Symbol.for("react.consumer"),y4=Symbol.for("react.context"),_4=Symbol.for("react.forward_ref"),v4=Symbol.for("react.suspense"),b4=Symbol.for("react.memo"),YR=Symbol.for("react.lazy"),w4=Symbol.for("react.activity"),wA=Symbol.iterator;function T4(t){return t===null||typeof t!="object"?null:(t=wA&&t[wA]||t["@@iterator"],typeof t=="function"?t:null)}var XR={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},JR=Object.assign,ZR={};function lc(t,e,n){this.props=t,this.context=e,this.refs=ZR,this.updater=n||XR}lc.prototype.isReactComponent={};lc.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};lc.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function eC(){}eC.prototype=lc.prototype;function z0(t,e,n){this.props=t,this.context=e,this.refs=ZR,this.updater=n||XR}var B0=z0.prototype=new eC;B0.constructor=z0;JR(B0,lc.prototype);B0.isPureReactComponent=!0;var TA=Array.isArray;function D_(){}var He={H:null,A:null,T:null,S:null},tC=Object.prototype.hasOwnProperty;function F0(t,e,n){var i=n.ref;return{$$typeof:j0,type:t,key:e,ref:i!==void 0?i:null,props:n}}function E4(t,e){return F0(t.type,e,t.props)}function q0(t){return typeof t=="object"&&t!==null&&t.$$typeof===j0}function A4(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var EA=/\/+/g;function uy(t,e){return typeof t=="object"&&t!==null&&t.key!=null?A4(""+t.key):e.toString(36)}function S4(t){switch(t.status){case"fulfilled":return t.value;case"rejected":throw t.reason;default:switch(typeof t.status=="string"?t.then(D_,D_):(t.status="pending",t.then(function(e){t.status==="pending"&&(t.status="fulfilled",t.value=e)},function(e){t.status==="pending"&&(t.status="rejected",t.reason=e)})),t.status){case"fulfilled":return t.value;case"rejected":throw t.reason}}throw t}function Uo(t,e,n,i,r){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(s){case"bigint":case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case j0:case d4:a=!0;break;case YR:return a=t._init,Uo(a(t._payload),e,n,i,r)}}if(a)return r=r(t),a=i===""?"."+uy(t,0):i,TA(r)?(n="",a!=null&&(n=a.replace(EA,"$&/")+"/"),Uo(r,e,n,"",function(c){return c})):r!=null&&(q0(r)&&(r=E4(r,n+(r.key==null||t&&t.key===r.key?"":(""+r.key).replace(EA,"$&/")+"/")+a)),e.push(r)),1;a=0;var o=i===""?".":i+":";if(TA(t))for(var l=0;l<t.length;l++)i=t[l],s=o+uy(i,l),a+=Uo(i,e,n,s,r);else if(l=T4(t),typeof l=="function")for(t=l.call(t),l=0;!(i=t.next()).done;)i=i.value,s=o+uy(i,l++),a+=Uo(i,e,n,s,r);else if(s==="object"){if(typeof t.then=="function")return Uo(S4(t),e,n,i,r);throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.")}return a}function tf(t,e,n){if(t==null)return t;var i=[],r=0;return Uo(t,i,"","",function(s){return e.call(n,s,r++)}),i}function I4(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var AA=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},x4={map:tf,forEach:function(t,e,n){tf(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return tf(t,function(){e++}),e},toArray:function(t){return tf(t,function(e){return e})||[]},only:function(t){if(!q0(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};oe.Activity=w4;oe.Children=x4;oe.Component=lc;oe.Fragment=f4;oe.Profiler=p4;oe.PureComponent=z0;oe.StrictMode=m4;oe.Suspense=v4;oe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=He;oe.__COMPILER_RUNTIME={__proto__:null,c:function(t){return He.H.useMemoCache(t)}};oe.cache=function(t){return function(){return t.apply(null,arguments)}};oe.cacheSignal=function(){return null};oe.cloneElement=function(t,e,n){if(t==null)throw Error("The argument must be a React element, but you passed "+t+".");var i=JR({},t.props),r=t.key;if(e!=null)for(s in e.key!==void 0&&(r=""+e.key),e)!tC.call(e,s)||s==="key"||s==="__self"||s==="__source"||s==="ref"&&e.ref===void 0||(i[s]=e[s]);var s=arguments.length-2;if(s===1)i.children=n;else if(1<s){for(var a=Array(s),o=0;o<s;o++)a[o]=arguments[o+2];i.children=a}return F0(t.type,r,i)};oe.createContext=function(t){return t={$$typeof:y4,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null},t.Provider=t,t.Consumer={$$typeof:g4,_context:t},t};oe.createElement=function(t,e,n){var i,r={},s=null;if(e!=null)for(i in e.key!==void 0&&(s=""+e.key),e)tC.call(e,i)&&i!=="key"&&i!=="__self"&&i!=="__source"&&(r[i]=e[i]);var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){for(var o=Array(a),l=0;l<a;l++)o[l]=arguments[l+2];r.children=o}if(t&&t.defaultProps)for(i in a=t.defaultProps,a)r[i]===void 0&&(r[i]=a[i]);return F0(t,s,r)};oe.createRef=function(){return{current:null}};oe.forwardRef=function(t){return{$$typeof:_4,render:t}};oe.isValidElement=q0;oe.lazy=function(t){return{$$typeof:YR,_payload:{_status:-1,_result:t},_init:I4}};oe.memo=function(t,e){return{$$typeof:b4,type:t,compare:e===void 0?null:e}};oe.startTransition=function(t){var e=He.T,n={};He.T=n;try{var i=t(),r=He.S;r!==null&&r(n,i),typeof i=="object"&&i!==null&&typeof i.then=="function"&&i.then(D_,AA)}catch(s){AA(s)}finally{e!==null&&n.types!==null&&(e.types=n.types),He.T=e}};oe.unstable_useCacheRefresh=function(){return He.H.useCacheRefresh()};oe.use=function(t){return He.H.use(t)};oe.useActionState=function(t,e,n){return He.H.useActionState(t,e,n)};oe.useCallback=function(t,e){return He.H.useCallback(t,e)};oe.useContext=function(t){return He.H.useContext(t)};oe.useDebugValue=function(){};oe.useDeferredValue=function(t,e){return He.H.useDeferredValue(t,e)};oe.useEffect=function(t,e){return He.H.useEffect(t,e)};oe.useEffectEvent=function(t){return He.H.useEffectEvent(t)};oe.useId=function(){return He.H.useId()};oe.useImperativeHandle=function(t,e,n){return He.H.useImperativeHandle(t,e,n)};oe.useInsertionEffect=function(t,e){return He.H.useInsertionEffect(t,e)};oe.useLayoutEffect=function(t,e){return He.H.useLayoutEffect(t,e)};oe.useMemo=function(t,e){return He.H.useMemo(t,e)};oe.useOptimistic=function(t,e){return He.H.useOptimistic(t,e)};oe.useReducer=function(t,e,n){return He.H.useReducer(t,e,n)};oe.useRef=function(t){return He.H.useRef(t)};oe.useState=function(t){return He.H.useState(t)};oe.useSyncExternalStore=function(t,e,n){return He.H.useSyncExternalStore(t,e,n)};oe.useTransition=function(){return He.H.useTransition()};oe.version="19.2.0";QR.exports=oe;var x=QR.exports;const ul=$R(x),eee=c4({__proto__:null,default:ul},[x]);var nC={exports:{}},Rp={},iC={exports:{}},rC={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(z,Y){var J=z.length;z.push(Y);e:for(;0<J;){var ne=J-1>>>1,W=z[ne];if(0<r(W,Y))z[ne]=Y,z[J]=W,J=ne;else break e}}function n(z){return z.length===0?null:z[0]}function i(z){if(z.length===0)return null;var Y=z[0],J=z.pop();if(J!==Y){z[0]=J;e:for(var ne=0,W=z.length,de=W>>>1;ne<de;){var Nt=2*(ne+1)-1,At=z[Nt],St=Nt+1,mi=z[St];if(0>r(At,J))St<W&&0>r(mi,At)?(z[ne]=mi,z[St]=J,ne=St):(z[ne]=At,z[Nt]=J,ne=Nt);else if(St<W&&0>r(mi,J))z[ne]=mi,z[St]=J,ne=St;else break e}}return Y}function r(z,Y){var J=z.sortIndex-Y.sortIndex;return J!==0?J:z.id-Y.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();t.unstable_now=function(){return a.now()-o}}var l=[],c=[],h=1,d=null,f=3,p=!1,w=!1,E=!1,R=!1,b=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;function S(z){for(var Y=n(c);Y!==null;){if(Y.callback===null)i(c);else if(Y.startTime<=z)i(c),Y.sortIndex=Y.expirationTime,e(l,Y);else break;Y=n(c)}}function k(z){if(E=!1,S(z),!w)if(n(l)!==null)w=!0,O||(O=!0,V());else{var Y=n(c);Y!==null&&ie(k,Y.startTime-z)}}var O=!1,A=-1,T=5,I=-1;function P(){return R?!0:!(t.unstable_now()-I<T)}function D(){if(R=!1,O){var z=t.unstable_now();I=z;var Y=!0;try{e:{w=!1,E&&(E=!1,v(A),A=-1),p=!0;var J=f;try{t:{for(S(z),d=n(l);d!==null&&!(d.expirationTime>z&&P());){var ne=d.callback;if(typeof ne=="function"){d.callback=null,f=d.priorityLevel;var W=ne(d.expirationTime<=z);if(z=t.unstable_now(),typeof W=="function"){d.callback=W,S(z),Y=!0;break t}d===n(l)&&i(l),S(z)}else i(l);d=n(l)}if(d!==null)Y=!0;else{var de=n(c);de!==null&&ie(k,de.startTime-z),Y=!1}}break e}finally{d=null,f=J,p=!1}Y=void 0}}finally{Y?V():O=!1}}}var V;if(typeof _=="function")V=function(){_(D)};else if(typeof MessageChannel<"u"){var N=new MessageChannel,H=N.port2;N.port1.onmessage=D,V=function(){H.postMessage(null)}}else V=function(){b(D,0)};function ie(z,Y){A=b(function(){z(t.unstable_now())},Y)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(z){z.callback=null},t.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<z?Math.floor(1e3/z):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_next=function(z){switch(f){case 1:case 2:case 3:var Y=3;break;default:Y=f}var J=f;f=Y;try{return z()}finally{f=J}},t.unstable_requestPaint=function(){R=!0},t.unstable_runWithPriority=function(z,Y){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var J=f;f=z;try{return Y()}finally{f=J}},t.unstable_scheduleCallback=function(z,Y,J){var ne=t.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?ne+J:ne):J=ne,z){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=J+W,z={id:h++,callback:Y,priorityLevel:z,startTime:J,expirationTime:W,sortIndex:-1},J>ne?(z.sortIndex=J,e(c,z),n(l)===null&&z===n(c)&&(E?(v(A),A=-1):E=!0,ie(k,J-ne))):(z.sortIndex=W,e(l,z),w||p||(w=!0,O||(O=!0,V()))),z},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(z){var Y=f;return function(){var J=f;f=Y;try{return z.apply(this,arguments)}finally{f=J}}}})(rC);iC.exports=rC;var R4=iC.exports,sC={exports:{}},yn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var C4=x;function aC(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function Jr(){}var mn={d:{f:Jr,r:function(){throw Error(aC(522))},D:Jr,C:Jr,L:Jr,m:Jr,X:Jr,S:Jr,M:Jr},p:0,findDOMNode:null},P4=Symbol.for("react.portal");function N4(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:P4,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}var Du=C4.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function Cp(t,e){if(t==="font")return"";if(typeof e=="string")return e==="use-credentials"?e:""}yn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=mn;yn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)throw Error(aC(299));return N4(t,e,null,n)};yn.flushSync=function(t){var e=Du.T,n=mn.p;try{if(Du.T=null,mn.p=2,t)return t()}finally{Du.T=e,mn.p=n,mn.d.f()}};yn.preconnect=function(t,e){typeof t=="string"&&(e?(e=e.crossOrigin,e=typeof e=="string"?e==="use-credentials"?e:"":void 0):e=null,mn.d.C(t,e))};yn.prefetchDNS=function(t){typeof t=="string"&&mn.d.D(t)};yn.preinit=function(t,e){if(typeof t=="string"&&e&&typeof e.as=="string"){var n=e.as,i=Cp(n,e.crossOrigin),r=typeof e.integrity=="string"?e.integrity:void 0,s=typeof e.fetchPriority=="string"?e.fetchPriority:void 0;n==="style"?mn.d.S(t,typeof e.precedence=="string"?e.precedence:void 0,{crossOrigin:i,integrity:r,fetchPriority:s}):n==="script"&&mn.d.X(t,{crossOrigin:i,integrity:r,fetchPriority:s,nonce:typeof e.nonce=="string"?e.nonce:void 0})}};yn.preinitModule=function(t,e){if(typeof t=="string")if(typeof e=="object"&&e!==null){if(e.as==null||e.as==="script"){var n=Cp(e.as,e.crossOrigin);mn.d.M(t,{crossOrigin:n,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0})}}else e==null&&mn.d.M(t)};yn.preload=function(t,e){if(typeof t=="string"&&typeof e=="object"&&e!==null&&typeof e.as=="string"){var n=e.as,i=Cp(n,e.crossOrigin);mn.d.L(t,n,{crossOrigin:i,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0,type:typeof e.type=="string"?e.type:void 0,fetchPriority:typeof e.fetchPriority=="string"?e.fetchPriority:void 0,referrerPolicy:typeof e.referrerPolicy=="string"?e.referrerPolicy:void 0,imageSrcSet:typeof e.imageSrcSet=="string"?e.imageSrcSet:void 0,imageSizes:typeof e.imageSizes=="string"?e.imageSizes:void 0,media:typeof e.media=="string"?e.media:void 0})}};yn.preloadModule=function(t,e){if(typeof t=="string")if(e){var n=Cp(e.as,e.crossOrigin);mn.d.m(t,{as:typeof e.as=="string"&&e.as!=="script"?e.as:void 0,crossOrigin:n,integrity:typeof e.integrity=="string"?e.integrity:void 0})}else mn.d.m(t)};yn.requestFormReset=function(t){mn.d.r(t)};yn.unstable_batchedUpdates=function(t,e){return t(e)};yn.useFormState=function(t,e,n){return Du.H.useFormState(t,e,n)};yn.useFormStatus=function(){return Du.H.useHostTransitionStatus()};yn.version="19.2.0";function oC(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(oC)}catch(t){console.error(t)}}oC(),sC.exports=yn;var lC=sC.exports;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ct=R4,cC=x,D4=lC;function B(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function uC(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function nd(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function hC(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function dC(t){if(t.tag===31){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function SA(t){if(nd(t)!==t)throw Error(B(188))}function k4(t){var e=t.alternate;if(!e){if(e=nd(t),e===null)throw Error(B(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===n)return SA(r),t;if(s===i)return SA(r),e;s=s.sibling}throw Error(B(188))}if(n.return!==i.return)n=r,i=s;else{for(var a=!1,o=r.child;o;){if(o===n){a=!0,n=r,i=s;break}if(o===i){a=!0,i=r,n=s;break}o=o.sibling}if(!a){for(o=s.child;o;){if(o===n){a=!0,n=s,i=r;break}if(o===i){a=!0,i=s,n=r;break}o=o.sibling}if(!a)throw Error(B(189))}}if(n.alternate!==i)throw Error(B(190))}if(n.tag!==3)throw Error(B(188));return n.stateNode.current===n?t:e}function fC(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t;for(t=t.child;t!==null;){if(e=fC(t),e!==null)return e;t=t.sibling}return null}var $e=Object.assign,V4=Symbol.for("react.element"),nf=Symbol.for("react.transitional.element"),gu=Symbol.for("react.portal"),$o=Symbol.for("react.fragment"),mC=Symbol.for("react.strict_mode"),k_=Symbol.for("react.profiler"),pC=Symbol.for("react.consumer"),cr=Symbol.for("react.context"),H0=Symbol.for("react.forward_ref"),V_=Symbol.for("react.suspense"),O_=Symbol.for("react.suspense_list"),G0=Symbol.for("react.memo"),ss=Symbol.for("react.lazy"),M_=Symbol.for("react.activity"),O4=Symbol.for("react.memo_cache_sentinel"),IA=Symbol.iterator;function Xc(t){return t===null||typeof t!="object"?null:(t=IA&&t[IA]||t["@@iterator"],typeof t=="function"?t:null)}var M4=Symbol.for("react.client.reference");function L_(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===M4?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case $o:return"Fragment";case k_:return"Profiler";case mC:return"StrictMode";case V_:return"Suspense";case O_:return"SuspenseList";case M_:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case gu:return"Portal";case cr:return t.displayName||"Context";case pC:return(t._context.displayName||"Context")+".Consumer";case H0:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case G0:return e=t.displayName||null,e!==null?e:L_(t.type)||"Memo";case ss:e=t._payload,t=t._init;try{return L_(t(e))}catch{}}return null}var yu=Array.isArray,se=cC.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ae=D4.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ma={pending:!1,data:null,method:null,action:null},U_=[],Ko=-1;function Zi(t){return{current:t}}function Lt(t){0>Ko||(t.current=U_[Ko],U_[Ko]=null,Ko--)}function Me(t,e){Ko++,U_[Ko]=t.current,t.current=e}var qi=Zi(null),fh=Zi(null),bs=Zi(null),ym=Zi(null);function _m(t,e){switch(Me(bs,e),Me(fh,t),Me(qi,null),e.nodeType){case 9:case 11:t=(t=e.documentElement)&&(t=t.namespaceURI)?DS(t):0;break;default:if(t=e.tagName,e=e.namespaceURI)e=DS(e),t=O2(e,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}Lt(qi),Me(qi,t)}function Sl(){Lt(qi),Lt(fh),Lt(bs)}function j_(t){t.memoizedState!==null&&Me(ym,t);var e=qi.current,n=O2(e,t.type);e!==n&&(Me(fh,t),Me(qi,n))}function vm(t){fh.current===t&&(Lt(qi),Lt(fh)),ym.current===t&&(Lt(ym),Ah._currentValue=Ma)}var hy,xA;function ya(t){if(hy===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);hy=e&&e[1]||"",xA=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+hy+t+xA}var dy=!1;function fy(t,e){if(!t||dy)return"";dy=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var i={DetermineComponentFrameRoot:function(){try{if(e){var d=function(){throw Error()};if(Object.defineProperty(d.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(d,[])}catch(p){var f=p}Reflect.construct(t,[],d)}else{try{d.call()}catch(p){f=p}t.call(d.prototype)}}else{try{throw Error()}catch(p){f=p}(d=t())&&typeof d.catch=="function"&&d.catch(function(){})}}catch(p){if(p&&f&&typeof p.stack=="string")return[p.stack,f.stack]}return[null,null]}};i.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var r=Object.getOwnPropertyDescriptor(i.DetermineComponentFrameRoot,"name");r&&r.configurable&&Object.defineProperty(i.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var s=i.DetermineComponentFrameRoot(),a=s[0],o=s[1];if(a&&o){var l=a.split(`
`),c=o.split(`
`);for(r=i=0;i<l.length&&!l[i].includes("DetermineComponentFrameRoot");)i++;for(;r<c.length&&!c[r].includes("DetermineComponentFrameRoot");)r++;if(i===l.length||r===c.length)for(i=l.length-1,r=c.length-1;1<=i&&0<=r&&l[i]!==c[r];)r--;for(;1<=i&&0<=r;i--,r--)if(l[i]!==c[r]){if(i!==1||r!==1)do if(i--,r--,0>r||l[i]!==c[r]){var h=`
`+l[i].replace(" at new "," at ");return t.displayName&&h.includes("<anonymous>")&&(h=h.replace("<anonymous>",t.displayName)),h}while(1<=i&&0<=r);break}}}finally{dy=!1,Error.prepareStackTrace=n}return(n=t?t.displayName||t.name:"")?ya(n):""}function L4(t,e){switch(t.tag){case 26:case 27:case 5:return ya(t.type);case 16:return ya("Lazy");case 13:return t.child!==e&&e!==null?ya("Suspense Fallback"):ya("Suspense");case 19:return ya("SuspenseList");case 0:case 15:return fy(t.type,!1);case 11:return fy(t.type.render,!1);case 1:return fy(t.type,!0);case 31:return ya("Activity");default:return""}}function RA(t){try{var e="",n=null;do e+=L4(t,n),n=t,t=t.return;while(t);return e}catch(i){return`
Error generating stack: `+i.message+`
`+i.stack}}var z_=Object.prototype.hasOwnProperty,$0=Ct.unstable_scheduleCallback,my=Ct.unstable_cancelCallback,U4=Ct.unstable_shouldYield,j4=Ct.unstable_requestPaint,Un=Ct.unstable_now,z4=Ct.unstable_getCurrentPriorityLevel,gC=Ct.unstable_ImmediatePriority,yC=Ct.unstable_UserBlockingPriority,bm=Ct.unstable_NormalPriority,B4=Ct.unstable_LowPriority,_C=Ct.unstable_IdlePriority,F4=Ct.log,q4=Ct.unstable_setDisableYieldValue,id=null,jn=null;function ds(t){if(typeof F4=="function"&&q4(t),jn&&typeof jn.setStrictMode=="function")try{jn.setStrictMode(id,t)}catch{}}var zn=Math.clz32?Math.clz32:$4,H4=Math.log,G4=Math.LN2;function $4(t){return t>>>=0,t===0?32:31-(H4(t)/G4|0)|0}var rf=256,sf=262144,af=4194304;function _a(t){var e=t&42;if(e!==0)return e;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Pp(t,e,n){var i=t.pendingLanes;if(i===0)return 0;var r=0,s=t.suspendedLanes,a=t.pingedLanes;t=t.warmLanes;var o=i&134217727;return o!==0?(i=o&~s,i!==0?r=_a(i):(a&=o,a!==0?r=_a(a):n||(n=o&~t,n!==0&&(r=_a(n))))):(o=i&~s,o!==0?r=_a(o):a!==0?r=_a(a):n||(n=i&~t,n!==0&&(r=_a(n)))),r===0?0:e!==0&&e!==r&&!(e&s)&&(s=r&-r,n=e&-e,s>=n||s===32&&(n&4194048)!==0)?e:r}function rd(t,e){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&e)===0}function K4(t,e){switch(t){case 1:case 2:case 4:case 8:case 64:return e+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function vC(){var t=af;return af<<=1,!(af&62914560)&&(af=4194304),t}function py(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function sd(t,e){t.pendingLanes|=e,e!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function W4(t,e,n,i,r,s){var a=t.pendingLanes;t.pendingLanes=n,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=n,t.entangledLanes&=n,t.errorRecoveryDisabledLanes&=n,t.shellSuspendCounter=0;var o=t.entanglements,l=t.expirationTimes,c=t.hiddenUpdates;for(n=a&~n;0<n;){var h=31-zn(n),d=1<<h;o[h]=0,l[h]=-1;var f=c[h];if(f!==null)for(c[h]=null,h=0;h<f.length;h++){var p=f[h];p!==null&&(p.lane&=-536870913)}n&=~d}i!==0&&bC(t,i,0),s!==0&&r===0&&t.tag!==0&&(t.suspendedLanes|=s&~(a&~e))}function bC(t,e,n){t.pendingLanes|=e,t.suspendedLanes&=~e;var i=31-zn(e);t.entangledLanes|=e,t.entanglements[i]=t.entanglements[i]|1073741824|n&261930}function wC(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-zn(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}function TC(t,e){var n=e&-e;return n=n&42?1:K0(n),n&(t.suspendedLanes|e)?0:n}function K0(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function W0(t){return t&=-t,2<t?8<t?t&134217727?32:268435456:8:2}function EC(){var t=Ae.p;return t!==0?t:(t=window.event,t===void 0?32:$2(t.type))}function CA(t,e){var n=Ae.p;try{return Ae.p=t,e()}finally{Ae.p=n}}var Xs=Math.random().toString(36).slice(2),Ft="__reactFiber$"+Xs,xn="__reactProps$"+Xs,cc="__reactContainer$"+Xs,B_="__reactEvents$"+Xs,Q4="__reactListeners$"+Xs,Y4="__reactHandles$"+Xs,PA="__reactResources$"+Xs,ad="__reactMarker$"+Xs;function Q0(t){delete t[Ft],delete t[xn],delete t[B_],delete t[Q4],delete t[Y4]}function Wo(t){var e=t[Ft];if(e)return e;for(var n=t.parentNode;n;){if(e=n[cc]||n[Ft]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=LS(t);t!==null;){if(n=t[Ft])return n;t=LS(t)}return e}t=n,n=t.parentNode}return null}function uc(t){if(t=t[Ft]||t[cc]){var e=t.tag;if(e===5||e===6||e===13||e===31||e===26||e===27||e===3)return t}return null}function _u(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t.stateNode;throw Error(B(33))}function hl(t){var e=t[PA];return e||(e=t[PA]={hoistableStyles:new Map,hoistableScripts:new Map}),e}function Mt(t){t[ad]=!0}var AC=new Set,SC={};function uo(t,e){Il(t,e),Il(t+"Capture",e)}function Il(t,e){for(SC[t]=e,t=0;t<e.length;t++)AC.add(e[t])}var X4=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),NA={},DA={};function J4(t){return z_.call(DA,t)?!0:z_.call(NA,t)?!1:X4.test(t)?DA[t]=!0:(NA[t]=!0,!1)}function Mf(t,e,n){if(J4(e))if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":t.removeAttribute(e);return;case"boolean":var i=e.toLowerCase().slice(0,5);if(i!=="data-"&&i!=="aria-"){t.removeAttribute(e);return}}t.setAttribute(e,""+n)}}function of(t,e,n){if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(e);return}t.setAttribute(e,""+n)}}function tr(t,e,n,i){if(i===null)t.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(n);return}t.setAttributeNS(e,n,""+i)}}function Zn(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function IC(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Z4(t,e,n){var i=Object.getOwnPropertyDescriptor(t.constructor.prototype,e);if(!t.hasOwnProperty(e)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var r=i.get,s=i.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(a){n=""+a,s.call(this,a)}}),Object.defineProperty(t,e,{enumerable:i.enumerable}),{getValue:function(){return n},setValue:function(a){n=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function F_(t){if(!t._valueTracker){var e=IC(t)?"checked":"value";t._valueTracker=Z4(t,e,""+t[e])}}function xC(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=IC(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function wm(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var e5=/[\n"\\]/g;function ni(t){return t.replace(e5,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function q_(t,e,n,i,r,s,a,o){t.name="",a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"?t.type=a:t.removeAttribute("type"),e!=null?a==="number"?(e===0&&t.value===""||t.value!=e)&&(t.value=""+Zn(e)):t.value!==""+Zn(e)&&(t.value=""+Zn(e)):a!=="submit"&&a!=="reset"||t.removeAttribute("value"),e!=null?H_(t,a,Zn(e)):n!=null?H_(t,a,Zn(n)):i!=null&&t.removeAttribute("value"),r==null&&s!=null&&(t.defaultChecked=!!s),r!=null&&(t.checked=r&&typeof r!="function"&&typeof r!="symbol"),o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"?t.name=""+Zn(o):t.removeAttribute("name")}function RC(t,e,n,i,r,s,a,o){if(s!=null&&typeof s!="function"&&typeof s!="symbol"&&typeof s!="boolean"&&(t.type=s),e!=null||n!=null){if(!(s!=="submit"&&s!=="reset"||e!=null)){F_(t);return}n=n!=null?""+Zn(n):"",e=e!=null?""+Zn(e):n,o||e===t.value||(t.value=e),t.defaultValue=e}i=i??r,i=typeof i!="function"&&typeof i!="symbol"&&!!i,t.checked=o?t.checked:!!i,t.defaultChecked=!!i,a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"&&(t.name=a),F_(t)}function H_(t,e,n){e==="number"&&wm(t.ownerDocument)===t||t.defaultValue===""+n||(t.defaultValue=""+n)}function dl(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+Zn(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,i&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function CC(t,e,n){if(e!=null&&(e=""+Zn(e),e!==t.value&&(t.value=e),n==null)){t.defaultValue!==e&&(t.defaultValue=e);return}t.defaultValue=n!=null?""+Zn(n):""}function PC(t,e,n,i){if(e==null){if(i!=null){if(n!=null)throw Error(B(92));if(yu(i)){if(1<i.length)throw Error(B(93));i=i[0]}n=i}n==null&&(n=""),e=n}n=Zn(e),t.defaultValue=n,i=t.textContent,i===n&&i!==""&&i!==null&&(t.value=i),F_(t)}function xl(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var t5=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function kA(t,e,n){var i=e.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?i?t.setProperty(e,""):e==="float"?t.cssFloat="":t[e]="":i?t.setProperty(e,n):typeof n!="number"||n===0||t5.has(e)?e==="float"?t.cssFloat=n:t[e]=(""+n).trim():t[e]=n+"px"}function NC(t,e,n){if(e!=null&&typeof e!="object")throw Error(B(62));if(t=t.style,n!=null){for(var i in n)!n.hasOwnProperty(i)||e!=null&&e.hasOwnProperty(i)||(i.indexOf("--")===0?t.setProperty(i,""):i==="float"?t.cssFloat="":t[i]="");for(var r in e)i=e[r],e.hasOwnProperty(r)&&n[r]!==i&&kA(t,r,i)}else for(var s in e)e.hasOwnProperty(s)&&kA(t,s,e[s])}function Y0(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var n5=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),i5=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Lf(t){return i5.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function ur(){}var G_=null;function X0(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Qo=null,fl=null;function VA(t){var e=uc(t);if(e&&(t=e.stateNode)){var n=t[xn]||null;e:switch(t=e.stateNode,e.type){case"input":if(q_(t,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+ni(""+e)+'"][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=i[xn]||null;if(!r)throw Error(B(90));q_(i,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name)}}for(e=0;e<n.length;e++)i=n[e],i.form===t.form&&xC(i)}break e;case"textarea":CC(t,n.value,n.defaultValue);break e;case"select":e=n.value,e!=null&&dl(t,!!n.multiple,e,!1)}}}var gy=!1;function DC(t,e,n){if(gy)return t(e,n);gy=!0;try{var i=t(e);return i}finally{if(gy=!1,(Qo!==null||fl!==null)&&(Fp(),Qo&&(e=Qo,t=fl,fl=Qo=null,VA(e),t)))for(e=0;e<t.length;e++)VA(t[e])}}function mh(t,e){var n=t.stateNode;if(n===null)return null;var i=n[xn]||null;if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(B(231,e,typeof n));return n}var Er=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),$_=!1;if(Er)try{var Jc={};Object.defineProperty(Jc,"passive",{get:function(){$_=!0}}),window.addEventListener("test",Jc,Jc),window.removeEventListener("test",Jc,Jc)}catch{$_=!1}var fs=null,J0=null,Uf=null;function kC(){if(Uf)return Uf;var t,e=J0,n=e.length,i,r="value"in fs?fs.value:fs.textContent,s=r.length;for(t=0;t<n&&e[t]===r[t];t++);var a=n-t;for(i=1;i<=a&&e[n-i]===r[s-i];i++);return Uf=r.slice(t,1<i?1-i:void 0)}function jf(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function lf(){return!0}function OA(){return!1}function Cn(t){function e(n,i,r,s,a){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(n=t[o],this[o]=n?n(s):s[o]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?lf:OA,this.isPropagationStopped=OA,this}return $e(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=lf)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=lf)},persist:function(){},isPersistent:lf}),e}var ho={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Np=Cn(ho),od=$e({},ho,{view:0,detail:0}),r5=Cn(od),yy,_y,Zc,Dp=$e({},od,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Z0,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Zc&&(Zc&&t.type==="mousemove"?(yy=t.screenX-Zc.screenX,_y=t.screenY-Zc.screenY):_y=yy=0,Zc=t),yy)},movementY:function(t){return"movementY"in t?t.movementY:_y}}),MA=Cn(Dp),s5=$e({},Dp,{dataTransfer:0}),a5=Cn(s5),o5=$e({},od,{relatedTarget:0}),vy=Cn(o5),l5=$e({},ho,{animationName:0,elapsedTime:0,pseudoElement:0}),c5=Cn(l5),u5=$e({},ho,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),h5=Cn(u5),d5=$e({},ho,{data:0}),LA=Cn(d5),f5={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},m5={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},p5={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function g5(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=p5[t])?!!e[t]:!1}function Z0(){return g5}var y5=$e({},od,{key:function(t){if(t.key){var e=f5[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=jf(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?m5[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Z0,charCode:function(t){return t.type==="keypress"?jf(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?jf(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),_5=Cn(y5),v5=$e({},Dp,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),UA=Cn(v5),b5=$e({},od,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Z0}),w5=Cn(b5),T5=$e({},ho,{propertyName:0,elapsedTime:0,pseudoElement:0}),E5=Cn(T5),A5=$e({},Dp,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),S5=Cn(A5),I5=$e({},ho,{newState:0,oldState:0}),x5=Cn(I5),R5=[9,13,27,32],eb=Er&&"CompositionEvent"in window,ku=null;Er&&"documentMode"in document&&(ku=document.documentMode);var C5=Er&&"TextEvent"in window&&!ku,VC=Er&&(!eb||ku&&8<ku&&11>=ku),jA=" ",zA=!1;function OC(t,e){switch(t){case"keyup":return R5.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function MC(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Yo=!1;function P5(t,e){switch(t){case"compositionend":return MC(e);case"keypress":return e.which!==32?null:(zA=!0,jA);case"textInput":return t=e.data,t===jA&&zA?null:t;default:return null}}function N5(t,e){if(Yo)return t==="compositionend"||!eb&&OC(t,e)?(t=kC(),Uf=J0=fs=null,Yo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return VC&&e.locale!=="ko"?null:e.data;default:return null}}var D5={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function BA(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!D5[t.type]:e==="textarea"}function LC(t,e,n,i){Qo?fl?fl.push(i):fl=[i]:Qo=i,e=jm(e,"onChange"),0<e.length&&(n=new Np("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var Vu=null,ph=null;function k5(t){D2(t,0)}function kp(t){var e=_u(t);if(xC(e))return t}function FA(t,e){if(t==="change")return e}var UC=!1;if(Er){var by;if(Er){var wy="oninput"in document;if(!wy){var qA=document.createElement("div");qA.setAttribute("oninput","return;"),wy=typeof qA.oninput=="function"}by=wy}else by=!1;UC=by&&(!document.documentMode||9<document.documentMode)}function HA(){Vu&&(Vu.detachEvent("onpropertychange",jC),ph=Vu=null)}function jC(t){if(t.propertyName==="value"&&kp(ph)){var e=[];LC(e,ph,t,X0(t)),DC(k5,e)}}function V5(t,e,n){t==="focusin"?(HA(),Vu=e,ph=n,Vu.attachEvent("onpropertychange",jC)):t==="focusout"&&HA()}function O5(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return kp(ph)}function M5(t,e){if(t==="click")return kp(e)}function L5(t,e){if(t==="input"||t==="change")return kp(e)}function U5(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Gn=typeof Object.is=="function"?Object.is:U5;function gh(t,e){if(Gn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!z_.call(e,r)||!Gn(t[r],e[r]))return!1}return!0}function GA(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function $A(t,e){var n=GA(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=GA(n)}}function zC(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?zC(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function BC(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var e=wm(t.document);e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=wm(t.document)}return e}function tb(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}var j5=Er&&"documentMode"in document&&11>=document.documentMode,Xo=null,K_=null,Ou=null,W_=!1;function KA(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;W_||Xo==null||Xo!==wm(i)||(i=Xo,"selectionStart"in i&&tb(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Ou&&gh(Ou,i)||(Ou=i,i=jm(K_,"onSelect"),0<i.length&&(e=new Np("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=Xo)))}function ma(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Jo={animationend:ma("Animation","AnimationEnd"),animationiteration:ma("Animation","AnimationIteration"),animationstart:ma("Animation","AnimationStart"),transitionrun:ma("Transition","TransitionRun"),transitionstart:ma("Transition","TransitionStart"),transitioncancel:ma("Transition","TransitionCancel"),transitionend:ma("Transition","TransitionEnd")},Ty={},FC={};Er&&(FC=document.createElement("div").style,"AnimationEvent"in window||(delete Jo.animationend.animation,delete Jo.animationiteration.animation,delete Jo.animationstart.animation),"TransitionEvent"in window||delete Jo.transitionend.transition);function fo(t){if(Ty[t])return Ty[t];if(!Jo[t])return t;var e=Jo[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in FC)return Ty[t]=e[n];return t}var qC=fo("animationend"),HC=fo("animationiteration"),GC=fo("animationstart"),z5=fo("transitionrun"),B5=fo("transitionstart"),F5=fo("transitioncancel"),$C=fo("transitionend"),KC=new Map,Q_="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Q_.push("scrollEnd");function Ai(t,e){KC.set(t,e),uo(e,[t])}var Tm=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},Jn=[],Zo=0,nb=0;function Vp(){for(var t=Zo,e=nb=Zo=0;e<t;){var n=Jn[e];Jn[e++]=null;var i=Jn[e];Jn[e++]=null;var r=Jn[e];Jn[e++]=null;var s=Jn[e];if(Jn[e++]=null,i!==null&&r!==null){var a=i.pending;a===null?r.next=r:(r.next=a.next,a.next=r),i.pending=r}s!==0&&WC(n,r,s)}}function Op(t,e,n,i){Jn[Zo++]=t,Jn[Zo++]=e,Jn[Zo++]=n,Jn[Zo++]=i,nb|=i,t.lanes|=i,t=t.alternate,t!==null&&(t.lanes|=i)}function ib(t,e,n,i){return Op(t,e,n,i),Em(t)}function mo(t,e){return Op(t,null,null,e),Em(t)}function WC(t,e,n){t.lanes|=n;var i=t.alternate;i!==null&&(i.lanes|=n);for(var r=!1,s=t.return;s!==null;)s.childLanes|=n,i=s.alternate,i!==null&&(i.childLanes|=n),s.tag===22&&(t=s.stateNode,t===null||t._visibility&1||(r=!0)),t=s,s=s.return;return t.tag===3?(s=t.stateNode,r&&e!==null&&(r=31-zn(n),t=s.hiddenUpdates,i=t[r],i===null?t[r]=[e]:i.push(e),e.lane=n|536870912),s):null}function Em(t){if(50<Hu)throw Hu=0,gv=null,Error(B(185));for(var e=t.return;e!==null;)t=e,e=t.return;return t.tag===3?t.stateNode:null}var el={};function q5(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function On(t,e,n,i){return new q5(t,e,n,i)}function rb(t){return t=t.prototype,!(!t||!t.isReactComponent)}function mr(t,e){var n=t.alternate;return n===null?(n=On(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&65011712,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n.refCleanup=t.refCleanup,n}function QC(t,e){t.flags&=65011714;var n=t.alternate;return n===null?(t.childLanes=0,t.lanes=e,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,t.type=n.type,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),t}function zf(t,e,n,i,r,s){var a=0;if(i=t,typeof t=="function")rb(t)&&(a=1);else if(typeof t=="string")a=W6(t,n,qi.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case M_:return t=On(31,n,e,r),t.elementType=M_,t.lanes=s,t;case $o:return La(n.children,r,s,e);case mC:a=8,r|=24;break;case k_:return t=On(12,n,e,r|2),t.elementType=k_,t.lanes=s,t;case V_:return t=On(13,n,e,r),t.elementType=V_,t.lanes=s,t;case O_:return t=On(19,n,e,r),t.elementType=O_,t.lanes=s,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case cr:a=10;break e;case pC:a=9;break e;case H0:a=11;break e;case G0:a=14;break e;case ss:a=16,i=null;break e}a=29,n=Error(B(130,t===null?"null":typeof t,"")),i=null}return e=On(a,n,e,r),e.elementType=t,e.type=i,e.lanes=s,e}function La(t,e,n,i){return t=On(7,t,i,e),t.lanes=n,t}function Ey(t,e,n){return t=On(6,t,null,e),t.lanes=n,t}function YC(t){var e=On(18,null,null,0);return e.stateNode=t,e}function Ay(t,e,n){return e=On(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}var WA=new WeakMap;function ii(t,e){if(typeof t=="object"&&t!==null){var n=WA.get(t);return n!==void 0?n:(e={value:t,source:e,stack:RA(e)},WA.set(t,e),e)}return{value:t,source:e,stack:RA(e)}}var tl=[],nl=0,Am=null,yh=0,ei=[],ti=0,Vs=null,Li=1,Ui="";function ar(t,e){tl[nl++]=yh,tl[nl++]=Am,Am=t,yh=e}function XC(t,e,n){ei[ti++]=Li,ei[ti++]=Ui,ei[ti++]=Vs,Vs=t;var i=Li;t=Ui;var r=32-zn(i)-1;i&=~(1<<r),n+=1;var s=32-zn(e)+r;if(30<s){var a=r-r%5;s=(i&(1<<a)-1).toString(32),i>>=a,r-=a,Li=1<<32-zn(e)+r|n<<r|i,Ui=s+t}else Li=1<<s|n<<r|i,Ui=t}function sb(t){t.return!==null&&(ar(t,1),XC(t,1,0))}function ab(t){for(;t===Am;)Am=tl[--nl],tl[nl]=null,yh=tl[--nl],tl[nl]=null;for(;t===Vs;)Vs=ei[--ti],ei[ti]=null,Ui=ei[--ti],ei[ti]=null,Li=ei[--ti],ei[ti]=null}function JC(t,e){ei[ti++]=Li,ei[ti++]=Ui,ei[ti++]=Vs,Li=e.id,Ui=e.overflow,Vs=t}var qt=null,Be=null,be=!1,ws=null,ri=!1,Y_=Error(B(519));function Os(t){var e=Error(B(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw _h(ii(e,t)),Y_}function QA(t){var e=t.stateNode,n=t.type,i=t.memoizedProps;switch(e[Ft]=t,e[xn]=i,n){case"dialog":fe("cancel",e),fe("close",e);break;case"iframe":case"object":case"embed":fe("load",e);break;case"video":case"audio":for(n=0;n<Th.length;n++)fe(Th[n],e);break;case"source":fe("error",e);break;case"img":case"image":case"link":fe("error",e),fe("load",e);break;case"details":fe("toggle",e);break;case"input":fe("invalid",e),RC(e,i.value,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name,!0);break;case"select":fe("invalid",e);break;case"textarea":fe("invalid",e),PC(e,i.value,i.defaultValue,i.children)}n=i.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||e.textContent===""+n||i.suppressHydrationWarning===!0||V2(e.textContent,n)?(i.popover!=null&&(fe("beforetoggle",e),fe("toggle",e)),i.onScroll!=null&&fe("scroll",e),i.onScrollEnd!=null&&fe("scrollend",e),i.onClick!=null&&(e.onclick=ur),e=!0):e=!1,e||Os(t,!0)}function YA(t){for(qt=t.return;qt;)switch(qt.tag){case 5:case 31:case 13:ri=!1;return;case 27:case 3:ri=!0;return;default:qt=qt.return}}function Ro(t){if(t!==qt)return!1;if(!be)return YA(t),be=!0,!1;var e=t.tag,n;if((n=e!==3&&e!==27)&&((n=e===5)&&(n=t.type,n=!(n!=="form"&&n!=="button")||wv(t.type,t.memoizedProps)),n=!n),n&&Be&&Os(t),YA(t),e===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(B(317));Be=MS(t)}else if(e===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(B(317));Be=MS(t)}else e===27?(e=Be,Js(t.type)?(t=Sv,Sv=null,Be=t):Be=e):Be=qt?li(t.stateNode.nextSibling):null;return!0}function $a(){Be=qt=null,be=!1}function Sy(){var t=ws;return t!==null&&(wn===null?wn=t:wn.push.apply(wn,t),ws=null),t}function _h(t){ws===null?ws=[t]:ws.push(t)}var X_=Zi(null),po=null,hr=null;function os(t,e,n){Me(X_,e._currentValue),e._currentValue=n}function pr(t){t._currentValue=X_.current,Lt(X_)}function J_(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function Z_(t,e,n,i){var r=t.child;for(r!==null&&(r.return=t);r!==null;){var s=r.dependencies;if(s!==null){var a=r.child;s=s.firstContext;e:for(;s!==null;){var o=s;s=r;for(var l=0;l<e.length;l++)if(o.context===e[l]){s.lanes|=n,o=s.alternate,o!==null&&(o.lanes|=n),J_(s.return,n,t),i||(a=null);break e}s=o.next}}else if(r.tag===18){if(a=r.return,a===null)throw Error(B(341));a.lanes|=n,s=a.alternate,s!==null&&(s.lanes|=n),J_(a,n,t),a=null}else a=r.child;if(a!==null)a.return=r;else for(a=r;a!==null;){if(a===t){a=null;break}if(r=a.sibling,r!==null){r.return=a.return,a=r;break}a=a.return}r=a}}function hc(t,e,n,i){t=null;for(var r=e,s=!1;r!==null;){if(!s){if(r.flags&524288)s=!0;else if(r.flags&262144)break}if(r.tag===10){var a=r.alternate;if(a===null)throw Error(B(387));if(a=a.memoizedProps,a!==null){var o=r.type;Gn(r.pendingProps.value,a.value)||(t!==null?t.push(o):t=[o])}}else if(r===ym.current){if(a=r.alternate,a===null)throw Error(B(387));a.memoizedState.memoizedState!==r.memoizedState.memoizedState&&(t!==null?t.push(Ah):t=[Ah])}r=r.return}t!==null&&Z_(e,t,n,i),e.flags|=262144}function Sm(t){for(t=t.firstContext;t!==null;){if(!Gn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Ka(t){po=t,hr=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function $t(t){return ZC(po,t)}function cf(t,e){return po===null&&Ka(t),ZC(t,e)}function ZC(t,e){var n=e._currentValue;if(e={context:e,memoizedValue:n,next:null},hr===null){if(t===null)throw Error(B(308));hr=e,t.dependencies={lanes:0,firstContext:e},t.flags|=524288}else hr=hr.next=e;return n}var H5=typeof AbortController<"u"?AbortController:function(){var t=[],e=this.signal={aborted:!1,addEventListener:function(n,i){t.push(i)}};this.abort=function(){e.aborted=!0,t.forEach(function(n){return n()})}},G5=Ct.unstable_scheduleCallback,$5=Ct.unstable_NormalPriority,wt={$$typeof:cr,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ob(){return{controller:new H5,data:new Map,refCount:0}}function ld(t){t.refCount--,t.refCount===0&&G5($5,function(){t.controller.abort()})}var Mu=null,ev=0,Rl=0,ml=null;function K5(t,e){if(Mu===null){var n=Mu=[];ev=0,Rl=Db(),ml={status:"pending",value:void 0,then:function(i){n.push(i)}}}return ev++,e.then(XA,XA),e}function XA(){if(--ev===0&&Mu!==null){ml!==null&&(ml.status="fulfilled");var t=Mu;Mu=null,Rl=0,ml=null;for(var e=0;e<t.length;e++)(0,t[e])()}}function W5(t,e){var n=[],i={status:"pending",value:null,reason:null,then:function(r){n.push(r)}};return t.then(function(){i.status="fulfilled",i.value=e;for(var r=0;r<n.length;r++)(0,n[r])(e)},function(r){for(i.status="rejected",i.reason=r,r=0;r<n.length;r++)(0,n[r])(void 0)}),i}var JA=se.S;se.S=function(t,e){f2=Un(),typeof e=="object"&&e!==null&&typeof e.then=="function"&&K5(t,e),JA!==null&&JA(t,e)};var Ua=Zi(null);function lb(){var t=Ua.current;return t!==null?t:Oe.pooledCache}function Bf(t,e){e===null?Me(Ua,Ua.current):Me(Ua,e.pool)}function eP(){var t=lb();return t===null?null:{parent:wt._currentValue,pool:t}}var dc=Error(B(460)),cb=Error(B(474)),Mp=Error(B(542)),Im={then:function(){}};function ZA(t){return t=t.status,t==="fulfilled"||t==="rejected"}function tP(t,e,n){switch(n=t[n],n===void 0?t.push(e):n!==e&&(e.then(ur,ur),e=n),e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,tS(t),t;default:if(typeof e.status=="string")e.then(ur,ur);else{if(t=Oe,t!==null&&100<t.shellSuspendCounter)throw Error(B(482));t=e,t.status="pending",t.then(function(i){if(e.status==="pending"){var r=e;r.status="fulfilled",r.value=i}},function(i){if(e.status==="pending"){var r=e;r.status="rejected",r.reason=i}})}switch(e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,tS(t),t}throw ja=e,dc}}function va(t){try{var e=t._init;return e(t._payload)}catch(n){throw n!==null&&typeof n=="object"&&typeof n.then=="function"?(ja=n,dc):n}}var ja=null;function eS(){if(ja===null)throw Error(B(459));var t=ja;return ja=null,t}function tS(t){if(t===dc||t===Mp)throw Error(B(483))}var pl=null,vh=0;function uf(t){var e=vh;return vh+=1,pl===null&&(pl=[]),tP(pl,t,e)}function eu(t,e){e=e.props.ref,t.ref=e!==void 0?e:null}function hf(t,e){throw e.$$typeof===V4?Error(B(525)):(t=Object.prototype.toString.call(e),Error(B(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)))}function nP(t){function e(b,v){if(t){var _=b.deletions;_===null?(b.deletions=[v],b.flags|=16):_.push(v)}}function n(b,v){if(!t)return null;for(;v!==null;)e(b,v),v=v.sibling;return null}function i(b){for(var v=new Map;b!==null;)b.key!==null?v.set(b.key,b):v.set(b.index,b),b=b.sibling;return v}function r(b,v){return b=mr(b,v),b.index=0,b.sibling=null,b}function s(b,v,_){return b.index=_,t?(_=b.alternate,_!==null?(_=_.index,_<v?(b.flags|=67108866,v):_):(b.flags|=67108866,v)):(b.flags|=1048576,v)}function a(b){return t&&b.alternate===null&&(b.flags|=67108866),b}function o(b,v,_,S){return v===null||v.tag!==6?(v=Ey(_,b.mode,S),v.return=b,v):(v=r(v,_),v.return=b,v)}function l(b,v,_,S){var k=_.type;return k===$o?h(b,v,_.props.children,S,_.key):v!==null&&(v.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===ss&&va(k)===v.type)?(v=r(v,_.props),eu(v,_),v.return=b,v):(v=zf(_.type,_.key,_.props,null,b.mode,S),eu(v,_),v.return=b,v)}function c(b,v,_,S){return v===null||v.tag!==4||v.stateNode.containerInfo!==_.containerInfo||v.stateNode.implementation!==_.implementation?(v=Ay(_,b.mode,S),v.return=b,v):(v=r(v,_.children||[]),v.return=b,v)}function h(b,v,_,S,k){return v===null||v.tag!==7?(v=La(_,b.mode,S,k),v.return=b,v):(v=r(v,_),v.return=b,v)}function d(b,v,_){if(typeof v=="string"&&v!==""||typeof v=="number"||typeof v=="bigint")return v=Ey(""+v,b.mode,_),v.return=b,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case nf:return _=zf(v.type,v.key,v.props,null,b.mode,_),eu(_,v),_.return=b,_;case gu:return v=Ay(v,b.mode,_),v.return=b,v;case ss:return v=va(v),d(b,v,_)}if(yu(v)||Xc(v))return v=La(v,b.mode,_,null),v.return=b,v;if(typeof v.then=="function")return d(b,uf(v),_);if(v.$$typeof===cr)return d(b,cf(b,v),_);hf(b,v)}return null}function f(b,v,_,S){var k=v!==null?v.key:null;if(typeof _=="string"&&_!==""||typeof _=="number"||typeof _=="bigint")return k!==null?null:o(b,v,""+_,S);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case nf:return _.key===k?l(b,v,_,S):null;case gu:return _.key===k?c(b,v,_,S):null;case ss:return _=va(_),f(b,v,_,S)}if(yu(_)||Xc(_))return k!==null?null:h(b,v,_,S,null);if(typeof _.then=="function")return f(b,v,uf(_),S);if(_.$$typeof===cr)return f(b,v,cf(b,_),S);hf(b,_)}return null}function p(b,v,_,S,k){if(typeof S=="string"&&S!==""||typeof S=="number"||typeof S=="bigint")return b=b.get(_)||null,o(v,b,""+S,k);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case nf:return b=b.get(S.key===null?_:S.key)||null,l(v,b,S,k);case gu:return b=b.get(S.key===null?_:S.key)||null,c(v,b,S,k);case ss:return S=va(S),p(b,v,_,S,k)}if(yu(S)||Xc(S))return b=b.get(_)||null,h(v,b,S,k,null);if(typeof S.then=="function")return p(b,v,_,uf(S),k);if(S.$$typeof===cr)return p(b,v,_,cf(v,S),k);hf(v,S)}return null}function w(b,v,_,S){for(var k=null,O=null,A=v,T=v=0,I=null;A!==null&&T<_.length;T++){A.index>T?(I=A,A=null):I=A.sibling;var P=f(b,A,_[T],S);if(P===null){A===null&&(A=I);break}t&&A&&P.alternate===null&&e(b,A),v=s(P,v,T),O===null?k=P:O.sibling=P,O=P,A=I}if(T===_.length)return n(b,A),be&&ar(b,T),k;if(A===null){for(;T<_.length;T++)A=d(b,_[T],S),A!==null&&(v=s(A,v,T),O===null?k=A:O.sibling=A,O=A);return be&&ar(b,T),k}for(A=i(A);T<_.length;T++)I=p(A,b,T,_[T],S),I!==null&&(t&&I.alternate!==null&&A.delete(I.key===null?T:I.key),v=s(I,v,T),O===null?k=I:O.sibling=I,O=I);return t&&A.forEach(function(D){return e(b,D)}),be&&ar(b,T),k}function E(b,v,_,S){if(_==null)throw Error(B(151));for(var k=null,O=null,A=v,T=v=0,I=null,P=_.next();A!==null&&!P.done;T++,P=_.next()){A.index>T?(I=A,A=null):I=A.sibling;var D=f(b,A,P.value,S);if(D===null){A===null&&(A=I);break}t&&A&&D.alternate===null&&e(b,A),v=s(D,v,T),O===null?k=D:O.sibling=D,O=D,A=I}if(P.done)return n(b,A),be&&ar(b,T),k;if(A===null){for(;!P.done;T++,P=_.next())P=d(b,P.value,S),P!==null&&(v=s(P,v,T),O===null?k=P:O.sibling=P,O=P);return be&&ar(b,T),k}for(A=i(A);!P.done;T++,P=_.next())P=p(A,b,T,P.value,S),P!==null&&(t&&P.alternate!==null&&A.delete(P.key===null?T:P.key),v=s(P,v,T),O===null?k=P:O.sibling=P,O=P);return t&&A.forEach(function(V){return e(b,V)}),be&&ar(b,T),k}function R(b,v,_,S){if(typeof _=="object"&&_!==null&&_.type===$o&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case nf:e:{for(var k=_.key;v!==null;){if(v.key===k){if(k=_.type,k===$o){if(v.tag===7){n(b,v.sibling),S=r(v,_.props.children),S.return=b,b=S;break e}}else if(v.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===ss&&va(k)===v.type){n(b,v.sibling),S=r(v,_.props),eu(S,_),S.return=b,b=S;break e}n(b,v);break}else e(b,v);v=v.sibling}_.type===$o?(S=La(_.props.children,b.mode,S,_.key),S.return=b,b=S):(S=zf(_.type,_.key,_.props,null,b.mode,S),eu(S,_),S.return=b,b=S)}return a(b);case gu:e:{for(k=_.key;v!==null;){if(v.key===k)if(v.tag===4&&v.stateNode.containerInfo===_.containerInfo&&v.stateNode.implementation===_.implementation){n(b,v.sibling),S=r(v,_.children||[]),S.return=b,b=S;break e}else{n(b,v);break}else e(b,v);v=v.sibling}S=Ay(_,b.mode,S),S.return=b,b=S}return a(b);case ss:return _=va(_),R(b,v,_,S)}if(yu(_))return w(b,v,_,S);if(Xc(_)){if(k=Xc(_),typeof k!="function")throw Error(B(150));return _=k.call(_),E(b,v,_,S)}if(typeof _.then=="function")return R(b,v,uf(_),S);if(_.$$typeof===cr)return R(b,v,cf(b,_),S);hf(b,_)}return typeof _=="string"&&_!==""||typeof _=="number"||typeof _=="bigint"?(_=""+_,v!==null&&v.tag===6?(n(b,v.sibling),S=r(v,_),S.return=b,b=S):(n(b,v),S=Ey(_,b.mode,S),S.return=b,b=S),a(b)):n(b,v)}return function(b,v,_,S){try{vh=0;var k=R(b,v,_,S);return pl=null,k}catch(A){if(A===dc||A===Mp)throw A;var O=On(29,A,null,b.mode);return O.lanes=S,O.return=b,O}finally{}}}var Wa=nP(!0),iP=nP(!1),as=!1;function ub(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function tv(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Ts(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Es(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,Ee&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,e=Em(t),WC(t,null,n),e}return Op(t,i,e,n),Em(t)}function Lu(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194048)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,wC(t,n)}}function Iy(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var a={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};s===null?r=s=a:s=s.next=a,n=n.next}while(n!==null);s===null?r=s=e:s=s.next=e}else r=s=e;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,callbacks:i.callbacks},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}var nv=!1;function Uu(){if(nv){var t=ml;if(t!==null)throw t}}function ju(t,e,n,i){nv=!1;var r=t.updateQueue;as=!1;var s=r.firstBaseUpdate,a=r.lastBaseUpdate,o=r.shared.pending;if(o!==null){r.shared.pending=null;var l=o,c=l.next;l.next=null,a===null?s=c:a.next=c,a=l;var h=t.alternate;h!==null&&(h=h.updateQueue,o=h.lastBaseUpdate,o!==a&&(o===null?h.firstBaseUpdate=c:o.next=c,h.lastBaseUpdate=l))}if(s!==null){var d=r.baseState;a=0,h=c=l=null,o=s;do{var f=o.lane&-536870913,p=f!==o.lane;if(p?(ye&f)===f:(i&f)===f){f!==0&&f===Rl&&(nv=!0),h!==null&&(h=h.next={lane:0,tag:o.tag,payload:o.payload,callback:null,next:null});e:{var w=t,E=o;f=e;var R=n;switch(E.tag){case 1:if(w=E.payload,typeof w=="function"){d=w.call(R,d,f);break e}d=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=E.payload,f=typeof w=="function"?w.call(R,d,f):w,f==null)break e;d=$e({},d,f);break e;case 2:as=!0}}f=o.callback,f!==null&&(t.flags|=64,p&&(t.flags|=8192),p=r.callbacks,p===null?r.callbacks=[f]:p.push(f))}else p={lane:f,tag:o.tag,payload:o.payload,callback:o.callback,next:null},h===null?(c=h=p,l=d):h=h.next=p,a|=f;if(o=o.next,o===null){if(o=r.shared.pending,o===null)break;p=o,o=p.next,p.next=null,r.lastBaseUpdate=p,r.shared.pending=null}}while(!0);h===null&&(l=d),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=h,s===null&&(r.shared.lanes=0),Ls|=a,t.lanes=a,t.memoizedState=d}}function rP(t,e){if(typeof t!="function")throw Error(B(191,t));t.call(e)}function sP(t,e){var n=t.callbacks;if(n!==null)for(t.callbacks=null,t=0;t<n.length;t++)rP(n[t],e)}var Cl=Zi(null),xm=Zi(0);function nS(t,e){t=xr,Me(xm,t),Me(Cl,e),xr=t|e.baseLanes}function iv(){Me(xm,xr),Me(Cl,Cl.current)}function hb(){xr=xm.current,Lt(Cl),Lt(xm)}var $n=Zi(null),oi=null;function ls(t){var e=t.alternate;Me(dt,dt.current&1),Me($n,t),oi===null&&(e===null||Cl.current!==null||e.memoizedState!==null)&&(oi=t)}function rv(t){Me(dt,dt.current),Me($n,t),oi===null&&(oi=t)}function aP(t){t.tag===22?(Me(dt,dt.current),Me($n,t),oi===null&&(oi=t)):cs()}function cs(){Me(dt,dt.current),Me($n,$n.current)}function kn(t){Lt($n),oi===t&&(oi=null),Lt(dt)}var dt=Zi(0);function Rm(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||Ev(n)||Av(n)))return e}else if(e.tag===19&&(e.memoizedProps.revealOrder==="forwards"||e.memoizedProps.revealOrder==="backwards"||e.memoizedProps.revealOrder==="unstable_legacy-backwards"||e.memoizedProps.revealOrder==="together")){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Ar=0,le=null,De=null,vt=null,Cm=!1,gl=!1,Qa=!1,Pm=0,bh=0,yl=null,Q5=0;function st(){throw Error(B(321))}function db(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Gn(t[n],e[n]))return!1;return!0}function fb(t,e,n,i,r,s){return Ar=s,le=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,se.H=t===null||t.memoizedState===null?LP:Ab,Qa=!1,s=n(i,r),Qa=!1,gl&&(s=lP(e,n,i,r)),oP(t),s}function oP(t){se.H=wh;var e=De!==null&&De.next!==null;if(Ar=0,vt=De=le=null,Cm=!1,bh=0,yl=null,e)throw Error(B(300));t===null||Tt||(t=t.dependencies,t!==null&&Sm(t)&&(Tt=!0))}function lP(t,e,n,i){le=t;var r=0;do{if(gl&&(yl=null),bh=0,gl=!1,25<=r)throw Error(B(301));if(r+=1,vt=De=null,t.updateQueue!=null){var s=t.updateQueue;s.lastEffect=null,s.events=null,s.stores=null,s.memoCache!=null&&(s.memoCache.index=0)}se.H=UP,s=e(n,i)}while(gl);return s}function Y5(){var t=se.H,e=t.useState()[0];return e=typeof e.then=="function"?cd(e):e,t=t.useState()[0],(De!==null?De.memoizedState:null)!==t&&(le.flags|=1024),e}function mb(){var t=Pm!==0;return Pm=0,t}function pb(t,e,n){e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~n}function gb(t){if(Cm){for(t=t.memoizedState;t!==null;){var e=t.queue;e!==null&&(e.pending=null),t=t.next}Cm=!1}Ar=0,vt=De=le=null,gl=!1,bh=Pm=0,yl=null}function un(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return vt===null?le.memoizedState=vt=t:vt=vt.next=t,vt}function mt(){if(De===null){var t=le.alternate;t=t!==null?t.memoizedState:null}else t=De.next;var e=vt===null?le.memoizedState:vt.next;if(e!==null)vt=e,De=t;else{if(t===null)throw le.alternate===null?Error(B(467)):Error(B(310));De=t,t={memoizedState:De.memoizedState,baseState:De.baseState,baseQueue:De.baseQueue,queue:De.queue,next:null},vt===null?le.memoizedState=vt=t:vt=vt.next=t}return vt}function Lp(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function cd(t){var e=bh;return bh+=1,yl===null&&(yl=[]),t=tP(yl,t,e),e=le,(vt===null?e.memoizedState:vt.next)===null&&(e=e.alternate,se.H=e===null||e.memoizedState===null?LP:Ab),t}function Up(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return cd(t);if(t.$$typeof===cr)return $t(t)}throw Error(B(438,String(t)))}function yb(t){var e=null,n=le.updateQueue;if(n!==null&&(e=n.memoCache),e==null){var i=le.alternate;i!==null&&(i=i.updateQueue,i!==null&&(i=i.memoCache,i!=null&&(e={data:i.data.map(function(r){return r.slice()}),index:0})))}if(e==null&&(e={data:[],index:0}),n===null&&(n=Lp(),le.updateQueue=n),n.memoCache=e,n=e.data[e.index],n===void 0)for(n=e.data[e.index]=Array(t),i=0;i<t;i++)n[i]=O4;return e.index++,n}function Sr(t,e){return typeof e=="function"?e(t):e}function Ff(t){var e=mt();return _b(e,De,t)}function _b(t,e,n){var i=t.queue;if(i===null)throw Error(B(311));i.lastRenderedReducer=n;var r=t.baseQueue,s=i.pending;if(s!==null){if(r!==null){var a=r.next;r.next=s.next,s.next=a}e.baseQueue=r=s,i.pending=null}if(s=t.baseState,r===null)t.memoizedState=s;else{e=r.next;var o=a=null,l=null,c=e,h=!1;do{var d=c.lane&-536870913;if(d!==c.lane?(ye&d)===d:(Ar&d)===d){var f=c.revertLane;if(f===0)l!==null&&(l=l.next={lane:0,revertLane:0,gesture:null,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),d===Rl&&(h=!0);else if((Ar&f)===f){c=c.next,f===Rl&&(h=!0);continue}else d={lane:0,revertLane:c.revertLane,gesture:null,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},l===null?(o=l=d,a=s):l=l.next=d,le.lanes|=f,Ls|=f;d=c.action,Qa&&n(s,d),s=c.hasEagerState?c.eagerState:n(s,d)}else f={lane:d,revertLane:c.revertLane,gesture:c.gesture,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},l===null?(o=l=f,a=s):l=l.next=f,le.lanes|=d,Ls|=d;c=c.next}while(c!==null&&c!==e);if(l===null?a=s:l.next=o,!Gn(s,t.memoizedState)&&(Tt=!0,h&&(n=ml,n!==null)))throw n;t.memoizedState=s,t.baseState=a,t.baseQueue=l,i.lastRenderedState=s}return r===null&&(i.lanes=0),[t.memoizedState,i.dispatch]}function xy(t){var e=mt(),n=e.queue;if(n===null)throw Error(B(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,s=e.memoizedState;if(r!==null){n.pending=null;var a=r=r.next;do s=t(s,a.action),a=a.next;while(a!==r);Gn(s,e.memoizedState)||(Tt=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,i]}function cP(t,e,n){var i=le,r=mt(),s=be;if(s){if(n===void 0)throw Error(B(407));n=n()}else n=e();var a=!Gn((De||r).memoizedState,n);if(a&&(r.memoizedState=n,Tt=!0),r=r.queue,vb(dP.bind(null,i,r,t),[t]),r.getSnapshot!==e||a||vt!==null&&vt.memoizedState.tag&1){if(i.flags|=2048,Pl(9,{destroy:void 0},hP.bind(null,i,r,n,e),null),Oe===null)throw Error(B(349));s||Ar&127||uP(i,e,n)}return n}function uP(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=le.updateQueue,e===null?(e=Lp(),le.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function hP(t,e,n,i){e.value=n,e.getSnapshot=i,fP(e)&&mP(t)}function dP(t,e,n){return n(function(){fP(e)&&mP(t)})}function fP(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Gn(t,n)}catch{return!0}}function mP(t){var e=mo(t,2);e!==null&&In(e,t,2)}function sv(t){var e=un();if(typeof t=="function"){var n=t;if(t=n(),Qa){ds(!0);try{n()}finally{ds(!1)}}}return e.memoizedState=e.baseState=t,e.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Sr,lastRenderedState:t},e}function pP(t,e,n,i){return t.baseState=n,_b(t,De,typeof i=="function"?i:Sr)}function X5(t,e,n,i,r){if(zp(t))throw Error(B(485));if(t=e.action,t!==null){var s={payload:r,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(a){s.listeners.push(a)}};se.T!==null?n(!0):s.isTransition=!1,i(s),n=e.pending,n===null?(s.next=e.pending=s,gP(e,s)):(s.next=n.next,e.pending=n.next=s)}}function gP(t,e){var n=e.action,i=e.payload,r=t.state;if(e.isTransition){var s=se.T,a={};se.T=a;try{var o=n(r,i),l=se.S;l!==null&&l(a,o),iS(t,e,o)}catch(c){av(t,e,c)}finally{s!==null&&a.types!==null&&(s.types=a.types),se.T=s}}else try{s=n(r,i),iS(t,e,s)}catch(c){av(t,e,c)}}function iS(t,e,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(i){rS(t,e,i)},function(i){return av(t,e,i)}):rS(t,e,n)}function rS(t,e,n){e.status="fulfilled",e.value=n,yP(e),t.state=n,e=t.pending,e!==null&&(n=e.next,n===e?t.pending=null:(n=n.next,e.next=n,gP(t,n)))}function av(t,e,n){var i=t.pending;if(t.pending=null,i!==null){i=i.next;do e.status="rejected",e.reason=n,yP(e),e=e.next;while(e!==i)}t.action=null}function yP(t){t=t.listeners;for(var e=0;e<t.length;e++)(0,t[e])()}function _P(t,e){return e}function sS(t,e){if(be){var n=Oe.formState;if(n!==null){e:{var i=le;if(be){if(Be){t:{for(var r=Be,s=ri;r.nodeType!==8;){if(!s){r=null;break t}if(r=li(r.nextSibling),r===null){r=null;break t}}s=r.data,r=s==="F!"||s==="F"?r:null}if(r){Be=li(r.nextSibling),i=r.data==="F!";break e}}Os(i)}i=!1}i&&(e=n[0])}}return n=un(),n.memoizedState=n.baseState=e,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:_P,lastRenderedState:e},n.queue=i,n=VP.bind(null,le,i),i.dispatch=n,i=sv(!1),s=Eb.bind(null,le,!1,i.queue),i=un(),r={state:e,dispatch:null,action:t,pending:null},i.queue=r,n=X5.bind(null,le,r,s,n),r.dispatch=n,i.memoizedState=t,[e,n,!1]}function aS(t){var e=mt();return vP(e,De,t)}function vP(t,e,n){if(e=_b(t,e,_P)[0],t=Ff(Sr)[0],typeof e=="object"&&e!==null&&typeof e.then=="function")try{var i=cd(e)}catch(a){throw a===dc?Mp:a}else i=e;e=mt();var r=e.queue,s=r.dispatch;return n!==e.memoizedState&&(le.flags|=2048,Pl(9,{destroy:void 0},J5.bind(null,r,n),null)),[i,s,t]}function J5(t,e){t.action=e}function oS(t){var e=mt(),n=De;if(n!==null)return vP(e,n,t);mt(),e=e.memoizedState,n=mt();var i=n.queue.dispatch;return n.memoizedState=t,[e,i,!1]}function Pl(t,e,n,i){return t={tag:t,create:n,deps:i,inst:e,next:null},e=le.updateQueue,e===null&&(e=Lp(),le.updateQueue=e),n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t),t}function bP(){return mt().memoizedState}function qf(t,e,n,i){var r=un();le.flags|=t,r.memoizedState=Pl(1|e,{destroy:void 0},n,i===void 0?null:i)}function jp(t,e,n,i){var r=mt();i=i===void 0?null:i;var s=r.memoizedState.inst;De!==null&&i!==null&&db(i,De.memoizedState.deps)?r.memoizedState=Pl(e,s,n,i):(le.flags|=t,r.memoizedState=Pl(1|e,s,n,i))}function lS(t,e){qf(8390656,8,t,e)}function vb(t,e){jp(2048,8,t,e)}function Z5(t){le.flags|=4;var e=le.updateQueue;if(e===null)e=Lp(),le.updateQueue=e,e.events=[t];else{var n=e.events;n===null?e.events=[t]:n.push(t)}}function wP(t){var e=mt().memoizedState;return Z5({ref:e,nextImpl:t}),function(){if(Ee&2)throw Error(B(440));return e.impl.apply(void 0,arguments)}}function TP(t,e){return jp(4,2,t,e)}function EP(t,e){return jp(4,4,t,e)}function AP(t,e){if(typeof e=="function"){t=t();var n=e(t);return function(){typeof n=="function"?n():e(null)}}if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function SP(t,e,n){n=n!=null?n.concat([t]):null,jp(4,4,AP.bind(null,e,t),n)}function bb(){}function IP(t,e){var n=mt();e=e===void 0?null:e;var i=n.memoizedState;return e!==null&&db(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function xP(t,e){var n=mt();e=e===void 0?null:e;var i=n.memoizedState;if(e!==null&&db(e,i[1]))return i[0];if(i=t(),Qa){ds(!0);try{t()}finally{ds(!1)}}return n.memoizedState=[i,e],i}function wb(t,e,n){return n===void 0||Ar&1073741824&&!(ye&261930)?t.memoizedState=e:(t.memoizedState=n,t=p2(),le.lanes|=t,Ls|=t,n)}function RP(t,e,n,i){return Gn(n,e)?n:Cl.current!==null?(t=wb(t,n,i),Gn(t,e)||(Tt=!0),t):!(Ar&42)||Ar&1073741824&&!(ye&261930)?(Tt=!0,t.memoizedState=n):(t=p2(),le.lanes|=t,Ls|=t,e)}function CP(t,e,n,i,r){var s=Ae.p;Ae.p=s!==0&&8>s?s:8;var a=se.T,o={};se.T=o,Eb(t,!1,e,n);try{var l=r(),c=se.S;if(c!==null&&c(o,l),l!==null&&typeof l=="object"&&typeof l.then=="function"){var h=W5(l,i);zu(t,e,h,Bn(t))}else zu(t,e,i,Bn(t))}catch(d){zu(t,e,{then:function(){},status:"rejected",reason:d},Bn())}finally{Ae.p=s,a!==null&&o.types!==null&&(a.types=o.types),se.T=a}}function e6(){}function ov(t,e,n,i){if(t.tag!==5)throw Error(B(476));var r=PP(t).queue;CP(t,r,e,Ma,n===null?e6:function(){return NP(t),n(i)})}function PP(t){var e=t.memoizedState;if(e!==null)return e;e={memoizedState:Ma,baseState:Ma,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Sr,lastRenderedState:Ma},next:null};var n={};return e.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Sr,lastRenderedState:n},next:null},t.memoizedState=e,t=t.alternate,t!==null&&(t.memoizedState=e),e}function NP(t){var e=PP(t);e.next===null&&(e=t.alternate.memoizedState),zu(t,e.next.queue,{},Bn())}function Tb(){return $t(Ah)}function DP(){return mt().memoizedState}function kP(){return mt().memoizedState}function t6(t){for(var e=t.return;e!==null;){switch(e.tag){case 24:case 3:var n=Bn();t=Ts(n);var i=Es(e,t,n);i!==null&&(In(i,e,n),Lu(i,e,n)),e={cache:ob()},t.payload=e;return}e=e.return}}function n6(t,e,n){var i=Bn();n={lane:i,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},zp(t)?OP(e,n):(n=ib(t,e,n,i),n!==null&&(In(n,t,i),MP(n,e,i)))}function VP(t,e,n){var i=Bn();zu(t,e,n,i)}function zu(t,e,n,i){var r={lane:i,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(zp(t))OP(e,r);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var a=e.lastRenderedState,o=s(a,n);if(r.hasEagerState=!0,r.eagerState=o,Gn(o,a))return Op(t,e,r,0),Oe===null&&Vp(),!1}catch{}finally{}if(n=ib(t,e,r,i),n!==null)return In(n,t,i),MP(n,e,i),!0}return!1}function Eb(t,e,n,i){if(i={lane:2,revertLane:Db(),gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null},zp(t)){if(e)throw Error(B(479))}else e=ib(t,n,i,2),e!==null&&In(e,t,2)}function zp(t){var e=t.alternate;return t===le||e!==null&&e===le}function OP(t,e){gl=Cm=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function MP(t,e,n){if(n&4194048){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,wC(t,n)}}var wh={readContext:$t,use:Up,useCallback:st,useContext:st,useEffect:st,useImperativeHandle:st,useLayoutEffect:st,useInsertionEffect:st,useMemo:st,useReducer:st,useRef:st,useState:st,useDebugValue:st,useDeferredValue:st,useTransition:st,useSyncExternalStore:st,useId:st,useHostTransitionStatus:st,useFormState:st,useActionState:st,useOptimistic:st,useMemoCache:st,useCacheRefresh:st};wh.useEffectEvent=st;var LP={readContext:$t,use:Up,useCallback:function(t,e){return un().memoizedState=[t,e===void 0?null:e],t},useContext:$t,useEffect:lS,useImperativeHandle:function(t,e,n){n=n!=null?n.concat([t]):null,qf(4194308,4,AP.bind(null,e,t),n)},useLayoutEffect:function(t,e){return qf(4194308,4,t,e)},useInsertionEffect:function(t,e){qf(4,2,t,e)},useMemo:function(t,e){var n=un();e=e===void 0?null:e;var i=t();if(Qa){ds(!0);try{t()}finally{ds(!1)}}return n.memoizedState=[i,e],i},useReducer:function(t,e,n){var i=un();if(n!==void 0){var r=n(e);if(Qa){ds(!0);try{n(e)}finally{ds(!1)}}}else r=e;return i.memoizedState=i.baseState=r,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:r},i.queue=t,t=t.dispatch=n6.bind(null,le,t),[i.memoizedState,t]},useRef:function(t){var e=un();return t={current:t},e.memoizedState=t},useState:function(t){t=sv(t);var e=t.queue,n=VP.bind(null,le,e);return e.dispatch=n,[t.memoizedState,n]},useDebugValue:bb,useDeferredValue:function(t,e){var n=un();return wb(n,t,e)},useTransition:function(){var t=sv(!1);return t=CP.bind(null,le,t.queue,!0,!1),un().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,e,n){var i=le,r=un();if(be){if(n===void 0)throw Error(B(407));n=n()}else{if(n=e(),Oe===null)throw Error(B(349));ye&127||uP(i,e,n)}r.memoizedState=n;var s={value:n,getSnapshot:e};return r.queue=s,lS(dP.bind(null,i,s,t),[t]),i.flags|=2048,Pl(9,{destroy:void 0},hP.bind(null,i,s,n,e),null),n},useId:function(){var t=un(),e=Oe.identifierPrefix;if(be){var n=Ui,i=Li;n=(i&~(1<<32-zn(i)-1)).toString(32)+n,e="_"+e+"R_"+n,n=Pm++,0<n&&(e+="H"+n.toString(32)),e+="_"}else n=Q5++,e="_"+e+"r_"+n.toString(32)+"_";return t.memoizedState=e},useHostTransitionStatus:Tb,useFormState:sS,useActionState:sS,useOptimistic:function(t){var e=un();e.memoizedState=e.baseState=t;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return e.queue=n,e=Eb.bind(null,le,!0,n),n.dispatch=e,[t,e]},useMemoCache:yb,useCacheRefresh:function(){return un().memoizedState=t6.bind(null,le)},useEffectEvent:function(t){var e=un(),n={impl:t};return e.memoizedState=n,function(){if(Ee&2)throw Error(B(440));return n.impl.apply(void 0,arguments)}}},Ab={readContext:$t,use:Up,useCallback:IP,useContext:$t,useEffect:vb,useImperativeHandle:SP,useInsertionEffect:TP,useLayoutEffect:EP,useMemo:xP,useReducer:Ff,useRef:bP,useState:function(){return Ff(Sr)},useDebugValue:bb,useDeferredValue:function(t,e){var n=mt();return RP(n,De.memoizedState,t,e)},useTransition:function(){var t=Ff(Sr)[0],e=mt().memoizedState;return[typeof t=="boolean"?t:cd(t),e]},useSyncExternalStore:cP,useId:DP,useHostTransitionStatus:Tb,useFormState:aS,useActionState:aS,useOptimistic:function(t,e){var n=mt();return pP(n,De,t,e)},useMemoCache:yb,useCacheRefresh:kP};Ab.useEffectEvent=wP;var UP={readContext:$t,use:Up,useCallback:IP,useContext:$t,useEffect:vb,useImperativeHandle:SP,useInsertionEffect:TP,useLayoutEffect:EP,useMemo:xP,useReducer:xy,useRef:bP,useState:function(){return xy(Sr)},useDebugValue:bb,useDeferredValue:function(t,e){var n=mt();return De===null?wb(n,t,e):RP(n,De.memoizedState,t,e)},useTransition:function(){var t=xy(Sr)[0],e=mt().memoizedState;return[typeof t=="boolean"?t:cd(t),e]},useSyncExternalStore:cP,useId:DP,useHostTransitionStatus:Tb,useFormState:oS,useActionState:oS,useOptimistic:function(t,e){var n=mt();return De!==null?pP(n,De,t,e):(n.baseState=t,[t,n.queue.dispatch])},useMemoCache:yb,useCacheRefresh:kP};UP.useEffectEvent=wP;function Ry(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:$e({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var lv={enqueueSetState:function(t,e,n){t=t._reactInternals;var i=Bn(),r=Ts(i);r.payload=e,n!=null&&(r.callback=n),e=Es(t,r,i),e!==null&&(In(e,t,i),Lu(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=Bn(),r=Ts(i);r.tag=1,r.payload=e,n!=null&&(r.callback=n),e=Es(t,r,i),e!==null&&(In(e,t,i),Lu(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Bn(),i=Ts(n);i.tag=2,e!=null&&(i.callback=e),e=Es(t,i,n),e!==null&&(In(e,t,n),Lu(e,t,n))}};function cS(t,e,n,i,r,s,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,s,a):e.prototype&&e.prototype.isPureReactComponent?!gh(n,i)||!gh(r,s):!0}function uS(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&lv.enqueueReplaceState(e,e.state,null)}function Ya(t,e){var n=e;if("ref"in e){n={};for(var i in e)i!=="ref"&&(n[i]=e[i])}if(t=t.defaultProps){n===e&&(n=$e({},n));for(var r in t)n[r]===void 0&&(n[r]=t[r])}return n}function jP(t){Tm(t)}function zP(t){console.error(t)}function BP(t){Tm(t)}function Nm(t,e){try{var n=t.onUncaughtError;n(e.value,{componentStack:e.stack})}catch(i){setTimeout(function(){throw i})}}function hS(t,e,n){try{var i=t.onCaughtError;i(n.value,{componentStack:n.stack,errorBoundary:e.tag===1?e.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function cv(t,e,n){return n=Ts(n),n.tag=3,n.payload={element:null},n.callback=function(){Nm(t,e)},n}function FP(t){return t=Ts(t),t.tag=3,t}function qP(t,e,n,i){var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var s=i.value;t.payload=function(){return r(s)},t.callback=function(){hS(e,n,i)}}var a=n.stateNode;a!==null&&typeof a.componentDidCatch=="function"&&(t.callback=function(){hS(e,n,i),typeof r!="function"&&(As===null?As=new Set([this]):As.add(this));var o=i.stack;this.componentDidCatch(i.value,{componentStack:o!==null?o:""})})}function i6(t,e,n,i,r){if(n.flags|=32768,i!==null&&typeof i=="object"&&typeof i.then=="function"){if(e=n.alternate,e!==null&&hc(e,n,r,!0),n=$n.current,n!==null){switch(n.tag){case 31:case 13:return oi===null?Mm():n.alternate===null&&ot===0&&(ot=3),n.flags&=-257,n.flags|=65536,n.lanes=r,i===Im?n.flags|=16384:(e=n.updateQueue,e===null?n.updateQueue=new Set([i]):e.add(i),jy(t,i,r)),!1;case 22:return n.flags|=65536,i===Im?n.flags|=16384:(e=n.updateQueue,e===null?(e={transitions:null,markerInstances:null,retryQueue:new Set([i])},n.updateQueue=e):(n=e.retryQueue,n===null?e.retryQueue=new Set([i]):n.add(i)),jy(t,i,r)),!1}throw Error(B(435,n.tag))}return jy(t,i,r),Mm(),!1}if(be)return e=$n.current,e!==null?(!(e.flags&65536)&&(e.flags|=256),e.flags|=65536,e.lanes=r,i!==Y_&&(t=Error(B(422),{cause:i}),_h(ii(t,n)))):(i!==Y_&&(e=Error(B(423),{cause:i}),_h(ii(e,n))),t=t.current.alternate,t.flags|=65536,r&=-r,t.lanes|=r,i=ii(i,n),r=cv(t.stateNode,i,r),Iy(t,r),ot!==4&&(ot=2)),!1;var s=Error(B(520),{cause:i});if(s=ii(s,n),qu===null?qu=[s]:qu.push(s),ot!==4&&(ot=2),e===null)return!0;i=ii(i,n),n=e;do{switch(n.tag){case 3:return n.flags|=65536,t=r&-r,n.lanes|=t,t=cv(n.stateNode,i,t),Iy(n,t),!1;case 1:if(e=n.type,s=n.stateNode,(n.flags&128)===0&&(typeof e.getDerivedStateFromError=="function"||s!==null&&typeof s.componentDidCatch=="function"&&(As===null||!As.has(s))))return n.flags|=65536,r&=-r,n.lanes|=r,r=FP(r),qP(r,t,n,i),Iy(n,r),!1}n=n.return}while(n!==null);return!1}var Sb=Error(B(461)),Tt=!1;function zt(t,e,n,i){e.child=t===null?iP(e,null,n,i):Wa(e,t.child,n,i)}function dS(t,e,n,i,r){n=n.render;var s=e.ref;if("ref"in i){var a={};for(var o in i)o!=="ref"&&(a[o]=i[o])}else a=i;return Ka(e),i=fb(t,e,n,a,s,r),o=mb(),t!==null&&!Tt?(pb(t,e,r),Ir(t,e,r)):(be&&o&&sb(e),e.flags|=1,zt(t,e,i,r),e.child)}function fS(t,e,n,i,r){if(t===null){var s=n.type;return typeof s=="function"&&!rb(s)&&s.defaultProps===void 0&&n.compare===null?(e.tag=15,e.type=s,HP(t,e,s,i,r)):(t=zf(n.type,null,i,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!Ib(t,r)){var a=s.memoizedProps;if(n=n.compare,n=n!==null?n:gh,n(a,i)&&t.ref===e.ref)return Ir(t,e,r)}return e.flags|=1,t=mr(s,i),t.ref=e.ref,t.return=e,e.child=t}function HP(t,e,n,i,r){if(t!==null){var s=t.memoizedProps;if(gh(s,i)&&t.ref===e.ref)if(Tt=!1,e.pendingProps=i=s,Ib(t,r))t.flags&131072&&(Tt=!0);else return e.lanes=t.lanes,Ir(t,e,r)}return uv(t,e,n,i,r)}function GP(t,e,n,i){var r=i.children,s=t!==null?t.memoizedState:null;if(t===null&&e.stateNode===null&&(e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.mode==="hidden"){if(e.flags&128){if(s=s!==null?s.baseLanes|n:n,t!==null){for(i=e.child=t.child,r=0;i!==null;)r=r|i.lanes|i.childLanes,i=i.sibling;i=r&~s}else i=0,e.child=null;return mS(t,e,s,n,i)}if(n&536870912)e.memoizedState={baseLanes:0,cachePool:null},t!==null&&Bf(e,s!==null?s.cachePool:null),s!==null?nS(e,s):iv(),aP(e);else return i=e.lanes=536870912,mS(t,e,s!==null?s.baseLanes|n:n,n,i)}else s!==null?(Bf(e,s.cachePool),nS(e,s),cs(),e.memoizedState=null):(t!==null&&Bf(e,null),iv(),cs());return zt(t,e,r,n),e.child}function vu(t,e){return t!==null&&t.tag===22||e.stateNode!==null||(e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),e.sibling}function mS(t,e,n,i,r){var s=lb();return s=s===null?null:{parent:wt._currentValue,pool:s},e.memoizedState={baseLanes:n,cachePool:s},t!==null&&Bf(e,null),iv(),aP(e),t!==null&&hc(t,e,i,!0),e.childLanes=r,null}function Hf(t,e){return e=Dm({mode:e.mode,children:e.children},t.mode),e.ref=t.ref,t.child=e,e.return=t,e}function pS(t,e,n){return Wa(e,t.child,null,n),t=Hf(e,e.pendingProps),t.flags|=2,kn(e),e.memoizedState=null,t}function r6(t,e,n){var i=e.pendingProps,r=(e.flags&128)!==0;if(e.flags&=-129,t===null){if(be){if(i.mode==="hidden")return t=Hf(e,i),e.lanes=536870912,vu(null,t);if(rv(e),(t=Be)?(t=L2(t,ri),t=t!==null&&t.data==="&"?t:null,t!==null&&(e.memoizedState={dehydrated:t,treeContext:Vs!==null?{id:Li,overflow:Ui}:null,retryLane:536870912,hydrationErrors:null},n=YC(t),n.return=e,e.child=n,qt=e,Be=null)):t=null,t===null)throw Os(e);return e.lanes=536870912,null}return Hf(e,i)}var s=t.memoizedState;if(s!==null){var a=s.dehydrated;if(rv(e),r)if(e.flags&256)e.flags&=-257,e=pS(t,e,n);else if(e.memoizedState!==null)e.child=t.child,e.flags|=128,e=null;else throw Error(B(558));else if(Tt||hc(t,e,n,!1),r=(n&t.childLanes)!==0,Tt||r){if(i=Oe,i!==null&&(a=TC(i,n),a!==0&&a!==s.retryLane))throw s.retryLane=a,mo(t,a),In(i,t,a),Sb;Mm(),e=pS(t,e,n)}else t=s.treeContext,Be=li(a.nextSibling),qt=e,be=!0,ws=null,ri=!1,t!==null&&JC(e,t),e=Hf(e,i),e.flags|=4096;return e}return t=mr(t.child,{mode:i.mode,children:i.children}),t.ref=e.ref,e.child=t,t.return=e,t}function Gf(t,e){var n=e.ref;if(n===null)t!==null&&t.ref!==null&&(e.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(B(284));(t===null||t.ref!==n)&&(e.flags|=4194816)}}function uv(t,e,n,i,r){return Ka(e),n=fb(t,e,n,i,void 0,r),i=mb(),t!==null&&!Tt?(pb(t,e,r),Ir(t,e,r)):(be&&i&&sb(e),e.flags|=1,zt(t,e,n,r),e.child)}function gS(t,e,n,i,r,s){return Ka(e),e.updateQueue=null,n=lP(e,i,n,r),oP(t),i=mb(),t!==null&&!Tt?(pb(t,e,s),Ir(t,e,s)):(be&&i&&sb(e),e.flags|=1,zt(t,e,n,s),e.child)}function yS(t,e,n,i,r){if(Ka(e),e.stateNode===null){var s=el,a=n.contextType;typeof a=="object"&&a!==null&&(s=$t(a)),s=new n(i,s),e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=lv,e.stateNode=s,s._reactInternals=e,s=e.stateNode,s.props=i,s.state=e.memoizedState,s.refs={},ub(e),a=n.contextType,s.context=typeof a=="object"&&a!==null?$t(a):el,s.state=e.memoizedState,a=n.getDerivedStateFromProps,typeof a=="function"&&(Ry(e,n,a,i),s.state=e.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(a=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),a!==s.state&&lv.enqueueReplaceState(s,s.state,null),ju(e,i,s,r),Uu(),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308),i=!0}else if(t===null){s=e.stateNode;var o=e.memoizedProps,l=Ya(n,o);s.props=l;var c=s.context,h=n.contextType;a=el,typeof h=="object"&&h!==null&&(a=$t(h));var d=n.getDerivedStateFromProps;h=typeof d=="function"||typeof s.getSnapshotBeforeUpdate=="function",o=e.pendingProps!==o,h||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(o||c!==a)&&uS(e,s,i,a),as=!1;var f=e.memoizedState;s.state=f,ju(e,i,s,r),Uu(),c=e.memoizedState,o||f!==c||as?(typeof d=="function"&&(Ry(e,n,d,i),c=e.memoizedState),(l=as||cS(e,n,l,i,f,c,a))?(h||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=c),s.props=i,s.state=c,s.context=a,i=l):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{s=e.stateNode,tv(t,e),a=e.memoizedProps,h=Ya(n,a),s.props=h,d=e.pendingProps,f=s.context,c=n.contextType,l=el,typeof c=="object"&&c!==null&&(l=$t(c)),o=n.getDerivedStateFromProps,(c=typeof o=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==d||f!==l)&&uS(e,s,i,l),as=!1,f=e.memoizedState,s.state=f,ju(e,i,s,r),Uu();var p=e.memoizedState;a!==d||f!==p||as||t!==null&&t.dependencies!==null&&Sm(t.dependencies)?(typeof o=="function"&&(Ry(e,n,o,i),p=e.memoizedState),(h=as||cS(e,n,h,i,f,p,l)||t!==null&&t.dependencies!==null&&Sm(t.dependencies))?(c||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(i,p,l),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(i,p,l)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=p),s.props=i,s.state=p,s.context=l,i=h):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),i=!1)}return s=i,Gf(t,e),i=(e.flags&128)!==0,s||i?(s=e.stateNode,n=i&&typeof n.getDerivedStateFromError!="function"?null:s.render(),e.flags|=1,t!==null&&i?(e.child=Wa(e,t.child,null,r),e.child=Wa(e,null,n,r)):zt(t,e,n,r),e.memoizedState=s.state,t=e.child):t=Ir(t,e,r),t}function _S(t,e,n,i){return $a(),e.flags|=256,zt(t,e,n,i),e.child}var Cy={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Py(t){return{baseLanes:t,cachePool:eP()}}function Ny(t,e,n){return t=t!==null?t.childLanes&~n:0,e&&(t|=Mn),t}function $P(t,e,n){var i=e.pendingProps,r=!1,s=(e.flags&128)!==0,a;if((a=s)||(a=t!==null&&t.memoizedState===null?!1:(dt.current&2)!==0),a&&(r=!0,e.flags&=-129),a=(e.flags&32)!==0,e.flags&=-33,t===null){if(be){if(r?ls(e):cs(),(t=Be)?(t=L2(t,ri),t=t!==null&&t.data!=="&"?t:null,t!==null&&(e.memoizedState={dehydrated:t,treeContext:Vs!==null?{id:Li,overflow:Ui}:null,retryLane:536870912,hydrationErrors:null},n=YC(t),n.return=e,e.child=n,qt=e,Be=null)):t=null,t===null)throw Os(e);return Av(t)?e.lanes=32:e.lanes=536870912,null}var o=i.children;return i=i.fallback,r?(cs(),r=e.mode,o=Dm({mode:"hidden",children:o},r),i=La(i,r,n,null),o.return=e,i.return=e,o.sibling=i,e.child=o,i=e.child,i.memoizedState=Py(n),i.childLanes=Ny(t,a,n),e.memoizedState=Cy,vu(null,i)):(ls(e),hv(e,o))}var l=t.memoizedState;if(l!==null&&(o=l.dehydrated,o!==null)){if(s)e.flags&256?(ls(e),e.flags&=-257,e=Dy(t,e,n)):e.memoizedState!==null?(cs(),e.child=t.child,e.flags|=128,e=null):(cs(),o=i.fallback,r=e.mode,i=Dm({mode:"visible",children:i.children},r),o=La(o,r,n,null),o.flags|=2,i.return=e,o.return=e,i.sibling=o,e.child=i,Wa(e,t.child,null,n),i=e.child,i.memoizedState=Py(n),i.childLanes=Ny(t,a,n),e.memoizedState=Cy,e=vu(null,i));else if(ls(e),Av(o)){if(a=o.nextSibling&&o.nextSibling.dataset,a)var c=a.dgst;a=c,i=Error(B(419)),i.stack="",i.digest=a,_h({value:i,source:null,stack:null}),e=Dy(t,e,n)}else if(Tt||hc(t,e,n,!1),a=(n&t.childLanes)!==0,Tt||a){if(a=Oe,a!==null&&(i=TC(a,n),i!==0&&i!==l.retryLane))throw l.retryLane=i,mo(t,i),In(a,t,i),Sb;Ev(o)||Mm(),e=Dy(t,e,n)}else Ev(o)?(e.flags|=192,e.child=t.child,e=null):(t=l.treeContext,Be=li(o.nextSibling),qt=e,be=!0,ws=null,ri=!1,t!==null&&JC(e,t),e=hv(e,i.children),e.flags|=4096);return e}return r?(cs(),o=i.fallback,r=e.mode,l=t.child,c=l.sibling,i=mr(l,{mode:"hidden",children:i.children}),i.subtreeFlags=l.subtreeFlags&65011712,c!==null?o=mr(c,o):(o=La(o,r,n,null),o.flags|=2),o.return=e,i.return=e,i.sibling=o,e.child=i,vu(null,i),i=e.child,o=t.child.memoizedState,o===null?o=Py(n):(r=o.cachePool,r!==null?(l=wt._currentValue,r=r.parent!==l?{parent:l,pool:l}:r):r=eP(),o={baseLanes:o.baseLanes|n,cachePool:r}),i.memoizedState=o,i.childLanes=Ny(t,a,n),e.memoizedState=Cy,vu(t.child,i)):(ls(e),n=t.child,t=n.sibling,n=mr(n,{mode:"visible",children:i.children}),n.return=e,n.sibling=null,t!==null&&(a=e.deletions,a===null?(e.deletions=[t],e.flags|=16):a.push(t)),e.child=n,e.memoizedState=null,n)}function hv(t,e){return e=Dm({mode:"visible",children:e},t.mode),e.return=t,t.child=e}function Dm(t,e){return t=On(22,t,null,e),t.lanes=0,t}function Dy(t,e,n){return Wa(e,t.child,null,n),t=hv(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function vS(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),J_(t.return,e,n)}function ky(t,e,n,i,r,s){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r,treeForkCount:s}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=i,a.tail=n,a.tailMode=r,a.treeForkCount=s)}function KP(t,e,n){var i=e.pendingProps,r=i.revealOrder,s=i.tail;i=i.children;var a=dt.current,o=(a&2)!==0;if(o?(a=a&1|2,e.flags|=128):a&=1,Me(dt,a),zt(t,e,i,n),i=be?yh:0,!o&&t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&vS(t,n,e);else if(t.tag===19)vS(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&Rm(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),ky(e,!1,r,n,s,i);break;case"backwards":case"unstable_legacy-backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&Rm(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}ky(e,!0,n,null,s,i);break;case"together":ky(e,!1,null,null,void 0,i);break;default:e.memoizedState=null}return e.child}function Ir(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ls|=e.lanes,!(n&e.childLanes))if(t!==null){if(hc(t,e,n,!1),(n&e.childLanes)===0)return null}else return null;if(t!==null&&e.child!==t.child)throw Error(B(153));if(e.child!==null){for(t=e.child,n=mr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=mr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Ib(t,e){return t.lanes&e?!0:(t=t.dependencies,!!(t!==null&&Sm(t)))}function s6(t,e,n){switch(e.tag){case 3:_m(e,e.stateNode.containerInfo),os(e,wt,t.memoizedState.cache),$a();break;case 27:case 5:j_(e);break;case 4:_m(e,e.stateNode.containerInfo);break;case 10:os(e,e.type,e.memoizedProps.value);break;case 31:if(e.memoizedState!==null)return e.flags|=128,rv(e),null;break;case 13:var i=e.memoizedState;if(i!==null)return i.dehydrated!==null?(ls(e),e.flags|=128,null):n&e.child.childLanes?$P(t,e,n):(ls(e),t=Ir(t,e,n),t!==null?t.sibling:null);ls(e);break;case 19:var r=(t.flags&128)!==0;if(i=(n&e.childLanes)!==0,i||(hc(t,e,n,!1),i=(n&e.childLanes)!==0),r){if(i)return KP(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),Me(dt,dt.current),i)break;return null;case 22:return e.lanes=0,GP(t,e,n,e.pendingProps);case 24:os(e,wt,t.memoizedState.cache)}return Ir(t,e,n)}function WP(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps)Tt=!0;else{if(!Ib(t,n)&&!(e.flags&128))return Tt=!1,s6(t,e,n);Tt=!!(t.flags&131072)}else Tt=!1,be&&e.flags&1048576&&XC(e,yh,e.index);switch(e.lanes=0,e.tag){case 16:e:{var i=e.pendingProps;if(t=va(e.elementType),e.type=t,typeof t=="function")rb(t)?(i=Ya(t,i),e.tag=1,e=yS(null,e,t,i,n)):(e.tag=0,e=uv(null,e,t,i,n));else{if(t!=null){var r=t.$$typeof;if(r===H0){e.tag=11,e=dS(null,e,t,i,n);break e}else if(r===G0){e.tag=14,e=fS(null,e,t,i,n);break e}}throw e=L_(t)||t,Error(B(306,e,""))}}return e;case 0:return uv(t,e,e.type,e.pendingProps,n);case 1:return i=e.type,r=Ya(i,e.pendingProps),yS(t,e,i,r,n);case 3:e:{if(_m(e,e.stateNode.containerInfo),t===null)throw Error(B(387));i=e.pendingProps;var s=e.memoizedState;r=s.element,tv(t,e),ju(e,i,null,n);var a=e.memoizedState;if(i=a.cache,os(e,wt,i),i!==s.cache&&Z_(e,[wt],n,!0),Uu(),i=a.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:a.cache},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){e=_S(t,e,i,n);break e}else if(i!==r){r=ii(Error(B(424)),e),_h(r),e=_S(t,e,i,n);break e}else{switch(t=e.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(Be=li(t.firstChild),qt=e,be=!0,ws=null,ri=!0,n=iP(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if($a(),i===r){e=Ir(t,e,n);break e}zt(t,e,i,n)}e=e.child}return e;case 26:return Gf(t,e),t===null?(n=jS(e.type,null,e.pendingProps,null))?e.memoizedState=n:be||(n=e.type,t=e.pendingProps,i=zm(bs.current).createElement(n),i[Ft]=e,i[xn]=t,Kt(i,n,t),Mt(i),e.stateNode=i):e.memoizedState=jS(e.type,t.memoizedProps,e.pendingProps,t.memoizedState),null;case 27:return j_(e),t===null&&be&&(i=e.stateNode=U2(e.type,e.pendingProps,bs.current),qt=e,ri=!0,r=Be,Js(e.type)?(Sv=r,Be=li(i.firstChild)):Be=r),zt(t,e,e.pendingProps.children,n),Gf(t,e),t===null&&(e.flags|=4194304),e.child;case 5:return t===null&&be&&((r=i=Be)&&(i=O6(i,e.type,e.pendingProps,ri),i!==null?(e.stateNode=i,qt=e,Be=li(i.firstChild),ri=!1,r=!0):r=!1),r||Os(e)),j_(e),r=e.type,s=e.pendingProps,a=t!==null?t.memoizedProps:null,i=s.children,wv(r,s)?i=null:a!==null&&wv(r,a)&&(e.flags|=32),e.memoizedState!==null&&(r=fb(t,e,Y5,null,null,n),Ah._currentValue=r),Gf(t,e),zt(t,e,i,n),e.child;case 6:return t===null&&be&&((t=n=Be)&&(n=M6(n,e.pendingProps,ri),n!==null?(e.stateNode=n,qt=e,Be=null,t=!0):t=!1),t||Os(e)),null;case 13:return $P(t,e,n);case 4:return _m(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=Wa(e,null,i,n):zt(t,e,i,n),e.child;case 11:return dS(t,e,e.type,e.pendingProps,n);case 7:return zt(t,e,e.pendingProps,n),e.child;case 8:return zt(t,e,e.pendingProps.children,n),e.child;case 12:return zt(t,e,e.pendingProps.children,n),e.child;case 10:return i=e.pendingProps,os(e,e.type,i.value),zt(t,e,i.children,n),e.child;case 9:return r=e.type._context,i=e.pendingProps.children,Ka(e),r=$t(r),i=i(r),e.flags|=1,zt(t,e,i,n),e.child;case 14:return fS(t,e,e.type,e.pendingProps,n);case 15:return HP(t,e,e.type,e.pendingProps,n);case 19:return KP(t,e,n);case 31:return r6(t,e,n);case 22:return GP(t,e,n,e.pendingProps);case 24:return Ka(e),i=$t(wt),t===null?(r=lb(),r===null&&(r=Oe,s=ob(),r.pooledCache=s,s.refCount++,s!==null&&(r.pooledCacheLanes|=n),r=s),e.memoizedState={parent:i,cache:r},ub(e),os(e,wt,r)):(t.lanes&n&&(tv(t,e),ju(e,null,null,n),Uu()),r=t.memoizedState,s=e.memoizedState,r.parent!==i?(r={parent:i,cache:i},e.memoizedState=r,e.lanes===0&&(e.memoizedState=e.updateQueue.baseState=r),os(e,wt,i)):(i=s.cache,os(e,wt,i),i!==r.cache&&Z_(e,[wt],n,!0))),zt(t,e,e.pendingProps.children,n),e.child;case 29:throw e.pendingProps}throw Error(B(156,e.tag))}function nr(t){t.flags|=4}function Vy(t,e,n,i,r){if((e=(t.mode&32)!==0)&&(e=!1),e){if(t.flags|=16777216,(r&335544128)===r)if(t.stateNode.complete)t.flags|=8192;else if(_2())t.flags|=8192;else throw ja=Im,cb}else t.flags&=-16777217}function bS(t,e){if(e.type!=="stylesheet"||e.state.loading&4)t.flags&=-16777217;else if(t.flags|=16777216,!B2(e))if(_2())t.flags|=8192;else throw ja=Im,cb}function df(t,e){e!==null&&(t.flags|=4),t.flags&16384&&(e=t.tag!==22?vC():536870912,t.lanes|=e,Nl|=e)}function tu(t,e){if(!be)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function ze(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&65011712,i|=r.flags&65011712,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function a6(t,e,n){var i=e.pendingProps;switch(ab(e),e.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ze(e),null;case 1:return ze(e),null;case 3:return n=e.stateNode,i=null,t!==null&&(i=t.memoizedState.cache),e.memoizedState.cache!==i&&(e.flags|=2048),pr(wt),Sl(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(Ro(e)?nr(e):t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Sy())),ze(e),null;case 26:var r=e.type,s=e.memoizedState;return t===null?(nr(e),s!==null?(ze(e),bS(e,s)):(ze(e),Vy(e,r,null,i,n))):s?s!==t.memoizedState?(nr(e),ze(e),bS(e,s)):(ze(e),e.flags&=-16777217):(t=t.memoizedProps,t!==i&&nr(e),ze(e),Vy(e,r,t,i,n)),null;case 27:if(vm(e),n=bs.current,r=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==i&&nr(e);else{if(!i){if(e.stateNode===null)throw Error(B(166));return ze(e),null}t=qi.current,Ro(e)?QA(e):(t=U2(r,i,n),e.stateNode=t,nr(e))}return ze(e),null;case 5:if(vm(e),r=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==i&&nr(e);else{if(!i){if(e.stateNode===null)throw Error(B(166));return ze(e),null}if(s=qi.current,Ro(e))QA(e);else{var a=zm(bs.current);switch(s){case 1:s=a.createElementNS("http://www.w3.org/2000/svg",r);break;case 2:s=a.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;default:switch(r){case"svg":s=a.createElementNS("http://www.w3.org/2000/svg",r);break;case"math":s=a.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;case"script":s=a.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s=typeof i.is=="string"?a.createElement("select",{is:i.is}):a.createElement("select"),i.multiple?s.multiple=!0:i.size&&(s.size=i.size);break;default:s=typeof i.is=="string"?a.createElement(r,{is:i.is}):a.createElement(r)}}s[Ft]=e,s[xn]=i;e:for(a=e.child;a!==null;){if(a.tag===5||a.tag===6)s.appendChild(a.stateNode);else if(a.tag!==4&&a.tag!==27&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===e)break e;for(;a.sibling===null;){if(a.return===null||a.return===e)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}e.stateNode=s;e:switch(Kt(s,r,i),r){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}i&&nr(e)}}return ze(e),Vy(e,e.type,t===null?null:t.memoizedProps,e.pendingProps,n),null;case 6:if(t&&e.stateNode!=null)t.memoizedProps!==i&&nr(e);else{if(typeof i!="string"&&e.stateNode===null)throw Error(B(166));if(t=bs.current,Ro(e)){if(t=e.stateNode,n=e.memoizedProps,i=null,r=qt,r!==null)switch(r.tag){case 27:case 5:i=r.memoizedProps}t[Ft]=e,t=!!(t.nodeValue===n||i!==null&&i.suppressHydrationWarning===!0||V2(t.nodeValue,n)),t||Os(e,!0)}else t=zm(t).createTextNode(i),t[Ft]=e,e.stateNode=t}return ze(e),null;case 31:if(n=e.memoizedState,t===null||t.memoizedState!==null){if(i=Ro(e),n!==null){if(t===null){if(!i)throw Error(B(318));if(t=e.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(B(557));t[Ft]=e}else $a(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ze(e),t=!1}else n=Sy(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=n),t=!0;if(!t)return e.flags&256?(kn(e),e):(kn(e),null);if(e.flags&128)throw Error(B(558))}return ze(e),null;case 13:if(i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(r=Ro(e),i!==null&&i.dehydrated!==null){if(t===null){if(!r)throw Error(B(318));if(r=e.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(B(317));r[Ft]=e}else $a(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ze(e),r=!1}else r=Sy(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=r),r=!0;if(!r)return e.flags&256?(kn(e),e):(kn(e),null)}return kn(e),e.flags&128?(e.lanes=n,e):(n=i!==null,t=t!==null&&t.memoizedState!==null,n&&(i=e.child,r=null,i.alternate!==null&&i.alternate.memoizedState!==null&&i.alternate.memoizedState.cachePool!==null&&(r=i.alternate.memoizedState.cachePool.pool),s=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(s=i.memoizedState.cachePool.pool),s!==r&&(i.flags|=2048)),n!==t&&n&&(e.child.flags|=8192),df(e,e.updateQueue),ze(e),null);case 4:return Sl(),t===null&&kb(e.stateNode.containerInfo),ze(e),null;case 10:return pr(e.type),ze(e),null;case 19:if(Lt(dt),i=e.memoizedState,i===null)return ze(e),null;if(r=(e.flags&128)!==0,s=i.rendering,s===null)if(r)tu(i,!1);else{if(ot!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(s=Rm(t),s!==null){for(e.flags|=128,tu(i,!1),t=s.updateQueue,e.updateQueue=t,df(e,t),e.subtreeFlags=0,t=n,n=e.child;n!==null;)QC(n,t),n=n.sibling;return Me(dt,dt.current&1|2),be&&ar(e,i.treeForkCount),e.child}t=t.sibling}i.tail!==null&&Un()>Vm&&(e.flags|=128,r=!0,tu(i,!1),e.lanes=4194304)}else{if(!r)if(t=Rm(s),t!==null){if(e.flags|=128,r=!0,t=t.updateQueue,e.updateQueue=t,df(e,t),tu(i,!0),i.tail===null&&i.tailMode==="hidden"&&!s.alternate&&!be)return ze(e),null}else 2*Un()-i.renderingStartTime>Vm&&n!==536870912&&(e.flags|=128,r=!0,tu(i,!1),e.lanes=4194304);i.isBackwards?(s.sibling=e.child,e.child=s):(t=i.last,t!==null?t.sibling=s:e.child=s,i.last=s)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Un(),t.sibling=null,n=dt.current,Me(dt,r?n&1|2:n&1),be&&ar(e,i.treeForkCount),t):(ze(e),null);case 22:case 23:return kn(e),hb(),i=e.memoizedState!==null,t!==null?t.memoizedState!==null!==i&&(e.flags|=8192):i&&(e.flags|=8192),i?n&536870912&&!(e.flags&128)&&(ze(e),e.subtreeFlags&6&&(e.flags|=8192)):ze(e),n=e.updateQueue,n!==null&&df(e,n.retryQueue),n=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),i=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),i!==n&&(e.flags|=2048),t!==null&&Lt(Ua),null;case 24:return n=null,t!==null&&(n=t.memoizedState.cache),e.memoizedState.cache!==n&&(e.flags|=2048),pr(wt),ze(e),null;case 25:return null;case 30:return null}throw Error(B(156,e.tag))}function o6(t,e){switch(ab(e),e.tag){case 1:return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return pr(wt),Sl(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 26:case 27:case 5:return vm(e),null;case 31:if(e.memoizedState!==null){if(kn(e),e.alternate===null)throw Error(B(340));$a()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 13:if(kn(e),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(B(340));$a()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Lt(dt),null;case 4:return Sl(),null;case 10:return pr(e.type),null;case 22:case 23:return kn(e),hb(),t!==null&&Lt(Ua),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 24:return pr(wt),null;case 25:return null;default:return null}}function QP(t,e){switch(ab(e),e.tag){case 3:pr(wt),Sl();break;case 26:case 27:case 5:vm(e);break;case 4:Sl();break;case 31:e.memoizedState!==null&&kn(e);break;case 13:kn(e);break;case 19:Lt(dt);break;case 10:pr(e.type);break;case 22:case 23:kn(e),hb(),t!==null&&Lt(Ua);break;case 24:pr(wt)}}function ud(t,e){try{var n=e.updateQueue,i=n!==null?n.lastEffect:null;if(i!==null){var r=i.next;n=r;do{if((n.tag&t)===t){i=void 0;var s=n.create,a=n.inst;i=s(),a.destroy=i}n=n.next}while(n!==r)}}catch(o){Re(e,e.return,o)}}function Ms(t,e,n){try{var i=e.updateQueue,r=i!==null?i.lastEffect:null;if(r!==null){var s=r.next;i=s;do{if((i.tag&t)===t){var a=i.inst,o=a.destroy;if(o!==void 0){a.destroy=void 0,r=e;var l=n,c=o;try{c()}catch(h){Re(r,l,h)}}}i=i.next}while(i!==s)}}catch(h){Re(e,e.return,h)}}function YP(t){var e=t.updateQueue;if(e!==null){var n=t.stateNode;try{sP(e,n)}catch(i){Re(t,t.return,i)}}}function XP(t,e,n){n.props=Ya(t.type,t.memoizedProps),n.state=t.memoizedState;try{n.componentWillUnmount()}catch(i){Re(t,e,i)}}function Bu(t,e){try{var n=t.ref;if(n!==null){switch(t.tag){case 26:case 27:case 5:var i=t.stateNode;break;case 30:i=t.stateNode;break;default:i=t.stateNode}typeof n=="function"?t.refCleanup=n(i):n.current=i}}catch(r){Re(t,e,r)}}function ji(t,e){var n=t.ref,i=t.refCleanup;if(n!==null)if(typeof i=="function")try{i()}catch(r){Re(t,e,r)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(r){Re(t,e,r)}else n.current=null}function JP(t){var e=t.type,n=t.memoizedProps,i=t.stateNode;try{e:switch(e){case"button":case"input":case"select":case"textarea":n.autoFocus&&i.focus();break e;case"img":n.src?i.src=n.src:n.srcSet&&(i.srcset=n.srcSet)}}catch(r){Re(t,t.return,r)}}function Oy(t,e,n){try{var i=t.stateNode;C6(i,t.type,n,e),i[xn]=e}catch(r){Re(t,t.return,r)}}function ZP(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Js(t.type)||t.tag===4}function My(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||ZP(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Js(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function dv(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(t,e):(e=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,e.appendChild(t),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=ur));else if(i!==4&&(i===27&&Js(t.type)&&(n=t.stateNode,e=null),t=t.child,t!==null))for(dv(t,e,n),t=t.sibling;t!==null;)dv(t,e,n),t=t.sibling}function km(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(i===27&&Js(t.type)&&(n=t.stateNode),t=t.child,t!==null))for(km(t,e,n),t=t.sibling;t!==null;)km(t,e,n),t=t.sibling}function e2(t){var e=t.stateNode,n=t.memoizedProps;try{for(var i=t.type,r=e.attributes;r.length;)e.removeAttributeNode(r[0]);Kt(e,i,n),e[Ft]=t,e[xn]=n}catch(s){Re(t,t.return,s)}}var or=!1,bt=!1,Ly=!1,wS=typeof WeakSet=="function"?WeakSet:Set,Vt=null;function l6(t,e){if(t=t.containerInfo,vv=Hm,t=BC(t),tb(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var a=0,o=-1,l=-1,c=0,h=0,d=t,f=null;t:for(;;){for(var p;d!==n||r!==0&&d.nodeType!==3||(o=a+r),d!==s||i!==0&&d.nodeType!==3||(l=a+i),d.nodeType===3&&(a+=d.nodeValue.length),(p=d.firstChild)!==null;)f=d,d=p;for(;;){if(d===t)break t;if(f===n&&++c===r&&(o=a),f===s&&++h===i&&(l=a),(p=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=p}n=o===-1||l===-1?null:{start:o,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(bv={focusedElem:t,selectionRange:n},Hm=!1,Vt=e;Vt!==null;)if(e=Vt,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Vt=t;else for(;Vt!==null;){switch(e=Vt,s=e.alternate,t=e.flags,e.tag){case 0:if(t&4&&(t=e.updateQueue,t=t!==null?t.events:null,t!==null))for(n=0;n<t.length;n++)r=t[n],r.ref.impl=r.nextImpl;break;case 11:case 15:break;case 1:if(t&1024&&s!==null){t=void 0,n=e,r=s.memoizedProps,s=s.memoizedState,i=n.stateNode;try{var w=Ya(n.type,r);t=i.getSnapshotBeforeUpdate(w,s),i.__reactInternalSnapshotBeforeUpdate=t}catch(E){Re(n,n.return,E)}}break;case 3:if(t&1024){if(t=e.stateNode.containerInfo,n=t.nodeType,n===9)Tv(t);else if(n===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Tv(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(t&1024)throw Error(B(163))}if(t=e.sibling,t!==null){t.return=e.return,Vt=t;break}Vt=e.return}}function t2(t,e,n){var i=n.flags;switch(n.tag){case 0:case 11:case 15:rr(t,n),i&4&&ud(5,n);break;case 1:if(rr(t,n),i&4)if(t=n.stateNode,e===null)try{t.componentDidMount()}catch(a){Re(n,n.return,a)}else{var r=Ya(n.type,e.memoizedProps);e=e.memoizedState;try{t.componentDidUpdate(r,e,t.__reactInternalSnapshotBeforeUpdate)}catch(a){Re(n,n.return,a)}}i&64&&YP(n),i&512&&Bu(n,n.return);break;case 3:if(rr(t,n),i&64&&(t=n.updateQueue,t!==null)){if(e=null,n.child!==null)switch(n.child.tag){case 27:case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}try{sP(t,e)}catch(a){Re(n,n.return,a)}}break;case 27:e===null&&i&4&&e2(n);case 26:case 5:rr(t,n),e===null&&i&4&&JP(n),i&512&&Bu(n,n.return);break;case 12:rr(t,n);break;case 31:rr(t,n),i&4&&r2(t,n);break;case 13:rr(t,n),i&4&&s2(t,n),i&64&&(t=n.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(n=y6.bind(null,n),L6(t,n))));break;case 22:if(i=n.memoizedState!==null||or,!i){e=e!==null&&e.memoizedState!==null||bt,r=or;var s=bt;or=i,(bt=e)&&!s?sr(t,n,(n.subtreeFlags&8772)!==0):rr(t,n),or=r,bt=s}break;case 30:break;default:rr(t,n)}}function n2(t){var e=t.alternate;e!==null&&(t.alternate=null,n2(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&Q0(e)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var We=null,bn=!1;function ir(t,e,n){for(n=n.child;n!==null;)i2(t,e,n),n=n.sibling}function i2(t,e,n){if(jn&&typeof jn.onCommitFiberUnmount=="function")try{jn.onCommitFiberUnmount(id,n)}catch{}switch(n.tag){case 26:bt||ji(n,e),ir(t,e,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:bt||ji(n,e);var i=We,r=bn;Js(n.type)&&(We=n.stateNode,bn=!1),ir(t,e,n),Gu(n.stateNode),We=i,bn=r;break;case 5:bt||ji(n,e);case 6:if(i=We,r=bn,We=null,ir(t,e,n),We=i,bn=r,We!==null)if(bn)try{(We.nodeType===9?We.body:We.nodeName==="HTML"?We.ownerDocument.body:We).removeChild(n.stateNode)}catch(s){Re(n,e,s)}else try{We.removeChild(n.stateNode)}catch(s){Re(n,e,s)}break;case 18:We!==null&&(bn?(t=We,VS(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,n.stateNode),Ol(t)):VS(We,n.stateNode));break;case 4:i=We,r=bn,We=n.stateNode.containerInfo,bn=!0,ir(t,e,n),We=i,bn=r;break;case 0:case 11:case 14:case 15:Ms(2,n,e),bt||Ms(4,n,e),ir(t,e,n);break;case 1:bt||(ji(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"&&XP(n,e,i)),ir(t,e,n);break;case 21:ir(t,e,n);break;case 22:bt=(i=bt)||n.memoizedState!==null,ir(t,e,n),bt=i;break;default:ir(t,e,n)}}function r2(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{Ol(t)}catch(n){Re(e,e.return,n)}}}function s2(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Ol(t)}catch(n){Re(e,e.return,n)}}function c6(t){switch(t.tag){case 31:case 13:case 19:var e=t.stateNode;return e===null&&(e=t.stateNode=new wS),e;case 22:return t=t.stateNode,e=t._retryCache,e===null&&(e=t._retryCache=new wS),e;default:throw Error(B(435,t.tag))}}function ff(t,e){var n=c6(t);e.forEach(function(i){if(!n.has(i)){n.add(i);var r=_6.bind(null,t,i);i.then(r,r)}})}function _n(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i],s=t,a=e,o=a;e:for(;o!==null;){switch(o.tag){case 27:if(Js(o.type)){We=o.stateNode,bn=!1;break e}break;case 5:We=o.stateNode,bn=!1;break e;case 3:case 4:We=o.stateNode.containerInfo,bn=!0;break e}o=o.return}if(We===null)throw Error(B(160));i2(s,a,r),We=null,bn=!1,s=r.alternate,s!==null&&(s.return=null),r.return=null}if(e.subtreeFlags&13886)for(e=e.child;e!==null;)a2(e,t),e=e.sibling}var _i=null;function a2(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:_n(e,t),vn(t),i&4&&(Ms(3,t,t.return),ud(3,t),Ms(5,t,t.return));break;case 1:_n(e,t),vn(t),i&512&&(bt||n===null||ji(n,n.return)),i&64&&or&&(t=t.updateQueue,t!==null&&(i=t.callbacks,i!==null&&(n=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=n===null?i:n.concat(i))));break;case 26:var r=_i;if(_n(e,t),vn(t),i&512&&(bt||n===null||ji(n,n.return)),i&4){var s=n!==null?n.memoizedState:null;if(i=t.memoizedState,n===null)if(i===null)if(t.stateNode===null){e:{i=t.type,n=t.memoizedProps,r=r.ownerDocument||r;t:switch(i){case"title":s=r.getElementsByTagName("title")[0],(!s||s[ad]||s[Ft]||s.namespaceURI==="http://www.w3.org/2000/svg"||s.hasAttribute("itemprop"))&&(s=r.createElement(i),r.head.insertBefore(s,r.querySelector("head > title"))),Kt(s,i,n),s[Ft]=t,Mt(s),i=s;break e;case"link":var a=BS("link","href",r).get(i+(n.href||""));if(a){for(var o=0;o<a.length;o++)if(s=a[o],s.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&s.getAttribute("rel")===(n.rel==null?null:n.rel)&&s.getAttribute("title")===(n.title==null?null:n.title)&&s.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){a.splice(o,1);break t}}s=r.createElement(i),Kt(s,i,n),r.head.appendChild(s);break;case"meta":if(a=BS("meta","content",r).get(i+(n.content||""))){for(o=0;o<a.length;o++)if(s=a[o],s.getAttribute("content")===(n.content==null?null:""+n.content)&&s.getAttribute("name")===(n.name==null?null:n.name)&&s.getAttribute("property")===(n.property==null?null:n.property)&&s.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&s.getAttribute("charset")===(n.charSet==null?null:n.charSet)){a.splice(o,1);break t}}s=r.createElement(i),Kt(s,i,n),r.head.appendChild(s);break;default:throw Error(B(468,i))}s[Ft]=t,Mt(s),i=s}t.stateNode=i}else FS(r,t.type,t.stateNode);else t.stateNode=zS(r,i,t.memoizedProps);else s!==i?(s===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):s.count--,i===null?FS(r,t.type,t.stateNode):zS(r,i,t.memoizedProps)):i===null&&t.stateNode!==null&&Oy(t,t.memoizedProps,n.memoizedProps)}break;case 27:_n(e,t),vn(t),i&512&&(bt||n===null||ji(n,n.return)),n!==null&&i&4&&Oy(t,t.memoizedProps,n.memoizedProps);break;case 5:if(_n(e,t),vn(t),i&512&&(bt||n===null||ji(n,n.return)),t.flags&32){r=t.stateNode;try{xl(r,"")}catch(w){Re(t,t.return,w)}}i&4&&t.stateNode!=null&&(r=t.memoizedProps,Oy(t,r,n!==null?n.memoizedProps:r)),i&1024&&(Ly=!0);break;case 6:if(_n(e,t),vn(t),i&4){if(t.stateNode===null)throw Error(B(162));i=t.memoizedProps,n=t.stateNode;try{n.nodeValue=i}catch(w){Re(t,t.return,w)}}break;case 3:if(Wf=null,r=_i,_i=Bm(e.containerInfo),_n(e,t),_i=r,vn(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{Ol(e.containerInfo)}catch(w){Re(t,t.return,w)}Ly&&(Ly=!1,o2(t));break;case 4:i=_i,_i=Bm(t.stateNode.containerInfo),_n(e,t),vn(t),_i=i;break;case 12:_n(e,t),vn(t);break;case 31:_n(e,t),vn(t),i&4&&(i=t.updateQueue,i!==null&&(t.updateQueue=null,ff(t,i)));break;case 13:_n(e,t),vn(t),t.child.flags&8192&&t.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(Bp=Un()),i&4&&(i=t.updateQueue,i!==null&&(t.updateQueue=null,ff(t,i)));break;case 22:r=t.memoizedState!==null;var l=n!==null&&n.memoizedState!==null,c=or,h=bt;if(or=c||r,bt=h||l,_n(e,t),bt=h,or=c,vn(t),i&8192)e:for(e=t.stateNode,e._visibility=r?e._visibility&-2:e._visibility|1,r&&(n===null||l||or||bt||ba(t)),n=null,e=t;;){if(e.tag===5||e.tag===26){if(n===null){l=n=e;try{if(s=l.stateNode,r)a=s.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none";else{o=l.stateNode;var d=l.memoizedProps.style,f=d!=null&&d.hasOwnProperty("display")?d.display:null;o.style.display=f==null||typeof f=="boolean"?"":(""+f).trim()}}catch(w){Re(l,l.return,w)}}}else if(e.tag===6){if(n===null){l=e;try{l.stateNode.nodeValue=r?"":l.memoizedProps}catch(w){Re(l,l.return,w)}}}else if(e.tag===18){if(n===null){l=e;try{var p=l.stateNode;r?OS(p,!0):OS(l.stateNode,!1)}catch(w){Re(l,l.return,w)}}}else if((e.tag!==22&&e.tag!==23||e.memoizedState===null||e===t)&&e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;n===e&&(n=null),e=e.return}n===e&&(n=null),e.sibling.return=e.return,e=e.sibling}i&4&&(i=t.updateQueue,i!==null&&(n=i.retryQueue,n!==null&&(i.retryQueue=null,ff(t,n))));break;case 19:_n(e,t),vn(t),i&4&&(i=t.updateQueue,i!==null&&(t.updateQueue=null,ff(t,i)));break;case 30:break;case 21:break;default:_n(e,t),vn(t)}}function vn(t){var e=t.flags;if(e&2){try{for(var n,i=t.return;i!==null;){if(ZP(i)){n=i;break}i=i.return}if(n==null)throw Error(B(160));switch(n.tag){case 27:var r=n.stateNode,s=My(t);km(t,s,r);break;case 5:var a=n.stateNode;n.flags&32&&(xl(a,""),n.flags&=-33);var o=My(t);km(t,o,a);break;case 3:case 4:var l=n.stateNode.containerInfo,c=My(t);dv(t,c,l);break;default:throw Error(B(161))}}catch(h){Re(t,t.return,h)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function o2(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var e=t;o2(e),e.tag===5&&e.flags&1024&&e.stateNode.reset(),t=t.sibling}}function rr(t,e){if(e.subtreeFlags&8772)for(e=e.child;e!==null;)t2(t,e.alternate,e),e=e.sibling}function ba(t){for(t=t.child;t!==null;){var e=t;switch(e.tag){case 0:case 11:case 14:case 15:Ms(4,e,e.return),ba(e);break;case 1:ji(e,e.return);var n=e.stateNode;typeof n.componentWillUnmount=="function"&&XP(e,e.return,n),ba(e);break;case 27:Gu(e.stateNode);case 26:case 5:ji(e,e.return),ba(e);break;case 22:e.memoizedState===null&&ba(e);break;case 30:ba(e);break;default:ba(e)}t=t.sibling}}function sr(t,e,n){for(n=n&&(e.subtreeFlags&8772)!==0,e=e.child;e!==null;){var i=e.alternate,r=t,s=e,a=s.flags;switch(s.tag){case 0:case 11:case 15:sr(r,s,n),ud(4,s);break;case 1:if(sr(r,s,n),i=s,r=i.stateNode,typeof r.componentDidMount=="function")try{r.componentDidMount()}catch(c){Re(i,i.return,c)}if(i=s,r=i.updateQueue,r!==null){var o=i.stateNode;try{var l=r.shared.hiddenCallbacks;if(l!==null)for(r.shared.hiddenCallbacks=null,r=0;r<l.length;r++)rP(l[r],o)}catch(c){Re(i,i.return,c)}}n&&a&64&&YP(s),Bu(s,s.return);break;case 27:e2(s);case 26:case 5:sr(r,s,n),n&&i===null&&a&4&&JP(s),Bu(s,s.return);break;case 12:sr(r,s,n);break;case 31:sr(r,s,n),n&&a&4&&r2(r,s);break;case 13:sr(r,s,n),n&&a&4&&s2(r,s);break;case 22:s.memoizedState===null&&sr(r,s,n),Bu(s,s.return);break;case 30:break;default:sr(r,s,n)}e=e.sibling}}function xb(t,e){var n=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),t=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(t=e.memoizedState.cachePool.pool),t!==n&&(t!=null&&t.refCount++,n!=null&&ld(n))}function Rb(t,e){t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&ld(t))}function pi(t,e,n,i){if(e.subtreeFlags&10256)for(e=e.child;e!==null;)l2(t,e,n,i),e=e.sibling}function l2(t,e,n,i){var r=e.flags;switch(e.tag){case 0:case 11:case 15:pi(t,e,n,i),r&2048&&ud(9,e);break;case 1:pi(t,e,n,i);break;case 3:pi(t,e,n,i),r&2048&&(t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&ld(t)));break;case 12:if(r&2048){pi(t,e,n,i),t=e.stateNode;try{var s=e.memoizedProps,a=s.id,o=s.onPostCommit;typeof o=="function"&&o(a,e.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(l){Re(e,e.return,l)}}else pi(t,e,n,i);break;case 31:pi(t,e,n,i);break;case 13:pi(t,e,n,i);break;case 23:break;case 22:s=e.stateNode,a=e.alternate,e.memoizedState!==null?s._visibility&2?pi(t,e,n,i):Fu(t,e):s._visibility&2?pi(t,e,n,i):(s._visibility|=2,jo(t,e,n,i,(e.subtreeFlags&10256)!==0||!1)),r&2048&&xb(a,e);break;case 24:pi(t,e,n,i),r&2048&&Rb(e.alternate,e);break;default:pi(t,e,n,i)}}function jo(t,e,n,i,r){for(r=r&&((e.subtreeFlags&10256)!==0||!1),e=e.child;e!==null;){var s=t,a=e,o=n,l=i,c=a.flags;switch(a.tag){case 0:case 11:case 15:jo(s,a,o,l,r),ud(8,a);break;case 23:break;case 22:var h=a.stateNode;a.memoizedState!==null?h._visibility&2?jo(s,a,o,l,r):Fu(s,a):(h._visibility|=2,jo(s,a,o,l,r)),r&&c&2048&&xb(a.alternate,a);break;case 24:jo(s,a,o,l,r),r&&c&2048&&Rb(a.alternate,a);break;default:jo(s,a,o,l,r)}e=e.sibling}}function Fu(t,e){if(e.subtreeFlags&10256)for(e=e.child;e!==null;){var n=t,i=e,r=i.flags;switch(i.tag){case 22:Fu(n,i),r&2048&&xb(i.alternate,i);break;case 24:Fu(n,i),r&2048&&Rb(i.alternate,i);break;default:Fu(n,i)}e=e.sibling}}var bu=8192;function Co(t,e,n){if(t.subtreeFlags&bu)for(t=t.child;t!==null;)c2(t,e,n),t=t.sibling}function c2(t,e,n){switch(t.tag){case 26:Co(t,e,n),t.flags&bu&&t.memoizedState!==null&&Q6(n,_i,t.memoizedState,t.memoizedProps);break;case 5:Co(t,e,n);break;case 3:case 4:var i=_i;_i=Bm(t.stateNode.containerInfo),Co(t,e,n),_i=i;break;case 22:t.memoizedState===null&&(i=t.alternate,i!==null&&i.memoizedState!==null?(i=bu,bu=16777216,Co(t,e,n),bu=i):Co(t,e,n));break;default:Co(t,e,n)}}function u2(t){var e=t.alternate;if(e!==null&&(t=e.child,t!==null)){e.child=null;do e=t.sibling,t.sibling=null,t=e;while(t!==null)}}function nu(t){var e=t.deletions;if(t.flags&16){if(e!==null)for(var n=0;n<e.length;n++){var i=e[n];Vt=i,d2(i,t)}u2(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)h2(t),t=t.sibling}function h2(t){switch(t.tag){case 0:case 11:case 15:nu(t),t.flags&2048&&Ms(9,t,t.return);break;case 3:nu(t);break;case 12:nu(t);break;case 22:var e=t.stateNode;t.memoizedState!==null&&e._visibility&2&&(t.return===null||t.return.tag!==13)?(e._visibility&=-3,$f(t)):nu(t);break;default:nu(t)}}function $f(t){var e=t.deletions;if(t.flags&16){if(e!==null)for(var n=0;n<e.length;n++){var i=e[n];Vt=i,d2(i,t)}u2(t)}for(t=t.child;t!==null;){switch(e=t,e.tag){case 0:case 11:case 15:Ms(8,e,e.return),$f(e);break;case 22:n=e.stateNode,n._visibility&2&&(n._visibility&=-3,$f(e));break;default:$f(e)}t=t.sibling}}function d2(t,e){for(;Vt!==null;){var n=Vt;switch(n.tag){case 0:case 11:case 15:Ms(8,n,e);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var i=n.memoizedState.cachePool.pool;i!=null&&i.refCount++}break;case 24:ld(n.memoizedState.cache)}if(i=n.child,i!==null)i.return=n,Vt=i;else e:for(n=t;Vt!==null;){i=Vt;var r=i.sibling,s=i.return;if(n2(i),i===n){Vt=null;break e}if(r!==null){r.return=s,Vt=r;break e}Vt=s}}}var u6={getCacheForType:function(t){var e=$t(wt),n=e.data.get(t);return n===void 0&&(n=t(),e.data.set(t,n)),n},cacheSignal:function(){return $t(wt).controller.signal}},h6=typeof WeakMap=="function"?WeakMap:Map,Ee=0,Oe=null,pe=null,ye=0,xe=0,Nn=null,ms=!1,fc=!1,Cb=!1,xr=0,ot=0,Ls=0,za=0,Pb=0,Mn=0,Nl=0,qu=null,wn=null,fv=!1,Bp=0,f2=0,Vm=1/0,Om=null,As=null,xt=0,Ss=null,Dl=null,gr=0,mv=0,pv=null,m2=null,Hu=0,gv=null;function Bn(){return Ee&2&&ye!==0?ye&-ye:se.T!==null?Db():EC()}function p2(){if(Mn===0)if(!(ye&536870912)||be){var t=sf;sf<<=1,!(sf&3932160)&&(sf=262144),Mn=t}else Mn=536870912;return t=$n.current,t!==null&&(t.flags|=32),Mn}function In(t,e,n){(t===Oe&&(xe===2||xe===9)||t.cancelPendingCommit!==null)&&(kl(t,0),ps(t,ye,Mn,!1)),sd(t,n),(!(Ee&2)||t!==Oe)&&(t===Oe&&(!(Ee&2)&&(za|=n),ot===4&&ps(t,ye,Mn,!1)),er(t))}function g2(t,e,n){if(Ee&6)throw Error(B(327));var i=!n&&(e&127)===0&&(e&t.expiredLanes)===0||rd(t,e),r=i?m6(t,e):Uy(t,e,!0),s=i;do{if(r===0){fc&&!i&&ps(t,e,0,!1);break}else{if(n=t.current.alternate,s&&!d6(n)){r=Uy(t,e,!1),s=!1;continue}if(r===2){if(s=e,t.errorRecoveryDisabledLanes&s)var a=0;else a=t.pendingLanes&-536870913,a=a!==0?a:a&536870912?536870912:0;if(a!==0){e=a;e:{var o=t;r=qu;var l=o.current.memoizedState.isDehydrated;if(l&&(kl(o,a).flags|=256),a=Uy(o,a,!1),a!==2){if(Cb&&!l){o.errorRecoveryDisabledLanes|=s,za|=s,r=4;break e}s=wn,wn=r,s!==null&&(wn===null?wn=s:wn.push.apply(wn,s))}r=a}if(s=!1,r!==2)continue}}if(r===1){kl(t,0),ps(t,e,0,!0);break}e:{switch(i=t,s=r,s){case 0:case 1:throw Error(B(345));case 4:if((e&4194048)!==e)break;case 6:ps(i,e,Mn,!ms);break e;case 2:wn=null;break;case 3:case 5:break;default:throw Error(B(329))}if((e&62914560)===e&&(r=Bp+300-Un(),10<r)){if(ps(i,e,Mn,!ms),Pp(i,0,!0)!==0)break e;gr=e,i.timeoutHandle=M2(TS.bind(null,i,n,wn,Om,fv,e,Mn,za,Nl,ms,s,"Throttled",-0,0),r);break e}TS(i,n,wn,Om,fv,e,Mn,za,Nl,ms,s,null,-0,0)}}break}while(!0);er(t)}function TS(t,e,n,i,r,s,a,o,l,c,h,d,f,p){if(t.timeoutHandle=-1,d=e.subtreeFlags,d&8192||(d&16785408)===16785408){d={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ur},c2(e,s,d);var w=(s&62914560)===s?Bp-Un():(s&4194048)===s?f2-Un():0;if(w=Y6(d,w),w!==null){gr=s,t.cancelPendingCommit=w(AS.bind(null,t,e,s,n,i,r,a,o,l,h,d,null,f,p)),ps(t,s,a,!c);return}}AS(t,e,s,n,i,r,a,o,l)}function d6(t){for(var e=t;;){var n=e.tag;if((n===0||n===11||n===15)&&e.flags&16384&&(n=e.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!Gn(s(),r))return!1}catch{return!1}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ps(t,e,n,i){e&=~Pb,e&=~za,t.suspendedLanes|=e,t.pingedLanes&=~e,i&&(t.warmLanes|=e),i=t.expirationTimes;for(var r=e;0<r;){var s=31-zn(r),a=1<<s;i[s]=-1,r&=~a}n!==0&&bC(t,n,e)}function Fp(){return Ee&6?!0:(hd(0),!1)}function Nb(){if(pe!==null){if(xe===0)var t=pe.return;else t=pe,hr=po=null,gb(t),pl=null,vh=0,t=pe;for(;t!==null;)QP(t.alternate,t),t=t.return;pe=null}}function kl(t,e){var n=t.timeoutHandle;n!==-1&&(t.timeoutHandle=-1,D6(n)),n=t.cancelPendingCommit,n!==null&&(t.cancelPendingCommit=null,n()),gr=0,Nb(),Oe=t,pe=n=mr(t.current,null),ye=e,xe=0,Nn=null,ms=!1,fc=rd(t,e),Cb=!1,Nl=Mn=Pb=za=Ls=ot=0,wn=qu=null,fv=!1,e&8&&(e|=e&32);var i=t.entangledLanes;if(i!==0)for(t=t.entanglements,i&=e;0<i;){var r=31-zn(i),s=1<<r;e|=t[r],i&=~s}return xr=e,Vp(),n}function y2(t,e){le=null,se.H=wh,e===dc||e===Mp?(e=eS(),xe=3):e===cb?(e=eS(),xe=4):xe=e===Sb?8:e!==null&&typeof e=="object"&&typeof e.then=="function"?6:1,Nn=e,pe===null&&(ot=1,Nm(t,ii(e,t.current)))}function _2(){var t=$n.current;return t===null?!0:(ye&4194048)===ye?oi===null:(ye&62914560)===ye||ye&536870912?t===oi:!1}function v2(){var t=se.H;return se.H=wh,t===null?wh:t}function b2(){var t=se.A;return se.A=u6,t}function Mm(){ot=4,ms||(ye&4194048)!==ye&&$n.current!==null||(fc=!0),!(Ls&134217727)&&!(za&134217727)||Oe===null||ps(Oe,ye,Mn,!1)}function Uy(t,e,n){var i=Ee;Ee|=2;var r=v2(),s=b2();(Oe!==t||ye!==e)&&(Om=null,kl(t,e)),e=!1;var a=ot;e:do try{if(xe!==0&&pe!==null){var o=pe,l=Nn;switch(xe){case 8:Nb(),a=6;break e;case 3:case 2:case 9:case 6:$n.current===null&&(e=!0);var c=xe;if(xe=0,Nn=null,il(t,o,l,c),n&&fc){a=0;break e}break;default:c=xe,xe=0,Nn=null,il(t,o,l,c)}}f6(),a=ot;break}catch(h){y2(t,h)}while(!0);return e&&t.shellSuspendCounter++,hr=po=null,Ee=i,se.H=r,se.A=s,pe===null&&(Oe=null,ye=0,Vp()),a}function f6(){for(;pe!==null;)w2(pe)}function m6(t,e){var n=Ee;Ee|=2;var i=v2(),r=b2();Oe!==t||ye!==e?(Om=null,Vm=Un()+500,kl(t,e)):fc=rd(t,e);e:do try{if(xe!==0&&pe!==null){e=pe;var s=Nn;t:switch(xe){case 1:xe=0,Nn=null,il(t,e,s,1);break;case 2:case 9:if(ZA(s)){xe=0,Nn=null,ES(e);break}e=function(){xe!==2&&xe!==9||Oe!==t||(xe=7),er(t)},s.then(e,e);break e;case 3:xe=7;break e;case 4:xe=5;break e;case 7:ZA(s)?(xe=0,Nn=null,ES(e)):(xe=0,Nn=null,il(t,e,s,7));break;case 5:var a=null;switch(pe.tag){case 26:a=pe.memoizedState;case 5:case 27:var o=pe;if(a?B2(a):o.stateNode.complete){xe=0,Nn=null;var l=o.sibling;if(l!==null)pe=l;else{var c=o.return;c!==null?(pe=c,qp(c)):pe=null}break t}}xe=0,Nn=null,il(t,e,s,5);break;case 6:xe=0,Nn=null,il(t,e,s,6);break;case 8:Nb(),ot=6;break e;default:throw Error(B(462))}}p6();break}catch(h){y2(t,h)}while(!0);return hr=po=null,se.H=i,se.A=r,Ee=n,pe!==null?0:(Oe=null,ye=0,Vp(),ot)}function p6(){for(;pe!==null&&!U4();)w2(pe)}function w2(t){var e=WP(t.alternate,t,xr);t.memoizedProps=t.pendingProps,e===null?qp(t):pe=e}function ES(t){var e=t,n=e.alternate;switch(e.tag){case 15:case 0:e=gS(n,e,e.pendingProps,e.type,void 0,ye);break;case 11:e=gS(n,e,e.pendingProps,e.type.render,e.ref,ye);break;case 5:gb(e);default:QP(n,e),e=pe=QC(e,xr),e=WP(n,e,xr)}t.memoizedProps=t.pendingProps,e===null?qp(t):pe=e}function il(t,e,n,i){hr=po=null,gb(e),pl=null,vh=0;var r=e.return;try{if(i6(t,r,e,n,ye)){ot=1,Nm(t,ii(n,t.current)),pe=null;return}}catch(s){if(r!==null)throw pe=r,s;ot=1,Nm(t,ii(n,t.current)),pe=null;return}e.flags&32768?(be||i===1?t=!0:fc||ye&536870912?t=!1:(ms=t=!0,(i===2||i===9||i===3||i===6)&&(i=$n.current,i!==null&&i.tag===13&&(i.flags|=16384))),T2(e,t)):qp(e)}function qp(t){var e=t;do{if(e.flags&32768){T2(e,ms);return}t=e.return;var n=a6(e.alternate,e,xr);if(n!==null){pe=n;return}if(e=e.sibling,e!==null){pe=e;return}pe=e=t}while(e!==null);ot===0&&(ot=5)}function T2(t,e){do{var n=o6(t.alternate,t);if(n!==null){n.flags&=32767,pe=n;return}if(n=t.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!e&&(t=t.sibling,t!==null)){pe=t;return}pe=t=n}while(t!==null);ot=6,pe=null}function AS(t,e,n,i,r,s,a,o,l){t.cancelPendingCommit=null;do Hp();while(xt!==0);if(Ee&6)throw Error(B(327));if(e!==null){if(e===t.current)throw Error(B(177));if(s=e.lanes|e.childLanes,s|=nb,W4(t,n,s,a,o,l),t===Oe&&(pe=Oe=null,ye=0),Dl=e,Ss=t,gr=n,mv=s,pv=r,m2=i,e.subtreeFlags&10256||e.flags&10256?(t.callbackNode=null,t.callbackPriority=0,v6(bm,function(){return x2(),null})):(t.callbackNode=null,t.callbackPriority=0),i=(e.flags&13878)!==0,e.subtreeFlags&13878||i){i=se.T,se.T=null,r=Ae.p,Ae.p=2,a=Ee,Ee|=4;try{l6(t,e,n)}finally{Ee=a,Ae.p=r,se.T=i}}xt=1,E2(),A2(),S2()}}function E2(){if(xt===1){xt=0;var t=Ss,e=Dl,n=(e.flags&13878)!==0;if(e.subtreeFlags&13878||n){n=se.T,se.T=null;var i=Ae.p;Ae.p=2;var r=Ee;Ee|=4;try{a2(e,t);var s=bv,a=BC(t.containerInfo),o=s.focusedElem,l=s.selectionRange;if(a!==o&&o&&o.ownerDocument&&zC(o.ownerDocument.documentElement,o)){if(l!==null&&tb(o)){var c=l.start,h=l.end;if(h===void 0&&(h=c),"selectionStart"in o)o.selectionStart=c,o.selectionEnd=Math.min(h,o.value.length);else{var d=o.ownerDocument||document,f=d&&d.defaultView||window;if(f.getSelection){var p=f.getSelection(),w=o.textContent.length,E=Math.min(l.start,w),R=l.end===void 0?E:Math.min(l.end,w);!p.extend&&E>R&&(a=R,R=E,E=a);var b=$A(o,E),v=$A(o,R);if(b&&v&&(p.rangeCount!==1||p.anchorNode!==b.node||p.anchorOffset!==b.offset||p.focusNode!==v.node||p.focusOffset!==v.offset)){var _=d.createRange();_.setStart(b.node,b.offset),p.removeAllRanges(),E>R?(p.addRange(_),p.extend(v.node,v.offset)):(_.setEnd(v.node,v.offset),p.addRange(_))}}}}for(d=[],p=o;p=p.parentNode;)p.nodeType===1&&d.push({element:p,left:p.scrollLeft,top:p.scrollTop});for(typeof o.focus=="function"&&o.focus(),o=0;o<d.length;o++){var S=d[o];S.element.scrollLeft=S.left,S.element.scrollTop=S.top}}Hm=!!vv,bv=vv=null}finally{Ee=r,Ae.p=i,se.T=n}}t.current=e,xt=2}}function A2(){if(xt===2){xt=0;var t=Ss,e=Dl,n=(e.flags&8772)!==0;if(e.subtreeFlags&8772||n){n=se.T,se.T=null;var i=Ae.p;Ae.p=2;var r=Ee;Ee|=4;try{t2(t,e.alternate,e)}finally{Ee=r,Ae.p=i,se.T=n}}xt=3}}function S2(){if(xt===4||xt===3){xt=0,j4();var t=Ss,e=Dl,n=gr,i=m2;e.subtreeFlags&10256||e.flags&10256?xt=5:(xt=0,Dl=Ss=null,I2(t,t.pendingLanes));var r=t.pendingLanes;if(r===0&&(As=null),W0(n),e=e.stateNode,jn&&typeof jn.onCommitFiberRoot=="function")try{jn.onCommitFiberRoot(id,e,void 0,(e.current.flags&128)===128)}catch{}if(i!==null){e=se.T,r=Ae.p,Ae.p=2,se.T=null;try{for(var s=t.onRecoverableError,a=0;a<i.length;a++){var o=i[a];s(o.value,{componentStack:o.stack})}}finally{se.T=e,Ae.p=r}}gr&3&&Hp(),er(t),r=t.pendingLanes,n&261930&&r&42?t===gv?Hu++:(Hu=0,gv=t):Hu=0,hd(0)}}function I2(t,e){(t.pooledCacheLanes&=e)===0&&(e=t.pooledCache,e!=null&&(t.pooledCache=null,ld(e)))}function Hp(){return E2(),A2(),S2(),x2()}function x2(){if(xt!==5)return!1;var t=Ss,e=mv;mv=0;var n=W0(gr),i=se.T,r=Ae.p;try{Ae.p=32>n?32:n,se.T=null,n=pv,pv=null;var s=Ss,a=gr;if(xt=0,Dl=Ss=null,gr=0,Ee&6)throw Error(B(331));var o=Ee;if(Ee|=4,h2(s.current),l2(s,s.current,a,n),Ee=o,hd(0,!1),jn&&typeof jn.onPostCommitFiberRoot=="function")try{jn.onPostCommitFiberRoot(id,s)}catch{}return!0}finally{Ae.p=r,se.T=i,I2(t,e)}}function SS(t,e,n){e=ii(n,e),e=cv(t.stateNode,e,2),t=Es(t,e,2),t!==null&&(sd(t,2),er(t))}function Re(t,e,n){if(t.tag===3)SS(t,t,n);else for(;e!==null;){if(e.tag===3){SS(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(As===null||!As.has(i))){t=ii(n,t),n=FP(2),i=Es(e,n,2),i!==null&&(qP(n,i,e,t),sd(i,2),er(i));break}}e=e.return}}function jy(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new h6;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(n)||(Cb=!0,r.add(n),t=g6.bind(null,t,e,n),e.then(t,t))}function g6(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),t.pingedLanes|=t.suspendedLanes&n,t.warmLanes&=~n,Oe===t&&(ye&n)===n&&(ot===4||ot===3&&(ye&62914560)===ye&&300>Un()-Bp?!(Ee&2)&&kl(t,0):Pb|=n,Nl===ye&&(Nl=0)),er(t)}function R2(t,e){e===0&&(e=vC()),t=mo(t,e),t!==null&&(sd(t,e),er(t))}function y6(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),R2(t,n)}function _6(t,e){var n=0;switch(t.tag){case 31:case 13:var i=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=t.stateNode;break;case 22:i=t.stateNode._retryCache;break;default:throw Error(B(314))}i!==null&&i.delete(e),R2(t,n)}function v6(t,e){return $0(t,e)}var Lm=null,zo=null,yv=!1,Um=!1,zy=!1,gs=0;function er(t){t!==zo&&t.next===null&&(zo===null?Lm=zo=t:zo=zo.next=t),Um=!0,yv||(yv=!0,w6())}function hd(t,e){if(!zy&&Um){zy=!0;do for(var n=!1,i=Lm;i!==null;){if(t!==0){var r=i.pendingLanes;if(r===0)var s=0;else{var a=i.suspendedLanes,o=i.pingedLanes;s=(1<<31-zn(42|t)+1)-1,s&=r&~(a&~o),s=s&201326741?s&201326741|1:s?s|2:0}s!==0&&(n=!0,IS(i,s))}else s=ye,s=Pp(i,i===Oe?s:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),!(s&3)||rd(i,s)||(n=!0,IS(i,s));i=i.next}while(n);zy=!1}}function b6(){C2()}function C2(){Um=yv=!1;var t=0;gs!==0&&N6()&&(t=gs);for(var e=Un(),n=null,i=Lm;i!==null;){var r=i.next,s=P2(i,e);s===0?(i.next=null,n===null?Lm=r:n.next=r,r===null&&(zo=n)):(n=i,(t!==0||s&3)&&(Um=!0)),i=r}xt!==0&&xt!==5||hd(t),gs!==0&&(gs=0)}function P2(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,s=t.pendingLanes&-62914561;0<s;){var a=31-zn(s),o=1<<a,l=r[a];l===-1?(!(o&n)||o&i)&&(r[a]=K4(o,e)):l<=e&&(t.expiredLanes|=o),s&=~o}if(e=Oe,n=ye,n=Pp(t,t===e?n:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),i=t.callbackNode,n===0||t===e&&(xe===2||xe===9)||t.cancelPendingCommit!==null)return i!==null&&i!==null&&my(i),t.callbackNode=null,t.callbackPriority=0;if(!(n&3)||rd(t,n)){if(e=n&-n,e===t.callbackPriority)return e;switch(i!==null&&my(i),W0(n)){case 2:case 8:n=yC;break;case 32:n=bm;break;case 268435456:n=_C;break;default:n=bm}return i=N2.bind(null,t),n=$0(n,i),t.callbackPriority=e,t.callbackNode=n,e}return i!==null&&i!==null&&my(i),t.callbackPriority=2,t.callbackNode=null,2}function N2(t,e){if(xt!==0&&xt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var n=t.callbackNode;if(Hp()&&t.callbackNode!==n)return null;var i=ye;return i=Pp(t,t===Oe?i:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),i===0?null:(g2(t,i,e),P2(t,Un()),t.callbackNode!=null&&t.callbackNode===n?N2.bind(null,t):null)}function IS(t,e){if(Hp())return null;g2(t,e,!0)}function w6(){k6(function(){Ee&6?$0(gC,b6):C2()})}function Db(){if(gs===0){var t=Rl;t===0&&(t=rf,rf<<=1,!(rf&261888)&&(rf=256)),gs=t}return gs}function xS(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Lf(""+t)}function RS(t,e){var n=e.ownerDocument.createElement("input");return n.name=e.name,n.value=e.value,t.id&&n.setAttribute("form",t.id),e.parentNode.insertBefore(n,e),t=new FormData(t),n.parentNode.removeChild(n),t}function T6(t,e,n,i,r){if(e==="submit"&&n&&n.stateNode===r){var s=xS((r[xn]||null).action),a=i.submitter;a&&(e=(e=a[xn]||null)?xS(e.formAction):a.getAttribute("formAction"),e!==null&&(s=e,a=null));var o=new Np("action","action",null,i,r);t.push({event:o,listeners:[{instance:null,listener:function(){if(i.defaultPrevented){if(gs!==0){var l=a?RS(r,a):new FormData(r);ov(n,{pending:!0,data:l,method:r.method,action:s},null,l)}}else typeof s=="function"&&(o.preventDefault(),l=a?RS(r,a):new FormData(r),ov(n,{pending:!0,data:l,method:r.method,action:s},s,l))},currentTarget:r}]})}}for(var By=0;By<Q_.length;By++){var Fy=Q_[By],E6=Fy.toLowerCase(),A6=Fy[0].toUpperCase()+Fy.slice(1);Ai(E6,"on"+A6)}Ai(qC,"onAnimationEnd");Ai(HC,"onAnimationIteration");Ai(GC,"onAnimationStart");Ai("dblclick","onDoubleClick");Ai("focusin","onFocus");Ai("focusout","onBlur");Ai(z5,"onTransitionRun");Ai(B5,"onTransitionStart");Ai(F5,"onTransitionCancel");Ai($C,"onTransitionEnd");Il("onMouseEnter",["mouseout","mouseover"]);Il("onMouseLeave",["mouseout","mouseover"]);Il("onPointerEnter",["pointerout","pointerover"]);Il("onPointerLeave",["pointerout","pointerover"]);uo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));uo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));uo("onBeforeInput",["compositionend","keypress","textInput","paste"]);uo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));uo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));uo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Th="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),S6=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Th));function D2(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var a=i.length-1;0<=a;a--){var o=i[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==s&&r.isPropagationStopped())break e;s=o,r.currentTarget=c;try{s(r)}catch(h){Tm(h)}r.currentTarget=null,s=l}else for(a=0;a<i.length;a++){if(o=i[a],l=o.instance,c=o.currentTarget,o=o.listener,l!==s&&r.isPropagationStopped())break e;s=o,r.currentTarget=c;try{s(r)}catch(h){Tm(h)}r.currentTarget=null,s=l}}}}function fe(t,e){var n=e[B_];n===void 0&&(n=e[B_]=new Set);var i=t+"__bubble";n.has(i)||(k2(e,t,2,!1),n.add(i))}function qy(t,e,n){var i=0;e&&(i|=4),k2(n,t,i,e)}var mf="_reactListening"+Math.random().toString(36).slice(2);function kb(t){if(!t[mf]){t[mf]=!0,AC.forEach(function(n){n!=="selectionchange"&&(S6.has(n)||qy(n,!1,t),qy(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[mf]||(e[mf]=!0,qy("selectionchange",!1,e))}}function k2(t,e,n,i){switch($2(e)){case 2:var r=Z6;break;case 8:r=eU;break;default:r=Lb}n=r.bind(null,e,n,t),r=void 0,!$_||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function Hy(t,e,n,i,r){var s=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var a=i.tag;if(a===3||a===4){var o=i.stateNode.containerInfo;if(o===r)break;if(a===4)for(a=i.return;a!==null;){var l=a.tag;if((l===3||l===4)&&a.stateNode.containerInfo===r)return;a=a.return}for(;o!==null;){if(a=Wo(o),a===null)return;if(l=a.tag,l===5||l===6||l===26||l===27){i=s=a;continue e}o=o.parentNode}}i=i.return}DC(function(){var c=s,h=X0(n),d=[];e:{var f=KC.get(t);if(f!==void 0){var p=Np,w=t;switch(t){case"keypress":if(jf(n)===0)break e;case"keydown":case"keyup":p=_5;break;case"focusin":w="focus",p=vy;break;case"focusout":w="blur",p=vy;break;case"beforeblur":case"afterblur":p=vy;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=MA;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=a5;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=w5;break;case qC:case HC:case GC:p=c5;break;case $C:p=E5;break;case"scroll":case"scrollend":p=r5;break;case"wheel":p=S5;break;case"copy":case"cut":case"paste":p=h5;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=UA;break;case"toggle":case"beforetoggle":p=x5}var E=(e&4)!==0,R=!E&&(t==="scroll"||t==="scrollend"),b=E?f!==null?f+"Capture":null:f;E=[];for(var v=c,_;v!==null;){var S=v;if(_=S.stateNode,S=S.tag,S!==5&&S!==26&&S!==27||_===null||b===null||(S=mh(v,b),S!=null&&E.push(Eh(v,S,_))),R)break;v=v.return}0<E.length&&(f=new p(f,w,null,n,h),d.push({event:f,listeners:E}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",f&&n!==G_&&(w=n.relatedTarget||n.fromElement)&&(Wo(w)||w[cc]))break e;if((p||f)&&(f=h.window===h?h:(f=h.ownerDocument)?f.defaultView||f.parentWindow:window,p?(w=n.relatedTarget||n.toElement,p=c,w=w?Wo(w):null,w!==null&&(R=nd(w),E=w.tag,w!==R||E!==5&&E!==27&&E!==6)&&(w=null)):(p=null,w=c),p!==w)){if(E=MA,S="onMouseLeave",b="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(E=UA,S="onPointerLeave",b="onPointerEnter",v="pointer"),R=p==null?f:_u(p),_=w==null?f:_u(w),f=new E(S,v+"leave",p,n,h),f.target=R,f.relatedTarget=_,S=null,Wo(h)===c&&(E=new E(b,v+"enter",w,n,h),E.target=_,E.relatedTarget=R,S=E),R=S,p&&w)t:{for(E=I6,b=p,v=w,_=0,S=b;S;S=E(S))_++;S=0;for(var k=v;k;k=E(k))S++;for(;0<_-S;)b=E(b),_--;for(;0<S-_;)v=E(v),S--;for(;_--;){if(b===v||v!==null&&b===v.alternate){E=b;break t}b=E(b),v=E(v)}E=null}else E=null;p!==null&&CS(d,f,p,E,!1),w!==null&&R!==null&&CS(d,R,w,E,!0)}}e:{if(f=c?_u(c):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var O=FA;else if(BA(f))if(UC)O=L5;else{O=O5;var A=V5}else p=f.nodeName,!p||p.toLowerCase()!=="input"||f.type!=="checkbox"&&f.type!=="radio"?c&&Y0(c.elementType)&&(O=FA):O=M5;if(O&&(O=O(t,c))){LC(d,O,n,h);break e}A&&A(t,f,c),t==="focusout"&&c&&f.type==="number"&&c.memoizedProps.value!=null&&H_(f,"number",f.value)}switch(A=c?_u(c):window,t){case"focusin":(BA(A)||A.contentEditable==="true")&&(Xo=A,K_=c,Ou=null);break;case"focusout":Ou=K_=Xo=null;break;case"mousedown":W_=!0;break;case"contextmenu":case"mouseup":case"dragend":W_=!1,KA(d,n,h);break;case"selectionchange":if(j5)break;case"keydown":case"keyup":KA(d,n,h)}var T;if(eb)e:{switch(t){case"compositionstart":var I="onCompositionStart";break e;case"compositionend":I="onCompositionEnd";break e;case"compositionupdate":I="onCompositionUpdate";break e}I=void 0}else Yo?OC(t,n)&&(I="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(I="onCompositionStart");I&&(VC&&n.locale!=="ko"&&(Yo||I!=="onCompositionStart"?I==="onCompositionEnd"&&Yo&&(T=kC()):(fs=h,J0="value"in fs?fs.value:fs.textContent,Yo=!0)),A=jm(c,I),0<A.length&&(I=new LA(I,t,null,n,h),d.push({event:I,listeners:A}),T?I.data=T:(T=MC(n),T!==null&&(I.data=T)))),(T=C5?P5(t,n):N5(t,n))&&(I=jm(c,"onBeforeInput"),0<I.length&&(A=new LA("onBeforeInput","beforeinput",null,n,h),d.push({event:A,listeners:I}),A.data=T)),T6(d,t,c,n,h)}D2(d,e)})}function Eh(t,e,n){return{instance:t,listener:e,currentTarget:n}}function jm(t,e){for(var n=e+"Capture",i=[];t!==null;){var r=t,s=r.stateNode;if(r=r.tag,r!==5&&r!==26&&r!==27||s===null||(r=mh(t,n),r!=null&&i.unshift(Eh(t,r,s)),r=mh(t,e),r!=null&&i.push(Eh(t,r,s))),t.tag===3)return i;t=t.return}return[]}function I6(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function CS(t,e,n,i,r){for(var s=e._reactName,a=[];n!==null&&n!==i;){var o=n,l=o.alternate,c=o.stateNode;if(o=o.tag,l!==null&&l===i)break;o!==5&&o!==26&&o!==27||c===null||(l=c,r?(c=mh(n,s),c!=null&&a.unshift(Eh(n,c,l))):r||(c=mh(n,s),c!=null&&a.push(Eh(n,c,l)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var x6=/\r\n?/g,R6=/\u0000|\uFFFD/g;function PS(t){return(typeof t=="string"?t:""+t).replace(x6,`
`).replace(R6,"")}function V2(t,e){return e=PS(e),PS(t)===e}function Ne(t,e,n,i,r,s){switch(n){case"children":typeof i=="string"?e==="body"||e==="textarea"&&i===""||xl(t,i):(typeof i=="number"||typeof i=="bigint")&&e!=="body"&&xl(t,""+i);break;case"className":of(t,"class",i);break;case"tabIndex":of(t,"tabindex",i);break;case"dir":case"role":case"viewBox":case"width":case"height":of(t,n,i);break;case"style":NC(t,i,s);break;case"data":if(e!=="object"){of(t,"data",i);break}case"src":case"href":if(i===""&&(e!=="a"||n!=="href")){t.removeAttribute(n);break}if(i==null||typeof i=="function"||typeof i=="symbol"||typeof i=="boolean"){t.removeAttribute(n);break}i=Lf(""+i),t.setAttribute(n,i);break;case"action":case"formAction":if(typeof i=="function"){t.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof s=="function"&&(n==="formAction"?(e!=="input"&&Ne(t,e,"name",r.name,r,null),Ne(t,e,"formEncType",r.formEncType,r,null),Ne(t,e,"formMethod",r.formMethod,r,null),Ne(t,e,"formTarget",r.formTarget,r,null)):(Ne(t,e,"encType",r.encType,r,null),Ne(t,e,"method",r.method,r,null),Ne(t,e,"target",r.target,r,null)));if(i==null||typeof i=="symbol"||typeof i=="boolean"){t.removeAttribute(n);break}i=Lf(""+i),t.setAttribute(n,i);break;case"onClick":i!=null&&(t.onclick=ur);break;case"onScroll":i!=null&&fe("scroll",t);break;case"onScrollEnd":i!=null&&fe("scrollend",t);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(B(61));if(n=i.__html,n!=null){if(r.children!=null)throw Error(B(60));t.innerHTML=n}}break;case"multiple":t.multiple=i&&typeof i!="function"&&typeof i!="symbol";break;case"muted":t.muted=i&&typeof i!="function"&&typeof i!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(i==null||typeof i=="function"||typeof i=="boolean"||typeof i=="symbol"){t.removeAttribute("xlink:href");break}n=Lf(""+i),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":i!=null&&typeof i!="function"&&typeof i!="symbol"?t.setAttribute(n,""+i):t.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":i&&typeof i!="function"&&typeof i!="symbol"?t.setAttribute(n,""):t.removeAttribute(n);break;case"capture":case"download":i===!0?t.setAttribute(n,""):i!==!1&&i!=null&&typeof i!="function"&&typeof i!="symbol"?t.setAttribute(n,i):t.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":i!=null&&typeof i!="function"&&typeof i!="symbol"&&!isNaN(i)&&1<=i?t.setAttribute(n,i):t.removeAttribute(n);break;case"rowSpan":case"start":i==null||typeof i=="function"||typeof i=="symbol"||isNaN(i)?t.removeAttribute(n):t.setAttribute(n,i);break;case"popover":fe("beforetoggle",t),fe("toggle",t),Mf(t,"popover",i);break;case"xlinkActuate":tr(t,"http://www.w3.org/1999/xlink","xlink:actuate",i);break;case"xlinkArcrole":tr(t,"http://www.w3.org/1999/xlink","xlink:arcrole",i);break;case"xlinkRole":tr(t,"http://www.w3.org/1999/xlink","xlink:role",i);break;case"xlinkShow":tr(t,"http://www.w3.org/1999/xlink","xlink:show",i);break;case"xlinkTitle":tr(t,"http://www.w3.org/1999/xlink","xlink:title",i);break;case"xlinkType":tr(t,"http://www.w3.org/1999/xlink","xlink:type",i);break;case"xmlBase":tr(t,"http://www.w3.org/XML/1998/namespace","xml:base",i);break;case"xmlLang":tr(t,"http://www.w3.org/XML/1998/namespace","xml:lang",i);break;case"xmlSpace":tr(t,"http://www.w3.org/XML/1998/namespace","xml:space",i);break;case"is":Mf(t,"is",i);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=n5.get(n)||n,Mf(t,n,i))}}function _v(t,e,n,i,r,s){switch(n){case"style":NC(t,i,s);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(B(61));if(n=i.__html,n!=null){if(r.children!=null)throw Error(B(60));t.innerHTML=n}}break;case"children":typeof i=="string"?xl(t,i):(typeof i=="number"||typeof i=="bigint")&&xl(t,""+i);break;case"onScroll":i!=null&&fe("scroll",t);break;case"onScrollEnd":i!=null&&fe("scrollend",t);break;case"onClick":i!=null&&(t.onclick=ur);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!SC.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(r=n.endsWith("Capture"),e=n.slice(2,r?n.length-7:void 0),s=t[xn]||null,s=s!=null?s[n]:null,typeof s=="function"&&t.removeEventListener(e,s,r),typeof i=="function")){typeof s!="function"&&s!==null&&(n in t?t[n]=null:t.hasAttribute(n)&&t.removeAttribute(n)),t.addEventListener(e,i,r);break e}n in t?t[n]=i:i===!0?t.setAttribute(n,""):Mf(t,n,i)}}}function Kt(t,e,n){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":fe("error",t),fe("load",t);var i=!1,r=!1,s;for(s in n)if(n.hasOwnProperty(s)){var a=n[s];if(a!=null)switch(s){case"src":i=!0;break;case"srcSet":r=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(B(137,e));default:Ne(t,e,s,a,n,null)}}r&&Ne(t,e,"srcSet",n.srcSet,n,null),i&&Ne(t,e,"src",n.src,n,null);return;case"input":fe("invalid",t);var o=s=a=r=null,l=null,c=null;for(i in n)if(n.hasOwnProperty(i)){var h=n[i];if(h!=null)switch(i){case"name":r=h;break;case"type":a=h;break;case"checked":l=h;break;case"defaultChecked":c=h;break;case"value":s=h;break;case"defaultValue":o=h;break;case"children":case"dangerouslySetInnerHTML":if(h!=null)throw Error(B(137,e));break;default:Ne(t,e,i,h,n,null)}}RC(t,s,o,l,c,a,r,!1);return;case"select":fe("invalid",t),i=a=s=null;for(r in n)if(n.hasOwnProperty(r)&&(o=n[r],o!=null))switch(r){case"value":s=o;break;case"defaultValue":a=o;break;case"multiple":i=o;default:Ne(t,e,r,o,n,null)}e=s,n=a,t.multiple=!!i,e!=null?dl(t,!!i,e,!1):n!=null&&dl(t,!!i,n,!0);return;case"textarea":fe("invalid",t),s=r=i=null;for(a in n)if(n.hasOwnProperty(a)&&(o=n[a],o!=null))switch(a){case"value":i=o;break;case"defaultValue":r=o;break;case"children":s=o;break;case"dangerouslySetInnerHTML":if(o!=null)throw Error(B(91));break;default:Ne(t,e,a,o,n,null)}PC(t,i,r,s);return;case"option":for(l in n)if(n.hasOwnProperty(l)&&(i=n[l],i!=null))switch(l){case"selected":t.selected=i&&typeof i!="function"&&typeof i!="symbol";break;default:Ne(t,e,l,i,n,null)}return;case"dialog":fe("beforetoggle",t),fe("toggle",t),fe("cancel",t),fe("close",t);break;case"iframe":case"object":fe("load",t);break;case"video":case"audio":for(i=0;i<Th.length;i++)fe(Th[i],t);break;case"image":fe("error",t),fe("load",t);break;case"details":fe("toggle",t);break;case"embed":case"source":case"link":fe("error",t),fe("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(c in n)if(n.hasOwnProperty(c)&&(i=n[c],i!=null))switch(c){case"children":case"dangerouslySetInnerHTML":throw Error(B(137,e));default:Ne(t,e,c,i,n,null)}return;default:if(Y0(e)){for(h in n)n.hasOwnProperty(h)&&(i=n[h],i!==void 0&&_v(t,e,h,i,n,void 0));return}}for(o in n)n.hasOwnProperty(o)&&(i=n[o],i!=null&&Ne(t,e,o,i,n,null))}function C6(t,e,n,i){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var r=null,s=null,a=null,o=null,l=null,c=null,h=null;for(p in n){var d=n[p];if(n.hasOwnProperty(p)&&d!=null)switch(p){case"checked":break;case"value":break;case"defaultValue":l=d;default:i.hasOwnProperty(p)||Ne(t,e,p,null,i,d)}}for(var f in i){var p=i[f];if(d=n[f],i.hasOwnProperty(f)&&(p!=null||d!=null))switch(f){case"type":s=p;break;case"name":r=p;break;case"checked":c=p;break;case"defaultChecked":h=p;break;case"value":a=p;break;case"defaultValue":o=p;break;case"children":case"dangerouslySetInnerHTML":if(p!=null)throw Error(B(137,e));break;default:p!==d&&Ne(t,e,f,p,i,d)}}q_(t,a,o,l,c,h,s,r);return;case"select":p=a=o=f=null;for(s in n)if(l=n[s],n.hasOwnProperty(s)&&l!=null)switch(s){case"value":break;case"multiple":p=l;default:i.hasOwnProperty(s)||Ne(t,e,s,null,i,l)}for(r in i)if(s=i[r],l=n[r],i.hasOwnProperty(r)&&(s!=null||l!=null))switch(r){case"value":f=s;break;case"defaultValue":o=s;break;case"multiple":a=s;default:s!==l&&Ne(t,e,r,s,i,l)}e=o,n=a,i=p,f!=null?dl(t,!!n,f,!1):!!i!=!!n&&(e!=null?dl(t,!!n,e,!0):dl(t,!!n,n?[]:"",!1));return;case"textarea":p=f=null;for(o in n)if(r=n[o],n.hasOwnProperty(o)&&r!=null&&!i.hasOwnProperty(o))switch(o){case"value":break;case"children":break;default:Ne(t,e,o,null,i,r)}for(a in i)if(r=i[a],s=n[a],i.hasOwnProperty(a)&&(r!=null||s!=null))switch(a){case"value":f=r;break;case"defaultValue":p=r;break;case"children":break;case"dangerouslySetInnerHTML":if(r!=null)throw Error(B(91));break;default:r!==s&&Ne(t,e,a,r,i,s)}CC(t,f,p);return;case"option":for(var w in n)if(f=n[w],n.hasOwnProperty(w)&&f!=null&&!i.hasOwnProperty(w))switch(w){case"selected":t.selected=!1;break;default:Ne(t,e,w,null,i,f)}for(l in i)if(f=i[l],p=n[l],i.hasOwnProperty(l)&&f!==p&&(f!=null||p!=null))switch(l){case"selected":t.selected=f&&typeof f!="function"&&typeof f!="symbol";break;default:Ne(t,e,l,f,i,p)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var E in n)f=n[E],n.hasOwnProperty(E)&&f!=null&&!i.hasOwnProperty(E)&&Ne(t,e,E,null,i,f);for(c in i)if(f=i[c],p=n[c],i.hasOwnProperty(c)&&f!==p&&(f!=null||p!=null))switch(c){case"children":case"dangerouslySetInnerHTML":if(f!=null)throw Error(B(137,e));break;default:Ne(t,e,c,f,i,p)}return;default:if(Y0(e)){for(var R in n)f=n[R],n.hasOwnProperty(R)&&f!==void 0&&!i.hasOwnProperty(R)&&_v(t,e,R,void 0,i,f);for(h in i)f=i[h],p=n[h],!i.hasOwnProperty(h)||f===p||f===void 0&&p===void 0||_v(t,e,h,f,i,p);return}}for(var b in n)f=n[b],n.hasOwnProperty(b)&&f!=null&&!i.hasOwnProperty(b)&&Ne(t,e,b,null,i,f);for(d in i)f=i[d],p=n[d],!i.hasOwnProperty(d)||f===p||f==null&&p==null||Ne(t,e,d,f,i,p)}function NS(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function P6(){if(typeof performance.getEntriesByType=="function"){for(var t=0,e=0,n=performance.getEntriesByType("resource"),i=0;i<n.length;i++){var r=n[i],s=r.transferSize,a=r.initiatorType,o=r.duration;if(s&&o&&NS(a)){for(a=0,o=r.responseEnd,i+=1;i<n.length;i++){var l=n[i],c=l.startTime;if(c>o)break;var h=l.transferSize,d=l.initiatorType;h&&NS(d)&&(l=l.responseEnd,a+=h*(l<o?1:(o-c)/(l-c)))}if(--i,e+=8*(s+a)/(r.duration/1e3),t++,10<t)break}}if(0<t)return e/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var vv=null,bv=null;function zm(t){return t.nodeType===9?t:t.ownerDocument}function DS(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function O2(t,e){if(t===0)switch(e){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&e==="foreignObject"?0:t}function wv(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.children=="bigint"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Gy=null;function N6(){var t=window.event;return t&&t.type==="popstate"?t===Gy?!1:(Gy=t,!0):(Gy=null,!1)}var M2=typeof setTimeout=="function"?setTimeout:void 0,D6=typeof clearTimeout=="function"?clearTimeout:void 0,kS=typeof Promise=="function"?Promise:void 0,k6=typeof queueMicrotask=="function"?queueMicrotask:typeof kS<"u"?function(t){return kS.resolve(null).then(t).catch(V6)}:M2;function V6(t){setTimeout(function(){throw t})}function Js(t){return t==="head"}function VS(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"||n==="/&"){if(i===0){t.removeChild(r),Ol(e);return}i--}else if(n==="$"||n==="$?"||n==="$~"||n==="$!"||n==="&")i++;else if(n==="html")Gu(t.ownerDocument.documentElement);else if(n==="head"){n=t.ownerDocument.head,Gu(n);for(var s=n.firstChild;s;){var a=s.nextSibling,o=s.nodeName;s[ad]||o==="SCRIPT"||o==="STYLE"||o==="LINK"&&s.rel.toLowerCase()==="stylesheet"||n.removeChild(s),s=a}}else n==="body"&&Gu(t.ownerDocument.body);n=r}while(n);Ol(e)}function OS(t,e){var n=t;t=0;do{var i=n.nextSibling;if(n.nodeType===1?e?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",n.getAttribute("style")===""&&n.removeAttribute("style")):n.nodeType===3&&(e?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(t===0)break;t--}else n!=="$"&&n!=="$?"&&n!=="$~"&&n!=="$!"||t++;n=i}while(n)}function Tv(t){var e=t.firstChild;for(e&&e.nodeType===10&&(e=e.nextSibling);e;){var n=e;switch(e=e.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":Tv(n),Q0(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}t.removeChild(n)}}function O6(t,e,n,i){for(;t.nodeType===1;){var r=n;if(t.nodeName.toLowerCase()!==e.toLowerCase()){if(!i&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(i){if(!t[ad])switch(e){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(s=t.getAttribute("rel"),s==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(s!==r.rel||t.getAttribute("href")!==(r.href==null||r.href===""?null:r.href)||t.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin)||t.getAttribute("title")!==(r.title==null?null:r.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(s=t.getAttribute("src"),(s!==(r.src==null?null:r.src)||t.getAttribute("type")!==(r.type==null?null:r.type)||t.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin))&&s&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(e==="input"&&t.type==="hidden"){var s=r.name==null?null:""+r.name;if(r.type==="hidden"&&t.getAttribute("name")===s)return t}else return t;if(t=li(t.nextSibling),t===null)break}return null}function M6(t,e,n){if(e==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!n||(t=li(t.nextSibling),t===null))return null;return t}function L2(t,e){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!e||(t=li(t.nextSibling),t===null))return null;return t}function Ev(t){return t.data==="$?"||t.data==="$~"}function Av(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function L6(t,e){var n=t.ownerDocument;if(t.data==="$~")t._reactRetry=e;else if(t.data!=="$?"||n.readyState!=="loading")e();else{var i=function(){e(),n.removeEventListener("DOMContentLoaded",i)};n.addEventListener("DOMContentLoaded",i),t._reactRetry=i}}function li(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?"||e==="$~"||e==="&"||e==="F!"||e==="F")break;if(e==="/$"||e==="/&")return null}}return t}var Sv=null;function MS(t){t=t.nextSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"||n==="/&"){if(e===0)return li(t.nextSibling);e--}else n!=="$"&&n!=="$!"&&n!=="$?"&&n!=="$~"&&n!=="&"||e++}t=t.nextSibling}return null}function LS(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"){if(e===0)return t;e--}else n!=="/$"&&n!=="/&"||e++}t=t.previousSibling}return null}function U2(t,e,n){switch(e=zm(n),t){case"html":if(t=e.documentElement,!t)throw Error(B(452));return t;case"head":if(t=e.head,!t)throw Error(B(453));return t;case"body":if(t=e.body,!t)throw Error(B(454));return t;default:throw Error(B(451))}}function Gu(t){for(var e=t.attributes;e.length;)t.removeAttributeNode(e[0]);Q0(t)}var ui=new Map,US=new Set;function Bm(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Mr=Ae.d;Ae.d={f:U6,r:j6,D:z6,C:B6,L:F6,m:q6,X:G6,S:H6,M:$6};function U6(){var t=Mr.f(),e=Fp();return t||e}function j6(t){var e=uc(t);e!==null&&e.tag===5&&e.type==="form"?NP(e):Mr.r(t)}var mc=typeof document>"u"?null:document;function j2(t,e,n){var i=mc;if(i&&typeof e=="string"&&e){var r=ni(e);r='link[rel="'+t+'"][href="'+r+'"]',typeof n=="string"&&(r+='[crossorigin="'+n+'"]'),US.has(r)||(US.add(r),t={rel:t,crossOrigin:n,href:e},i.querySelector(r)===null&&(e=i.createElement("link"),Kt(e,"link",t),Mt(e),i.head.appendChild(e)))}}function z6(t){Mr.D(t),j2("dns-prefetch",t,null)}function B6(t,e){Mr.C(t,e),j2("preconnect",t,e)}function F6(t,e,n){Mr.L(t,e,n);var i=mc;if(i&&t&&e){var r='link[rel="preload"][as="'+ni(e)+'"]';e==="image"&&n&&n.imageSrcSet?(r+='[imagesrcset="'+ni(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(r+='[imagesizes="'+ni(n.imageSizes)+'"]')):r+='[href="'+ni(t)+'"]';var s=r;switch(e){case"style":s=Vl(t);break;case"script":s=pc(t)}ui.has(s)||(t=$e({rel:"preload",href:e==="image"&&n&&n.imageSrcSet?void 0:t,as:e},n),ui.set(s,t),i.querySelector(r)!==null||e==="style"&&i.querySelector(dd(s))||e==="script"&&i.querySelector(fd(s))||(e=i.createElement("link"),Kt(e,"link",t),Mt(e),i.head.appendChild(e)))}}function q6(t,e){Mr.m(t,e);var n=mc;if(n&&t){var i=e&&typeof e.as=="string"?e.as:"script",r='link[rel="modulepreload"][as="'+ni(i)+'"][href="'+ni(t)+'"]',s=r;switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":s=pc(t)}if(!ui.has(s)&&(t=$e({rel:"modulepreload",href:t},e),ui.set(s,t),n.querySelector(r)===null)){switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(fd(s)))return}i=n.createElement("link"),Kt(i,"link",t),Mt(i),n.head.appendChild(i)}}}function H6(t,e,n){Mr.S(t,e,n);var i=mc;if(i&&t){var r=hl(i).hoistableStyles,s=Vl(t);e=e||"default";var a=r.get(s);if(!a){var o={loading:0,preload:null};if(a=i.querySelector(dd(s)))o.loading=5;else{t=$e({rel:"stylesheet",href:t,"data-precedence":e},n),(n=ui.get(s))&&Vb(t,n);var l=a=i.createElement("link");Mt(l),Kt(l,"link",t),l._p=new Promise(function(c,h){l.onload=c,l.onerror=h}),l.addEventListener("load",function(){o.loading|=1}),l.addEventListener("error",function(){o.loading|=2}),o.loading|=4,Kf(a,e,i)}a={type:"stylesheet",instance:a,count:1,state:o},r.set(s,a)}}}function G6(t,e){Mr.X(t,e);var n=mc;if(n&&t){var i=hl(n).hoistableScripts,r=pc(t),s=i.get(r);s||(s=n.querySelector(fd(r)),s||(t=$e({src:t,async:!0},e),(e=ui.get(r))&&Ob(t,e),s=n.createElement("script"),Mt(s),Kt(s,"link",t),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},i.set(r,s))}}function $6(t,e){Mr.M(t,e);var n=mc;if(n&&t){var i=hl(n).hoistableScripts,r=pc(t),s=i.get(r);s||(s=n.querySelector(fd(r)),s||(t=$e({src:t,async:!0,type:"module"},e),(e=ui.get(r))&&Ob(t,e),s=n.createElement("script"),Mt(s),Kt(s,"link",t),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},i.set(r,s))}}function jS(t,e,n,i){var r=(r=bs.current)?Bm(r):null;if(!r)throw Error(B(446));switch(t){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(e=Vl(n.href),n=hl(r).hoistableStyles,i=n.get(e),i||(i={type:"style",instance:null,count:0,state:null},n.set(e,i)),i):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){t=Vl(n.href);var s=hl(r).hoistableStyles,a=s.get(t);if(a||(r=r.ownerDocument||r,a={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},s.set(t,a),(s=r.querySelector(dd(t)))&&!s._p&&(a.instance=s,a.state.loading=5),ui.has(t)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},ui.set(t,n),s||K6(r,t,n,a.state))),e&&i===null)throw Error(B(528,""));return a}if(e&&i!==null)throw Error(B(529,""));return null;case"script":return e=n.async,n=n.src,typeof n=="string"&&e&&typeof e!="function"&&typeof e!="symbol"?(e=pc(n),n=hl(r).hoistableScripts,i=n.get(e),i||(i={type:"script",instance:null,count:0,state:null},n.set(e,i)),i):{type:"void",instance:null,count:0,state:null};default:throw Error(B(444,t))}}function Vl(t){return'href="'+ni(t)+'"'}function dd(t){return'link[rel="stylesheet"]['+t+"]"}function z2(t){return $e({},t,{"data-precedence":t.precedence,precedence:null})}function K6(t,e,n,i){t.querySelector('link[rel="preload"][as="style"]['+e+"]")?i.loading=1:(e=t.createElement("link"),i.preload=e,e.addEventListener("load",function(){return i.loading|=1}),e.addEventListener("error",function(){return i.loading|=2}),Kt(e,"link",n),Mt(e),t.head.appendChild(e))}function pc(t){return'[src="'+ni(t)+'"]'}function fd(t){return"script[async]"+t}function zS(t,e,n){if(e.count++,e.instance===null)switch(e.type){case"style":var i=t.querySelector('style[data-href~="'+ni(n.href)+'"]');if(i)return e.instance=i,Mt(i),i;var r=$e({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return i=(t.ownerDocument||t).createElement("style"),Mt(i),Kt(i,"style",r),Kf(i,n.precedence,t),e.instance=i;case"stylesheet":r=Vl(n.href);var s=t.querySelector(dd(r));if(s)return e.state.loading|=4,e.instance=s,Mt(s),s;i=z2(n),(r=ui.get(r))&&Vb(i,r),s=(t.ownerDocument||t).createElement("link"),Mt(s);var a=s;return a._p=new Promise(function(o,l){a.onload=o,a.onerror=l}),Kt(s,"link",i),e.state.loading|=4,Kf(s,n.precedence,t),e.instance=s;case"script":return s=pc(n.src),(r=t.querySelector(fd(s)))?(e.instance=r,Mt(r),r):(i=n,(r=ui.get(s))&&(i=$e({},n),Ob(i,r)),t=t.ownerDocument||t,r=t.createElement("script"),Mt(r),Kt(r,"link",i),t.head.appendChild(r),e.instance=r);case"void":return null;default:throw Error(B(443,e.type))}else e.type==="stylesheet"&&!(e.state.loading&4)&&(i=e.instance,e.state.loading|=4,Kf(i,n.precedence,t));return e.instance}function Kf(t,e,n){for(var i=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),r=i.length?i[i.length-1]:null,s=r,a=0;a<i.length;a++){var o=i[a];if(o.dataset.precedence===e)s=o;else if(s!==r)break}s?s.parentNode.insertBefore(t,s.nextSibling):(e=n.nodeType===9?n.head:n,e.insertBefore(t,e.firstChild))}function Vb(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.title==null&&(t.title=e.title)}function Ob(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.integrity==null&&(t.integrity=e.integrity)}var Wf=null;function BS(t,e,n){if(Wf===null){var i=new Map,r=Wf=new Map;r.set(n,i)}else r=Wf,i=r.get(n),i||(i=new Map,r.set(n,i));if(i.has(t))return i;for(i.set(t,null),n=n.getElementsByTagName(t),r=0;r<n.length;r++){var s=n[r];if(!(s[ad]||s[Ft]||t==="link"&&s.getAttribute("rel")==="stylesheet")&&s.namespaceURI!=="http://www.w3.org/2000/svg"){var a=s.getAttribute(e)||"";a=t+a;var o=i.get(a);o?o.push(s):i.set(a,[s])}}return i}function FS(t,e,n){t=t.ownerDocument||t,t.head.insertBefore(n,e==="title"?t.querySelector("head > title"):null)}function W6(t,e,n){if(n===1||e.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof e.precedence!="string"||typeof e.href!="string"||e.href==="")break;return!0;case"link":if(typeof e.rel!="string"||typeof e.href!="string"||e.href===""||e.onLoad||e.onError)break;switch(e.rel){case"stylesheet":return t=e.disabled,typeof e.precedence=="string"&&t==null;default:return!0}case"script":if(e.async&&typeof e.async!="function"&&typeof e.async!="symbol"&&!e.onLoad&&!e.onError&&e.src&&typeof e.src=="string")return!0}return!1}function B2(t){return!(t.type==="stylesheet"&&!(t.state.loading&3))}function Q6(t,e,n,i){if(n.type==="stylesheet"&&(typeof i.media!="string"||matchMedia(i.media).matches!==!1)&&!(n.state.loading&4)){if(n.instance===null){var r=Vl(i.href),s=e.querySelector(dd(r));if(s){e=s._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(t.count++,t=Fm.bind(t),e.then(t,t)),n.state.loading|=4,n.instance=s,Mt(s);return}s=e.ownerDocument||e,i=z2(i),(r=ui.get(r))&&Vb(i,r),s=s.createElement("link"),Mt(s);var a=s;a._p=new Promise(function(o,l){a.onload=o,a.onerror=l}),Kt(s,"link",i),n.instance=s}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(n,e),(e=n.state.preload)&&!(n.state.loading&3)&&(t.count++,n=Fm.bind(t),e.addEventListener("load",n),e.addEventListener("error",n))}}var $y=0;function Y6(t,e){return t.stylesheets&&t.count===0&&Qf(t,t.stylesheets),0<t.count||0<t.imgCount?function(n){var i=setTimeout(function(){if(t.stylesheets&&Qf(t,t.stylesheets),t.unsuspend){var s=t.unsuspend;t.unsuspend=null,s()}},6e4+e);0<t.imgBytes&&$y===0&&($y=62500*P6());var r=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Qf(t,t.stylesheets),t.unsuspend)){var s=t.unsuspend;t.unsuspend=null,s()}},(t.imgBytes>$y?50:800)+e);return t.unsuspend=n,function(){t.unsuspend=null,clearTimeout(i),clearTimeout(r)}}:null}function Fm(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Qf(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var qm=null;function Qf(t,e){t.stylesheets=null,t.unsuspend!==null&&(t.count++,qm=new Map,e.forEach(X6,t),qm=null,Fm.call(t))}function X6(t,e){if(!(e.state.loading&4)){var n=qm.get(t);if(n)var i=n.get(null);else{n=new Map,qm.set(t,n);for(var r=t.querySelectorAll("link[data-precedence],style[data-precedence]"),s=0;s<r.length;s++){var a=r[s];(a.nodeName==="LINK"||a.getAttribute("media")!=="not all")&&(n.set(a.dataset.precedence,a),i=a)}i&&n.set(null,i)}r=e.instance,a=r.getAttribute("data-precedence"),s=n.get(a)||i,s===i&&n.set(null,r),n.set(a,r),this.count++,i=Fm.bind(this),r.addEventListener("load",i),r.addEventListener("error",i),s?s.parentNode.insertBefore(r,s.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(r,t.firstChild)),e.state.loading|=4}}var Ah={$$typeof:cr,Provider:null,Consumer:null,_currentValue:Ma,_currentValue2:Ma,_threadCount:0};function J6(t,e,n,i,r,s,a,o,l){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=py(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=py(0),this.hiddenUpdates=py(null),this.identifierPrefix=i,this.onUncaughtError=r,this.onCaughtError=s,this.onRecoverableError=a,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=l,this.incompleteTransitions=new Map}function F2(t,e,n,i,r,s,a,o,l,c,h,d){return t=new J6(t,e,n,a,l,c,h,d,o),e=1,s===!0&&(e|=24),s=On(3,null,null,e),t.current=s,s.stateNode=t,e=ob(),e.refCount++,t.pooledCache=e,e.refCount++,s.memoizedState={element:i,isDehydrated:n,cache:e},ub(s),t}function q2(t){return t?(t=el,t):el}function H2(t,e,n,i,r,s){r=q2(r),i.context===null?i.context=r:i.pendingContext=r,i=Ts(e),i.payload={element:n},s=s===void 0?null:s,s!==null&&(i.callback=s),n=Es(t,i,e),n!==null&&(In(n,t,e),Lu(n,t,e))}function qS(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Mb(t,e){qS(t,e),(t=t.alternate)&&qS(t,e)}function G2(t){if(t.tag===13||t.tag===31){var e=mo(t,67108864);e!==null&&In(e,t,67108864),Mb(t,67108864)}}function HS(t){if(t.tag===13||t.tag===31){var e=Bn();e=K0(e);var n=mo(t,e);n!==null&&In(n,t,e),Mb(t,e)}}var Hm=!0;function Z6(t,e,n,i){var r=se.T;se.T=null;var s=Ae.p;try{Ae.p=2,Lb(t,e,n,i)}finally{Ae.p=s,se.T=r}}function eU(t,e,n,i){var r=se.T;se.T=null;var s=Ae.p;try{Ae.p=8,Lb(t,e,n,i)}finally{Ae.p=s,se.T=r}}function Lb(t,e,n,i){if(Hm){var r=Iv(i);if(r===null)Hy(t,e,i,Gm,n),GS(t,i);else if(nU(r,t,e,n,i))i.stopPropagation();else if(GS(t,i),e&4&&-1<tU.indexOf(t)){for(;r!==null;){var s=uc(r);if(s!==null)switch(s.tag){case 3:if(s=s.stateNode,s.current.memoizedState.isDehydrated){var a=_a(s.pendingLanes);if(a!==0){var o=s;for(o.pendingLanes|=2,o.entangledLanes|=2;a;){var l=1<<31-zn(a);o.entanglements[1]|=l,a&=~l}er(s),!(Ee&6)&&(Vm=Un()+500,hd(0))}}break;case 31:case 13:o=mo(s,2),o!==null&&In(o,s,2),Fp(),Mb(s,2)}if(s=Iv(i),s===null&&Hy(t,e,i,Gm,n),s===r)break;r=s}r!==null&&i.stopPropagation()}else Hy(t,e,i,null,n)}}function Iv(t){return t=X0(t),Ub(t)}var Gm=null;function Ub(t){if(Gm=null,t=Wo(t),t!==null){var e=nd(t);if(e===null)t=null;else{var n=e.tag;if(n===13){if(t=hC(e),t!==null)return t;t=null}else if(n===31){if(t=dC(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null)}}return Gm=t,null}function $2(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(z4()){case gC:return 2;case yC:return 8;case bm:case B4:return 32;case _C:return 268435456;default:return 32}default:return 32}}var xv=!1,Is=null,xs=null,Rs=null,Sh=new Map,Ih=new Map,us=[],tU="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function GS(t,e){switch(t){case"focusin":case"focusout":Is=null;break;case"dragenter":case"dragleave":xs=null;break;case"mouseover":case"mouseout":Rs=null;break;case"pointerover":case"pointerout":Sh.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ih.delete(e.pointerId)}}function iu(t,e,n,i,r,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},e!==null&&(e=uc(e),e!==null&&G2(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function nU(t,e,n,i,r){switch(e){case"focusin":return Is=iu(Is,t,e,n,i,r),!0;case"dragenter":return xs=iu(xs,t,e,n,i,r),!0;case"mouseover":return Rs=iu(Rs,t,e,n,i,r),!0;case"pointerover":var s=r.pointerId;return Sh.set(s,iu(Sh.get(s)||null,t,e,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,Ih.set(s,iu(Ih.get(s)||null,t,e,n,i,r)),!0}return!1}function K2(t){var e=Wo(t.target);if(e!==null){var n=nd(e);if(n!==null){if(e=n.tag,e===13){if(e=hC(n),e!==null){t.blockedOn=e,CA(t.priority,function(){HS(n)});return}}else if(e===31){if(e=dC(n),e!==null){t.blockedOn=e,CA(t.priority,function(){HS(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Yf(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Iv(t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);G_=i,n.target.dispatchEvent(i),G_=null}else return e=uc(n),e!==null&&G2(e),t.blockedOn=n,!1;e.shift()}return!0}function $S(t,e,n){Yf(t)&&n.delete(e)}function iU(){xv=!1,Is!==null&&Yf(Is)&&(Is=null),xs!==null&&Yf(xs)&&(xs=null),Rs!==null&&Yf(Rs)&&(Rs=null),Sh.forEach($S),Ih.forEach($S)}function pf(t,e){t.blockedOn===e&&(t.blockedOn=null,xv||(xv=!0,Ct.unstable_scheduleCallback(Ct.unstable_NormalPriority,iU)))}var gf=null;function KS(t){gf!==t&&(gf=t,Ct.unstable_scheduleCallback(Ct.unstable_NormalPriority,function(){gf===t&&(gf=null);for(var e=0;e<t.length;e+=3){var n=t[e],i=t[e+1],r=t[e+2];if(typeof i!="function"){if(Ub(i||n)===null)continue;break}var s=uc(n);s!==null&&(t.splice(e,3),e-=3,ov(s,{pending:!0,data:r,method:n.method,action:i},i,r))}}))}function Ol(t){function e(l){return pf(l,t)}Is!==null&&pf(Is,t),xs!==null&&pf(xs,t),Rs!==null&&pf(Rs,t),Sh.forEach(e),Ih.forEach(e);for(var n=0;n<us.length;n++){var i=us[n];i.blockedOn===t&&(i.blockedOn=null)}for(;0<us.length&&(n=us[0],n.blockedOn===null);)K2(n),n.blockedOn===null&&us.shift();if(n=(t.ownerDocument||t).$$reactFormReplay,n!=null)for(i=0;i<n.length;i+=3){var r=n[i],s=n[i+1],a=r[xn]||null;if(typeof s=="function")a||KS(n);else if(a){var o=null;if(s&&s.hasAttribute("formAction")){if(r=s,a=s[xn]||null)o=a.formAction;else if(Ub(r)!==null)continue}else o=a.action;typeof o=="function"?n[i+1]=o:(n.splice(i,3),i-=3),KS(n)}}}function W2(){function t(s){s.canIntercept&&s.info==="react-transition"&&s.intercept({handler:function(){return new Promise(function(a){return r=a})},focusReset:"manual",scroll:"manual"})}function e(){r!==null&&(r(),r=null),i||setTimeout(n,20)}function n(){if(!i&&!navigation.transition){var s=navigation.currentEntry;s&&s.url!=null&&navigation.navigate(s.url,{state:s.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var i=!1,r=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",e),navigation.addEventListener("navigateerror",e),setTimeout(n,100),function(){i=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",e),navigation.removeEventListener("navigateerror",e),r!==null&&(r(),r=null)}}}function jb(t){this._internalRoot=t}Gp.prototype.render=jb.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(B(409));var n=e.current,i=Bn();H2(n,i,t,e,null,null)};Gp.prototype.unmount=jb.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;H2(t.current,2,null,t,null,null),Fp(),e[cc]=null}};function Gp(t){this._internalRoot=t}Gp.prototype.unstable_scheduleHydration=function(t){if(t){var e=EC();t={blockedOn:null,target:t,priority:e};for(var n=0;n<us.length&&e!==0&&e<us[n].priority;n++);us.splice(n,0,t),n===0&&K2(t)}};var WS=cC.version;if(WS!=="19.2.0")throw Error(B(527,WS,"19.2.0"));Ae.findDOMNode=function(t){var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(B(188)):(t=Object.keys(t).join(","),Error(B(268,t)));return t=k4(e),t=t!==null?fC(t):null,t=t===null?null:t.stateNode,t};var rU={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:se,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var yf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!yf.isDisabled&&yf.supportsFiber)try{id=yf.inject(rU),jn=yf}catch{}}Rp.createRoot=function(t,e){if(!uC(t))throw Error(B(299));var n=!1,i="",r=jP,s=zP,a=BP;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onUncaughtError!==void 0&&(r=e.onUncaughtError),e.onCaughtError!==void 0&&(s=e.onCaughtError),e.onRecoverableError!==void 0&&(a=e.onRecoverableError)),e=F2(t,1,!1,null,null,n,i,null,r,s,a,W2),t[cc]=e.current,kb(t),new jb(e)};Rp.hydrateRoot=function(t,e,n){if(!uC(t))throw Error(B(299));var i=!1,r="",s=jP,a=zP,o=BP,l=null;return n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(r=n.identifierPrefix),n.onUncaughtError!==void 0&&(s=n.onUncaughtError),n.onCaughtError!==void 0&&(a=n.onCaughtError),n.onRecoverableError!==void 0&&(o=n.onRecoverableError),n.formState!==void 0&&(l=n.formState)),e=F2(t,1,!0,e,n??null,i,r,l,s,a,o,W2),e.context=q2(null),n=e.current,i=Bn(),i=K0(i),r=Ts(i),r.callback=null,Es(n,r,i),n=i,e.current.lanes=n,sd(e,n),er(e),t[cc]=e.current,kb(t),new Gp(e)};Rp.version="19.2.0";function Q2(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Q2)}catch(t){console.error(t)}}Q2(),nC.exports=Rp;var sU=nC.exports;const aU=$R(sU),oU="modulepreload",lU=function(t){return"/RushCoffee-Capstone/"+t},QS={},ke=function(e,n,i){let r=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),o=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));r=Promise.allSettled(n.map(l=>{if(l=lU(l),l in QS)return;QS[l]=!0;const c=l.endsWith(".css"),h=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${h}`))return;const d=document.createElement("link");if(d.rel=c?"stylesheet":oU,c||(d.as="script"),d.crossOrigin="",d.href=l,o&&d.setAttribute("nonce",o),document.head.appendChild(d),c)return new Promise((f,p)=>{d.addEventListener("load",f),d.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return r.then(a=>{for(const o of a||[])o.status==="rejected"&&s(o.reason);return e().catch(s)})};/**
 * react-router v7.9.6
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var YS="popstate";function cU(t={}){function e(r,s){let{pathname:a="/",search:o="",hash:l=""}=go(r.location.hash.substring(1));return!a.startsWith("/")&&!a.startsWith(".")&&(a="/"+a),Rv("",{pathname:a,search:o,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){let a=r.document.querySelector("base"),o="";if(a&&a.getAttribute("href")){let l=r.location.href,c=l.indexOf("#");o=c===-1?l:l.slice(0,c)}return o+"#"+(typeof s=="string"?s:xh(s))}function i(r,s){Rn(r.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(s)})`)}return hU(e,n,i,t)}function Ze(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Rn(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function uU(){return Math.random().toString(36).substring(2,10)}function XS(t,e){return{usr:t.state,key:t.key,idx:e}}function Rv(t,e,n=null,i){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?go(e):e,state:n,key:e&&e.key||i||uU()}}function xh({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function go(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substring(i),t=t.substring(0,i)),t&&(e.pathname=t)}return e}function hU(t,e,n,i={}){let{window:r=document.defaultView,v5Compat:s=!1}=i,a=r.history,o="POP",l=null,c=h();c==null&&(c=0,a.replaceState({...a.state,idx:c},""));function h(){return(a.state||{idx:null}).idx}function d(){o="POP";let R=h(),b=R==null?null:R-c;c=R,l&&l({action:o,location:E.location,delta:b})}function f(R,b){o="PUSH";let v=Rv(E.location,R,b);n&&n(v,R),c=h()+1;let _=XS(v,c),S=E.createHref(v);try{a.pushState(_,"",S)}catch(k){if(k instanceof DOMException&&k.name==="DataCloneError")throw k;r.location.assign(S)}s&&l&&l({action:o,location:E.location,delta:1})}function p(R,b){o="REPLACE";let v=Rv(E.location,R,b);n&&n(v,R),c=h();let _=XS(v,c),S=E.createHref(v);a.replaceState(_,"",S),s&&l&&l({action:o,location:E.location,delta:0})}function w(R){return dU(R)}let E={get action(){return o},get location(){return t(r,a)},listen(R){if(l)throw new Error("A history only accepts one active listener");return r.addEventListener(YS,d),l=R,()=>{r.removeEventListener(YS,d),l=null}},createHref(R){return e(r,R)},createURL:w,encodeLocation(R){let b=w(R);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:f,replace:p,go(R){return a.go(R)}};return E}function dU(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Ze(n,"No window.location.(origin|href) available to create URL");let i=typeof t=="string"?t:xh(t);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=n+i),new URL(i,n)}function Y2(t,e,n="/"){return fU(t,e,n,!1)}function fU(t,e,n,i){let r=typeof e=="string"?go(e):e,s=Rr(r.pathname||"/",n);if(s==null)return null;let a=X2(t);mU(a);let o=null;for(let l=0;o==null&&l<a.length;++l){let c=SU(s);o=EU(a[l],c,i)}return o}function X2(t,e=[],n=[],i="",r=!1){let s=(a,o,l=r,c)=>{let h={relativePath:c===void 0?a.path||"":c,caseSensitive:a.caseSensitive===!0,childrenIndex:o,route:a};if(h.relativePath.startsWith("/")){if(!h.relativePath.startsWith(i)&&l)return;Ze(h.relativePath.startsWith(i),`Absolute route path "${h.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),h.relativePath=h.relativePath.slice(i.length)}let d=yr([i,h.relativePath]),f=n.concat(h);a.children&&a.children.length>0&&(Ze(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${d}".`),X2(a.children,e,f,d,l)),!(a.path==null&&!a.index)&&e.push({path:d,score:wU(d,a.index),routesMeta:f})};return t.forEach((a,o)=>{var l;if(a.path===""||!((l=a.path)!=null&&l.includes("?")))s(a,o);else for(let c of J2(a.path))s(a,o,!0,c)}),e}function J2(t){let e=t.split("/");if(e.length===0)return[];let[n,...i]=e,r=n.endsWith("?"),s=n.replace(/\?$/,"");if(i.length===0)return r?[s,""]:[s];let a=J2(i.join("/")),o=[];return o.push(...a.map(l=>l===""?s:[s,l].join("/"))),r&&o.push(...a),o.map(l=>t.startsWith("/")&&l===""?"/":l)}function mU(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:TU(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}var pU=/^:[\w-]+$/,gU=3,yU=2,_U=1,vU=10,bU=-2,JS=t=>t==="*";function wU(t,e){let n=t.split("/"),i=n.length;return n.some(JS)&&(i+=bU),e&&(i+=yU),n.filter(r=>!JS(r)).reduce((r,s)=>r+(pU.test(s)?gU:s===""?_U:vU),i)}function TU(t,e){return t.length===e.length&&t.slice(0,-1).every((i,r)=>i===e[r])?t[t.length-1]-e[e.length-1]:0}function EU(t,e,n=!1){let{routesMeta:i}=t,r={},s="/",a=[];for(let o=0;o<i.length;++o){let l=i[o],c=o===i.length-1,h=s==="/"?e:e.slice(s.length)||"/",d=$m({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},h),f=l.route;if(!d&&c&&n&&!i[i.length-1].route.index&&(d=$m({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},h)),!d)return null;Object.assign(r,d.params),a.push({params:r,pathname:yr([s,d.pathname]),pathnameBase:PU(yr([s,d.pathnameBase])),route:f}),d.pathnameBase!=="/"&&(s=yr([s,d.pathnameBase]))}return a}function $m(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=AU(t.path,t.caseSensitive,t.end),r=e.match(n);if(!r)return null;let s=r[0],a=s.replace(/(.)\/+$/,"$1"),o=r.slice(1);return{params:i.reduce((c,{paramName:h,isOptional:d},f)=>{if(h==="*"){let w=o[f]||"";a=s.slice(0,s.length-w.length).replace(/(.)\/+$/,"$1")}const p=o[f];return d&&!p?c[h]=void 0:c[h]=(p||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:a,pattern:t}}function AU(t,e=!1,n=!0){Rn(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let i=[],r="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,o,l)=>(i.push({paramName:o,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(i.push({paramName:"*"}),r+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":t!==""&&t!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),i]}function SU(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Rn(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Rr(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&i!=="/"?null:t.slice(n)||"/"}var IU=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,xU=t=>IU.test(t);function RU(t,e="/"){let{pathname:n,search:i="",hash:r=""}=typeof t=="string"?go(t):t,s;if(n)if(xU(n))s=n;else{if(n.includes("//")){let a=n;n=n.replace(/\/\/+/g,"/"),Rn(!1,`Pathnames cannot have embedded double slashes - normalizing ${a} -> ${n}`)}n.startsWith("/")?s=ZS(n.substring(1),"/"):s=ZS(n,e)}else s=e;return{pathname:s,search:NU(i),hash:DU(r)}}function ZS(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function Ky(t,e,n,i){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function CU(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function zb(t){let e=CU(t);return e.map((n,i)=>i===e.length-1?n.pathname:n.pathnameBase)}function Bb(t,e,n,i=!1){let r;typeof t=="string"?r=go(t):(r={...t},Ze(!r.pathname||!r.pathname.includes("?"),Ky("?","pathname","search",r)),Ze(!r.pathname||!r.pathname.includes("#"),Ky("#","pathname","hash",r)),Ze(!r.search||!r.search.includes("#"),Ky("#","search","hash",r)));let s=t===""||r.pathname==="",a=s?"/":r.pathname,o;if(a==null)o=n;else{let d=e.length-1;if(!i&&a.startsWith("..")){let f=a.split("/");for(;f[0]==="..";)f.shift(),d-=1;r.pathname=f.join("/")}o=d>=0?e[d]:"/"}let l=RU(r,o),c=a&&a!=="/"&&a.endsWith("/"),h=(s||a===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||h)&&(l.pathname+="/"),l}var yr=t=>t.join("/").replace(/\/\/+/g,"/"),PU=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),NU=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,DU=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function kU(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var Z2=["POST","PUT","PATCH","DELETE"];new Set(Z2);var VU=["GET",...Z2];new Set(VU);var gc=x.createContext(null);gc.displayName="DataRouter";var $p=x.createContext(null);$p.displayName="DataRouterState";x.createContext(!1);var eN=x.createContext({isTransitioning:!1});eN.displayName="ViewTransition";var OU=x.createContext(new Map);OU.displayName="Fetchers";var MU=x.createContext(null);MU.displayName="Await";var Si=x.createContext(null);Si.displayName="Navigation";var md=x.createContext(null);md.displayName="Location";var Ii=x.createContext({outlet:null,matches:[],isDataRoute:!1});Ii.displayName="Route";var Fb=x.createContext(null);Fb.displayName="RouteError";function LU(t,{relative:e}={}){Ze(yc(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:i}=x.useContext(Si),{hash:r,pathname:s,search:a}=pd(t,{relative:e}),o=s;return n!=="/"&&(o=s==="/"?n:yr([n,s])),i.createHref({pathname:o,search:a,hash:r})}function yc(){return x.useContext(md)!=null}function fi(){return Ze(yc(),"useLocation() may be used only in the context of a <Router> component."),x.useContext(md).location}var tN="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function nN(t){x.useContext(Si).static||x.useLayoutEffect(t)}function _c(){let{isDataRoute:t}=x.useContext(Ii);return t?JU():UU()}function UU(){Ze(yc(),"useNavigate() may be used only in the context of a <Router> component.");let t=x.useContext(gc),{basename:e,navigator:n}=x.useContext(Si),{matches:i}=x.useContext(Ii),{pathname:r}=fi(),s=JSON.stringify(zb(i)),a=x.useRef(!1);return nN(()=>{a.current=!0}),x.useCallback((l,c={})=>{if(Rn(a.current,tN),!a.current)return;if(typeof l=="number"){n.go(l);return}let h=Bb(l,JSON.parse(s),r,c.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:yr([e,h.pathname])),(c.replace?n.replace:n.push)(h,c.state,c)},[e,n,s,r,t])}var jU=x.createContext(null);function zU(t){let e=x.useContext(Ii).outlet;return x.useMemo(()=>e&&x.createElement(jU.Provider,{value:t},e),[e,t])}function pd(t,{relative:e}={}){let{matches:n}=x.useContext(Ii),{pathname:i}=fi(),r=JSON.stringify(zb(n));return x.useMemo(()=>Bb(t,JSON.parse(r),i,e==="path"),[t,r,i,e])}function BU(t,e){return iN(t,e)}function iN(t,e,n,i,r){var v;Ze(yc(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=x.useContext(Si),{matches:a}=x.useContext(Ii),o=a[a.length-1],l=o?o.params:{},c=o?o.pathname:"/",h=o?o.pathnameBase:"/",d=o&&o.route;{let _=d&&d.path||"";rN(c,!d||_.endsWith("*")||_.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${_}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${_}"> to <Route path="${_==="/"?"*":`${_}/*`}">.`)}let f=fi(),p;if(e){let _=typeof e=="string"?go(e):e;Ze(h==="/"||((v=_.pathname)==null?void 0:v.startsWith(h)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${h}" but pathname "${_.pathname}" was given in the \`location\` prop.`),p=_}else p=f;let w=p.pathname||"/",E=w;if(h!=="/"){let _=h.replace(/^\//,"").split("/");E="/"+w.replace(/^\//,"").split("/").slice(_.length).join("/")}let R=Y2(t,{pathname:E});Rn(d||R!=null,`No routes matched location "${p.pathname}${p.search}${p.hash}" `),Rn(R==null||R[R.length-1].route.element!==void 0||R[R.length-1].route.Component!==void 0||R[R.length-1].route.lazy!==void 0,`Matched leaf route at location "${p.pathname}${p.search}${p.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let b=$U(R&&R.map(_=>Object.assign({},_,{params:Object.assign({},l,_.params),pathname:yr([h,s.encodeLocation?s.encodeLocation(_.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?h:yr([h,s.encodeLocation?s.encodeLocation(_.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:_.pathnameBase])})),a,n,i,r);return e&&b?x.createElement(md.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...p},navigationType:"POP"}},b):b}function FU(){let t=XU(),e=kU(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:i},s={padding:"2px 4px",backgroundColor:i},a=null;return console.error("Error handled by React Router default ErrorBoundary:",t),a=x.createElement(x.Fragment,null,x.createElement("p",null," Hey developer "),x.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",x.createElement("code",{style:s},"ErrorBoundary")," or"," ",x.createElement("code",{style:s},"errorElement")," prop on your route.")),x.createElement(x.Fragment,null,x.createElement("h2",null,"Unexpected Application Error!"),x.createElement("h3",{style:{fontStyle:"italic"}},e),n?x.createElement("pre",{style:r},n):null,a)}var qU=x.createElement(FU,null),HU=class extends x.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.onError?this.props.onError(t,e):console.error("React Router caught the following error during render",t)}render(){return this.state.error!==void 0?x.createElement(Ii.Provider,{value:this.props.routeContext},x.createElement(Fb.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function GU({routeContext:t,match:e,children:n}){let i=x.useContext(gc);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),x.createElement(Ii.Provider,{value:t},n)}function $U(t,e=[],n=null,i=null,r=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let s=t,a=n==null?void 0:n.errors;if(a!=null){let h=s.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);Ze(h>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),s=s.slice(0,Math.min(s.length,h+1))}let o=!1,l=-1;if(n)for(let h=0;h<s.length;h++){let d=s[h];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(l=h),d.route.id){let{loaderData:f,errors:p}=n,w=d.route.loader&&!f.hasOwnProperty(d.route.id)&&(!p||p[d.route.id]===void 0);if(d.route.lazy||w){o=!0,l>=0?s=s.slice(0,l+1):s=[s[0]];break}}}let c=n&&i?(h,d)=>{var f,p;i(h,{location:n.location,params:((p=(f=n.matches)==null?void 0:f[0])==null?void 0:p.params)??{},errorInfo:d})}:void 0;return s.reduceRight((h,d,f)=>{let p,w=!1,E=null,R=null;n&&(p=a&&d.route.id?a[d.route.id]:void 0,E=d.route.errorElement||qU,o&&(l<0&&f===0?(rN("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),w=!0,R=null):l===f&&(w=!0,R=d.route.hydrateFallbackElement||null)));let b=e.concat(s.slice(0,f+1)),v=()=>{let _;return p?_=E:w?_=R:d.route.Component?_=x.createElement(d.route.Component,null):d.route.element?_=d.route.element:_=h,x.createElement(GU,{match:d,routeContext:{outlet:h,matches:b,isDataRoute:n!=null},children:_})};return n&&(d.route.ErrorBoundary||d.route.errorElement||f===0)?x.createElement(HU,{location:n.location,revalidation:n.revalidation,component:E,error:p,children:v(),routeContext:{outlet:null,matches:b,isDataRoute:!0},onError:c}):v()},null)}function qb(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function KU(t){let e=x.useContext(gc);return Ze(e,qb(t)),e}function WU(t){let e=x.useContext($p);return Ze(e,qb(t)),e}function QU(t){let e=x.useContext(Ii);return Ze(e,qb(t)),e}function Hb(t){let e=QU(t),n=e.matches[e.matches.length-1];return Ze(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function YU(){return Hb("useRouteId")}function XU(){var i;let t=x.useContext(Fb),e=WU("useRouteError"),n=Hb("useRouteError");return t!==void 0?t:(i=e.errors)==null?void 0:i[n]}function JU(){let{router:t}=KU("useNavigate"),e=Hb("useNavigate"),n=x.useRef(!1);return nN(()=>{n.current=!0}),x.useCallback(async(r,s={})=>{Rn(n.current,tN),n.current&&(typeof r=="number"?t.navigate(r):await t.navigate(r,{fromRouteId:e,...s}))},[t,e])}var eI={};function rN(t,e,n){!e&&!eI[t]&&(eI[t]=!0,Rn(!1,n))}x.memo(ZU);function ZU({routes:t,future:e,state:n,unstable_onError:i}){return iN(t,void 0,n,i,e)}function e3({to:t,replace:e,state:n,relative:i}){Ze(yc(),"<Navigate> may be used only in the context of a <Router> component.");let{static:r}=x.useContext(Si);Rn(!r,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:s}=x.useContext(Ii),{pathname:a}=fi(),o=_c(),l=Bb(t,zb(s),a,i==="path"),c=JSON.stringify(l);return x.useEffect(()=>{o(JSON.parse(c),{replace:e,state:n,relative:i})},[o,c,i,e,n]),null}function tI(t){return zU(t.context)}function ve(t){Ze(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function t3({basename:t="/",children:e=null,location:n,navigationType:i="POP",navigator:r,static:s=!1}){Ze(!yc(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let a=t.replace(/^\/*/,"/"),o=x.useMemo(()=>({basename:a,navigator:r,static:s,future:{}}),[a,r,s]);typeof n=="string"&&(n=go(n));let{pathname:l="/",search:c="",hash:h="",state:d=null,key:f="default"}=n,p=x.useMemo(()=>{let w=Rr(l,a);return w==null?null:{location:{pathname:w,search:c,hash:h,state:d,key:f},navigationType:i}},[a,l,c,h,d,f,i]);return Rn(p!=null,`<Router basename="${a}"> is not able to match the URL "${l}${c}${h}" because it does not start with the basename, so the <Router> won't render anything.`),p==null?null:x.createElement(Si.Provider,{value:o},x.createElement(md.Provider,{children:e,value:p}))}function n3({children:t,location:e}){return BU(Cv(t),e)}function Cv(t,e=[]){let n=[];return x.Children.forEach(t,(i,r)=>{if(!x.isValidElement(i))return;let s=[...e,r];if(i.type===x.Fragment){n.push.apply(n,Cv(i.props.children,s));return}Ze(i.type===ve,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Ze(!i.props.index||!i.props.children,"An index route cannot have child routes.");let a={id:i.props.id||s.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,middleware:i.props.middleware,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(a.children=Cv(i.props.children,s)),n.push(a)}),n}var Xf="get",Jf="application/x-www-form-urlencoded";function Kp(t){return t!=null&&typeof t.tagName=="string"}function i3(t){return Kp(t)&&t.tagName.toLowerCase()==="button"}function r3(t){return Kp(t)&&t.tagName.toLowerCase()==="form"}function s3(t){return Kp(t)&&t.tagName.toLowerCase()==="input"}function a3(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function o3(t,e){return t.button===0&&(!e||e==="_self")&&!a3(t)}function Pv(t=""){return new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let i=t[n];return e.concat(Array.isArray(i)?i.map(r=>[n,r]):[[n,i]])},[]))}function l3(t,e){let n=Pv(t);return e&&e.forEach((i,r)=>{n.has(r)||e.getAll(r).forEach(s=>{n.append(r,s)})}),n}var _f=null;function c3(){if(_f===null)try{new FormData(document.createElement("form"),0),_f=!1}catch{_f=!0}return _f}var u3=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Wy(t){return t!=null&&!u3.has(t)?(Rn(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Jf}"`),null):t}function h3(t,e){let n,i,r,s,a;if(r3(t)){let o=t.getAttribute("action");i=o?Rr(o,e):null,n=t.getAttribute("method")||Xf,r=Wy(t.getAttribute("enctype"))||Jf,s=new FormData(t)}else if(i3(t)||s3(t)&&(t.type==="submit"||t.type==="image")){let o=t.form;if(o==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=t.getAttribute("formaction")||o.getAttribute("action");if(i=l?Rr(l,e):null,n=t.getAttribute("formmethod")||o.getAttribute("method")||Xf,r=Wy(t.getAttribute("formenctype"))||Wy(o.getAttribute("enctype"))||Jf,s=new FormData(o,t),!c3()){let{name:c,type:h,value:d}=t;if(h==="image"){let f=c?`${c}.`:"";s.append(`${f}x`,"0"),s.append(`${f}y`,"0")}else c&&s.append(c,d)}}else{if(Kp(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Xf,i=null,r=Jf,a=t}return s&&r==="text/plain"&&(a=s,s=void 0),{action:i,method:n.toLowerCase(),encType:r,formData:s,body:a}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Gb(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function d3(t,e,n){let i=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return i.pathname==="/"?i.pathname=`_root.${n}`:e&&Rr(i.pathname,e)==="/"?i.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${n}`,i}async function f3(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function m3(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function p3(t,e,n){let i=await Promise.all(t.map(async r=>{let s=e.routes[r.route.id];if(s){let a=await f3(s,n);return a.links?a.links():[]}return[]}));return v3(i.flat(1).filter(m3).filter(r=>r.rel==="stylesheet"||r.rel==="preload").map(r=>r.rel==="stylesheet"?{...r,rel:"prefetch",as:"style"}:{...r,rel:"prefetch"}))}function nI(t,e,n,i,r,s){let a=(l,c)=>n[c]?l.route.id!==n[c].route.id:!0,o=(l,c)=>{var h;return n[c].pathname!==l.pathname||((h=n[c].route.path)==null?void 0:h.endsWith("*"))&&n[c].params["*"]!==l.params["*"]};return s==="assets"?e.filter((l,c)=>a(l,c)||o(l,c)):s==="data"?e.filter((l,c)=>{var d;let h=i.routes[l.route.id];if(!h||!h.hasLoader)return!1;if(a(l,c)||o(l,c))return!0;if(l.route.shouldRevalidate){let f=l.route.shouldRevalidate({currentUrl:new URL(r.pathname+r.search+r.hash,window.origin),currentParams:((d=n[0])==null?void 0:d.params)||{},nextUrl:new URL(t,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof f=="boolean")return f}return!0}):[]}function g3(t,e,{includeHydrateFallback:n}={}){return y3(t.map(i=>{let r=e.routes[i.route.id];if(!r)return[];let s=[r.module];return r.clientActionModule&&(s=s.concat(r.clientActionModule)),r.clientLoaderModule&&(s=s.concat(r.clientLoaderModule)),n&&r.hydrateFallbackModule&&(s=s.concat(r.hydrateFallbackModule)),r.imports&&(s=s.concat(r.imports)),s}).flat(1))}function y3(t){return[...new Set(t)]}function _3(t){let e={},n=Object.keys(t).sort();for(let i of n)e[i]=t[i];return e}function v3(t,e){let n=new Set;return new Set(e),t.reduce((i,r)=>{let s=JSON.stringify(_3(r));return n.has(s)||(n.add(s),i.push({key:s,link:r})),i},[])}function sN(){let t=x.useContext(gc);return Gb(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function b3(){let t=x.useContext($p);return Gb(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var $b=x.createContext(void 0);$b.displayName="FrameworkContext";function aN(){let t=x.useContext($b);return Gb(t,"You must render this element inside a <HydratedRouter> element"),t}function w3(t,e){let n=x.useContext($b),[i,r]=x.useState(!1),[s,a]=x.useState(!1),{onFocus:o,onBlur:l,onMouseEnter:c,onMouseLeave:h,onTouchStart:d}=e,f=x.useRef(null);x.useEffect(()=>{if(t==="render"&&a(!0),t==="viewport"){let E=b=>{b.forEach(v=>{a(v.isIntersecting)})},R=new IntersectionObserver(E,{threshold:.5});return f.current&&R.observe(f.current),()=>{R.disconnect()}}},[t]),x.useEffect(()=>{if(i){let E=setTimeout(()=>{a(!0)},100);return()=>{clearTimeout(E)}}},[i]);let p=()=>{r(!0)},w=()=>{r(!1),a(!1)};return n?t!=="intent"?[s,f,{}]:[s,f,{onFocus:ru(o,p),onBlur:ru(l,w),onMouseEnter:ru(c,p),onMouseLeave:ru(h,w),onTouchStart:ru(d,p)}]:[!1,f,{}]}function ru(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function T3({page:t,...e}){let{router:n}=sN(),i=x.useMemo(()=>Y2(n.routes,t,n.basename),[n.routes,t,n.basename]);return i?x.createElement(A3,{page:t,matches:i,...e}):null}function E3(t){let{manifest:e,routeModules:n}=aN(),[i,r]=x.useState([]);return x.useEffect(()=>{let s=!1;return p3(t,e,n).then(a=>{s||r(a)}),()=>{s=!0}},[t,e,n]),i}function A3({page:t,matches:e,...n}){let i=fi(),{manifest:r,routeModules:s}=aN(),{basename:a}=sN(),{loaderData:o,matches:l}=b3(),c=x.useMemo(()=>nI(t,e,l,r,i,"data"),[t,e,l,r,i]),h=x.useMemo(()=>nI(t,e,l,r,i,"assets"),[t,e,l,r,i]),d=x.useMemo(()=>{if(t===i.pathname+i.search+i.hash)return[];let w=new Set,E=!1;if(e.forEach(b=>{var _;let v=r.routes[b.route.id];!v||!v.hasLoader||(!c.some(S=>S.route.id===b.route.id)&&b.route.id in o&&((_=s[b.route.id])!=null&&_.shouldRevalidate)||v.hasClientLoader?E=!0:w.add(b.route.id))}),w.size===0)return[];let R=d3(t,a,"data");return E&&w.size>0&&R.searchParams.set("_routes",e.filter(b=>w.has(b.route.id)).map(b=>b.route.id).join(",")),[R.pathname+R.search]},[a,o,i,r,c,e,t,s]),f=x.useMemo(()=>g3(h,r),[h,r]),p=E3(h);return x.createElement(x.Fragment,null,d.map(w=>x.createElement("link",{key:w,rel:"prefetch",as:"fetch",href:w,...n})),f.map(w=>x.createElement("link",{key:w,rel:"modulepreload",href:w,...n})),p.map(({key:w,link:E})=>x.createElement("link",{key:w,nonce:n.nonce,...E})))}function S3(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var oN=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{oN&&(window.__reactRouterVersion="7.9.6")}catch{}function I3({basename:t,children:e,window:n}){let i=x.useRef();i.current==null&&(i.current=cU({window:n,v5Compat:!0}));let r=i.current,[s,a]=x.useState({action:r.action,location:r.location}),o=x.useCallback(l=>{x.startTransition(()=>a(l))},[a]);return x.useLayoutEffect(()=>r.listen(o),[r,o]),x.createElement(t3,{basename:t,children:e,location:s.location,navigationType:s.action,navigator:r})}var lN=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Xn=x.forwardRef(function({onClick:e,discover:n="render",prefetch:i="none",relative:r,reloadDocument:s,replace:a,state:o,target:l,to:c,preventScrollReset:h,viewTransition:d,...f},p){let{basename:w}=x.useContext(Si),E=typeof c=="string"&&lN.test(c),R,b=!1;if(typeof c=="string"&&E&&(R=c,oN))try{let I=new URL(window.location.href),P=c.startsWith("//")?new URL(I.protocol+c):new URL(c),D=Rr(P.pathname,w);P.origin===I.origin&&D!=null?c=D+P.search+P.hash:b=!0}catch{Rn(!1,`<Link to="${c}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let v=LU(c,{relative:r}),[_,S,k]=w3(i,f),O=C3(c,{replace:a,state:o,target:l,preventScrollReset:h,relative:r,viewTransition:d});function A(I){e&&e(I),I.defaultPrevented||O(I)}let T=x.createElement("a",{...f,...k,href:R||v,onClick:b||s?e:A,ref:S3(p,S),target:l,"data-discover":!E&&n==="render"?"true":void 0});return _&&!E?x.createElement(x.Fragment,null,T,x.createElement(T3,{page:v})):T});Xn.displayName="Link";var gi=x.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:i="",end:r=!1,style:s,to:a,viewTransition:o,children:l,...c},h){let d=pd(a,{relative:c.relative}),f=fi(),p=x.useContext($p),{navigator:w,basename:E}=x.useContext(Si),R=p!=null&&O3(d)&&o===!0,b=w.encodeLocation?w.encodeLocation(d).pathname:d.pathname,v=f.pathname,_=p&&p.navigation&&p.navigation.location?p.navigation.location.pathname:null;n||(v=v.toLowerCase(),_=_?_.toLowerCase():null,b=b.toLowerCase()),_&&E&&(_=Rr(_,E)||_);const S=b!=="/"&&b.endsWith("/")?b.length-1:b.length;let k=v===b||!r&&v.startsWith(b)&&v.charAt(S)==="/",O=_!=null&&(_===b||!r&&_.startsWith(b)&&_.charAt(b.length)==="/"),A={isActive:k,isPending:O,isTransitioning:R},T=k?e:void 0,I;typeof i=="function"?I=i(A):I=[i,k?"active":null,O?"pending":null,R?"transitioning":null].filter(Boolean).join(" ");let P=typeof s=="function"?s(A):s;return x.createElement(Xn,{...c,"aria-current":T,className:I,ref:h,style:P,to:a,viewTransition:o},typeof l=="function"?l(A):l)});gi.displayName="NavLink";var x3=x.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:i,replace:r,state:s,method:a=Xf,action:o,onSubmit:l,relative:c,preventScrollReset:h,viewTransition:d,...f},p)=>{let w=k3(),E=V3(o,{relative:c}),R=a.toLowerCase()==="get"?"get":"post",b=typeof o=="string"&&lN.test(o),v=_=>{if(l&&l(_),_.defaultPrevented)return;_.preventDefault();let S=_.nativeEvent.submitter,k=(S==null?void 0:S.getAttribute("formmethod"))||a;w(S||_.currentTarget,{fetcherKey:e,method:k,navigate:n,replace:r,state:s,relative:c,preventScrollReset:h,viewTransition:d})};return x.createElement("form",{ref:p,method:R,action:E,onSubmit:i?l:v,...f,"data-discover":!b&&t==="render"?"true":void 0})});x3.displayName="Form";function R3(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function cN(t){let e=x.useContext(gc);return Ze(e,R3(t)),e}function C3(t,{target:e,replace:n,state:i,preventScrollReset:r,relative:s,viewTransition:a}={}){let o=_c(),l=fi(),c=pd(t,{relative:s});return x.useCallback(h=>{if(o3(h,e)){h.preventDefault();let d=n!==void 0?n:xh(l)===xh(c);o(t,{replace:d,state:i,preventScrollReset:r,relative:s,viewTransition:a})}},[l,o,c,n,i,e,t,r,s,a])}function P3(t){Rn(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=x.useRef(Pv(t)),n=x.useRef(!1),i=fi(),r=x.useMemo(()=>l3(i.search,n.current?null:e.current),[i.search]),s=_c(),a=x.useCallback((o,l)=>{const c=Pv(typeof o=="function"?o(new URLSearchParams(r)):o);n.current=!0,s("?"+c,l)},[s,r]);return[r,a]}var N3=0,D3=()=>`__${String(++N3)}__`;function k3(){let{router:t}=cN("useSubmit"),{basename:e}=x.useContext(Si),n=YU();return x.useCallback(async(i,r={})=>{let{action:s,method:a,encType:o,formData:l,body:c}=h3(i,e);if(r.navigate===!1){let h=r.fetcherKey||D3();await t.fetch(h,n,r.action||s,{preventScrollReset:r.preventScrollReset,formData:l,body:c,formMethod:r.method||a,formEncType:r.encType||o,flushSync:r.flushSync})}else await t.navigate(r.action||s,{preventScrollReset:r.preventScrollReset,formData:l,body:c,formMethod:r.method||a,formEncType:r.encType||o,replace:r.replace,state:r.state,fromRouteId:n,flushSync:r.flushSync,viewTransition:r.viewTransition})},[t,e,n])}function V3(t,{relative:e}={}){let{basename:n}=x.useContext(Si),i=x.useContext(Ii);Ze(i,"useFormAction must be used inside a RouteContext");let[r]=i.matches.slice(-1),s={...pd(t||".",{relative:e})},a=fi();if(t==null){s.search=a.search;let o=new URLSearchParams(s.search),l=o.getAll("index");if(l.some(h=>h==="")){o.delete("index"),l.filter(d=>d).forEach(d=>o.append("index",d));let h=o.toString();s.search=h?`?${h}`:""}}return(!t||t===".")&&r.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(s.pathname=s.pathname==="/"?n:yr([n,s.pathname])),xh(s)}function O3(t,{relative:e}={}){let n=x.useContext(eN);Ze(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=cN("useViewTransitionState"),r=pd(t,{relative:e});if(!n.isTransitioning)return!1;let s=Rr(n.currentLocation.pathname,i)||n.currentLocation.pathname,a=Rr(n.nextLocation.pathname,i)||n.nextLocation.pathname;return $m(r.pathname,a)!=null||$m(r.pathname,s)!=null}/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M3=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),L3=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,i)=>i?i.toUpperCase():n.toLowerCase()),iI=t=>{const e=L3(t);return e.charAt(0).toUpperCase()+e.slice(1)},uN=(...t)=>t.filter((e,n,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===n).join(" ").trim(),U3=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var j3={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z3=x.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:i,className:r="",children:s,iconNode:a,...o},l)=>x.createElement("svg",{ref:l,...j3,width:e,height:e,stroke:t,strokeWidth:i?Number(n)*24/Number(e):n,className:uN("lucide",r),...!s&&!U3(o)&&{"aria-hidden":"true"},...o},[...a.map(([c,h])=>x.createElement(c,h)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Se=(t,e)=>{const n=x.forwardRef(({className:i,...r},s)=>x.createElement(z3,{ref:s,iconNode:e,className:uN(`lucide-${M3(iI(t))}`,`lucide-${t}`,i),...r}));return n.displayName=iI(t),n};/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B3=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],hN=Se("arrow-left",B3);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F3=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],q3=Se("arrow-right",F3);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H3=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],rI=Se("check",H3);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G3=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],$3=Se("chevron-down",G3);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K3=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Kb=Se("circle-alert",K3);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W3=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],dN=Se("circle-check-big",W3);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q3=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Y3=Se("circle-x",Q3);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X3=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],fN=Se("eye-off",X3);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J3=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],mN=Se("eye",J3);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z3=[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]],ej=Se("facebook",Z3);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tj=[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]],nj=Se("gift",tj);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ij=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],pN=Se("info",ij);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rj=[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]],sj=Se("instagram",rj);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aj=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],_r=Se("loader-circle",aj);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oj=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Nv=Se("lock",oj);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lj=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],sI=Se("log-out",lj);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cj=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],Wp=Se("mail",cj);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uj=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],hj=Se("map-pin",uj);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dj=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],fj=Se("menu",dj);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mj=[["path",{d:"M5 12h14",key:"1ays0h"}]],Dv=Se("minus",mj);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pj=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],Wb=Se("phone",pj);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gj=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],gN=Se("plus",gj);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yj=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],_j=Se("refresh-cw",yj);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vj=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]],bj=Se("shield-alert",vj);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wj=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Tj=Se("shield-check",wj);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ej=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],vf=Se("shield",Ej);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aj=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],Sj=Se("shopping-cart",Aj);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ij=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],xj=Se("trash-2",Ij);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rj=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Cj=Se("triangle-alert",Rj);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pj=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],kv=Se("user",Pj);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nj=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],gd=Se("x",Nj),Dj=()=>{};var aI={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yN=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},kj=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=t[n++];e[i++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){const s=t[n++],a=t[n++],o=t[n++],l=((r&7)<<18|(s&63)<<12|(a&63)<<6|o&63)-65536;e[i++]=String.fromCharCode(55296+(l>>10)),e[i++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],a=t[n++];e[i++]=String.fromCharCode((r&15)<<12|(s&63)<<6|a&63)}}return e.join("")},_N={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){const s=t[r],a=r+1<t.length,o=a?t[r+1]:0,l=r+2<t.length,c=l?t[r+2]:0,h=s>>2,d=(s&3)<<4|o>>4;let f=(o&15)<<2|c>>6,p=c&63;l||(p=64,a||(f=64)),i.push(n[h],n[d],n[f],n[p])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(yN(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):kj(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){const s=n[t.charAt(r++)],o=r<t.length?n[t.charAt(r)]:0;++r;const c=r<t.length?n[t.charAt(r)]:64;++r;const d=r<t.length?n[t.charAt(r)]:64;if(++r,s==null||o==null||c==null||d==null)throw new Vj;const f=s<<2|o>>4;if(i.push(f),c!==64){const p=o<<4&240|c>>2;if(i.push(p),d!==64){const w=c<<6&192|d;i.push(w)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Vj extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Oj=function(t){const e=yN(t);return _N.encodeByteArray(e,!0)},Km=function(t){return Oj(t).replace(/\./g,"")},Qb=function(t){try{return _N.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Wm(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!Mj(n)||(t[n]=Wm(t[n],e[n]));return t}function Mj(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yb(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lj=()=>Yb().__FIREBASE_DEFAULTS__,Uj=()=>{if(typeof process>"u"||typeof aI>"u")return;const t=aI.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},jj=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Qb(t[1]);return e&&JSON.parse(e)},Xb=()=>{try{return Dj()||Lj()||Uj()||jj()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Jb=()=>{var t;return(t=Xb())==null?void 0:t.config},zj=t=>{var e;return(e=Xb())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bj{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zs(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Zb(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vN(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",r=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Km(JSON.stringify(n)),Km(JSON.stringify(a)),""].join(".")}const $u={};function Fj(){const t={prod:[],emulator:[]};for(const e of Object.keys($u))$u[e]?t.emulator.push(e):t.prod.push(e);return t}function qj(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let oI=!1;function ew(t,e){if(typeof window>"u"||typeof document>"u"||!Zs(window.location.host)||$u[t]===e||$u[t]||oI)return;$u[t]=e;function n(f){return`__firebase__banner__${f}`}const i="__firebase__banner",s=Fj().prod.length>0;function a(){const f=document.getElementById(i);f&&f.remove()}function o(f){f.style.display="flex",f.style.background="#7faaf0",f.style.position="fixed",f.style.bottom="5px",f.style.left="5px",f.style.padding=".5em",f.style.borderRadius="5px",f.style.alignItems="center"}function l(f,p){f.setAttribute("width","24"),f.setAttribute("id",p),f.setAttribute("height","24"),f.setAttribute("viewBox","0 0 24 24"),f.setAttribute("fill","none"),f.style.marginLeft="-6px"}function c(){const f=document.createElement("span");return f.style.cursor="pointer",f.style.marginLeft="16px",f.style.fontSize="24px",f.innerHTML=" &times;",f.onclick=()=>{oI=!0,a()},f}function h(f,p){f.setAttribute("id",p),f.innerText="Learn more",f.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",f.setAttribute("target","__blank"),f.style.paddingLeft="5px",f.style.textDecoration="underline"}function d(){const f=qj(i),p=n("text"),w=document.getElementById(p)||document.createElement("span"),E=n("learnmore"),R=document.getElementById(E)||document.createElement("a"),b=n("preprendIcon"),v=document.getElementById(b)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(f.created){const _=f.element;o(_),h(R,E);const S=c();l(v,b),_.append(v,w,R,S),document.body.appendChild(_)}s?(w.innerText="Preview backend disconnected.",v.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(v.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,w.innerText="Preview backend running in this workspace."),w.setAttribute("id",p)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",d):d()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Hj(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(tt())}function Qp(){var e;const t=(e=Xb())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Gj(){return typeof window<"u"||bN()}function bN(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function $j(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function wN(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function tw(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function TN(){const t=tt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function EN(){return!Qp()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function AN(){return!Qp()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function Rh(){try{return typeof indexedDB=="object"}catch{return!1}}function Kj(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var s;e(((s=r.error)==null?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wj="FirebaseError";class rn extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=Wj,Object.setPrototypeOf(this,rn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,yo.prototype.create)}}class yo{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},r=`${this.service}/${e}`,s=this.errors[e],a=s?Qj(s,i):"Error",o=`${this.serviceName}: ${a} (${r}).`;return new rn(r,o,i)}}function Qj(t,e){return t.replace(Yj,(n,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const Yj=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lI(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Xj(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Us(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const s=t[r],a=e[r];if(cI(s)&&cI(a)){if(!Us(s,a))return!1}else if(s!==a)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function cI(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vc(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function rl(t){const e={};return t.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[r,s]=i.split("=");e[decodeURIComponent(r)]=decodeURIComponent(s)}}),e}function wu(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function SN(t,e){const n=new Jj(t,e);return n.subscribe.bind(n)}class Jj{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let r;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");Zj(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:i},r.next===void 0&&(r.next=Qy),r.error===void 0&&(r.error=Qy),r.complete===void 0&&(r.complete=Qy);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Zj(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Qy(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ee(t){return t&&t._delegate?t._delegate:t}class hi{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wa="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e9{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new Bj;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(r){if(i)return null;throw r}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(n9(e))try{this.getOrInitializeService({instanceIdentifier:wa})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:r});i.resolve(s)}catch{}}}}clearInstance(e=wa){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=wa){return this.instances.has(e)}getOptions(e=wa){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[s,a]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(s);i===o&&a.resolve(r)}return r}onInit(e,n){const i=this.normalizeInstanceIdentifier(n),r=this.onInitCallbacks.get(i)??new Set;r.add(e),this.onInitCallbacks.set(i,r);const s=this.instances.get(i);return s&&e(s,i),()=>{r.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:t9(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=wa){return this.component?this.component.multipleInstances?e:wa:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function t9(t){return t===wa?void 0:t}function n9(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IN{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new e9(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nw=[];var me;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(me||(me={}));const xN={debug:me.DEBUG,verbose:me.VERBOSE,info:me.INFO,warn:me.WARN,error:me.ERROR,silent:me.SILENT},i9=me.INFO,r9={[me.DEBUG]:"log",[me.VERBOSE]:"log",[me.INFO]:"info",[me.WARN]:"warn",[me.ERROR]:"error"},s9=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),r=r9[e];if(r)console[r](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Yp{constructor(e){this.name=e,this._logLevel=i9,this._logHandler=s9,this._userLogHandler=null,nw.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in me))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?xN[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,me.DEBUG,...e),this._logHandler(this,me.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,me.VERBOSE,...e),this._logHandler(this,me.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,me.INFO,...e),this._logHandler(this,me.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,me.WARN,...e),this._logHandler(this,me.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,me.ERROR,...e),this._logHandler(this,me.ERROR,...e)}}function a9(t){nw.forEach(e=>{e.setLogLevel(t)})}function o9(t,e){for(const n of nw){let i=null;e&&e.level&&(i=xN[e.level]),t===null?n.userLogHandler=null:n.userLogHandler=(r,s,...a)=>{const o=a.map(l=>{if(l==null)return null;if(typeof l=="string")return l;if(typeof l=="number"||typeof l=="boolean")return l.toString();if(l instanceof Error)return l.message;try{return JSON.stringify(l)}catch{return null}}).filter(l=>l).join(" ");s>=(i??r.logLevel)&&t({level:me[s].toLowerCase(),message:o,args:a,type:r.name})}}}const l9=(t,e)=>e.some(n=>t instanceof n);let uI,hI;function c9(){return uI||(uI=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function u9(){return hI||(hI=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const RN=new WeakMap,Vv=new WeakMap,CN=new WeakMap,Yy=new WeakMap,iw=new WeakMap;function h9(t){const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("success",s),t.removeEventListener("error",a)},s=()=>{n(Cs(t.result)),r()},a=()=>{i(t.error),r()};t.addEventListener("success",s),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&RN.set(n,t)}).catch(()=>{}),iw.set(e,t),e}function d9(t){if(Vv.has(t))return;const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",a),t.removeEventListener("abort",a)},s=()=>{n(),r()},a=()=>{i(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",s),t.addEventListener("error",a),t.addEventListener("abort",a)});Vv.set(t,e)}let Ov={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Vv.get(t);if(e==="objectStoreNames")return t.objectStoreNames||CN.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Cs(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function f9(t){Ov=t(Ov)}function m9(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(Xy(this),e,...n);return CN.set(i,e.sort?e.sort():[e]),Cs(i)}:u9().includes(t)?function(...e){return t.apply(Xy(this),e),Cs(RN.get(this))}:function(...e){return Cs(t.apply(Xy(this),e))}}function p9(t){return typeof t=="function"?m9(t):(t instanceof IDBTransaction&&d9(t),l9(t,c9())?new Proxy(t,Ov):t)}function Cs(t){if(t instanceof IDBRequest)return h9(t);if(Yy.has(t))return Yy.get(t);const e=p9(t);return e!==t&&(Yy.set(t,e),iw.set(e,t)),e}const Xy=t=>iw.get(t);function g9(t,e,{blocked:n,upgrade:i,blocking:r,terminated:s}={}){const a=indexedDB.open(t,e),o=Cs(a);return i&&a.addEventListener("upgradeneeded",l=>{i(Cs(a.result),l.oldVersion,l.newVersion,Cs(a.transaction),l)}),n&&a.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),o.then(l=>{s&&l.addEventListener("close",()=>s()),r&&l.addEventListener("versionchange",c=>r(c.oldVersion,c.newVersion,c))}).catch(()=>{}),o}const y9=["get","getKey","getAll","getAllKeys","count"],_9=["put","add","delete","clear"],Jy=new Map;function dI(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Jy.get(e))return Jy.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=_9.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||y9.includes(n)))return;const s=async function(a,...o){const l=this.transaction(a,r?"readwrite":"readonly");let c=l.store;return i&&(c=c.index(o.shift())),(await Promise.all([c[n](...o),r&&l.done]))[0]};return Jy.set(e,s),s}f9(t=>({...t,get:(e,n,i)=>dI(e,n)||t.get(e,n,i),has:(e,n)=>!!dI(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v9{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(b9(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function b9(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Qm="@firebase/app",Mv="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cr=new Yp("@firebase/app"),w9="@firebase/app-compat",T9="@firebase/analytics-compat",E9="@firebase/analytics",A9="@firebase/app-check-compat",S9="@firebase/app-check",I9="@firebase/auth",x9="@firebase/auth-compat",R9="@firebase/database",C9="@firebase/data-connect",P9="@firebase/database-compat",N9="@firebase/functions",D9="@firebase/functions-compat",k9="@firebase/installations",V9="@firebase/installations-compat",O9="@firebase/messaging",M9="@firebase/messaging-compat",L9="@firebase/performance",U9="@firebase/performance-compat",j9="@firebase/remote-config",z9="@firebase/remote-config-compat",B9="@firebase/storage",F9="@firebase/storage-compat",q9="@firebase/firestore",H9="@firebase/ai",G9="@firebase/firestore-compat",$9="firebase",K9="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const js="[DEFAULT]",W9={[Qm]:"fire-core",[w9]:"fire-core-compat",[E9]:"fire-analytics",[T9]:"fire-analytics-compat",[S9]:"fire-app-check",[A9]:"fire-app-check-compat",[I9]:"fire-auth",[x9]:"fire-auth-compat",[R9]:"fire-rtdb",[C9]:"fire-data-connect",[P9]:"fire-rtdb-compat",[N9]:"fire-fn",[D9]:"fire-fn-compat",[k9]:"fire-iid",[V9]:"fire-iid-compat",[O9]:"fire-fcm",[M9]:"fire-fcm-compat",[L9]:"fire-perf",[U9]:"fire-perf-compat",[j9]:"fire-rc",[z9]:"fire-rc-compat",[B9]:"fire-gcs",[F9]:"fire-gcs-compat",[q9]:"fire-fst",[G9]:"fire-fst-compat",[H9]:"fire-vertex","fire-js":"fire-js",[$9]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zs=new Map,Ml=new Map,Ll=new Map;function Ch(t,e){try{t.container.addComponent(e)}catch(n){Cr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function PN(t,e){t.container.addOrOverwriteComponent(e)}function Pr(t){const e=t.name;if(Ll.has(e))return Cr.debug(`There were multiple attempts to register component ${e}.`),!1;Ll.set(e,t);for(const n of zs.values())Ch(n,t);for(const n of Ml.values())Ch(n,t);return!0}function NN(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Q9(t,e,n=js){NN(t,e).clearInstance(n)}function rw(t){return t.options!==void 0}function DN(t){return rw(t)?!1:"authIdToken"in t||"appCheckToken"in t||"releaseOnDeref"in t||"automaticDataCollectionEnabled"in t}function qe(t){return t==null?!1:t.settings!==void 0}function Y9(){Ll.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X9={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Fn=new yo("app","Firebase",X9);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kN=class{constructor(e,n,i){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new hi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Fn.create("app-deleted",{appName:this._name})}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fI(t,e){const n=Qb(t.split(".")[1]);if(n===null){console.error(`FirebaseServerApp ${e} is invalid: second part could not be parsed.`);return}if(JSON.parse(n).exp===void 0){console.error(`FirebaseServerApp ${e} is invalid: expiration claim could not be parsed`);return}const r=JSON.parse(n).exp*1e3,s=new Date().getTime();r-s<=0&&console.error(`FirebaseServerApp ${e} is invalid: the token has expired.`)}class J9 extends kN{constructor(e,n,i,r){const s=n.automaticDataCollectionEnabled!==void 0?n.automaticDataCollectionEnabled:!0,a={name:i,automaticDataCollectionEnabled:s};if(e.apiKey!==void 0)super(e,a,r);else{const o=e;super(o.options,a,r)}this._serverConfig={automaticDataCollectionEnabled:s,...n},this._serverConfig.authIdToken&&fI(this._serverConfig.authIdToken,"authIdToken"),this._serverConfig.appCheckToken&&fI(this._serverConfig.appCheckToken,"appCheckToken"),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,n.releaseOnDeref=void 0,qn(Qm,Mv,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,e!==void 0&&this._finalizationRegistry!==null&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){aw(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw Fn.create("server-app-deleted")}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lr=K9;function sw(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i={name:js,automaticDataCollectionEnabled:!0,...e},r=i.name;if(typeof r!="string"||!r)throw Fn.create("bad-app-name",{appName:String(r)});if(n||(n=Jb()),!n)throw Fn.create("no-options");const s=zs.get(r);if(s){if(Us(n,s.options)&&Us(i,s.config))return s;throw Fn.create("duplicate-app",{appName:r})}const a=new IN(r);for(const l of Ll.values())a.addComponent(l);const o=new kN(n,i,a);return zs.set(r,o),o}function Z9(t,e={}){if(Gj()&&!bN())throw Fn.create("invalid-server-app-environment");let n,i=e||{};if(t&&(rw(t)?n=t.options:DN(t)?i=t:n=t),i.automaticDataCollectionEnabled===void 0&&(i.automaticDataCollectionEnabled=!0),n||(n=Jb()),!n)throw Fn.create("no-options");const r={...i,...n};r.releaseOnDeref!==void 0&&delete r.releaseOnDeref;const s=h=>[...h].reduce((d,f)=>Math.imul(31,d)+f.charCodeAt(0)|0,0);if(i.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw Fn.create("finalization-registry-not-supported",{});const a=""+s(JSON.stringify(r)),o=Ml.get(a);if(o)return o.incRefCount(i.releaseOnDeref),o;const l=new IN(a);for(const h of Ll.values())l.addComponent(h);const c=new J9(n,i,a,l);return Ml.set(a,c),c}function ez(t=js){const e=zs.get(t);if(!e&&t===js&&Jb())return sw();if(!e)throw Fn.create("no-app",{appName:t});return e}function tz(){return Array.from(zs.values())}async function aw(t){let e=!1;const n=t.name;zs.has(n)?(e=!0,zs.delete(n)):Ml.has(n)&&t.decRefCount()<=0&&(Ml.delete(n),e=!0),e&&(await Promise.all(t.container.getProviders().map(i=>i.delete())),t.isDeleted=!0)}function qn(t,e,n){let i=W9[t]??t;n&&(i+=`-${n}`);const r=i.match(/\s|\//),s=e.match(/\s|\//);if(r||s){const a=[`Unable to register library "${i}" with version "${e}":`];r&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),r&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Cr.warn(a.join(" "));return}Pr(new hi(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}function VN(t,e){if(t!==null&&typeof t!="function")throw Fn.create("invalid-log-argument");o9(t,e)}function ON(t){a9(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nz="firebase-heartbeat-database",iz=1,Ph="firebase-heartbeat-store";let Zy=null;function MN(){return Zy||(Zy=g9(nz,iz,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ph)}catch(n){console.warn(n)}}}}).catch(t=>{throw Fn.create("idb-open",{originalErrorMessage:t.message})})),Zy}async function rz(t){try{const n=(await MN()).transaction(Ph),i=await n.objectStore(Ph).get(LN(t));return await n.done,i}catch(e){if(e instanceof rn)Cr.warn(e.message);else{const n=Fn.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Cr.warn(n.message)}}}async function mI(t,e){try{const i=(await MN()).transaction(Ph,"readwrite");await i.objectStore(Ph).put(e,LN(t)),await i.done}catch(n){if(n instanceof rn)Cr.warn(n.message);else{const i=Fn.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Cr.warn(i.message)}}}function LN(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sz=1024,az=30;class oz{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new cz(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=pI();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:r}),this._heartbeatsCache.heartbeats.length>az){const a=uz(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Cr.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=pI(),{heartbeatsToSend:i,unsentEntries:r}=lz(this._heartbeatsCache.heartbeats),s=Km(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Cr.warn(n),""}}}function pI(){return new Date().toISOString().substring(0,10)}function lz(t,e=sz){const n=[];let i=t.slice();for(const r of t){const s=n.find(a=>a.agent===r.agent);if(s){if(s.dates.push(r.date),gI(n)>e){s.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),gI(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class cz{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Rh()?Kj().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await rz(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return mI(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return mI(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function gI(t){return Km(JSON.stringify({version:2,heartbeats:t})).length}function uz(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let i=1;i<t.length;i++)t[i].date<n&&(n=t[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hz(t){Pr(new hi("platform-logger",e=>new v9(e),"PRIVATE")),Pr(new hi("heartbeat",e=>new oz(e),"PRIVATE")),qn(Qm,Mv,t),qn(Qm,Mv,"esm2020"),qn("fire-js","")}hz("");const dz=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:rn,SDK_VERSION:Lr,_DEFAULT_ENTRY_NAME:js,_addComponent:Ch,_addOrOverwriteComponent:PN,_apps:zs,_clearComponents:Y9,_components:Ll,_getProvider:NN,_isFirebaseApp:rw,_isFirebaseServerApp:qe,_isFirebaseServerAppSettings:DN,_registerComponent:Pr,_removeServiceInstance:Q9,_serverApps:Ml,deleteApp:aw,getApp:ez,getApps:tz,initializeApp:sw,initializeServerApp:Z9,onLog:VN,registerVersion:qn,setLogLevel:ON},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fz{constructor(e,n){this._delegate=e,this.firebase=n,Ch(e,new hi("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),aw(this._delegate)))}_getService(e,n=js){var r;this._delegate.checkDestroyed();const i=this._delegate.container.getProvider(e);return!i.isInitialized()&&((r=i.getComponent())==null?void 0:r.instantiationMode)==="EXPLICIT"&&i.initialize(),i.getImmediate({identifier:n})}_removeServiceInstance(e,n=js){this._delegate.container.getProvider(e).clearInstance(n)}_addComponent(e){Ch(this._delegate,e)}_addOrOverwriteComponent(e){PN(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mz={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},yI=new yo("app-compat","Firebase",mz);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pz(t){const e={},n={__esModule:!0,initializeApp:s,app:r,registerVersion:qn,setLogLevel:ON,onLog:VN,apps:null,SDK_VERSION:Lr,INTERNAL:{registerComponent:o,removeApp:i,useAsService:l,modularAPIs:dz}};n.default=n,Object.defineProperty(n,"apps",{get:a});function i(c){delete e[c]}function r(c){if(c=c||js,!lI(e,c))throw yI.create("no-app",{appName:c});return e[c]}r.App=t;function s(c,h={}){const d=sw(c,h);if(lI(e,d.name))return e[d.name];const f=new t(d,n);return e[d.name]=f,f}function a(){return Object.keys(e).map(c=>e[c])}function o(c){const h=c.name,d=h.replace("-compat","");if(Pr(c)&&c.type==="PUBLIC"){const f=(p=r())=>{if(typeof p[d]!="function")throw yI.create("invalid-app-argument",{appName:h});return p[d]()};c.serviceProps!==void 0&&Wm(f,c.serviceProps),n[d]=f,t.prototype[d]=function(...p){return this._getService.bind(this,h).apply(this,c.multipleInstances?p:[])}}return c.type==="PUBLIC"?n[d]:null}function l(c,h){return h==="serverAuth"?null:h}return n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UN(){const t=pz(fz);t.INTERNAL={...t.INTERNAL,createFirebaseNamespace:UN,extendNamespace:e,createSubscribe:SN,ErrorFactory:yo,deepExtend:Wm};function e(n){Wm(t,n)}return t}const gz=UN();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _I=new Yp("@firebase/app-compat"),yz="@firebase/app-compat",_z="0.5.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vz(t){qn(yz,_z,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */try{const t=Yb();if(t.firebase!==void 0){_I.warn(`
      Warning: Firebase is already defined in the global scope. Please make sure
      Firebase library is only loaded once.
    `);const e=t.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&_I.warn(`
        Warning: You are trying to load Firebase while using Firebase Performance standalone script.
        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
        `)}}catch{}const Ht=gz;vz();var bz="firebase",wz="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ht.registerVersion(bz,wz,"app-compat");const su={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",TWITTER:"twitter.com"},Po={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tz(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements.","invalid-hosting-link-domain":"The provided Hosting link domain is not configured in Firebase Hosting or is not owned by the current project. This cannot be a default Hosting domain (`web.app` or `firebaseapp.com`)."}}function jN(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Ez=Tz,Az=jN,zN=new yo("auth","Firebase",jN());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ym=new Yp("@firebase/auth");function Sz(t,...e){Ym.logLevel<=me.WARN&&Ym.warn(`Auth (${Lr}): ${t}`,...e)}function Zf(t,...e){Ym.logLevel<=me.ERROR&&Ym.error(`Auth (${Lr}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qt(t,...e){throw lw(t,...e)}function Rt(t,...e){return lw(t,...e)}function ow(t,e,n){const i={...Az(),[e]:n};return new yo("auth","Firebase",i).create(e,{appName:t.name})}function Ut(t){return ow(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function bc(t,e,n){const i=n;if(!(e instanceof i))throw i.name!==e.constructor.name&&Qt(t,"argument-error"),ow(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function lw(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return zN.create(t,...e)}function G(t,e,...n){if(!t)throw lw(e,...n)}function zi(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Zf(e),new Error(e)}function Ei(t,e){t||zi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nh(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function cw(){return vI()==="http:"||vI()==="https:"}function vI(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iz(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(cw()||wN()||"connection"in navigator)?navigator.onLine:!0}function xz(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yd{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ei(n>e,"Short delay should be less than long delay!"),this.isMobile=Hj()||tw()}get(){return Iz()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uw(t,e){Ei(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BN{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;zi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;zi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;zi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rz={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cz=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Pz=new yd(3e4,6e4);function ct(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function ut(t,e,n,i,r={}){return FN(t,r,async()=>{let s={},a={};i&&(e==="GET"?a=i:s={body:JSON.stringify(i)});const o=vc({key:t.config.apiKey,...a}).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c={method:e,headers:l,...s};return $j()||(c.referrerPolicy="no-referrer"),t.emulatorConfig&&Zs(t.emulatorConfig.host)&&(c.credentials="include"),BN.fetch()(await qN(t,t.config.apiHost,n,o),c)})}async function FN(t,e,n){t._canInitEmulator=!1;const i={...Rz,...e};try{const r=new Dz(t),s=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const a=await s.json();if("needConfirmation"in a)throw Tu(t,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{const o=s.ok?a.errorMessage:a.error.message,[l,c]=o.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Tu(t,"credential-already-in-use",a);if(l==="EMAIL_EXISTS")throw Tu(t,"email-already-in-use",a);if(l==="USER_DISABLED")throw Tu(t,"user-disabled",a);const h=i[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw ow(t,h,c);Qt(t,h)}}catch(r){if(r instanceof rn)throw r;Qt(t,"network-request-failed",{message:String(r)})}}async function Ur(t,e,n,i,r={}){const s=await ut(t,e,n,i,r);return"mfaPendingCredential"in s&&Qt(t,"multi-factor-auth-required",{_serverResponse:s}),s}async function qN(t,e,n,i){const r=`${e}${n}?${i}`,s=t,a=s.config.emulator?uw(t.config,r):`${t.config.apiScheme}://${r}`;return Cz.includes(n)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(a).toString():a}function Nz(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Dz{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(Rt(this.auth,"network-request-failed")),Pz.get())})}}function Tu(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=Rt(t,e,i);return r.customData._tokenResponse=n,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bI(t){return t!==void 0&&t.getResponse!==void 0}function wI(t){return t!==void 0&&t.enterprise!==void 0}class HN{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return Nz(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kz(t){return(await ut(t,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function GN(t,e){return ut(t,"GET","/v2/recaptchaConfig",ct(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vz(t,e){return ut(t,"POST","/v1/accounts:delete",e)}async function Oz(t,e){return ut(t,"POST","/v1/accounts:update",e)}async function Xm(t,e){return ut(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ku(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Mz(t,e=!1){const n=ee(t),i=await n.getIdToken(e),r=Xp(i);G(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const s=typeof r.firebase=="object"?r.firebase:void 0,a=s==null?void 0:s.sign_in_provider;return{claims:r,token:i,authTime:Ku(e_(r.auth_time)),issuedAtTime:Ku(e_(r.iat)),expirationTime:Ku(e_(r.exp)),signInProvider:a||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function e_(t){return Number(t)*1e3}function Xp(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return Zf("JWT malformed, contained fewer than 3 sections"),null;try{const r=Qb(n);return r?JSON.parse(r):(Zf("Failed to decode base64 JWT payload"),null)}catch(r){return Zf("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function TI(t){const e=Xp(t);return G(e,"internal-error"),G(typeof e.exp<"u","internal-error"),G(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nr(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof rn&&Lz(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function Lz({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uz{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lv{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ku(this.lastLoginAt),this.creationTime=Ku(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dh(t){var d;const e=t.auth,n=await t.getIdToken(),i=await Nr(t,Xm(e,{idToken:n}));G(i==null?void 0:i.users.length,e,"internal-error");const r=i.users[0];t._notifyReloadListener(r);const s=(d=r.providerUserInfo)!=null&&d.length?$N(r.providerUserInfo):[],a=zz(t.providerData,s),o=t.isAnonymous,l=!(t.email&&r.passwordHash)&&!(a!=null&&a.length),c=o?l:!1,h={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:a,metadata:new Lv(r.createdAt,r.lastLoginAt),isAnonymous:c};Object.assign(t,h)}async function jz(t){const e=ee(t);await Dh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function zz(t,e){return[...t.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function $N(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bz(t,e){const n=await FN(t,{},async()=>{const i=vc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:s}=t.config,a=await qN(t,r,"/v1/token",`key=${s}`),o=await t._getAdditionalHeaders();o["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:o,body:i};return t.emulatorConfig&&Zs(t.emulatorConfig.host)&&(l.credentials="include"),BN.fetch()(a,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Fz(t,e){return ut(t,"POST","/v2/accounts:revokeToken",ct(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _l{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){G(e.idToken,"internal-error"),G(typeof e.idToken<"u","internal-error"),G(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):TI(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){G(e.length!==0,"internal-error");const n=TI(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(G(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:r,expiresIn:s}=await Bz(e,n);this.updateTokensAndExpiration(i,r,Number(s))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:r,expirationTime:s}=n,a=new _l;return i&&(G(typeof i=="string","internal-error",{appName:e}),a.refreshToken=i),r&&(G(typeof r=="string","internal-error",{appName:e}),a.accessToken=r),s&&(G(typeof s=="number","internal-error",{appName:e}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new _l,this.toJSON())}_performRefresh(){return zi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zr(t,e){G(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class bi{constructor({uid:e,auth:n,stsTokenManager:i,...r}){this.providerId="firebase",this.proactiveRefresh=new Uz(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new Lv(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const n=await Nr(this,this.stsTokenManager.getToken(this.auth,e));return G(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return Mz(this,e)}reload(){return jz(this)}_assign(e){this!==e&&(G(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new bi({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){G(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await Dh(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(qe(this.auth.app))return Promise.reject(Ut(this.auth));const e=await this.getIdToken();return await Nr(this,Vz(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const i=n.displayName??void 0,r=n.email??void 0,s=n.phoneNumber??void 0,a=n.photoURL??void 0,o=n.tenantId??void 0,l=n._redirectEventId??void 0,c=n.createdAt??void 0,h=n.lastLoginAt??void 0,{uid:d,emailVerified:f,isAnonymous:p,providerData:w,stsTokenManager:E}=n;G(d&&E,e,"internal-error");const R=_l.fromJSON(this.name,E);G(typeof d=="string",e,"internal-error"),Zr(i,e.name),Zr(r,e.name),G(typeof f=="boolean",e,"internal-error"),G(typeof p=="boolean",e,"internal-error"),Zr(s,e.name),Zr(a,e.name),Zr(o,e.name),Zr(l,e.name),Zr(c,e.name),Zr(h,e.name);const b=new bi({uid:d,auth:e,email:r,emailVerified:f,displayName:i,isAnonymous:p,photoURL:a,phoneNumber:s,tenantId:o,stsTokenManager:R,createdAt:c,lastLoginAt:h});return w&&Array.isArray(w)&&(b.providerData=w.map(v=>({...v}))),l&&(b._redirectEventId=l),b}static async _fromIdTokenResponse(e,n,i=!1){const r=new _l;r.updateFromServerResponse(n);const s=new bi({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await Dh(s),s}static async _fromGetAccountInfoResponse(e,n,i){const r=n.users[0];G(r.localId!==void 0,"internal-error");const s=r.providerUserInfo!==void 0?$N(r.providerUserInfo):[],a=!(r.email&&r.passwordHash)&&!(s!=null&&s.length),o=new _l;o.updateFromIdToken(i);const l=new bi({uid:r.localId,auth:e,stsTokenManager:o,isAnonymous:a}),c={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new Lv(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EI=new Map;function Ln(t){Ei(t instanceof Function,"Expected a class definition");let e=EI.get(t);return e?(Ei(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,EI.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KN{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}KN.type="NONE";const Ul=KN;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ba(t,e,n){return`firebase:${t}:${e}:${n}`}class vl{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:r,name:s}=this.auth;this.fullUserKey=Ba(this.userKey,r.apiKey,s),this.fullPersistenceKey=Ba("persistence",r.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Xm(this.auth,{idToken:e}).catch(()=>{});return n?bi._fromGetAccountInfoResponse(this.auth,n,e):null}return bi._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new vl(Ln(Ul),e,i);const r=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=r[0]||Ln(Ul);const a=Ba(i,e.config.apiKey,e.name);let o=null;for(const c of n)try{const h=await c._get(a);if(h){let d;if(typeof h=="string"){const f=await Xm(e,{idToken:h}).catch(()=>{});if(!f)break;d=await bi._fromGetAccountInfoResponse(e,f,h)}else d=bi._fromJSON(e,h);c!==s&&(o=d),s=c;break}}catch{}const l=r.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new vl(s,e,i):(s=l[0],o&&await s._set(a,o.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(a)}catch{}})),new vl(s,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AI(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(XN(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(WN(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(JN(e))return"Blackberry";if(ZN(e))return"Webos";if(QN(e))return"Safari";if((e.includes("chrome/")||YN(e))&&!e.includes("edge/"))return"Chrome";if(_d(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function WN(t=tt()){return/firefox\//i.test(t)}function QN(t=tt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function YN(t=tt()){return/crios\//i.test(t)}function XN(t=tt()){return/iemobile/i.test(t)}function _d(t=tt()){return/android/i.test(t)}function JN(t=tt()){return/blackberry/i.test(t)}function ZN(t=tt()){return/webos/i.test(t)}function vd(t=tt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function qz(t=tt()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(t)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(t)}function Hz(t=tt()){var e;return vd(t)&&!!((e=window.navigator)!=null&&e.standalone)}function Gz(){return TN()&&document.documentMode===10}function eD(t=tt()){return vd(t)||_d(t)||ZN(t)||JN(t)||/windows phone/i.test(t)||XN(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tD(t,e=[]){let n;switch(t){case"Browser":n=AI(tt());break;case"Worker":n=`${AI(tt())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Lr}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $z{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=s=>new Promise((a,o)=>{try{const l=e(s);a(l)}catch(l){o(l)}});i.onAbort=n,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kz(t,e={}){return ut(t,"GET","/v2/passwordPolicy",ct(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wz=6;class Qz{constructor(e){var i;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??Wz,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=e.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,r,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yz{constructor(e,n,i,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new SI(this),this.idTokenSubscription=new SI(this),this.beforeStateQueue=new $z(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=zN,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Ln(n)),this._initializationPromise=this.queue(async()=>{var i,r,s;if(!this._deleted&&(this.persistenceManager=await vl.create(this,e),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((r=this._popupRedirectResolver)!=null&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)==null?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Xm(this,{idToken:e}),i=await bi._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var s;if(qe(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(o,o))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(s=this.redirectUser)==null?void 0:s._redirectEventId,o=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!a||a===o)&&(l!=null&&l.user)&&(i=l.user,r=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(i)}catch(a){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return G(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Dh(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=xz()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(qe(this.app))return Promise.reject(Ut(this));const n=e?ee(e):null;return n&&G(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&G(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return qe(this.app)?Promise.reject(Ut(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return qe(this.app)?Promise.reject(Ut(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ln(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Kz(this),n=new Qz(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new yo("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await Fz(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Ln(e)||this._popupRedirectResolver;G(n,this,"argument-error"),this.redirectPersistenceManager=await vl.create(this,[Ln(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,r){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let a=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(G(o,this,"internal-error"),o.then(()=>{a||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,i,r);return()=>{a=!0,l()}}else{const l=e.addObserver(n);return()=>{a=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return G(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=tD(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var r;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((r=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:r.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var n;if(qe(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&Sz(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function nt(t){return ee(t)}class SI{constructor(e){this.auth=e,this.observer=null,this.addObserver=SN(n=>this.observer=n)}get next(){return G(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Xz(t){bd=t}function hw(t){return bd.loadJS(t)}function Jz(){return bd.recaptchaV2Script}function Zz(){return bd.recaptchaEnterpriseScript}function eB(){return bd.gapiScript}function nD(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tB=500,nB=6e4,bf=1e12;class iB{constructor(e){this.auth=e,this.counter=bf,this._widgets=new Map}render(e,n){const i=this.counter;return this._widgets.set(i,new aB(e,this.auth.name,n||{})),this.counter++,i}reset(e){var i;const n=e||bf;(i=this._widgets.get(n))==null||i.delete(),this._widgets.delete(n)}getResponse(e){var i;const n=e||bf;return((i=this._widgets.get(n))==null?void 0:i.getResponse())||""}async execute(e){var i;const n=e||bf;return(i=this._widgets.get(n))==null||i.execute(),""}}class rB{constructor(){this.enterprise=new sB}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class sB{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class aB{constructor(e,n,i){this.params=i,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const r=typeof e=="string"?document.getElementById(e):e;G(r,"argument-error",{appName:n}),this.container=r,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=oB(50);const{callback:e,"expired-callback":n}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,n)try{n()}catch{}this.isVisible&&this.execute()},nB)},tB))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function oB(t){const e=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let i=0;i<t;i++)e.push(n.charAt(Math.floor(Math.random()*n.length)));return e.join("")}const lB="recaptcha-enterprise",Wu="NO_RECAPTCHA";class iD{constructor(e){this.type=lB,this.auth=nt(e)}async verify(e="verify",n=!1){async function i(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(a,o)=>{GN(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)o(new Error("recaptcha Enterprise site key undefined"));else{const c=new HN(l);return s.tenantId==null?s._agentRecaptchaConfig=c:s._tenantRecaptchaConfigs[s.tenantId]=c,a(c.siteKey)}}).catch(l=>{o(l)})})}function r(s,a,o){const l=window.grecaptcha;wI(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(c=>{a(c)}).catch(()=>{a(Wu)})}):o(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new rB().execute("siteKey",{action:"verify"}):new Promise((s,a)=>{i(this.auth).then(o=>{if(!n&&wI(window.grecaptcha))r(o,s,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let l=Zz();l.length!==0&&(l+=o),hw(l).then(()=>{r(o,s,a)}).catch(c=>{a(c)})}}).catch(o=>{a(o)})})}}async function au(t,e,n,i=!1,r=!1){const s=new iD(t);let a;if(r)a=Wu;else try{a=await s.verify(n)}catch{a=await s.verify(n,!0)}const o={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in o){const l=o.phoneEnrollmentInfo.phoneNumber,c=o.phoneEnrollmentInfo.recaptchaToken;Object.assign(o,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:c,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in o){const l=o.phoneSignInInfo.recaptchaToken;Object.assign(o,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return o}return i?Object.assign(o,{captchaResp:a}):Object.assign(o,{captchaResponse:a}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Ps(t,e,n,i,r){var s,a;if(r==="EMAIL_PASSWORD_PROVIDER")if((s=t._getRecaptchaConfig())!=null&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await au(t,e,n,n==="getOobCode");return i(t,o)}else return i(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await au(t,e,n,n==="getOobCode");return i(t,l)}else return Promise.reject(o)});else if(r==="PHONE_PROVIDER")if((a=t._getRecaptchaConfig())!=null&&a.isProviderEnabled("PHONE_PROVIDER")){const o=await au(t,e,n);return i(t,o).catch(async l=>{var c;if(((c=t._getRecaptchaConfig())==null?void 0:c.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(l.code==="auth/missing-recaptcha-token"||l.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`);const h=await au(t,e,n,!1,!0);return i(t,h)}return Promise.reject(l)})}else{const o=await au(t,e,n,!1,!0);return i(t,o)}else return Promise.reject(r+" provider is not supported.")}async function cB(t){const e=nt(t),n=await GN(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),i=new HN(n);e.tenantId==null?e._agentRecaptchaConfig=i:e._tenantRecaptchaConfigs[e.tenantId]=i,i.isAnyProviderEnabled()&&new iD(e).verify()}function uB(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(Ln);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function hB(t,e,n){const i=nt(t);G(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!!(n!=null&&n.disableWarnings),s=rD(e),{host:a,port:o}=dB(e),l=o===null?"":`:${o}`,c={url:`${s}//${a}${l}/`},h=Object.freeze({host:a,port:o,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!i._canInitEmulator){G(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),G(Us(c,i.config.emulator)&&Us(h,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=c,i.emulatorConfig=h,i.settings.appVerificationDisabledForTesting=!0,Zs(a)?(Zb(`${s}//${a}${l}`),ew("Auth",!0)):r||fB()}function rD(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function dB(t){const e=rD(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const s=r[1];return{host:s,port:II(i.substr(s.length+1))}}else{const[s,a]=i.split(":");return{host:s,port:II(a)}}}function II(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function fB(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wc{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return zi("not implemented")}_getIdTokenResponse(e){return zi("not implemented")}_linkToIdToken(e,n){return zi("not implemented")}_getReauthenticationResolver(e){return zi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sD(t,e){return ut(t,"POST","/v1/accounts:resetPassword",ct(t,e))}async function mB(t,e){return ut(t,"POST","/v1/accounts:update",e)}async function pB(t,e){return ut(t,"POST","/v1/accounts:signUp",e)}async function gB(t,e){return ut(t,"POST","/v1/accounts:update",ct(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yB(t,e){return Ur(t,"POST","/v1/accounts:signInWithPassword",ct(t,e))}async function Jp(t,e){return ut(t,"POST","/v1/accounts:sendOobCode",ct(t,e))}async function _B(t,e){return Jp(t,e)}async function vB(t,e){return Jp(t,e)}async function bB(t,e){return Jp(t,e)}async function wB(t,e){return Jp(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TB(t,e){return Ur(t,"POST","/v1/accounts:signInWithEmailLink",ct(t,e))}async function EB(t,e){return Ur(t,"POST","/v1/accounts:signInWithEmailLink",ct(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kh extends wc{constructor(e,n,i,r=null){super("password",i),this._email=e,this._password=n,this._tenantId=r}static _fromEmailAndPassword(e,n){return new kh(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new kh(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ps(e,n,"signInWithPassword",yB,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return TB(e,{email:this._email,oobCode:this._password});default:Qt(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ps(e,i,"signUpPassword",pB,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return EB(e,{idToken:n,email:this._email,oobCode:this._password});default:Qt(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vr(t,e){return Ur(t,"POST","/v1/accounts:signInWithIdp",ct(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AB="http://localhost";class Yi extends wc{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Yi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Qt("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r,...s}=n;if(!i||!r)return null;const a=new Yi(i,r);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(e){const n=this.buildRequest();return vr(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,vr(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,vr(e,n)}buildRequest(){const e={requestUri:AB,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=vc(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xI(t,e){return ut(t,"POST","/v1/accounts:sendVerificationCode",ct(t,e))}async function SB(t,e){return Ur(t,"POST","/v1/accounts:signInWithPhoneNumber",ct(t,e))}async function IB(t,e){const n=await Ur(t,"POST","/v1/accounts:signInWithPhoneNumber",ct(t,e));if(n.temporaryProof)throw Tu(t,"account-exists-with-different-credential",n);return n}const xB={USER_NOT_FOUND:"user-not-found"};async function RB(t,e){const n={...e,operation:"REAUTH"};return Ur(t,"POST","/v1/accounts:signInWithPhoneNumber",ct(t,n),xB)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fa extends wc{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,n){return new Fa({verificationId:e,verificationCode:n})}static _fromTokenResponse(e,n){return new Fa({phoneNumber:e,temporaryProof:n})}_getIdTokenResponse(e){return SB(e,this._makeVerificationRequest())}_linkToIdToken(e,n){return IB(e,{idToken:n,...this._makeVerificationRequest()})}_getReauthenticationResolver(e){return RB(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:n,verificationId:i,verificationCode:r}=this.params;return e&&n?{temporaryProof:e,phoneNumber:n}:{sessionInfo:i,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:n,verificationCode:i,phoneNumber:r,temporaryProof:s}=e;return!i&&!n&&!r&&!s?null:new Fa({verificationId:n,verificationCode:i,phoneNumber:r,temporaryProof:s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CB(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function PB(t){const e=rl(wu(t)).link,n=e?rl(wu(e)).deep_link_id:null,i=rl(wu(t)).deep_link_id;return(i?rl(wu(i)).link:null)||i||n||e||t}class Zp{constructor(e){const n=rl(wu(e)),i=n.apiKey??null,r=n.oobCode??null,s=CB(n.mode??null);G(i&&r&&s,"argument-error"),this.apiKey=i,this.operation=s,this.code=r,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=PB(e);try{return new Zp(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ea{constructor(){this.providerId=ea.PROVIDER_ID}static credential(e,n){return kh._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=Zp.parseLink(n);return G(i,"argument-error"),kh._fromEmailAndCode(e,i.code,i.tenantId)}}ea.PROVIDER_ID="password";ea.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ea.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jr{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tc extends jr{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class bl extends Tc{static credentialFromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;return G("providerId"in n&&"signInMethod"in n,"argument-error"),Yi._fromParams(n)}credential(e){return this._credential({...e,nonce:e.rawNonce})}_credential(e){return G(e.idToken||e.accessToken,"argument-error"),Yi._fromParams({...e,providerId:this.providerId,signInMethod:this.providerId})}static credentialFromResult(e){return bl.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return bl.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i,oauthTokenSecret:r,pendingToken:s,nonce:a,providerId:o}=e;if(!i&&!r&&!n&&!s||!o)return null;try{return new bl(o)._credential({idToken:n,accessToken:i,nonce:a,pendingToken:s})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Di extends Tc{constructor(){super("facebook.com")}static credential(e){return Yi._fromParams({providerId:Di.PROVIDER_ID,signInMethod:Di.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Di.credentialFromTaggedObject(e)}static credentialFromError(e){return Di.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Di.credential(e.oauthAccessToken)}catch{return null}}}Di.FACEBOOK_SIGN_IN_METHOD="facebook.com";Di.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki extends Tc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Yi._fromParams({providerId:ki.PROVIDER_ID,signInMethod:ki.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return ki.credentialFromTaggedObject(e)}static credentialFromError(e){return ki.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return ki.credential(n,i)}catch{return null}}}ki.GOOGLE_SIGN_IN_METHOD="google.com";ki.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi extends Tc{constructor(){super("github.com")}static credential(e){return Yi._fromParams({providerId:Vi.PROVIDER_ID,signInMethod:Vi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Vi.credentialFromTaggedObject(e)}static credentialFromError(e){return Vi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Vi.credential(e.oauthAccessToken)}catch{return null}}}Vi.GITHUB_SIGN_IN_METHOD="github.com";Vi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NB="http://localhost";class jl extends wc{constructor(e,n){super(e,e),this.pendingToken=n}_getIdTokenResponse(e){const n=this.buildRequest();return vr(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,vr(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,vr(e,n)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r,pendingToken:s}=n;return!i||!r||!s||i!==r?null:new jl(i,s)}static _create(e,n){return new jl(e,n)}buildRequest(){return{requestUri:NB,returnSecureToken:!0,pendingToken:this.pendingToken}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DB="saml.";class Jm extends jr{constructor(e){G(e.startsWith(DB),"argument-error"),super(e)}static credentialFromResult(e){return Jm.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return Jm.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const n=jl.fromJSON(e);return G(n,"argument-error"),n}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:n,providerId:i}=e;if(!n||!i)return null;try{return jl._create(i,n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oi extends Tc{constructor(){super("twitter.com")}static credential(e,n){return Yi._fromParams({providerId:Oi.PROVIDER_ID,signInMethod:Oi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Oi.credentialFromTaggedObject(e)}static credentialFromError(e){return Oi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return Oi.credential(n,i)}catch{return null}}}Oi.TWITTER_SIGN_IN_METHOD="twitter.com";Oi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aD(t,e){return Ur(t,"POST","/v1/accounts:signUp",ct(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,r=!1){const s=await bi._fromIdTokenResponse(e,i,r),a=RI(i);return new di({user:s,providerId:a,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const r=RI(i);return new di({user:e,providerId:r,_tokenResponse:i,operationType:n})}}function RI(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kB(t){var r;if(qe(t.app))return Promise.reject(Ut(t));const e=nt(t);if(await e._initializationPromise,(r=e.currentUser)!=null&&r.isAnonymous)return new di({user:e.currentUser,providerId:null,operationType:"signIn"});const n=await aD(e,{returnSecureToken:!0}),i=await di._fromIdTokenResponse(e,"signIn",n,!0);return await e._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zm extends rn{constructor(e,n,i,r){super(n.code,n.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,Zm.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,r){return new Zm(e,n,i,r)}}function oD(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Zm._fromErrorAndOperation(t,s,e,i):s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lD(t){return new Set(t.map(({providerId:e})=>e).filter(e=>!!e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VB(t,e){const n=ee(t);await eg(!0,n,e);const{providerUserInfo:i}=await Oz(n.auth,{idToken:await n.getIdToken(),deleteProvider:[e]}),r=lD(i||[]);return n.providerData=n.providerData.filter(s=>r.has(s.providerId)),r.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function dw(t,e,n=!1){const i=await Nr(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return di._forOperation(t,"link",i)}async function eg(t,e,n){await Dh(e);const i=lD(e.providerData),r=t===!1?"provider-already-linked":"no-such-provider";G(i.has(n)===t,e.auth,r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cD(t,e,n=!1){const{auth:i}=t;if(qe(i.app))return Promise.reject(Ut(i));const r="reauthenticate";try{const s=await Nr(t,oD(i,r,e,t),n);G(s.idToken,i,"internal-error");const a=Xp(s.idToken);G(a,i,"internal-error");const{sub:o}=a;return G(t.uid===o,i,"user-mismatch"),di._forOperation(t,r,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Qt(i,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uD(t,e,n=!1){if(qe(t.app))return Promise.reject(Ut(t));const i="signIn",r=await oD(t,i,e),s=await di._fromIdTokenResponse(t,i,r);return n||await t._updateCurrentUser(s.user),s}async function tg(t,e){return uD(nt(t),e)}async function hD(t,e){const n=ee(t);return await eg(!1,n,e.providerId),dw(n,e)}async function dD(t,e){return cD(ee(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OB(t,e){return Ur(t,"POST","/v1/accounts:signInWithCustomToken",ct(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MB(t,e){if(qe(t.app))return Promise.reject(Ut(t));const n=nt(t),i=await OB(n,{token:e,returnSecureToken:!0}),r=await di._fromIdTokenResponse(n,"signIn",i);return await n._updateCurrentUser(r.user),r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wd{constructor(e,n){this.factorId=e,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}static _fromServerResponse(e,n){return"phoneInfo"in n?fw._fromServerResponse(e,n):"totpInfo"in n?mw._fromServerResponse(e,n):Qt(e,"internal-error")}}class fw extends wd{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,n){return new fw(n)}}class mw extends wd{constructor(e){super("totp",e)}static _fromServerResponse(e,n){return new mw(n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ng(t,e,n){var i;G(((i=n.url)==null?void 0:i.length)>0,t,"invalid-continue-uri"),G(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),G(typeof n.linkDomain>"u"||n.linkDomain.length>0,t,"invalid-hosting-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.linkDomain=n.linkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(G(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(G(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pw(t){const e=nt(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function LB(t,e,n){const i=nt(t),r={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};n&&ng(i,r,n),await Ps(i,r,"getOobCode",vB,"EMAIL_PASSWORD_PROVIDER")}async function UB(t,e,n){await sD(ee(t),{oobCode:e,newPassword:n}).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&pw(t),i})}async function jB(t,e){await gB(ee(t),{oobCode:e})}async function fD(t,e){const n=ee(t),i=await sD(n,{oobCode:e}),r=i.requestType;switch(G(r,n,"internal-error"),r){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":G(i.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":G(i.mfaInfo,n,"internal-error");default:G(i.email,n,"internal-error")}let s=null;return i.mfaInfo&&(s=wd._fromServerResponse(nt(n),i.mfaInfo)),{data:{email:(i.requestType==="VERIFY_AND_CHANGE_EMAIL"?i.newEmail:i.email)||null,previousEmail:(i.requestType==="VERIFY_AND_CHANGE_EMAIL"?i.email:i.newEmail)||null,multiFactorInfo:s},operation:r}}async function zB(t,e){const{data:n}=await fD(ee(t),e);return n.email}async function BB(t,e,n){if(qe(t.app))return Promise.reject(Ut(t));const i=nt(t),a=await Ps(i,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",aD,"EMAIL_PASSWORD_PROVIDER").catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&pw(t),l}),o=await di._fromIdTokenResponse(i,"signIn",a);return await i._updateCurrentUser(o.user),o}function FB(t,e,n){return qe(t.app)?Promise.reject(Ut(t)):tg(ee(t),ea.credential(e,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&pw(t),i})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qB(t,e,n){const i=nt(t),r={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};function s(a,o){G(o.handleCodeInApp,i,"argument-error"),o&&ng(i,a,o)}s(r,n),await Ps(i,r,"getOobCode",bB,"EMAIL_PASSWORD_PROVIDER")}function HB(t,e){const n=Zp.parseLink(e);return(n==null?void 0:n.operation)==="EMAIL_SIGNIN"}async function GB(t,e,n){if(qe(t.app))return Promise.reject(Ut(t));const i=ee(t),r=ea.credentialWithLink(e,n||Nh());return G(r._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),tg(i,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $B(t,e){return ut(t,"POST","/v1/accounts:createAuthUri",ct(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KB(t,e){const n=cw()?Nh():"http://localhost",i={identifier:e,continueUri:n},{signinMethods:r}=await $B(ee(t),i);return r||[]}async function WB(t,e){const n=ee(t),r={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()};e&&ng(n.auth,r,e);const{email:s}=await _B(n.auth,r);s!==t.email&&await t.reload()}async function QB(t,e,n){const i=ee(t),s={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await t.getIdToken(),newEmail:e};n&&ng(i.auth,s,n);const{email:a}=await wB(i.auth,s);a!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YB(t,e){return ut(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XB(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const i=ee(t),s={idToken:await i.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},a=await Nr(i,YB(i.auth,s));i.displayName=a.displayName||null,i.photoURL=a.photoUrl||null;const o=i.providerData.find(({providerId:l})=>l==="password");o&&(o.displayName=i.displayName,o.photoURL=i.photoURL),await i._updateTokensIfNecessary(a)}function JB(t,e){const n=ee(t);return qe(n.auth.app)?Promise.reject(Ut(n.auth)):mD(n,e,null)}function ZB(t,e){return mD(ee(t),null,e)}async function mD(t,e,n){const{auth:i}=t,s={idToken:await t.getIdToken(),returnSecureToken:!0};e&&(s.email=e),n&&(s.password=n);const a=await Nr(t,mB(i,s));await t._updateTokensIfNecessary(a,!0)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eF(t){var r,s;if(!t)return null;const{providerId:e}=t,n=t.rawUserInfo?JSON.parse(t.rawUserInfo):{},i=t.isNewUser||t.kind==="identitytoolkit#SignupNewUserResponse";if(!e&&(t!=null&&t.idToken)){const a=(s=(r=Xp(t.idToken))==null?void 0:r.firebase)==null?void 0:s.sign_in_provider;if(a){const o=a!=="anonymous"&&a!=="custom"?a:null;return new wl(i,o)}}if(!e)return null;switch(e){case"facebook.com":return new tF(i,n);case"github.com":return new nF(i,n);case"google.com":return new iF(i,n);case"twitter.com":return new rF(i,n,t.screenName||null);case"custom":case"anonymous":return new wl(i,null);default:return new wl(i,e,n)}}class wl{constructor(e,n,i={}){this.isNewUser=e,this.providerId=n,this.profile=i}}class pD extends wl{constructor(e,n,i,r){super(e,n,i),this.username=r}}class tF extends wl{constructor(e,n){super(e,"facebook.com",n)}}class nF extends pD{constructor(e,n){super(e,"github.com",n,typeof(n==null?void 0:n.login)=="string"?n==null?void 0:n.login:null)}}class iF extends wl{constructor(e,n){super(e,"google.com",n)}}class rF extends pD{constructor(e,n,i){super(e,"twitter.com",n,i)}}function sF(t){const{user:e,_tokenResponse:n}=t;return e.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:eF(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Na{constructor(e,n,i){this.type=e,this.credential=n,this.user=i}static _fromIdtoken(e,n){return new Na("enroll",e,n)}static _fromMfaPendingCredential(e){return new Na("signin",e)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var n,i;if(e!=null&&e.multiFactorSession){if((n=e.multiFactorSession)!=null&&n.pendingCredential)return Na._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if((i=e.multiFactorSession)!=null&&i.idToken)return Na._fromIdtoken(e.multiFactorSession.idToken)}return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gw{constructor(e,n,i){this.session=e,this.hints=n,this.signInResolver=i}static _fromError(e,n){const i=nt(e),r=n.customData._serverResponse,s=(r.mfaInfo||[]).map(o=>wd._fromServerResponse(i,o));G(r.mfaPendingCredential,i,"internal-error");const a=Na._fromMfaPendingCredential(r.mfaPendingCredential);return new gw(a,s,async o=>{const l=await o._process(i,a);delete r.mfaInfo,delete r.mfaPendingCredential;const c={...r,idToken:l.idToken,refreshToken:l.refreshToken};switch(n.operationType){case"signIn":const h=await di._fromIdTokenResponse(i,n.operationType,c);return await i._updateCurrentUser(h.user),h;case"reauthenticate":return G(n.user,i,"internal-error"),di._forOperation(n.user,n.operationType,c);default:Qt(i,"internal-error")}})}async resolveSignIn(e){const n=e;return this.signInResolver(n)}}function aF(t,e){var r;const n=ee(t),i=e;return G(e.customData.operationType,n,"argument-error"),G((r=i.customData._serverResponse)==null?void 0:r.mfaPendingCredential,n,"argument-error"),gw._fromError(n,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CI(t,e){return ut(t,"POST","/v2/accounts/mfaEnrollment:start",ct(t,e))}function oF(t,e){return ut(t,"POST","/v2/accounts/mfaEnrollment:finalize",ct(t,e))}function lF(t,e){return ut(t,"POST","/v2/accounts/mfaEnrollment:withdraw",ct(t,e))}class yw{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(n=>{n.mfaInfo&&(this.enrolledFactors=n.mfaInfo.map(i=>wd._fromServerResponse(e.auth,i)))})}static _fromUser(e){return new yw(e)}async getSession(){return Na._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,n){const i=e,r=await this.getSession(),s=await Nr(this.user,i._process(this.user.auth,r,n));return await this.user._updateTokensIfNecessary(s),this.user.reload()}async unenroll(e){const n=typeof e=="string"?e:e.uid,i=await this.user.getIdToken();try{const r=await Nr(this.user,lF(this.user.auth,{idToken:i,mfaEnrollmentId:n}));this.enrolledFactors=this.enrolledFactors.filter(({uid:s})=>s!==n),await this.user._updateTokensIfNecessary(r),await this.user.reload()}catch(r){throw r}}}const t_=new WeakMap;function cF(t){const e=ee(t);return t_.has(e)||t_.set(e,yw._fromUser(e)),t_.get(e)}const ep="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gD{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(ep,"1"),this.storage.removeItem(ep),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uF=1e3,hF=10;class yD extends gD{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=eD(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),r=this.localCache[n];i!==r&&e(n,r,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((a,o,l)=>{this.notifyListeners(a,l)});return}const i=e.key;n?this.detachListener():this.stopPolling();const r=()=>{const a=this.storage.getItem(i);!n&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);Gz()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,hF):r()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},uF)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}yD.type="LOCAL";const _w=yD;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _D extends gD{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}_D.type="SESSION";const Xa=_D;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dF(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ig{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const i=new ig(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:r,data:s}=n.data,a=this.handlersMap[r];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const o=Array.from(a).map(async c=>c(n.origin,s)),l=await dF(o);n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}ig.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Td(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fF{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,a;return new Promise((o,l)=>{const c=Td("",20);r.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},i);a={messageChannel:r,onMessage(d){const f=d;if(f.data.eventId===c)switch(f.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),o(f.data.response);break;default:clearTimeout(h),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(a),r.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[r.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _t(){return window}function mF(t){_t().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vw(){return typeof _t().WorkerGlobalScope<"u"&&typeof _t().importScripts=="function"}async function pF(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function gF(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function yF(){return vw()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vD="firebaseLocalStorageDb",_F=1,tp="firebaseLocalStorage",bD="fbase_key";class Ed{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function rg(t,e){return t.transaction([tp],e?"readwrite":"readonly").objectStore(tp)}function vF(){const t=indexedDB.deleteDatabase(vD);return new Ed(t).toPromise()}function Uv(){const t=indexedDB.open(vD,_F);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(tp,{keyPath:bD})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(tp)?e(i):(i.close(),await vF(),e(await Uv()))})})}async function PI(t,e,n){const i=rg(t,!0).put({[bD]:e,value:n});return new Ed(i).toPromise()}async function bF(t,e){const n=rg(t,!1).get(e),i=await new Ed(n).toPromise();return i===void 0?null:i.value}function NI(t,e){const n=rg(t,!0).delete(e);return new Ed(n).toPromise()}const wF=800,TF=3;class wD{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Uv(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>TF)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return vw()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ig._getInstance(yF()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,i;if(this.activeServiceWorker=await pF(),!this.activeServiceWorker)return;this.sender=new fF(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(i=e[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||gF()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Uv();return await PI(e,ep,"1"),await NI(e,ep),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>PI(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>bF(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>NI(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const s=rg(r,!1).getAll();return new Ed(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:r,value:s}of e)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(s)&&(this.notifyListeners(r,s),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),wF)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}wD.type="LOCAL";const Vh=wD;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DI(t,e){return ut(t,"POST","/v2/accounts/mfaSignIn:start",ct(t,e))}function EF(t,e){return ut(t,"POST","/v2/accounts/mfaSignIn:finalize",ct(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n_=nD("rcb"),AF=new yd(3e4,6e4);class SF{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!((e=_t().grecaptcha)!=null&&e.render)}load(e,n=""){return G(IF(n),e,"argument-error"),this.shouldResolveImmediately(n)&&bI(_t().grecaptcha)?Promise.resolve(_t().grecaptcha):new Promise((i,r)=>{const s=_t().setTimeout(()=>{r(Rt(e,"network-request-failed"))},AF.get());_t()[n_]=()=>{_t().clearTimeout(s),delete _t()[n_];const o=_t().grecaptcha;if(!o||!bI(o)){r(Rt(e,"internal-error"));return}const l=o.render;o.render=(c,h)=>{const d=l(c,h);return this.counter++,d},this.hostLanguage=n,i(o)};const a=`${Jz()}?${vc({onload:n_,render:"explicit",hl:n})}`;hw(a).catch(()=>{clearTimeout(s),r(Rt(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var n;return!!((n=_t().grecaptcha)!=null&&n.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function IF(t){return t.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(t)}class xF{async load(e){return new iB(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qu="recaptcha",RF={theme:"light",type:"image"};let CF=class{constructor(e,n,i={...RF}){this.parameters=i,this.type=Qu,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=nt(e),this.isInvisible=this.parameters.size==="invisible",G(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const r=typeof n=="string"?document.getElementById(n):n;G(r,this.auth,"argument-error"),this.container=r,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new xF:new SF,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),n=this.getAssertedRecaptcha(),i=n.getResponse(e);return i||new Promise(r=>{const s=a=>{a&&(this.tokenChangeListeners.delete(s),r(a))};this.tokenChangeListeners.add(s),this.isInvisible&&n.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){G(!this.parameters.sitekey,this.auth,"argument-error"),G(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),G(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return n=>{if(this.tokenChangeListeners.forEach(i=>i(n)),typeof e=="function")e(n);else if(typeof e=="string"){const i=_t()[e];typeof i=="function"&&i(n)}}}assertNotDestroyed(){G(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const n=document.createElement("div");e.appendChild(n),e=n}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){G(cw()&&!vw(),this.auth,"internal-error"),await PF(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await kz(this.auth);G(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return G(this.recaptcha,this.auth,"internal-error"),this.recaptcha}};function PF(){let t=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}t=()=>e(),window.addEventListener("load",t)}).catch(e=>{throw t&&window.removeEventListener("load",t),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bw{constructor(e,n){this.verificationId=e,this.onConfirmation=n}confirm(e){const n=Fa._fromVerification(this.verificationId,e);return this.onConfirmation(n)}}async function NF(t,e,n){if(qe(t.app))return Promise.reject(Ut(t));const i=nt(t),r=await sg(i,e,ee(n));return new bw(r,s=>tg(i,s))}async function DF(t,e,n){const i=ee(t);await eg(!1,i,"phone");const r=await sg(i.auth,e,ee(n));return new bw(r,s=>hD(i,s))}async function kF(t,e,n){const i=ee(t);if(qe(i.auth.app))return Promise.reject(Ut(i.auth));const r=await sg(i.auth,e,ee(n));return new bw(r,s=>dD(i,s))}async function sg(t,e,n){var i;if(!t._getRecaptchaConfig())try{await cB(t)}catch{console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let r;if(typeof e=="string"?r={phoneNumber:e}:r=e,"session"in r){const s=r.session;if("phoneNumber"in r){G(s.type==="enroll",t,"internal-error");const a={idToken:s.credential,phoneEnrollmentInfo:{phoneNumber:r.phoneNumber,clientType:"CLIENT_TYPE_WEB"}};return(await Ps(t,a,"mfaSmsEnrollment",async(h,d)=>{if(d.phoneEnrollmentInfo.captchaResponse===Wu){G((n==null?void 0:n.type)===Qu,h,"argument-error");const f=await i_(h,d,n);return CI(h,f)}return CI(h,d)},"PHONE_PROVIDER").catch(h=>Promise.reject(h))).phoneSessionInfo.sessionInfo}else{G(s.type==="signin",t,"internal-error");const a=((i=r.multiFactorHint)==null?void 0:i.uid)||r.multiFactorUid;G(a,t,"missing-multi-factor-info");const o={mfaPendingCredential:s.credential,mfaEnrollmentId:a,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}};return(await Ps(t,o,"mfaSmsSignIn",async(d,f)=>{if(f.phoneSignInInfo.captchaResponse===Wu){G((n==null?void 0:n.type)===Qu,d,"argument-error");const p=await i_(d,f,n);return DI(d,p)}return DI(d,f)},"PHONE_PROVIDER").catch(d=>Promise.reject(d))).phoneResponseInfo.sessionInfo}}else{const s={phoneNumber:r.phoneNumber,clientType:"CLIENT_TYPE_WEB"};return(await Ps(t,s,"sendVerificationCode",async(c,h)=>{if(h.captchaResponse===Wu){G((n==null?void 0:n.type)===Qu,c,"argument-error");const d=await i_(c,h,n);return xI(c,d)}return xI(c,h)},"PHONE_PROVIDER").catch(c=>Promise.reject(c))).sessionInfo}}finally{n==null||n._reset()}}async function VF(t,e){const n=ee(t);if(qe(n.auth.app))return Promise.reject(Ut(n.auth));await dw(n,e)}async function i_(t,e,n){G(n.type===Qu,t,"argument-error");const i=await n.verify();G(typeof i=="string",t,"argument-error");const r={...e};if("phoneEnrollmentInfo"in r){const s=r.phoneEnrollmentInfo.phoneNumber,a=r.phoneEnrollmentInfo.captchaResponse,o=r.phoneEnrollmentInfo.clientType,l=r.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(r,{phoneEnrollmentInfo:{phoneNumber:s,recaptchaToken:i,captchaResponse:a,clientType:o,recaptchaVersion:l}}),r}else if("phoneSignInInfo"in r){const s=r.phoneSignInInfo.captchaResponse,a=r.phoneSignInInfo.clientType,o=r.phoneSignInInfo.recaptchaVersion;return Object.assign(r,{phoneSignInInfo:{recaptchaToken:i,captchaResponse:s,clientType:a,recaptchaVersion:o}}),r}else return Object.assign(r,{recaptchaToken:i}),r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ja=class em{constructor(e){this.providerId=em.PROVIDER_ID,this.auth=nt(e)}verifyPhoneNumber(e,n){return sg(this.auth,e,ee(n))}static credential(e,n){return Fa._fromVerification(e,n)}static credentialFromResult(e){const n=e;return em.credentialFromTaggedObject(n)}static credentialFromError(e){return em.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:n,temporaryProof:i}=e;return n&&i?Fa._fromTokenResponse(n,i):null}};Ja.PROVIDER_ID="phone";Ja.PHONE_SIGN_IN_METHOD="phone";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _o(t,e){return e?Ln(e):(G(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ww extends wc{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return vr(e,this._buildIdpRequest())}_linkToIdToken(e,n){return vr(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return vr(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function OF(t){return uD(t.auth,new ww(t),t.bypassAuthState)}function MF(t){const{auth:e,user:n}=t;return G(n,e,"internal-error"),cD(n,new ww(t),t.bypassAuthState)}async function LF(t){const{auth:e,user:n}=t;return G(n,e,"internal-error"),dw(n,new ww(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TD{constructor(e,n,i,r,s=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:r,tenantId:s,error:a,type:o}=e;if(a){this.reject(a);return}const l={auth:this.auth,requestUri:n,sessionId:i,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return OF;case"linkViaPopup":case"linkViaRedirect":return LF;case"reauthViaPopup":case"reauthViaRedirect":return MF;default:Qt(this.auth,"internal-error")}}resolve(e){Ei(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ei(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UF=new yd(2e3,1e4);async function jF(t,e,n){if(qe(t.app))return Promise.reject(Rt(t,"operation-not-supported-in-this-environment"));const i=nt(t);bc(t,e,jr);const r=_o(i,n);return new dr(i,"signInViaPopup",e,r).executeNotNull()}async function zF(t,e,n){const i=ee(t);if(qe(i.auth.app))return Promise.reject(Rt(i.auth,"operation-not-supported-in-this-environment"));bc(i.auth,e,jr);const r=_o(i.auth,n);return new dr(i.auth,"reauthViaPopup",e,r,i).executeNotNull()}async function BF(t,e,n){const i=ee(t);bc(i.auth,e,jr);const r=_o(i.auth,n);return new dr(i.auth,"linkViaPopup",e,r,i).executeNotNull()}class dr extends TD{constructor(e,n,i,r,s){super(e,n,r,s),this.provider=i,this.authWindow=null,this.pollId=null,dr.currentPopupAction&&dr.currentPopupAction.cancel(),dr.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return G(e,this.auth,"internal-error"),e}async onExecution(){Ei(this.filter.length===1,"Popup operations only handle one event");const e=Td();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Rt(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Rt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,dr.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if((i=(n=this.authWindow)==null?void 0:n.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Rt(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,UF.get())};e()}}dr.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FF="pendingRedirect",Yu=new Map;class qF extends TD{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=Yu.get(this.auth._key());if(!e){try{const i=await HF(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}Yu.set(this.auth._key(),e)}return this.bypassAuthState||Yu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function HF(t,e){const n=AD(e),i=ED(t);if(!await i._isAvailable())return!1;const r=await i._get(n)==="true";return await i._remove(n),r}async function Tw(t,e){return ED(t)._set(AD(e),"true")}function GF(){Yu.clear()}function Ew(t,e){Yu.set(t._key(),e)}function ED(t){return Ln(t._redirectPersistence)}function AD(t){return Ba(FF,t.config.apiKey,t.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $F(t,e,n){return KF(t,e,n)}async function KF(t,e,n){if(qe(t.app))return Promise.reject(Ut(t));const i=nt(t);bc(t,e,jr),await i._initializationPromise;const r=_o(i,n);return await Tw(r,i),r._openRedirect(i,e,"signInViaRedirect")}function WF(t,e,n){return QF(t,e,n)}async function QF(t,e,n){const i=ee(t);if(bc(i.auth,e,jr),qe(i.auth.app))return Promise.reject(Ut(i.auth));await i.auth._initializationPromise;const r=_o(i.auth,n);await Tw(r,i.auth);const s=await SD(i);return r._openRedirect(i.auth,e,"reauthViaRedirect",s)}function YF(t,e,n){return XF(t,e,n)}async function XF(t,e,n){const i=ee(t);bc(i.auth,e,jr),await i.auth._initializationPromise;const r=_o(i.auth,n);await eg(!1,i,e.providerId),await Tw(r,i.auth);const s=await SD(i);return r._openRedirect(i.auth,e,"linkViaRedirect",s)}async function JF(t,e){return await nt(t)._initializationPromise,ag(t,e,!1)}async function ag(t,e,n=!1){if(qe(t.app))return Promise.reject(Ut(t));const i=nt(t),r=_o(i,e),a=await new qF(i,r,n).execute();return a&&!n&&(delete a.user._redirectEventId,await i._persistUserIfCurrent(a.user),await i._setRedirectUser(null,e)),a}async function SD(t){const e=Td(`${t.uid}:::`);return t._redirectEventId=e,await t.auth._setRedirectUser(t),await t.auth._persistUserIfCurrent(t),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZF=10*60*1e3;class ID{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!eq(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!xD(e)){const r=((i=e.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";n.onError(Rt(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=ZF&&this.cachedEventUids.clear(),this.cachedEventUids.has(kI(e))}saveEventToCache(e){this.cachedEventUids.add(kI(e)),this.lastProcessedEventTime=Date.now()}}function kI(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function xD({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function eq(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return xD(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RD(t,e={}){return ut(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tq=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,nq=/^https?/;async function iq(t){if(t.config.emulator)return;const{authorizedDomains:e}=await RD(t);for(const n of e)try{if(rq(n))return}catch{}Qt(t,"unauthorized-domain")}function rq(t){const e=Nh(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===i}if(!nq.test(n))return!1;if(tq.test(t))return i===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sq=new yd(3e4,6e4);function VI(){const t=_t().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function aq(t){return new Promise((e,n)=>{var r,s,a;function i(){VI(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{VI(),n(Rt(t,"network-request-failed"))},timeout:sq.get()})}if((s=(r=_t().gapi)==null?void 0:r.iframes)!=null&&s.Iframe)e(gapi.iframes.getContext());else if((a=_t().gapi)!=null&&a.load)i();else{const o=nD("iframefcb");return _t()[o]=()=>{gapi.load?i():n(Rt(t,"network-request-failed"))},hw(`${eB()}?onload=${o}`).catch(l=>n(l))}}).catch(e=>{throw tm=null,e})}let tm=null;function oq(t){return tm=tm||aq(t),tm}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lq=new yd(5e3,15e3),cq="__/auth/iframe",uq="emulator/auth/iframe",hq={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},dq=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function fq(t){const e=t.config;G(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?uw(e,uq):`https://${t.config.authDomain}/${cq}`,i={apiKey:e.apiKey,appName:t.name,v:Lr},r=dq.get(t.config.apiHost);r&&(i.eid=r);const s=t._getFrameworks();return s.length&&(i.fw=s.join(",")),`${n}?${vc(i).slice(1)}`}async function mq(t){const e=await oq(t),n=_t().gapi;return G(n,t,"internal-error"),e.open({where:document.body,url:fq(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:hq,dontclear:!0},i=>new Promise(async(r,s)=>{await i.restyle({setHideOnLeave:!1});const a=Rt(t,"network-request-failed"),o=_t().setTimeout(()=>{s(a)},lq.get());function l(){_t().clearTimeout(o),r(i)}i.ping(l).then(l,()=>{s(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pq={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},gq=500,yq=600,_q="_blank",vq="http://localhost";class OI{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function bq(t,e,n,i=gq,r=yq){const s=Math.max((window.screen.availHeight-r)/2,0).toString(),a=Math.max((window.screen.availWidth-i)/2,0).toString();let o="";const l={...pq,width:i.toString(),height:r.toString(),top:s,left:a},c=tt().toLowerCase();n&&(o=YN(c)?_q:n),WN(c)&&(e=e||vq,l.scrollbars="yes");const h=Object.entries(l).reduce((f,[p,w])=>`${f}${p}=${w},`,"");if(Hz(c)&&o!=="_self")return wq(e||"",o),new OI(null);const d=window.open(e||"",o,h);G(d,t,"popup-blocked");try{d.focus()}catch{}return new OI(d)}function wq(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tq="__/auth/handler",Eq="emulator/auth/handler",Aq=encodeURIComponent("fac");async function jv(t,e,n,i,r,s){G(t.config.authDomain,t,"auth-domain-config-required"),G(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:Lr,eventId:r};if(e instanceof jr){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",Xj(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,d]of Object.entries(s||{}))a[h]=d}if(e instanceof Tc){const h=e.getScopes().filter(d=>d!=="");h.length>0&&(a.scopes=h.join(","))}t.tenantId&&(a.tid=t.tenantId);const o=a;for(const h of Object.keys(o))o[h]===void 0&&delete o[h];const l=await t._getAppCheckToken(),c=l?`#${Aq}=${encodeURIComponent(l)}`:"";return`${Sq(t)}?${vc(o).slice(1)}${c}`}function Sq({config:t}){return t.emulator?uw(t,Eq):`https://${t.authDomain}/${Tq}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r_="webStorageSupport";class Iq{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Xa,this._completeRedirectFn=ag,this._overrideRedirectResult=Ew}async _openPopup(e,n,i,r){var a;Ei((a=this.eventManagers[e._key()])==null?void 0:a.manager,"_initialize() not called before _openPopup()");const s=await jv(e,n,i,Nh(),r);return bq(e,s,Td())}async _openRedirect(e,n,i,r){await this._originValidation(e);const s=await jv(e,n,i,Nh(),r);return mF(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:s}=this.eventManagers[n];return r?Promise.resolve(r):(Ei(s,"If manager is not set, promise should be"),s)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await mq(e),i=new ID(e);return n.register("authEvent",r=>(G(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(r_,{type:r_},r=>{var a;const s=(a=r==null?void 0:r[0])==null?void 0:a[r_];s!==void 0&&n(!!s),Qt(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=iq(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return eD()||QN()||vd()}}const xq=Iq;class Rq{constructor(e){this.factorId=e}_process(e,n,i){switch(n.type){case"enroll":return this._finalizeEnroll(e,n.credential,i);case"signin":return this._finalizeSignIn(e,n.credential);default:return zi("unexpected MultiFactorSessionType")}}}class Aw extends Rq{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new Aw(e)}_finalizeEnroll(e,n,i){return oF(e,{idToken:n,displayName:i,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,n){return EF(e,{mfaPendingCredential:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class CD{constructor(){}static assertion(e){return Aw._fromCredential(e)}}CD.FACTOR_ID="phone";var MI="@firebase/auth",LI="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cq{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){G(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pq(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Nq(t){Pr(new hi("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=i.options;G(a&&!a.includes(":"),"invalid-api-key",{appName:i.name});const l={apiKey:a,authDomain:o,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:tD(t)},c=new Yz(i,r,s,l);return uB(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),Pr(new hi("auth-internal",e=>{const n=nt(e.getProvider("auth").getImmediate());return(i=>new Cq(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),qn(MI,LI,Pq(t)),qn(MI,LI,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dq=5*60;zj("authIdTokenMaxAge");function kq(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}Xz({loadJS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=r=>{const s=Rt("internal-error");s.customData=r,n(s)},i.type="text/javascript",i.charset="UTF-8",kq().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Nq("Browser");/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Za(){return window}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vq=2e3;async function Oq(t,e,n){const{BuildInfo:i}=Za();Ei(e.sessionId,"AuthEvent did not contain a session ID");const r=await zq(e.sessionId),s={};return vd()?s.ibi=i.packageName:_d()?s.apn=i.packageName:Qt(t,"operation-not-supported-in-this-environment"),i.displayName&&(s.appDisplayName=i.displayName),s.sessionId=r,jv(t,n,e.type,void 0,e.eventId??void 0,s)}async function Mq(t){const{BuildInfo:e}=Za(),n={};vd()?n.iosBundleId=e.packageName:_d()?n.androidPackageName=e.packageName:Qt(t,"operation-not-supported-in-this-environment"),await RD(t,n)}function Lq(t){const{cordova:e}=Za();return new Promise(n=>{e.plugins.browsertab.isAvailable(i=>{let r=null;i?e.plugins.browsertab.openUrl(t):r=e.InAppBrowser.open(t,qz()?"_blank":"_system","location=yes"),n(r)})})}async function Uq(t,e,n){const{cordova:i}=Za();let r=()=>{};try{await new Promise((s,a)=>{let o=null;function l(){var f;s();const d=(f=i.plugins.browsertab)==null?void 0:f.close;typeof d=="function"&&d(),typeof(n==null?void 0:n.close)=="function"&&n.close()}function c(){o||(o=window.setTimeout(()=>{a(Rt(t,"redirect-cancelled-by-user"))},Vq))}function h(){(document==null?void 0:document.visibilityState)==="visible"&&c()}e.addPassiveListener(l),document.addEventListener("resume",c,!1),_d()&&document.addEventListener("visibilitychange",h,!1),r=()=>{e.removePassiveListener(l),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",h,!1),o&&window.clearTimeout(o)}})}finally{r()}}function jq(t){var n,i,r,s,a,o,l,c,h,d;const e=Za();G(typeof((n=e==null?void 0:e.universalLinks)==null?void 0:n.subscribe)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),G(typeof((i=e==null?void 0:e.BuildInfo)==null?void 0:i.packageName)<"u",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),G(typeof((a=(s=(r=e==null?void 0:e.cordova)==null?void 0:r.plugins)==null?void 0:s.browsertab)==null?void 0:a.openUrl)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),G(typeof((c=(l=(o=e==null?void 0:e.cordova)==null?void 0:o.plugins)==null?void 0:l.browsertab)==null?void 0:c.isAvailable)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),G(typeof((d=(h=e==null?void 0:e.cordova)==null?void 0:h.InAppBrowser)==null?void 0:d.open)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}async function zq(t){const e=Bq(t),n=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(n)).map(r=>r.toString(16).padStart(2,"0")).join("")}function Bq(t){if(Ei(/[0-9a-zA-Z]+/.test(t),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return new TextEncoder().encode(t);const e=new ArrayBuffer(t.length),n=new Uint8Array(e);for(let i=0;i<t.length;i++)n[i]=t.charCodeAt(i);return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fq=20;class qq extends ID{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(e=>{this.resolveInitialized=e})}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInitialized(),this.passiveListeners.forEach(n=>n(e)),super.onEvent(e)}async initialized(){await this.initPromise}}function Hq(t,e,n=null){return{type:e,eventId:n,urlResponse:null,sessionId:Kq(),postBody:null,tenantId:t.tenantId,error:Rt(t,"no-auth-event")}}function Gq(t,e){return zv()._set(Bv(t),e)}async function UI(t){const e=await zv()._get(Bv(t));return e&&await zv()._remove(Bv(t)),e}function $q(t,e){var i,r;const n=Qq(e);if(n.includes("/__/auth/callback")){const s=nm(n),a=s.firebaseError?Wq(decodeURIComponent(s.firebaseError)):null,o=(r=(i=a==null?void 0:a.code)==null?void 0:i.split("auth/"))==null?void 0:r[1],l=o?Rt(o):null;return l?{type:t.type,eventId:t.eventId,tenantId:t.tenantId,error:l,urlResponse:null,sessionId:null,postBody:null}:{type:t.type,eventId:t.eventId,tenantId:t.tenantId,sessionId:t.sessionId,urlResponse:n,postBody:null}}return null}function Kq(){const t=[],e="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<Fq;n++){const i=Math.floor(Math.random()*e.length);t.push(e.charAt(i))}return t.join("")}function zv(){return Ln(_w)}function Bv(t){return Ba("authEvent",t.config.apiKey,t.name)}function Wq(t){try{return JSON.parse(t)}catch{return null}}function Qq(t){const e=nm(t),n=e.link?decodeURIComponent(e.link):void 0,i=nm(n).link,r=e.deep_link_id?decodeURIComponent(e.deep_link_id):void 0;return nm(r).link||r||i||n||t}function nm(t){if(!(t!=null&&t.includes("?")))return{};const[e,...n]=t.split("?");return rl(n.join("?"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yq=500;class Xq{constructor(){this._redirectPersistence=Xa,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=ag,this._overrideRedirectResult=Ew}async _initialize(e){const n=e._key();let i=this.eventManagers.get(n);return i||(i=new qq(e),this.eventManagers.set(n,i),this.attachCallbackListeners(e,i)),i}_openPopup(e){Qt(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,n,i,r){jq(e);const s=await this._initialize(e);await s.initialized(),s.resetRedirect(),GF(),await this._originValidation(e);const a=Hq(e,i,r);await Gq(e,a);const o=await Oq(e,a,n),l=await Lq(o);return Uq(e,s,l)}_isIframeWebStorageSupported(e,n){throw new Error("Method not implemented.")}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Mq(e)),this.originValidationPromises[n]}attachCallbackListeners(e,n){const{universalLinks:i,handleOpenURL:r,BuildInfo:s}=Za(),a=setTimeout(async()=>{await UI(e),n.onEvent(jI())},Yq),o=async h=>{clearTimeout(a);const d=await UI(e);let f=null;d&&(h!=null&&h.url)&&(f=$q(d,h.url)),n.onEvent(f||jI())};typeof i<"u"&&typeof i.subscribe=="function"&&i.subscribe(null,o);const l=r,c=`${s.packageName.toLowerCase()}://`;Za().handleOpenURL=async h=>{if(h.toLowerCase().startsWith(c)&&o({url:h}),typeof l=="function")try{l(h)}catch(d){console.error(d)}}}}const Jq=Xq;function jI(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Rt("no-auth-event")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zq(t,e){nt(t)._logFramework(e)}var e8="@firebase/auth-compat",t8="0.6.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n8=1e3;function Xu(){var t;return((t=self==null?void 0:self.location)==null?void 0:t.protocol)||null}function i8(){return Xu()==="http:"||Xu()==="https:"}function PD(t=tt()){return!!((Xu()==="file:"||Xu()==="ionic:"||Xu()==="capacitor:")&&t.toLowerCase().match(/iphone|ipad|ipod|android/))}function r8(){return tw()||Qp()}function s8(){return TN()&&(document==null?void 0:document.documentMode)===11}function a8(t=tt()){return/Edge\/\d+/.test(t)}function o8(t=tt()){return s8()||a8(t)}function ND(){try{const t=self.localStorage,e=Td();if(t)return t.setItem(e,"1"),t.removeItem(e),o8()?Rh():!0}catch{return Sw()&&Rh()}return!1}function Sw(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function s_(){return(i8()||wN()||PD())&&!r8()&&ND()&&!Sw()}function DD(){return PD()&&typeof document<"u"}async function l8(){return DD()?new Promise(t=>{const e=setTimeout(()=>{t(!1)},n8);document.addEventListener("deviceready",()=>{clearTimeout(e),t(!0)})}):!1}function c8(){return typeof window<"u"?window:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vn={LOCAL:"local",NONE:"none",SESSION:"session"},ou=G,kD="persistence";function u8(t,e){if(ou(Object.values(Vn).includes(e),t,"invalid-persistence-type"),tw()){ou(e!==Vn.SESSION,t,"unsupported-persistence-type");return}if(Qp()){ou(e===Vn.NONE,t,"unsupported-persistence-type");return}if(Sw()){ou(e===Vn.NONE||e===Vn.LOCAL&&Rh(),t,"unsupported-persistence-type");return}ou(e===Vn.NONE||ND(),t,"unsupported-persistence-type")}async function Fv(t){await t._initializationPromise;const e=VD(),n=Ba(kD,t.config.apiKey,t.name);e&&e.setItem(n,t._getPersistenceType())}function h8(t,e){const n=VD();if(!n)return[];const i=Ba(kD,t,e);switch(n.getItem(i)){case Vn.NONE:return[Ul];case Vn.LOCAL:return[Vh,Xa];case Vn.SESSION:return[Xa];default:return[]}}function VD(){var t;try{return((t=c8())==null?void 0:t.sessionStorage)||null}catch{return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d8=G;class ys{constructor(){this.browserResolver=Ln(xq),this.cordovaResolver=Ln(Jq),this.underlyingResolver=null,this._redirectPersistence=Xa,this._completeRedirectFn=ag,this._overrideRedirectResult=Ew}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,n,i,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,n,i,r)}async _openRedirect(e,n,i,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,n,i,r)}_isIframeWebStorageSupported(e,n){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,n)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return DD()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return d8(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await l8();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OD(t){return t.unwrap()}function f8(t){return t.wrapped()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m8(t){return MD(t)}function p8(t,e){var i;const n=(i=e.customData)==null?void 0:i._tokenResponse;if((e==null?void 0:e.code)==="auth/multi-factor-auth-required"){const r=e;r.resolver=new g8(t,aF(t,e))}else if(n){const r=MD(e),s=e;r&&(s.credential=r,s.tenantId=n.tenantId||void 0,s.email=n.email||void 0,s.phoneNumber=n.phoneNumber||void 0)}}function MD(t){const{_tokenResponse:e}=t instanceof rn?t.customData:t;if(!e)return null;if(!(t instanceof rn)&&"temporaryProof"in e&&"phoneNumber"in e)return Ja.credentialFromResult(t);const n=e.providerId;if(!n||n===su.PASSWORD)return null;let i;switch(n){case su.GOOGLE:i=ki;break;case su.FACEBOOK:i=Di;break;case su.GITHUB:i=Vi;break;case su.TWITTER:i=Oi;break;default:const{oauthIdToken:r,oauthAccessToken:s,oauthTokenSecret:a,pendingToken:o,nonce:l}=e;return!s&&!a&&!r&&!o?null:o?n.startsWith("saml.")?jl._create(n,o):Yi._fromParams({providerId:n,signInMethod:n,pendingToken:o,idToken:r,accessToken:s}):new bl(n).credential({idToken:r,accessToken:s,rawNonce:l})}return t instanceof rn?i.credentialFromError(t):i.credentialFromResult(t)}function Tn(t,e){return e.catch(n=>{throw n instanceof rn&&p8(t,n),n}).then(n=>{const i=n.operationType,r=n.user;return{operationType:i,credential:m8(n),additionalUserInfo:sF(n),user:og.getOrCreate(r)}})}async function qv(t,e){const n=await e;return{verificationId:n.verificationId,confirm:i=>Tn(t,n.confirm(i))}}class g8{constructor(e,n){this.resolver=n,this.auth=f8(e)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return Tn(OD(this.auth),this.resolver.resolveSignIn(e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let og=class Eu{constructor(e){this._delegate=e,this.multiFactor=cF(e)}static getOrCreate(e){return Eu.USER_MAP.has(e)||Eu.USER_MAP.set(e,new Eu(e)),Eu.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return Tn(this.auth,hD(this._delegate,e))}async linkWithPhoneNumber(e,n){return qv(this.auth,DF(this._delegate,e,n))}async linkWithPopup(e){return Tn(this.auth,BF(this._delegate,e,ys))}async linkWithRedirect(e){return await Fv(nt(this.auth)),YF(this._delegate,e,ys)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return Tn(this.auth,dD(this._delegate,e))}reauthenticateWithPhoneNumber(e,n){return qv(this.auth,kF(this._delegate,e,n))}reauthenticateWithPopup(e){return Tn(this.auth,zF(this._delegate,e,ys))}async reauthenticateWithRedirect(e){return await Fv(nt(this.auth)),WF(this._delegate,e,ys)}sendEmailVerification(e){return WB(this._delegate,e)}async unlink(e){return await VB(this._delegate,e),this}updateEmail(e){return JB(this._delegate,e)}updatePassword(e){return ZB(this._delegate,e)}updatePhoneNumber(e){return VF(this._delegate,e)}updateProfile(e){return XB(this._delegate,e)}verifyBeforeUpdateEmail(e,n){return QB(this._delegate,e,n)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}};og.USER_MAP=new WeakMap;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lu=G;class Hv{constructor(e,n){if(this.app=e,n.isInitialized()){this._delegate=n.getImmediate(),this.linkUnderlyingAuth();return}const{apiKey:i}=e.options;lu(i,"invalid-api-key",{appName:e.name}),lu(i,"invalid-api-key",{appName:e.name});const r=typeof window<"u"?ys:void 0;this._delegate=n.initialize({options:{persistence:y8(i,e.name),popupRedirectResolver:r}}),this._delegate._updateErrorMap(Ez),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?og.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,n){hB(this._delegate,e,n)}applyActionCode(e){return jB(this._delegate,e)}checkActionCode(e){return fD(this._delegate,e)}confirmPasswordReset(e,n){return UB(this._delegate,e,n)}async createUserWithEmailAndPassword(e,n){return Tn(this._delegate,BB(this._delegate,e,n))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return KB(this._delegate,e)}isSignInWithEmailLink(e){return HB(this._delegate,e)}async getRedirectResult(){lu(s_(),this._delegate,"operation-not-supported-in-this-environment");const e=await JF(this._delegate,ys);return e?Tn(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){Zq(this._delegate,e)}onAuthStateChanged(e,n,i){const{next:r,error:s,complete:a}=zI(e,n,i);return this._delegate.onAuthStateChanged(r,s,a)}onIdTokenChanged(e,n,i){const{next:r,error:s,complete:a}=zI(e,n,i);return this._delegate.onIdTokenChanged(r,s,a)}sendSignInLinkToEmail(e,n){return qB(this._delegate,e,n)}sendPasswordResetEmail(e,n){return LB(this._delegate,e,n||void 0)}async setPersistence(e){u8(this._delegate,e);let n;switch(e){case Vn.SESSION:n=Xa;break;case Vn.LOCAL:n=await Ln(Vh)._isAvailable()?Vh:_w;break;case Vn.NONE:n=Ul;break;default:return Qt("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(n)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return Tn(this._delegate,kB(this._delegate))}signInWithCredential(e){return Tn(this._delegate,tg(this._delegate,e))}signInWithCustomToken(e){return Tn(this._delegate,MB(this._delegate,e))}signInWithEmailAndPassword(e,n){return Tn(this._delegate,FB(this._delegate,e,n))}signInWithEmailLink(e,n){return Tn(this._delegate,GB(this._delegate,e,n))}signInWithPhoneNumber(e,n){return qv(this._delegate,NF(this._delegate,e,n))}async signInWithPopup(e){return lu(s_(),this._delegate,"operation-not-supported-in-this-environment"),Tn(this._delegate,jF(this._delegate,e,ys))}async signInWithRedirect(e){return lu(s_(),this._delegate,"operation-not-supported-in-this-environment"),await Fv(this._delegate),$F(this._delegate,e,ys)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return zB(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}Hv.Persistence=Vn;function zI(t,e,n){let i=t;typeof t!="function"&&({next:i,error:e,complete:n}=t);const r=i;return{next:a=>r(a&&og.getOrCreate(a)),error:e,complete:n}}function y8(t,e){const n=h8(t,e);if(typeof self<"u"&&!n.includes(Vh)&&n.push(Vh),typeof window<"u")for(const i of[_w,Xa])n.includes(i)||n.push(i);return n.includes(Ul)||n.push(Ul),n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iw{static credential(e,n){return Ja.credential(e,n)}constructor(){this.providerId="phone",this._delegate=new Ja(OD(Ht.auth()))}verifyPhoneNumber(e,n){return this._delegate.verifyPhoneNumber(e,n)}unwrap(){return this._delegate}}Iw.PHONE_SIGN_IN_METHOD=Ja.PHONE_SIGN_IN_METHOD;Iw.PROVIDER_ID=Ja.PROVIDER_ID;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _8=G;class v8{constructor(e,n,i=Ht.app()){var r;_8((r=i.options)==null?void 0:r.apiKey,"invalid-api-key",{appName:i.name}),this._delegate=new CF(i.auth(),e,n),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b8="auth-compat";function w8(t){t.INTERNAL.registerComponent(new hi(b8,e=>{const n=e.getProvider("app-compat").getImmediate(),i=e.getProvider("auth");return new Hv(n,i)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Po.EMAIL_SIGNIN,PASSWORD_RESET:Po.PASSWORD_RESET,RECOVER_EMAIL:Po.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:Po.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:Po.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:Po.VERIFY_EMAIL}},EmailAuthProvider:ea,FacebookAuthProvider:Di,GithubAuthProvider:Vi,GoogleAuthProvider:ki,OAuthProvider:bl,SAMLAuthProvider:Jm,PhoneAuthProvider:Iw,PhoneMultiFactorGenerator:CD,RecaptchaVerifier:v8,TwitterAuthProvider:Oi,Auth:Hv,AuthCredential:wc,Error:rn}).setInstantiationMode("LAZY").setMultipleInstances(!1)),t.registerVersion(e8,t8)}w8(Ht);var BI=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ns,LD;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(A,T){function I(){}I.prototype=T.prototype,A.F=T.prototype,A.prototype=new I,A.prototype.constructor=A,A.D=function(P,D,V){for(var N=Array(arguments.length-2),H=2;H<arguments.length;H++)N[H-2]=arguments[H];return T.prototype[D].apply(P,N)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,n),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(A,T,I){I||(I=0);const P=Array(16);if(typeof T=="string")for(var D=0;D<16;++D)P[D]=T.charCodeAt(I++)|T.charCodeAt(I++)<<8|T.charCodeAt(I++)<<16|T.charCodeAt(I++)<<24;else for(D=0;D<16;++D)P[D]=T[I++]|T[I++]<<8|T[I++]<<16|T[I++]<<24;T=A.g[0],I=A.g[1],D=A.g[2];let V=A.g[3],N;N=T+(V^I&(D^V))+P[0]+3614090360&4294967295,T=I+(N<<7&4294967295|N>>>25),N=V+(D^T&(I^D))+P[1]+3905402710&4294967295,V=T+(N<<12&4294967295|N>>>20),N=D+(I^V&(T^I))+P[2]+606105819&4294967295,D=V+(N<<17&4294967295|N>>>15),N=I+(T^D&(V^T))+P[3]+3250441966&4294967295,I=D+(N<<22&4294967295|N>>>10),N=T+(V^I&(D^V))+P[4]+4118548399&4294967295,T=I+(N<<7&4294967295|N>>>25),N=V+(D^T&(I^D))+P[5]+1200080426&4294967295,V=T+(N<<12&4294967295|N>>>20),N=D+(I^V&(T^I))+P[6]+2821735955&4294967295,D=V+(N<<17&4294967295|N>>>15),N=I+(T^D&(V^T))+P[7]+4249261313&4294967295,I=D+(N<<22&4294967295|N>>>10),N=T+(V^I&(D^V))+P[8]+1770035416&4294967295,T=I+(N<<7&4294967295|N>>>25),N=V+(D^T&(I^D))+P[9]+2336552879&4294967295,V=T+(N<<12&4294967295|N>>>20),N=D+(I^V&(T^I))+P[10]+4294925233&4294967295,D=V+(N<<17&4294967295|N>>>15),N=I+(T^D&(V^T))+P[11]+2304563134&4294967295,I=D+(N<<22&4294967295|N>>>10),N=T+(V^I&(D^V))+P[12]+1804603682&4294967295,T=I+(N<<7&4294967295|N>>>25),N=V+(D^T&(I^D))+P[13]+4254626195&4294967295,V=T+(N<<12&4294967295|N>>>20),N=D+(I^V&(T^I))+P[14]+2792965006&4294967295,D=V+(N<<17&4294967295|N>>>15),N=I+(T^D&(V^T))+P[15]+1236535329&4294967295,I=D+(N<<22&4294967295|N>>>10),N=T+(D^V&(I^D))+P[1]+4129170786&4294967295,T=I+(N<<5&4294967295|N>>>27),N=V+(I^D&(T^I))+P[6]+3225465664&4294967295,V=T+(N<<9&4294967295|N>>>23),N=D+(T^I&(V^T))+P[11]+643717713&4294967295,D=V+(N<<14&4294967295|N>>>18),N=I+(V^T&(D^V))+P[0]+3921069994&4294967295,I=D+(N<<20&4294967295|N>>>12),N=T+(D^V&(I^D))+P[5]+3593408605&4294967295,T=I+(N<<5&4294967295|N>>>27),N=V+(I^D&(T^I))+P[10]+38016083&4294967295,V=T+(N<<9&4294967295|N>>>23),N=D+(T^I&(V^T))+P[15]+3634488961&4294967295,D=V+(N<<14&4294967295|N>>>18),N=I+(V^T&(D^V))+P[4]+3889429448&4294967295,I=D+(N<<20&4294967295|N>>>12),N=T+(D^V&(I^D))+P[9]+568446438&4294967295,T=I+(N<<5&4294967295|N>>>27),N=V+(I^D&(T^I))+P[14]+3275163606&4294967295,V=T+(N<<9&4294967295|N>>>23),N=D+(T^I&(V^T))+P[3]+4107603335&4294967295,D=V+(N<<14&4294967295|N>>>18),N=I+(V^T&(D^V))+P[8]+1163531501&4294967295,I=D+(N<<20&4294967295|N>>>12),N=T+(D^V&(I^D))+P[13]+2850285829&4294967295,T=I+(N<<5&4294967295|N>>>27),N=V+(I^D&(T^I))+P[2]+4243563512&4294967295,V=T+(N<<9&4294967295|N>>>23),N=D+(T^I&(V^T))+P[7]+1735328473&4294967295,D=V+(N<<14&4294967295|N>>>18),N=I+(V^T&(D^V))+P[12]+2368359562&4294967295,I=D+(N<<20&4294967295|N>>>12),N=T+(I^D^V)+P[5]+4294588738&4294967295,T=I+(N<<4&4294967295|N>>>28),N=V+(T^I^D)+P[8]+2272392833&4294967295,V=T+(N<<11&4294967295|N>>>21),N=D+(V^T^I)+P[11]+1839030562&4294967295,D=V+(N<<16&4294967295|N>>>16),N=I+(D^V^T)+P[14]+4259657740&4294967295,I=D+(N<<23&4294967295|N>>>9),N=T+(I^D^V)+P[1]+2763975236&4294967295,T=I+(N<<4&4294967295|N>>>28),N=V+(T^I^D)+P[4]+1272893353&4294967295,V=T+(N<<11&4294967295|N>>>21),N=D+(V^T^I)+P[7]+4139469664&4294967295,D=V+(N<<16&4294967295|N>>>16),N=I+(D^V^T)+P[10]+3200236656&4294967295,I=D+(N<<23&4294967295|N>>>9),N=T+(I^D^V)+P[13]+681279174&4294967295,T=I+(N<<4&4294967295|N>>>28),N=V+(T^I^D)+P[0]+3936430074&4294967295,V=T+(N<<11&4294967295|N>>>21),N=D+(V^T^I)+P[3]+3572445317&4294967295,D=V+(N<<16&4294967295|N>>>16),N=I+(D^V^T)+P[6]+76029189&4294967295,I=D+(N<<23&4294967295|N>>>9),N=T+(I^D^V)+P[9]+3654602809&4294967295,T=I+(N<<4&4294967295|N>>>28),N=V+(T^I^D)+P[12]+3873151461&4294967295,V=T+(N<<11&4294967295|N>>>21),N=D+(V^T^I)+P[15]+530742520&4294967295,D=V+(N<<16&4294967295|N>>>16),N=I+(D^V^T)+P[2]+3299628645&4294967295,I=D+(N<<23&4294967295|N>>>9),N=T+(D^(I|~V))+P[0]+4096336452&4294967295,T=I+(N<<6&4294967295|N>>>26),N=V+(I^(T|~D))+P[7]+1126891415&4294967295,V=T+(N<<10&4294967295|N>>>22),N=D+(T^(V|~I))+P[14]+2878612391&4294967295,D=V+(N<<15&4294967295|N>>>17),N=I+(V^(D|~T))+P[5]+4237533241&4294967295,I=D+(N<<21&4294967295|N>>>11),N=T+(D^(I|~V))+P[12]+1700485571&4294967295,T=I+(N<<6&4294967295|N>>>26),N=V+(I^(T|~D))+P[3]+2399980690&4294967295,V=T+(N<<10&4294967295|N>>>22),N=D+(T^(V|~I))+P[10]+4293915773&4294967295,D=V+(N<<15&4294967295|N>>>17),N=I+(V^(D|~T))+P[1]+2240044497&4294967295,I=D+(N<<21&4294967295|N>>>11),N=T+(D^(I|~V))+P[8]+1873313359&4294967295,T=I+(N<<6&4294967295|N>>>26),N=V+(I^(T|~D))+P[15]+4264355552&4294967295,V=T+(N<<10&4294967295|N>>>22),N=D+(T^(V|~I))+P[6]+2734768916&4294967295,D=V+(N<<15&4294967295|N>>>17),N=I+(V^(D|~T))+P[13]+1309151649&4294967295,I=D+(N<<21&4294967295|N>>>11),N=T+(D^(I|~V))+P[4]+4149444226&4294967295,T=I+(N<<6&4294967295|N>>>26),N=V+(I^(T|~D))+P[11]+3174756917&4294967295,V=T+(N<<10&4294967295|N>>>22),N=D+(T^(V|~I))+P[2]+718787259&4294967295,D=V+(N<<15&4294967295|N>>>17),N=I+(V^(D|~T))+P[9]+3951481745&4294967295,A.g[0]=A.g[0]+T&4294967295,A.g[1]=A.g[1]+(D+(N<<21&4294967295|N>>>11))&4294967295,A.g[2]=A.g[2]+D&4294967295,A.g[3]=A.g[3]+V&4294967295}i.prototype.v=function(A,T){T===void 0&&(T=A.length);const I=T-this.blockSize,P=this.C;let D=this.h,V=0;for(;V<T;){if(D==0)for(;V<=I;)r(this,A,V),V+=this.blockSize;if(typeof A=="string"){for(;V<T;)if(P[D++]=A.charCodeAt(V++),D==this.blockSize){r(this,P),D=0;break}}else for(;V<T;)if(P[D++]=A[V++],D==this.blockSize){r(this,P),D=0;break}}this.h=D,this.o+=T},i.prototype.A=function(){var A=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);A[0]=128;for(var T=1;T<A.length-8;++T)A[T]=0;T=this.o*8;for(var I=A.length-8;I<A.length;++I)A[I]=T&255,T/=256;for(this.v(A),A=Array(16),T=0,I=0;I<4;++I)for(let P=0;P<32;P+=8)A[T++]=this.g[I]>>>P&255;return A};function s(A,T){var I=o;return Object.prototype.hasOwnProperty.call(I,A)?I[A]:I[A]=T(A)}function a(A,T){this.h=T;const I=[];let P=!0;for(let D=A.length-1;D>=0;D--){const V=A[D]|0;P&&V==T||(I[D]=V,P=!1)}this.g=I}var o={};function l(A){return-128<=A&&A<128?s(A,function(T){return new a([T|0],T<0?-1:0)}):new a([A|0],A<0?-1:0)}function c(A){if(isNaN(A)||!isFinite(A))return d;if(A<0)return R(c(-A));const T=[];let I=1;for(let P=0;A>=I;P++)T[P]=A/I|0,I*=4294967296;return new a(T,0)}function h(A,T){if(A.length==0)throw Error("number format error: empty string");if(T=T||10,T<2||36<T)throw Error("radix out of range: "+T);if(A.charAt(0)=="-")return R(h(A.substring(1),T));if(A.indexOf("-")>=0)throw Error('number format error: interior "-" character');const I=c(Math.pow(T,8));let P=d;for(let V=0;V<A.length;V+=8){var D=Math.min(8,A.length-V);const N=parseInt(A.substring(V,V+D),T);D<8?(D=c(Math.pow(T,D)),P=P.j(D).add(c(N))):(P=P.j(I),P=P.add(c(N)))}return P}var d=l(0),f=l(1),p=l(16777216);t=a.prototype,t.m=function(){if(E(this))return-R(this).m();let A=0,T=1;for(let I=0;I<this.g.length;I++){const P=this.i(I);A+=(P>=0?P:4294967296+P)*T,T*=4294967296}return A},t.toString=function(A){if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(w(this))return"0";if(E(this))return"-"+R(this).toString(A);const T=c(Math.pow(A,6));var I=this;let P="";for(;;){const D=S(I,T).g;I=b(I,D.j(T));let V=((I.g.length>0?I.g[0]:I.h)>>>0).toString(A);if(I=D,w(I))return V+P;for(;V.length<6;)V="0"+V;P=V+P}},t.i=function(A){return A<0?0:A<this.g.length?this.g[A]:this.h};function w(A){if(A.h!=0)return!1;for(let T=0;T<A.g.length;T++)if(A.g[T]!=0)return!1;return!0}function E(A){return A.h==-1}t.l=function(A){return A=b(this,A),E(A)?-1:w(A)?0:1};function R(A){const T=A.g.length,I=[];for(let P=0;P<T;P++)I[P]=~A.g[P];return new a(I,~A.h).add(f)}t.abs=function(){return E(this)?R(this):this},t.add=function(A){const T=Math.max(this.g.length,A.g.length),I=[];let P=0;for(let D=0;D<=T;D++){let V=P+(this.i(D)&65535)+(A.i(D)&65535),N=(V>>>16)+(this.i(D)>>>16)+(A.i(D)>>>16);P=N>>>16,V&=65535,N&=65535,I[D]=N<<16|V}return new a(I,I[I.length-1]&-2147483648?-1:0)};function b(A,T){return A.add(R(T))}t.j=function(A){if(w(this)||w(A))return d;if(E(this))return E(A)?R(this).j(R(A)):R(R(this).j(A));if(E(A))return R(this.j(R(A)));if(this.l(p)<0&&A.l(p)<0)return c(this.m()*A.m());const T=this.g.length+A.g.length,I=[];for(var P=0;P<2*T;P++)I[P]=0;for(P=0;P<this.g.length;P++)for(let D=0;D<A.g.length;D++){const V=this.i(P)>>>16,N=this.i(P)&65535,H=A.i(D)>>>16,ie=A.i(D)&65535;I[2*P+2*D]+=N*ie,v(I,2*P+2*D),I[2*P+2*D+1]+=V*ie,v(I,2*P+2*D+1),I[2*P+2*D+1]+=N*H,v(I,2*P+2*D+1),I[2*P+2*D+2]+=V*H,v(I,2*P+2*D+2)}for(A=0;A<T;A++)I[A]=I[2*A+1]<<16|I[2*A];for(A=T;A<2*T;A++)I[A]=0;return new a(I,0)};function v(A,T){for(;(A[T]&65535)!=A[T];)A[T+1]+=A[T]>>>16,A[T]&=65535,T++}function _(A,T){this.g=A,this.h=T}function S(A,T){if(w(T))throw Error("division by zero");if(w(A))return new _(d,d);if(E(A))return T=S(R(A),T),new _(R(T.g),R(T.h));if(E(T))return T=S(A,R(T)),new _(R(T.g),T.h);if(A.g.length>30){if(E(A)||E(T))throw Error("slowDivide_ only works with positive integers.");for(var I=f,P=T;P.l(A)<=0;)I=k(I),P=k(P);var D=O(I,1),V=O(P,1);for(P=O(P,2),I=O(I,2);!w(P);){var N=V.add(P);N.l(A)<=0&&(D=D.add(I),V=N),P=O(P,1),I=O(I,1)}return T=b(A,D.j(T)),new _(D,T)}for(D=d;A.l(T)>=0;){for(I=Math.max(1,Math.floor(A.m()/T.m())),P=Math.ceil(Math.log(I)/Math.LN2),P=P<=48?1:Math.pow(2,P-48),V=c(I),N=V.j(T);E(N)||N.l(A)>0;)I-=P,V=c(I),N=V.j(T);w(V)&&(V=f),D=D.add(V),A=b(A,N)}return new _(D,A)}t.B=function(A){return S(this,A).h},t.and=function(A){const T=Math.max(this.g.length,A.g.length),I=[];for(let P=0;P<T;P++)I[P]=this.i(P)&A.i(P);return new a(I,this.h&A.h)},t.or=function(A){const T=Math.max(this.g.length,A.g.length),I=[];for(let P=0;P<T;P++)I[P]=this.i(P)|A.i(P);return new a(I,this.h|A.h)},t.xor=function(A){const T=Math.max(this.g.length,A.g.length),I=[];for(let P=0;P<T;P++)I[P]=this.i(P)^A.i(P);return new a(I,this.h^A.h)};function k(A){const T=A.g.length+1,I=[];for(let P=0;P<T;P++)I[P]=A.i(P)<<1|A.i(P-1)>>>31;return new a(I,A.h)}function O(A,T){const I=T>>5;T%=32;const P=A.g.length-I,D=[];for(let V=0;V<P;V++)D[V]=T>0?A.i(V+I)>>>T|A.i(V+I+1)<<32-T:A.i(V+I);return new a(D,A.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,LD=i,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.B,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=c,a.fromString=h,Ns=a}).apply(typeof BI<"u"?BI:typeof self<"u"?self:typeof window<"u"?window:{});var wf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var UD,Au,jD,im,Gv,zD,BD,FD;(function(){var t,e=Object.defineProperty;function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof wf=="object"&&wf];for(var m=0;m<u.length;++m){var y=u[m];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var i=n(this);function r(u,m){if(m)e:{var y=i;u=u.split(".");for(var C=0;C<u.length-1;C++){var L=u[C];if(!(L in y))break e;y=y[L]}u=u[u.length-1],C=y[u],m=m(C),m!=C&&m!=null&&e(y,u,{configurable:!0,writable:!0,value:m})}}r("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(u){return u||function(m){var y=[],C;for(C in m)Object.prototype.hasOwnProperty.call(m,C)&&y.push([C,m[C]]);return y}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var s=s||{},a=this||self;function o(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function l(u,m,y){return u.call.apply(u.bind,arguments)}function c(u,m,y){return c=l,c.apply(null,arguments)}function h(u,m){var y=Array.prototype.slice.call(arguments,1);return function(){var C=y.slice();return C.push.apply(C,arguments),u.apply(this,C)}}function d(u,m){function y(){}y.prototype=m.prototype,u.Z=m.prototype,u.prototype=new y,u.prototype.constructor=u,u.Ob=function(C,L,j){for(var K=Array(arguments.length-2),ue=2;ue<arguments.length;ue++)K[ue-2]=arguments[ue];return m.prototype[L].apply(C,K)}}var f=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function p(u){const m=u.length;if(m>0){const y=Array(m);for(let C=0;C<m;C++)y[C]=u[C];return y}return[]}function w(u,m){for(let C=1;C<arguments.length;C++){const L=arguments[C];var y=typeof L;if(y=y!="object"?y:L?Array.isArray(L)?"array":y:"null",y=="array"||y=="object"&&typeof L.length=="number"){y=u.length||0;const j=L.length||0;u.length=y+j;for(let K=0;K<j;K++)u[y+K]=L[K]}else u.push(L)}}class E{constructor(m,y){this.i=m,this.j=y,this.h=0,this.g=null}get(){let m;return this.h>0?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function R(u){a.setTimeout(()=>{throw u},0)}function b(){var u=A;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class v{constructor(){this.h=this.g=null}add(m,y){const C=_.get();C.set(m,y),this.h?this.h.next=C:this.g=C,this.h=C}}var _=new E(()=>new S,u=>u.reset());class S{constructor(){this.next=this.g=this.h=null}set(m,y){this.h=m,this.g=y,this.next=null}reset(){this.next=this.g=this.h=null}}let k,O=!1,A=new v,T=()=>{const u=Promise.resolve(void 0);k=()=>{u.then(I)}};function I(){for(var u;u=b();){try{u.h.call(u.g)}catch(y){R(y)}var m=_;m.j(u),m.h<100&&(m.h++,u.next=m.g,m.g=u)}O=!1}function P(){this.u=this.u,this.C=this.C}P.prototype.u=!1,P.prototype.dispose=function(){this.u||(this.u=!0,this.N())},P.prototype[Symbol.dispose]=function(){this.dispose()},P.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function D(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}D.prototype.h=function(){this.defaultPrevented=!0};var V=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const y=()=>{};a.addEventListener("test",y,m),a.removeEventListener("test",y,m)}catch{}return u}();function N(u){return/^[\s\xa0]*$/.test(u)}function H(u,m){D.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,m)}d(H,D),H.prototype.init=function(u,m){const y=this.type=u.type,C=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget,m||(y=="mouseover"?m=u.fromElement:y=="mouseout"&&(m=u.toElement)),this.relatedTarget=m,C?(this.clientX=C.clientX!==void 0?C.clientX:C.pageX,this.clientY=C.clientY!==void 0?C.clientY:C.pageY,this.screenX=C.screenX||0,this.screenY=C.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&H.Z.h.call(this)},H.prototype.h=function(){H.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var ie="closure_listenable_"+(Math.random()*1e6|0),z=0;function Y(u,m,y,C,L){this.listener=u,this.proxy=null,this.src=m,this.type=y,this.capture=!!C,this.ha=L,this.key=++z,this.da=this.fa=!1}function J(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function ne(u,m,y){for(const C in u)m.call(y,u[C],C,u)}function W(u,m){for(const y in u)m.call(void 0,u[y],y,u)}function de(u){const m={};for(const y in u)m[y]=u[y];return m}const Nt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function At(u,m){let y,C;for(let L=1;L<arguments.length;L++){C=arguments[L];for(y in C)u[y]=C[y];for(let j=0;j<Nt.length;j++)y=Nt[j],Object.prototype.hasOwnProperty.call(C,y)&&(u[y]=C[y])}}function St(u){this.src=u,this.g={},this.h=0}St.prototype.add=function(u,m,y,C,L){const j=u.toString();u=this.g[j],u||(u=this.g[j]=[],this.h++);const K=Ao(u,m,C,L);return K>-1?(m=u[K],y||(m.fa=!1)):(m=new Y(m,this.src,j,!!C,L),m.fa=y,u.push(m)),m};function mi(u,m){const y=m.type;if(y in u.g){var C=u.g[y],L=Array.prototype.indexOf.call(C,m,void 0),j;(j=L>=0)&&Array.prototype.splice.call(C,L,1),j&&(J(m),u.g[y].length==0&&(delete u.g[y],u.h--))}}function Ao(u,m,y,C){for(let L=0;L<u.length;++L){const j=u[L];if(!j.da&&j.listener==m&&j.capture==!!y&&j.ha==C)return L}return-1}var Gr="closure_lm_"+(Math.random()*1e6|0),Vc={};function EE(u,m,y,C,L){if(Array.isArray(m)){for(let j=0;j<m.length;j++)EE(u,m[j],y,C,L);return null}return y=IE(y),u&&u[ie]?u.J(m,y,o(C)?!!C.capture:!1,L):VL(u,m,y,!1,C,L)}function VL(u,m,y,C,L,j){if(!m)throw Error("Invalid event type");const K=o(L)?!!L.capture:!!L;let ue=Gg(u);if(ue||(u[Gr]=ue=new St(u)),y=ue.add(m,y,C,K,j),y.proxy)return y;if(C=OL(),y.proxy=C,C.src=u,C.listener=y,u.addEventListener)V||(L=K),L===void 0&&(L=!1),u.addEventListener(m.toString(),C,L);else if(u.attachEvent)u.attachEvent(SE(m.toString()),C);else if(u.addListener&&u.removeListener)u.addListener(C);else throw Error("addEventListener and attachEvent are unavailable.");return y}function OL(){function u(y){return m.call(u.src,u.listener,y)}const m=ML;return u}function AE(u,m,y,C,L){if(Array.isArray(m))for(var j=0;j<m.length;j++)AE(u,m[j],y,C,L);else C=o(C)?!!C.capture:!!C,y=IE(y),u&&u[ie]?(u=u.i,j=String(m).toString(),j in u.g&&(m=u.g[j],y=Ao(m,y,C,L),y>-1&&(J(m[y]),Array.prototype.splice.call(m,y,1),m.length==0&&(delete u.g[j],u.h--)))):u&&(u=Gg(u))&&(m=u.g[m.toString()],u=-1,m&&(u=Ao(m,y,C,L)),(y=u>-1?m[u]:null)&&Hg(y))}function Hg(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[ie])mi(m.i,u);else{var y=u.type,C=u.proxy;m.removeEventListener?m.removeEventListener(y,C,u.capture):m.detachEvent?m.detachEvent(SE(y),C):m.addListener&&m.removeListener&&m.removeListener(C),(y=Gg(m))?(mi(y,u),y.h==0&&(y.src=null,m[Gr]=null)):J(u)}}}function SE(u){return u in Vc?Vc[u]:Vc[u]="on"+u}function ML(u,m){if(u.da)u=!0;else{m=new H(m,this);const y=u.listener,C=u.ha||u.src;u.fa&&Hg(u),u=y.call(C,m)}return u}function Gg(u){return u=u[Gr],u instanceof St?u:null}var $g="__closure_events_fn_"+(Math.random()*1e9>>>0);function IE(u){return typeof u=="function"?u:(u[$g]||(u[$g]=function(m){return u.handleEvent(m)}),u[$g])}function Yt(){P.call(this),this.i=new St(this),this.M=this,this.G=null}d(Yt,P),Yt.prototype[ie]=!0,Yt.prototype.removeEventListener=function(u,m,y,C){AE(this,u,m,y,C)};function on(u,m){var y,C=u.G;if(C)for(y=[];C;C=C.G)y.push(C);if(u=u.M,C=m.type||m,typeof m=="string")m=new D(m,u);else if(m instanceof D)m.target=m.target||u;else{var L=m;m=new D(C,u),At(m,L)}L=!0;let j,K;if(y)for(K=y.length-1;K>=0;K--)j=m.g=y[K],L=qd(j,C,!0,m)&&L;if(j=m.g=u,L=qd(j,C,!0,m)&&L,L=qd(j,C,!1,m)&&L,y)for(K=0;K<y.length;K++)j=m.g=y[K],L=qd(j,C,!1,m)&&L}Yt.prototype.N=function(){if(Yt.Z.N.call(this),this.i){var u=this.i;for(const m in u.g){const y=u.g[m];for(let C=0;C<y.length;C++)J(y[C]);delete u.g[m],u.h--}}this.G=null},Yt.prototype.J=function(u,m,y,C){return this.i.add(String(u),m,!1,y,C)},Yt.prototype.K=function(u,m,y,C){return this.i.add(String(u),m,!0,y,C)};function qd(u,m,y,C){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();let L=!0;for(let j=0;j<m.length;++j){const K=m[j];if(K&&!K.da&&K.capture==y){const ue=K.listener,It=K.ha||K.src;K.fa&&mi(u.i,K),L=ue.call(It,C)!==!1&&L}}return L&&!C.defaultPrevented}function LL(u,m){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=c(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(m)>2147483647?-1:a.setTimeout(u,m||0)}function xE(u){u.g=LL(()=>{u.g=null,u.i&&(u.i=!1,xE(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class UL extends P{constructor(m,y){super(),this.m=m,this.l=y,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:xE(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Oc(u){P.call(this),this.h=u,this.g={}}d(Oc,P);var RE=[];function CE(u){ne(u.g,function(m,y){this.g.hasOwnProperty(y)&&Hg(m)},u),u.g={}}Oc.prototype.N=function(){Oc.Z.N.call(this),CE(this)},Oc.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Kg=a.JSON.stringify,jL=a.JSON.parse,zL=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function PE(){}function NE(){}var Mc={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Wg(){D.call(this,"d")}d(Wg,D);function Qg(){D.call(this,"c")}d(Qg,D);var ca={},DE=null;function Hd(){return DE=DE||new Yt}ca.Ia="serverreachability";function kE(u){D.call(this,ca.Ia,u)}d(kE,D);function Lc(u){const m=Hd();on(m,new kE(m))}ca.STAT_EVENT="statevent";function VE(u,m){D.call(this,ca.STAT_EVENT,u),this.stat=m}d(VE,D);function ln(u){const m=Hd();on(m,new VE(m,u))}ca.Ja="timingevent";function OE(u,m){D.call(this,ca.Ja,u),this.size=m}d(OE,D);function Uc(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},m)}function jc(){this.g=!0}jc.prototype.ua=function(){this.g=!1};function BL(u,m,y,C,L,j){u.info(function(){if(u.g)if(j){var K="",ue=j.split("&");for(let Ve=0;Ve<ue.length;Ve++){var It=ue[Ve].split("=");if(It.length>1){const Dt=It[0];It=It[1];const Ri=Dt.split("_");K=Ri.length>=2&&Ri[1]=="type"?K+(Dt+"="+It+"&"):K+(Dt+"=redacted&")}}}else K=null;else K=j;return"XMLHTTP REQ ("+C+") [attempt "+L+"]: "+m+`
`+y+`
`+K})}function FL(u,m,y,C,L,j,K){u.info(function(){return"XMLHTTP RESP ("+C+") [ attempt "+L+"]: "+m+`
`+y+`
`+j+" "+K})}function So(u,m,y,C){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+HL(u,y)+(C?" "+C:"")})}function qL(u,m){u.info(function(){return"TIMEOUT: "+m})}jc.prototype.info=function(){};function HL(u,m){if(!u.g)return m;if(!m)return null;try{const j=JSON.parse(m);if(j){for(u=0;u<j.length;u++)if(Array.isArray(j[u])){var y=j[u];if(!(y.length<2)){var C=y[1];if(Array.isArray(C)&&!(C.length<1)){var L=C[0];if(L!="noop"&&L!="stop"&&L!="close")for(let K=1;K<C.length;K++)C[K]=""}}}}return Kg(j)}catch{return m}}var Gd={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},ME={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},LE;function Yg(){}d(Yg,PE),Yg.prototype.g=function(){return new XMLHttpRequest},LE=new Yg;function zc(u){return encodeURIComponent(String(u))}function GL(u){var m=1;u=u.split(":");const y=[];for(;m>0&&u.length;)y.push(u.shift()),m--;return u.length&&y.push(u.join(":")),y}function $r(u,m,y,C){this.j=u,this.i=m,this.l=y,this.S=C||1,this.V=new Oc(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new UE}function UE(){this.i=null,this.g="",this.h=!1}var jE={},Xg={};function Jg(u,m,y){u.M=1,u.A=Kd(xi(m)),u.u=y,u.R=!0,zE(u,null)}function zE(u,m){u.F=Date.now(),$d(u),u.B=xi(u.A);var y=u.B,C=u.S;Array.isArray(C)||(C=[String(C)]),ZE(y.i,"t",C),u.C=0,y=u.j.L,u.h=new UE,u.g=yA(u.j,y?m:null,!u.u),u.P>0&&(u.O=new UL(c(u.Y,u,u.g),u.P)),m=u.V,y=u.g,C=u.ba;var L="readystatechange";Array.isArray(L)||(L&&(RE[0]=L.toString()),L=RE);for(let j=0;j<L.length;j++){const K=EE(y,L[j],C||m.handleEvent,!1,m.h||m);if(!K)break;m.g[K.key]=K}m=u.J?de(u.J):{},u.u?(u.v||(u.v="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,m)):(u.v="GET",u.g.ea(u.B,u.v,null,m)),Lc(),BL(u.i,u.v,u.B,u.l,u.S,u.u)}$r.prototype.ba=function(u){u=u.target;const m=this.O;m&&Qr(u)==3?m.j():this.Y(u)},$r.prototype.Y=function(u){try{if(u==this.g)e:{const ue=Qr(this.g),It=this.g.ya(),Ve=this.g.ca();if(!(ue<3)&&(ue!=3||this.g&&(this.h.h||this.g.la()||aA(this.g)))){this.K||ue!=4||It==7||(It==8||Ve<=0?Lc(3):Lc(2)),Zg(this);var m=this.g.ca();this.X=m;var y=$L(this);if(this.o=m==200,FL(this.i,this.v,this.B,this.l,this.S,ue,m),this.o){if(this.U&&!this.L){t:{if(this.g){var C,L=this.g;if((C=L.g?L.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!N(C)){var j=C;break t}}j=null}if(u=j)So(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,ey(this,u);else{this.o=!1,this.m=3,ln(12),ua(this),Bc(this);break e}}if(this.R){u=!0;let Dt;for(;!this.K&&this.C<y.length;)if(Dt=KL(this,y),Dt==Xg){ue==4&&(this.m=4,ln(14),u=!1),So(this.i,this.l,null,"[Incomplete Response]");break}else if(Dt==jE){this.m=4,ln(15),So(this.i,this.l,y,"[Invalid Chunk]"),u=!1;break}else So(this.i,this.l,Dt,null),ey(this,Dt);if(BE(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ue!=4||y.length!=0||this.h.h||(this.m=1,ln(16),u=!1),this.o=this.o&&u,!u)So(this.i,this.l,y,"[Invalid Chunked Response]"),ua(this),Bc(this);else if(y.length>0&&!this.W){this.W=!0;var K=this.j;K.g==this&&K.aa&&!K.P&&(K.j.info("Great, no buffering proxy detected. Bytes received: "+y.length),ly(K),K.P=!0,ln(11))}}else So(this.i,this.l,y,null),ey(this,y);ue==4&&ua(this),this.o&&!this.K&&(ue==4?fA(this.j,this):(this.o=!1,$d(this)))}else o4(this.g),m==400&&y.indexOf("Unknown SID")>0?(this.m=3,ln(12)):(this.m=0,ln(13)),ua(this),Bc(this)}}}catch{}finally{}};function $L(u){if(!BE(u))return u.g.la();const m=aA(u.g);if(m==="")return"";let y="";const C=m.length,L=Qr(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return ua(u),Bc(u),"";u.h.i=new a.TextDecoder}for(let j=0;j<C;j++)u.h.h=!0,y+=u.h.i.decode(m[j],{stream:!(L&&j==C-1)});return m.length=0,u.h.g+=y,u.C=0,u.h.g}function BE(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function KL(u,m){var y=u.C,C=m.indexOf(`
`,y);return C==-1?Xg:(y=Number(m.substring(y,C)),isNaN(y)?jE:(C+=1,C+y>m.length?Xg:(m=m.slice(C,C+y),u.C=C+y,m)))}$r.prototype.cancel=function(){this.K=!0,ua(this)};function $d(u){u.T=Date.now()+u.H,FE(u,u.H)}function FE(u,m){if(u.D!=null)throw Error("WatchDog timer not null");u.D=Uc(c(u.aa,u),m)}function Zg(u){u.D&&(a.clearTimeout(u.D),u.D=null)}$r.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(qL(this.i,this.B),this.M!=2&&(Lc(),ln(17)),ua(this),this.m=2,Bc(this)):FE(this,this.T-u)};function Bc(u){u.j.I==0||u.K||fA(u.j,u)}function ua(u){Zg(u);var m=u.O;m&&typeof m.dispose=="function"&&m.dispose(),u.O=null,CE(u.V),u.g&&(m=u.g,u.g=null,m.abort(),m.dispose())}function ey(u,m){try{var y=u.j;if(y.I!=0&&(y.g==u||ty(y.h,u))){if(!u.L&&ty(y.h,u)&&y.I==3){try{var C=y.Ba.g.parse(m)}catch{C=null}if(Array.isArray(C)&&C.length==3){var L=C;if(L[0]==0){e:if(!y.v){if(y.g)if(y.g.F+3e3<u.F)Jd(y),Yd(y);else break e;oy(y),ln(18)}}else y.xa=L[1],0<y.xa-y.K&&L[2]<37500&&y.F&&y.A==0&&!y.C&&(y.C=Uc(c(y.Va,y),6e3));GE(y.h)<=1&&y.ta&&(y.ta=void 0)}else da(y,11)}else if((u.L||y.g==u)&&Jd(y),!N(m))for(L=y.Ba.g.parse(m),m=0;m<L.length;m++){let Ve=L[m];const Dt=Ve[0];if(!(Dt<=y.K))if(y.K=Dt,Ve=Ve[1],y.I==2)if(Ve[0]=="c"){y.M=Ve[1],y.ba=Ve[2];const Ri=Ve[3];Ri!=null&&(y.ka=Ri,y.j.info("VER="+y.ka));const fa=Ve[4];fa!=null&&(y.za=fa,y.j.info("SVER="+y.za));const Yr=Ve[5];Yr!=null&&typeof Yr=="number"&&Yr>0&&(C=1.5*Yr,y.O=C,y.j.info("backChannelRequestTimeoutMs_="+C)),C=y;const Xr=u.g;if(Xr){const ef=Xr.g?Xr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ef){var j=C.h;j.g||ef.indexOf("spdy")==-1&&ef.indexOf("quic")==-1&&ef.indexOf("h2")==-1||(j.j=j.l,j.g=new Set,j.h&&(ny(j,j.h),j.h=null))}if(C.G){const cy=Xr.g?Xr.g.getResponseHeader("X-HTTP-Session-Id"):null;cy&&(C.wa=cy,je(C.J,C.G,cy))}}y.I=3,y.l&&y.l.ra(),y.aa&&(y.T=Date.now()-u.F,y.j.info("Handshake RTT: "+y.T+"ms")),C=y;var K=u;if(C.na=gA(C,C.L?C.ba:null,C.W),K.L){$E(C.h,K);var ue=K,It=C.O;It&&(ue.H=It),ue.D&&(Zg(ue),$d(ue)),C.g=K}else hA(C);y.i.length>0&&Xd(y)}else Ve[0]!="stop"&&Ve[0]!="close"||da(y,7);else y.I==3&&(Ve[0]=="stop"||Ve[0]=="close"?Ve[0]=="stop"?da(y,7):ay(y):Ve[0]!="noop"&&y.l&&y.l.qa(Ve),y.A=0)}}Lc(4)}catch{}}var WL=class{constructor(u,m){this.g=u,this.map=m}};function qE(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function HE(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function GE(u){return u.h?1:u.g?u.g.size:0}function ty(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function ny(u,m){u.g?u.g.add(m):u.h=m}function $E(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}qE.prototype.cancel=function(){if(this.i=KE(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function KE(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const y of u.g.values())m=m.concat(y.G);return m}return p(u.i)}var WE=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function QL(u,m){if(u){u=u.split("&");for(let y=0;y<u.length;y++){const C=u[y].indexOf("=");let L,j=null;C>=0?(L=u[y].substring(0,C),j=u[y].substring(C+1)):L=u[y],m(L,j?decodeURIComponent(j.replace(/\+/g," ")):"")}}}function Kr(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let m;u instanceof Kr?(this.l=u.l,Fc(this,u.j),this.o=u.o,this.g=u.g,qc(this,u.u),this.h=u.h,iy(this,eA(u.i)),this.m=u.m):u&&(m=String(u).match(WE))?(this.l=!1,Fc(this,m[1]||"",!0),this.o=Hc(m[2]||""),this.g=Hc(m[3]||"",!0),qc(this,m[4]),this.h=Hc(m[5]||"",!0),iy(this,m[6]||"",!0),this.m=Hc(m[7]||"")):(this.l=!1,this.i=new $c(null,this.l))}Kr.prototype.toString=function(){const u=[];var m=this.j;m&&u.push(Gc(m,QE,!0),":");var y=this.g;return(y||m=="file")&&(u.push("//"),(m=this.o)&&u.push(Gc(m,QE,!0),"@"),u.push(zc(y).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y=this.u,y!=null&&u.push(":",String(y))),(y=this.h)&&(this.g&&y.charAt(0)!="/"&&u.push("/"),u.push(Gc(y,y.charAt(0)=="/"?JL:XL,!0))),(y=this.i.toString())&&u.push("?",y),(y=this.m)&&u.push("#",Gc(y,e4)),u.join("")},Kr.prototype.resolve=function(u){const m=xi(this);let y=!!u.j;y?Fc(m,u.j):y=!!u.o,y?m.o=u.o:y=!!u.g,y?m.g=u.g:y=u.u!=null;var C=u.h;if(y)qc(m,u.u);else if(y=!!u.h){if(C.charAt(0)!="/")if(this.g&&!this.h)C="/"+C;else{var L=m.h.lastIndexOf("/");L!=-1&&(C=m.h.slice(0,L+1)+C)}if(L=C,L==".."||L==".")C="";else if(L.indexOf("./")!=-1||L.indexOf("/.")!=-1){C=L.lastIndexOf("/",0)==0,L=L.split("/");const j=[];for(let K=0;K<L.length;){const ue=L[K++];ue=="."?C&&K==L.length&&j.push(""):ue==".."?((j.length>1||j.length==1&&j[0]!="")&&j.pop(),C&&K==L.length&&j.push("")):(j.push(ue),C=!0)}C=j.join("/")}else C=L}return y?m.h=C:y=u.i.toString()!=="",y?iy(m,eA(u.i)):y=!!u.m,y&&(m.m=u.m),m};function xi(u){return new Kr(u)}function Fc(u,m,y){u.j=y?Hc(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function qc(u,m){if(m){if(m=Number(m),isNaN(m)||m<0)throw Error("Bad port number "+m);u.u=m}else u.u=null}function iy(u,m,y){m instanceof $c?(u.i=m,t4(u.i,u.l)):(y||(m=Gc(m,ZL)),u.i=new $c(m,u.l))}function je(u,m,y){u.i.set(m,y)}function Kd(u){return je(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function Hc(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Gc(u,m,y){return typeof u=="string"?(u=encodeURI(u).replace(m,YL),y&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function YL(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var QE=/[#\/\?@]/g,XL=/[#\?:]/g,JL=/[#\?]/g,ZL=/[#\?@]/g,e4=/#/g;function $c(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function ha(u){u.g||(u.g=new Map,u.h=0,u.i&&QL(u.i,function(m,y){u.add(decodeURIComponent(m.replace(/\+/g," ")),y)}))}t=$c.prototype,t.add=function(u,m){ha(this),this.i=null,u=Io(this,u);let y=this.g.get(u);return y||this.g.set(u,y=[]),y.push(m),this.h+=1,this};function YE(u,m){ha(u),m=Io(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function XE(u,m){return ha(u),m=Io(u,m),u.g.has(m)}t.forEach=function(u,m){ha(this),this.g.forEach(function(y,C){y.forEach(function(L){u.call(m,L,C,this)},this)},this)};function JE(u,m){ha(u);let y=[];if(typeof m=="string")XE(u,m)&&(y=y.concat(u.g.get(Io(u,m))));else for(u=Array.from(u.g.values()),m=0;m<u.length;m++)y=y.concat(u[m]);return y}t.set=function(u,m){return ha(this),this.i=null,u=Io(this,u),XE(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},t.get=function(u,m){return u?(u=JE(this,u),u.length>0?String(u[0]):m):m};function ZE(u,m,y){YE(u,m),y.length>0&&(u.i=null,u.g.set(Io(u,m),p(y)),u.h+=y.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(let C=0;C<m.length;C++){var y=m[C];const L=zc(y);y=JE(this,y);for(let j=0;j<y.length;j++){let K=L;y[j]!==""&&(K+="="+zc(y[j])),u.push(K)}}return this.i=u.join("&")};function eA(u){const m=new $c;return m.i=u.i,u.g&&(m.g=new Map(u.g),m.h=u.h),m}function Io(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function t4(u,m){m&&!u.j&&(ha(u),u.i=null,u.g.forEach(function(y,C){const L=C.toLowerCase();C!=L&&(YE(this,C),ZE(this,L,y))},u)),u.j=m}function n4(u,m){const y=new jc;if(a.Image){const C=new Image;C.onload=h(Wr,y,"TestLoadImage: loaded",!0,m,C),C.onerror=h(Wr,y,"TestLoadImage: error",!1,m,C),C.onabort=h(Wr,y,"TestLoadImage: abort",!1,m,C),C.ontimeout=h(Wr,y,"TestLoadImage: timeout",!1,m,C),a.setTimeout(function(){C.ontimeout&&C.ontimeout()},1e4),C.src=u}else m(!1)}function i4(u,m){const y=new jc,C=new AbortController,L=setTimeout(()=>{C.abort(),Wr(y,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:C.signal}).then(j=>{clearTimeout(L),j.ok?Wr(y,"TestPingServer: ok",!0,m):Wr(y,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(L),Wr(y,"TestPingServer: error",!1,m)})}function Wr(u,m,y,C,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),C(y)}catch{}}function r4(){this.g=new zL}function ry(u){this.i=u.Sb||null,this.h=u.ab||!1}d(ry,PE),ry.prototype.g=function(){return new Wd(this.i,this.h)};function Wd(u,m){Yt.call(this),this.H=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}d(Wd,Yt),t=Wd.prototype,t.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=m,this.readyState=1,Wc(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const m={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(m.body=u),(this.H||a).fetch(new Request(this.D,m)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Kc(this)),this.readyState=0},t.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Wc(this)),this.g&&(this.readyState=3,Wc(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;tA(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function tA(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}t.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.B.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?Kc(this):Wc(this),this.readyState==3&&tA(this)}},t.Oa=function(u){this.g&&(this.response=this.responseText=u,Kc(this))},t.Na=function(u){this.g&&(this.response=u,Kc(this))},t.ga=function(){this.g&&Kc(this)};function Kc(u){u.readyState=4,u.l=null,u.j=null,u.B=null,Wc(u)}t.setRequestHeader=function(u,m){this.A.append(u,m)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var y=m.next();!y.done;)y=y.value,u.push(y[0]+": "+y[1]),y=m.next();return u.join(`\r
`)};function Wc(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Wd.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function nA(u){let m="";return ne(u,function(y,C){m+=C,m+=":",m+=y,m+=`\r
`}),m}function sy(u,m,y){e:{for(C in y){var C=!1;break e}C=!0}C||(y=nA(y),typeof u=="string"?y!=null&&zc(y):je(u,m,y))}function rt(u){Yt.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}d(rt,Yt);var s4=/^https?$/i,a4=["POST","PUT"];t=rt.prototype,t.Fa=function(u){this.H=u},t.ea=function(u,m,y,C){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():LE.g(),this.g.onreadystatechange=f(c(this.Ca,this));try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch(j){iA(this,j);return}if(u=y||"",y=new Map(this.headers),C)if(Object.getPrototypeOf(C)===Object.prototype)for(var L in C)y.set(L,C[L]);else if(typeof C.keys=="function"&&typeof C.get=="function")for(const j of C.keys())y.set(j,C.get(j));else throw Error("Unknown input type for opt_headers: "+String(C));C=Array.from(y.keys()).find(j=>j.toLowerCase()=="content-type"),L=a.FormData&&u instanceof a.FormData,!(Array.prototype.indexOf.call(a4,m,void 0)>=0)||C||L||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[j,K]of y)this.g.setRequestHeader(j,K);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(j){iA(this,j)}};function iA(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.o=5,rA(u),Qd(u)}function rA(u){u.A||(u.A=!0,on(u,"complete"),on(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,on(this,"complete"),on(this,"abort"),Qd(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Qd(this,!0)),rt.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?sA(this):this.Xa())},t.Xa=function(){sA(this)};function sA(u){if(u.h&&typeof s<"u"){if(u.v&&Qr(u)==4)setTimeout(u.Ca.bind(u),0);else if(on(u,"readystatechange"),Qr(u)==4){u.h=!1;try{const j=u.ca();e:switch(j){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var y;if(!(y=m)){var C;if(C=j===0){let K=String(u.D).match(WE)[1]||null;!K&&a.self&&a.self.location&&(K=a.self.location.protocol.slice(0,-1)),C=!s4.test(K?K.toLowerCase():"")}y=C}if(y)on(u,"complete"),on(u,"success");else{u.o=6;try{var L=Qr(u)>2?u.g.statusText:""}catch{L=""}u.l=L+" ["+u.ca()+"]",rA(u)}}finally{Qd(u)}}}}function Qd(u,m){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const y=u.g;u.g=null,m||on(u,"ready");try{y.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Qr(u){return u.g?u.g.readyState:0}t.ca=function(){try{return Qr(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),jL(m)}};function aA(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function o4(u){const m={};u=(u.g&&Qr(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let C=0;C<u.length;C++){if(N(u[C]))continue;var y=GL(u[C]);const L=y[0];if(y=y[1],typeof y!="string")continue;y=y.trim();const j=m[L]||[];m[L]=j,j.push(y)}W(m,function(C){return C.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Qc(u,m,y){return y&&y.internalChannelParams&&y.internalChannelParams[u]||m}function oA(u){this.za=0,this.i=[],this.j=new jc,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Qc("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Qc("baseRetryDelayMs",5e3,u),this.Za=Qc("retryDelaySeedMs",1e4,u),this.Ta=Qc("forwardChannelMaxRetries",2,u),this.va=Qc("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new qE(u&&u.concurrentRequestLimit),this.Ba=new r4,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=oA.prototype,t.ka=8,t.I=1,t.connect=function(u,m,y,C){ln(0),this.W=u,this.H=m||{},y&&C!==void 0&&(this.H.OSID=y,this.H.OAID=C),this.F=this.X,this.J=gA(this,null,this.W),Xd(this)};function ay(u){if(lA(u),u.I==3){var m=u.V++,y=xi(u.J);if(je(y,"SID",u.M),je(y,"RID",m),je(y,"TYPE","terminate"),Yc(u,y),m=new $r(u,u.j,m),m.M=2,m.A=Kd(xi(y)),y=!1,a.navigator&&a.navigator.sendBeacon)try{y=a.navigator.sendBeacon(m.A.toString(),"")}catch{}!y&&a.Image&&(new Image().src=m.A,y=!0),y||(m.g=yA(m.j,null),m.g.ea(m.A)),m.F=Date.now(),$d(m)}pA(u)}function Yd(u){u.g&&(ly(u),u.g.cancel(),u.g=null)}function lA(u){Yd(u),u.v&&(a.clearTimeout(u.v),u.v=null),Jd(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&a.clearTimeout(u.m),u.m=null)}function Xd(u){if(!HE(u.h)&&!u.m){u.m=!0;var m=u.Ea;k||T(),O||(k(),O=!0),A.add(m,u),u.D=0}}function l4(u,m){return GE(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=m.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=Uc(c(u.Ea,u,m),mA(u,u.D)),u.D++,!0)}t.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const L=new $r(this,this.j,u);let j=this.o;if(this.U&&(j?(j=de(j),At(j,this.U)):j=this.U),this.u!==null||this.R||(L.J=j,j=null),this.S)e:{for(var m=0,y=0;y<this.i.length;y++){t:{var C=this.i[y];if("__data__"in C.map&&(C=C.map.__data__,typeof C=="string")){C=C.length;break t}C=void 0}if(C===void 0)break;if(m+=C,m>4096){m=y;break e}if(m===4096||y===this.i.length-1){m=y+1;break e}}m=1e3}else m=1e3;m=uA(this,L,m),y=xi(this.J),je(y,"RID",u),je(y,"CVER",22),this.G&&je(y,"X-HTTP-Session-Id",this.G),Yc(this,y),j&&(this.R?m="headers="+zc(nA(j))+"&"+m:this.u&&sy(y,this.u,j)),ny(this.h,L),this.Ra&&je(y,"TYPE","init"),this.S?(je(y,"$req",m),je(y,"SID","null"),L.U=!0,Jg(L,y,null)):Jg(L,y,m),this.I=2}}else this.I==3&&(u?cA(this,u):this.i.length==0||HE(this.h)||cA(this))};function cA(u,m){var y;m?y=m.l:y=u.V++;const C=xi(u.J);je(C,"SID",u.M),je(C,"RID",y),je(C,"AID",u.K),Yc(u,C),u.u&&u.o&&sy(C,u.u,u.o),y=new $r(u,u.j,y,u.D+1),u.u===null&&(y.J=u.o),m&&(u.i=m.G.concat(u.i)),m=uA(u,y,1e3),y.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),ny(u.h,y),Jg(y,C,m)}function Yc(u,m){u.H&&ne(u.H,function(y,C){je(m,C,y)}),u.l&&ne({},function(y,C){je(m,C,y)})}function uA(u,m,y){y=Math.min(u.i.length,y);const C=u.l?c(u.l.Ka,u.l,u):null;e:{var L=u.i;let ue=-1;for(;;){const It=["count="+y];ue==-1?y>0?(ue=L[0].g,It.push("ofs="+ue)):ue=0:It.push("ofs="+ue);let Ve=!0;for(let Dt=0;Dt<y;Dt++){var j=L[Dt].g;const Ri=L[Dt].map;if(j-=ue,j<0)ue=Math.max(0,L[Dt].g-100),Ve=!1;else try{j="req"+j+"_"||"";try{var K=Ri instanceof Map?Ri:Object.entries(Ri);for(const[fa,Yr]of K){let Xr=Yr;o(Yr)&&(Xr=Kg(Yr)),It.push(j+fa+"="+encodeURIComponent(Xr))}}catch(fa){throw It.push(j+"type="+encodeURIComponent("_badmap")),fa}}catch{C&&C(Ri)}}if(Ve){K=It.join("&");break e}}K=void 0}return u=u.i.splice(0,y),m.G=u,K}function hA(u){if(!u.g&&!u.v){u.Y=1;var m=u.Da;k||T(),O||(k(),O=!0),A.add(m,u),u.A=0}}function oy(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=Uc(c(u.Da,u),mA(u,u.A)),u.A++,!0)}t.Da=function(){if(this.v=null,dA(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=Uc(c(this.Wa,this),u)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,ln(10),Yd(this),dA(this))};function ly(u){u.B!=null&&(a.clearTimeout(u.B),u.B=null)}function dA(u){u.g=new $r(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var m=xi(u.na);je(m,"RID","rpc"),je(m,"SID",u.M),je(m,"AID",u.K),je(m,"CI",u.F?"0":"1"),!u.F&&u.ia&&je(m,"TO",u.ia),je(m,"TYPE","xmlhttp"),Yc(u,m),u.u&&u.o&&sy(m,u.u,u.o),u.O&&(u.g.H=u.O);var y=u.g;u=u.ba,y.M=1,y.A=Kd(xi(m)),y.u=null,y.R=!0,zE(y,u)}t.Va=function(){this.C!=null&&(this.C=null,Yd(this),oy(this),ln(19))};function Jd(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function fA(u,m){var y=null;if(u.g==m){Jd(u),ly(u),u.g=null;var C=2}else if(ty(u.h,m))y=m.G,$E(u.h,m),C=1;else return;if(u.I!=0){if(m.o)if(C==1){y=m.u?m.u.length:0,m=Date.now()-m.F;var L=u.D;C=Hd(),on(C,new OE(C,y)),Xd(u)}else hA(u);else if(L=m.m,L==3||L==0&&m.X>0||!(C==1&&l4(u,m)||C==2&&oy(u)))switch(y&&y.length>0&&(m=u.h,m.i=m.i.concat(y)),L){case 1:da(u,5);break;case 4:da(u,10);break;case 3:da(u,6);break;default:da(u,2)}}}function mA(u,m){let y=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(y*=2),y*m}function da(u,m){if(u.j.info("Error code "+m),m==2){var y=c(u.bb,u),C=u.Ua;const L=!C;C=new Kr(C||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Fc(C,"https"),Kd(C),L?n4(C.toString(),y):i4(C.toString(),y)}else ln(2);u.I=0,u.l&&u.l.pa(m),pA(u),lA(u)}t.bb=function(u){u?(this.j.info("Successfully pinged google.com"),ln(2)):(this.j.info("Failed to ping google.com"),ln(1))};function pA(u){if(u.I=0,u.ja=[],u.l){const m=KE(u.h);(m.length!=0||u.i.length!=0)&&(w(u.ja,m),w(u.ja,u.i),u.h.i.length=0,p(u.i),u.i.length=0),u.l.oa()}}function gA(u,m,y){var C=y instanceof Kr?xi(y):new Kr(y);if(C.g!="")m&&(C.g=m+"."+C.g),qc(C,C.u);else{var L=a.location;C=L.protocol,m=m?m+"."+L.hostname:L.hostname,L=+L.port;const j=new Kr(null);C&&Fc(j,C),m&&(j.g=m),L&&qc(j,L),y&&(j.h=y),C=j}return y=u.G,m=u.wa,y&&m&&je(C,y,m),je(C,"VER",u.ka),Yc(u,C),C}function yA(u,m,y){if(m&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Aa&&!u.ma?new rt(new ry({ab:y})):new rt(u.ma),m.Fa(u.L),m}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function _A(){}t=_A.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Zd(){}Zd.prototype.g=function(u,m){return new Pn(u,m)};function Pn(u,m){Yt.call(this),this.g=new oA(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.sa&&(u?u["X-WebChannel-Client-Profile"]=m.sa:u={"X-WebChannel-Client-Profile":m.sa}),this.g.U=u,(u=m&&m.Qb)&&!N(u)&&(this.g.u=u),this.A=m&&m.supportsCrossDomainXhr||!1,this.v=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!N(m)&&(this.g.G=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new xo(this)}d(Pn,Yt),Pn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Pn.prototype.close=function(){ay(this.g)},Pn.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var y={};y.__data__=u,u=y}else this.v&&(y={},y.__data__=Kg(u),u=y);m.i.push(new WL(m.Ya++,u)),m.I==3&&Xd(m)},Pn.prototype.N=function(){this.g.l=null,delete this.j,ay(this.g),delete this.g,Pn.Z.N.call(this)};function vA(u){Wg.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){e:{for(const y in m){u=y;break e}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}d(vA,Wg);function bA(){Qg.call(this),this.status=1}d(bA,Qg);function xo(u){this.g=u}d(xo,_A),xo.prototype.ra=function(){on(this.g,"a")},xo.prototype.qa=function(u){on(this.g,new vA(u))},xo.prototype.pa=function(u){on(this.g,new bA)},xo.prototype.oa=function(){on(this.g,"b")},Zd.prototype.createWebChannel=Zd.prototype.g,Pn.prototype.send=Pn.prototype.o,Pn.prototype.open=Pn.prototype.m,Pn.prototype.close=Pn.prototype.close,FD=function(){return new Zd},BD=function(){return Hd()},zD=ca,Gv={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Gd.NO_ERROR=0,Gd.TIMEOUT=8,Gd.HTTP_ERROR=6,im=Gd,ME.COMPLETE="complete",jD=ME,NE.EventType=Mc,Mc.OPEN="a",Mc.CLOSE="b",Mc.ERROR="c",Mc.MESSAGE="d",Yt.prototype.listen=Yt.prototype.J,Au=NE,rt.prototype.listenOnce=rt.prototype.K,rt.prototype.getLastError=rt.prototype.Ha,rt.prototype.getLastErrorCode=rt.prototype.ya,rt.prototype.getStatus=rt.prototype.ca,rt.prototype.getResponseJson=rt.prototype.La,rt.prototype.getResponseText=rt.prototype.la,rt.prototype.send=rt.prototype.ea,rt.prototype.setWithCredentials=rt.prototype.Fa,UD=rt}).apply(typeof wf<"u"?wf:typeof self<"u"?self:typeof window<"u"?window:{});const FI="@firebase/firestore",qI="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ot.UNAUTHENTICATED=new Ot(null),Ot.GOOGLE_CREDENTIALS=new Ot("google-credentials-uid"),Ot.FIRST_PARTY=new Ot("first-party-uid"),Ot.MOCK_USER=new Ot("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ec="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bs=new Yp("@firebase/firestore");function Bo(){return Bs.logLevel}function T8(t){Bs.setLogLevel(t)}function q(t,...e){if(Bs.logLevel<=me.DEBUG){const n=e.map(xw);Bs.debug(`Firestore (${Ec}): ${t}`,...n)}}function ft(t,...e){if(Bs.logLevel<=me.ERROR){const n=e.map(xw);Bs.error(`Firestore (${Ec}): ${t}`,...n)}}function Xi(t,...e){if(Bs.logLevel<=me.WARN){const n=e.map(xw);Bs.warn(`Firestore (${Ec}): ${t}`,...n)}}function xw(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X(t,e,n){let i="Unexpected state";typeof e=="string"?i=e:n=e,qD(t,i,n)}function qD(t,e,n){let i=`FIRESTORE (${Ec}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw ft(i),new Error(i)}function Z(t,e,n,i){let r="Unexpected state";typeof n=="string"?r=n:i=n,t||qD(e,r,i)}function E8(t,e){t||X(57014,e)}function Q(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class F extends rn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HD{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class A8{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ot.UNAUTHENTICATED))}shutdown(){}}class S8{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class I8{constructor(e){this.t=e,this.currentUser=Ot.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Z(this.o===void 0,42304);let i=this.i;const r=l=>this.i!==i?(i=this.i,n(l)):Promise.resolve();let s=new Wt;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Wt,e.enqueueRetryable(()=>r(this.currentUser))};const a=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await r(this.currentUser)})},o=l=>{q("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(l=>o(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?o(l):(q("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Wt)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(q("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Z(typeof i.accessToken=="string",31837,{l:i}),new HD(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Z(e===null||typeof e=="string",2055,{h:e}),new Ot(e)}}class x8{constructor(e,n,i){this.P=e,this.T=n,this.I=i,this.type="FirstParty",this.user=Ot.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class R8{constructor(e,n,i){this.P=e,this.T=n,this.I=i}getToken(){return Promise.resolve(new x8(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Ot.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class HI{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class C8{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,qe(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Z(this.o===void 0,3512);const i=s=>{s.error!=null&&q("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const a=s.token!==this.m;return this.m=s.token,q("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>i(s))};const r=s=>{q("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?r(s):q("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new HI(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Z(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new HI(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P8(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rw{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const r=P8(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<n&&(i+=e.charAt(r[s]%62))}return i}}function ae(t,e){return t<e?-1:t>e?1:0}function $v(t,e){const n=Math.min(t.length,e.length);for(let i=0;i<n;i++){const r=t.charAt(i),s=e.charAt(i);if(r!==s)return a_(r)===a_(s)?ae(r,s):a_(r)?1:-1}return ae(t.length,e.length)}const N8=55296,D8=57343;function a_(t){const e=t.charCodeAt(0);return e>=N8&&e<=D8}function zl(t,e,n){return t.length===e.length&&t.every((i,r)=>n(i,e[r]))}function GD(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GI="__name__";class Pi{constructor(e,n,i){n===void 0?n=0:n>e.length&&X(637,{offset:n,range:e.length}),i===void 0?i=e.length-n:i>e.length-n&&X(1746,{length:i,range:e.length-n}),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return Pi.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Pi?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let r=0;r<i;r++){const s=Pi.compareSegments(e.get(r),n.get(r));if(s!==0)return s}return ae(e.length,n.length)}static compareSegments(e,n){const i=Pi.isNumericId(e),r=Pi.isNumericId(n);return i&&!r?-1:!i&&r?1:i&&r?Pi.extractNumericId(e).compare(Pi.extractNumericId(n)):$v(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ns.fromString(e.substring(4,e.length-2))}}class ge extends Pi{construct(e,n,i){return new ge(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new F(U.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(r=>r.length>0))}return new ge(n)}static emptyPath(){return new ge([])}}const k8=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Xe extends Pi{construct(e,n,i){return new Xe(e,n,i)}static isValidIdentifier(e){return k8.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Xe.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===GI}static keyField(){return new Xe([GI])}static fromServerFormat(e){const n=[];let i="",r=0;const s=()=>{if(i.length===0)throw new F(U.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let a=!1;for(;r<e.length;){const o=e[r];if(o==="\\"){if(r+1===e.length)throw new F(U.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[r+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new F(U.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=l,r+=2}else o==="`"?(a=!a,r++):o!=="."||a?(i+=o,r++):(s(),r++)}if(s(),a)throw new F(U.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Xe(n)}static emptyPath(){return new Xe([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ${constructor(e){this.path=e}static fromPath(e){return new $(ge.fromString(e))}static fromName(e){return new $(ge.fromString(e).popFirst(5))}static empty(){return new $(ge.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ge.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ge.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new $(new ge(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cw(t,e,n){if(!n)throw new F(U.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function $D(t,e,n,i){if(e===!0&&i===!0)throw new F(U.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function $I(t){if(!$.isDocumentKey(t))throw new F(U.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function KI(t){if($.isDocumentKey(t))throw new F(U.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function KD(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function lg(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":X(12329,{type:typeof t})}function Te(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new F(U.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=lg(t);throw new F(U.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function WD(t,e){if(e<=0)throw new F(U.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Et(t,e){const n={typeString:t};return e&&(n.value=e),n}function Ad(t,e){if(!KD(t))throw new F(U.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in e)if(e[i]){const r=e[i].typeString,s="value"in e[i]?{value:e[i].value}:void 0;if(!(i in t)){n=`JSON missing required field: '${i}'`;break}const a=t[i];if(r&&typeof a!==r){n=`JSON field '${i}' must be a ${r}.`;break}if(s!==void 0&&a!==s.value){n=`Expected '${i}' field to equal '${s.value}'`;break}}if(n)throw new F(U.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WI=-62135596800,QI=1e6;class Ie{static now(){return Ie.fromMillis(Date.now())}static fromDate(e){return Ie.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor((e-1e3*n)*QI);return new Ie(n,i)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new F(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new F(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<WI)throw new F(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new F(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/QI}_compareTo(e){return this.seconds===e.seconds?ae(this.nanoseconds,e.nanoseconds):ae(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ie._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Ad(e,Ie._jsonSchema))return new Ie(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-WI;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ie._jsonSchemaVersion="firestore/timestamp/1.0",Ie._jsonSchema={type:Et("string",Ie._jsonSchemaVersion),seconds:Et("number"),nanoseconds:Et("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{static fromTimestamp(e){return new te(e)}static min(){return new te(new Ie(0,0))}static max(){return new te(new Ie(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bl=-1;class np{constructor(e,n,i,r){this.indexId=e,this.collectionGroup=n,this.fields=i,this.indexState=r}}function Kv(t){return t.fields.find(e=>e.kind===2)}function Ta(t){return t.fields.filter(e=>e.kind!==2)}np.UNKNOWN_ID=-1;class rm{constructor(e,n){this.fieldPath=e,this.kind=n}}class Oh{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new Oh(0,Kn.min())}}function QD(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=te.fromTimestamp(i===1e9?new Ie(n+1,0):new Ie(n,i));return new Kn(r,$.empty(),e)}function YD(t){return new Kn(t.readTime,t.key,Bl)}class Kn{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new Kn(te.min(),$.empty(),Bl)}static max(){return new Kn(te.max(),$.empty(),Bl)}}function Pw(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=$.comparator(t.documentKey,e.documentKey),n!==0?n:ae(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XD="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class JD{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ta(t){if(t.code!==U.FAILED_PRECONDITION||t.message!==XD)throw t;q("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&X(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new M((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(n,s).next(i,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof M?n:M.resolve(n)}catch(n){return M.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):M.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):M.reject(n)}static resolve(e){return new M((n,i)=>{n(e)})}static reject(e){return new M((n,i)=>{i(e)})}static waitFor(e){return new M((n,i)=>{let r=0,s=0,a=!1;e.forEach(o=>{++r,o.next(()=>{++s,a&&s===r&&n()},l=>i(l))}),a=!0,s===r&&n()})}static or(e){let n=M.resolve(!1);for(const i of e)n=n.next(r=>r?M.resolve(r):i());return n}static forEach(e,n){const i=[];return e.forEach((r,s)=>{i.push(n.call(this,r,s))}),this.waitFor(i)}static mapArray(e,n){return new M((i,r)=>{const s=e.length,a=new Array(s);let o=0;for(let l=0;l<s;l++){const c=l;n(e[c]).next(h=>{a[c]=h,++o,o===s&&i(a)},h=>r(h))}})}static doWhile(e,n){return new M((i,r)=>{const s=()=>{e()===!0?n().next(()=>{s()},r):i()};s()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dn="SimpleDb";class cg{static open(e,n,i,r){try{return new cg(n,e.transaction(r,i))}catch(s){throw new Ju(n,s)}}constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.S=new Wt,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{n.error?this.S.reject(new Ju(e,n.error)):this.S.resolve()},this.transaction.onerror=i=>{const r=Nw(i.target.error);this.S.reject(new Ju(e,r))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(q(Dn,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new O8(n)}}class Hi{static delete(e){return q(Dn,"Removing database:",e),Ia(Yb().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!Rh())return!1;if(Hi.F())return!0;const e=tt(),n=Hi.M(e),i=0<n&&n<10,r=ZD(e),s=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||i||s)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)==null?void 0:e.__PRIVATE_USE_MOCK_PERSISTENCE)==="YES"}static O(e,n){return e.store(n)}static M(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(i)}constructor(e,n,i){this.name=e,this.version=n,this.N=i,this.B=null,Hi.M(tt())===12.2&&ft("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(q(Dn,"Opening database:",this.name),this.db=await new Promise((n,i)=>{const r=indexedDB.open(this.name,this.version);r.onsuccess=s=>{const a=s.target.result;n(a)},r.onblocked=()=>{i(new Ju(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=s=>{const a=s.target.error;a.name==="VersionError"?i(new F(U.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):a.name==="InvalidStateError"?i(new F(U.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a)):i(new Ju(e,a))},r.onupgradeneeded=s=>{q(Dn,'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const a=s.target.result;this.N.k(a,r.transaction,s.oldVersion,this.version).next(()=>{q(Dn,"Database upgrade to version "+this.version+" complete")})}})),this.q&&(this.db.onversionchange=n=>this.q(n)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,i,r){const s=n==="readonly";let a=0;for(;;){++a;try{this.db=await this.L(e);const o=cg.open(this.db,e,s?"readonly":"readwrite",i),l=r(o).next(c=>(o.C(),c)).catch(c=>(o.abort(c),M.reject(c))).toPromise();return l.catch(()=>{}),await o.D,l}catch(o){const l=o,c=l.name!=="FirebaseError"&&a<3;if(q(Dn,"Transaction failed with error:",l.message,"Retrying:",c),this.close(),!c)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}function ZD(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class V8{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return Ia(this.U.delete())}}class Ju extends F{constructor(e,n){super(U.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function na(t){return t.name==="IndexedDbTransactionError"}class O8{constructor(e){this.store=e}put(e,n){let i;return n!==void 0?(q(Dn,"PUT",this.store.name,e,n),i=this.store.put(n,e)):(q(Dn,"PUT",this.store.name,"<auto-key>",e),i=this.store.put(e)),Ia(i)}add(e){return q(Dn,"ADD",this.store.name,e,e),Ia(this.store.add(e))}get(e){return Ia(this.store.get(e)).next(n=>(n===void 0&&(n=null),q(Dn,"GET",this.store.name,e,n),n))}delete(e){return q(Dn,"DELETE",this.store.name,e),Ia(this.store.delete(e))}count(){return q(Dn,"COUNT",this.store.name),Ia(this.store.count())}J(e,n){const i=this.options(e,n),r=i.index?this.store.index(i.index):this.store;if(typeof r.getAll=="function"){const s=r.getAll(i.range);return new M((a,o)=>{s.onerror=l=>{o(l.target.error)},s.onsuccess=l=>{a(l.target.result)}})}{const s=this.cursor(i),a=[];return this.H(s,(o,l)=>{a.push(l)}).next(()=>a)}}Y(e,n){const i=this.store.getAll(e,n===null?void 0:n);return new M((r,s)=>{i.onerror=a=>{s(a.target.error)},i.onsuccess=a=>{r(a.target.result)}})}Z(e,n){q(Dn,"DELETE ALL",this.store.name);const i=this.options(e,n);i.X=!1;const r=this.cursor(i);return this.H(r,(s,a,o)=>o.delete())}ee(e,n){let i;n?i=e:(i={},n=e);const r=this.cursor(i);return this.H(r,n)}te(e){const n=this.cursor({});return new M((i,r)=>{n.onerror=s=>{const a=Nw(s.target.error);r(a)},n.onsuccess=s=>{const a=s.target.result;a?e(a.primaryKey,a.value).next(o=>{o?a.continue():i()}):i()}})}H(e,n){const i=[];return new M((r,s)=>{e.onerror=a=>{s(a.target.error)},e.onsuccess=a=>{const o=a.target.result;if(!o)return void r();const l=new V8(o),c=n(o.primaryKey,o.value,l);if(c instanceof M){const h=c.catch(d=>(l.done(),M.reject(d)));i.push(h)}l.isDone?r():l.G===null?o.continue():o.continue(l.G)}}).next(()=>M.waitFor(i))}options(e,n){let i;return e!==void 0&&(typeof e=="string"?i=e:n=e),{index:i,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const i=this.store.index(e.index);return e.X?i.openKeyCursor(e.range,n):i.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function Ia(t){return new M((e,n)=>{t.onsuccess=i=>{const r=i.target.result;e(r)},t.onerror=i=>{const r=Nw(i.target.error);n(r)}})}let YI=!1;function Nw(t){const e=Hi.M(tt());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const i=new F("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return YI||(YI=!0,setTimeout(()=>{throw i},0)),i}}return t}const Zu="IndexBackfiller";class M8{constructor(e,n){this.asyncQueue=e,this.ne=n,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){q(Zu,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{const n=await this.ne.ie();q(Zu,`Documents written: ${n}`)}catch(n){na(n)?q(Zu,"Ignoring IndexedDB error during index backfill: ",n):await ta(n)}await this.re(6e4)})}}class L8{constructor(e,n){this.localStore=e,this.persistence=n}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.se(n,e))}se(e,n){const i=new Set;let r=n,s=!0;return M.doWhile(()=>s===!0&&r>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(a=>{if(a!==null&&!i.has(a))return q(Zu,`Processing collection: ${a}`),this.oe(e,a,r).next(o=>{r-=o,i.add(a)});s=!1})).next(()=>n-r)}oe(e,n,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(r=>this.localStore.localDocuments.getNextDocuments(e,n,r,i).next(s=>{const a=s.changes;return this.localStore.indexManager.updateIndexEntries(e,a).next(()=>this._e(r,s)).next(o=>(q(Zu,`Updating offset: ${o}`),this.localStore.indexManager.updateCollectionGroup(e,n,o))).next(()=>a.size)}))}_e(e,n){let i=e;return n.changes.forEach((r,s)=>{const a=YD(s);Pw(a,i)>0&&(i=a)}),new Kn(i.readTime,i.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>n.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}En.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ds=-1;function Sd(t){return t==null}function Mh(t){return t===0&&1/t==-1/0}function ek(t){return typeof t=="number"&&Number.isInteger(t)&&!Mh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ip="";function sn(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=XI(e)),e=U8(t.get(n),e);return XI(e)}function U8(t,e){let n=e;const i=t.length;for(let r=0;r<i;r++){const s=t.charAt(r);switch(s){case"\0":n+="";break;case ip:n+="";break;default:n+=s}}return n}function XI(t){return t+ip+""}function Bi(t){const e=t.length;if(Z(e>=2,64408,{path:t}),e===2)return Z(t.charAt(0)===ip&&t.charAt(1)==="",56145,{path:t}),ge.emptyPath();const n=e-2,i=[];let r="";for(let s=0;s<e;){const a=t.indexOf(ip,s);switch((a<0||a>n)&&X(50515,{path:t}),t.charAt(a+1)){case"":const o=t.substring(s,a);let l;r.length===0?l=o:(r+=o,l=r,r=""),i.push(l);break;case"":r+=t.substring(s,a),r+="\0";break;case"":r+=t.substring(s,a+1);break;default:X(61167,{path:t})}s=a+2}return new ge(i)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ea="remoteDocuments",Id="owner",No="owner",Lh="mutationQueues",j8="userId",vi="mutations",JI="batchId",Da="userMutationsIndex",ZI=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sm(t,e){return[t,sn(e)]}function tk(t,e,n){return[t,sn(e),n]}const z8={},Fl="documentMutations",rp="remoteDocumentsV14",B8=["prefixPath","collectionGroup","readTime","documentId"],am="documentKeyIndex",F8=["prefixPath","collectionGroup","documentId"],nk="collectionGroupIndex",q8=["collectionGroup","readTime","prefixPath","documentId"],Uh="remoteDocumentGlobal",Wv="remoteDocumentGlobalKey",ql="targets",ik="queryTargetsIndex",H8=["canonicalId","targetId"],Hl="targetDocuments",G8=["targetId","path"],Dw="documentTargetsIndex",$8=["path","targetId"],sp="targetGlobalKey",qa="targetGlobal",jh="collectionParents",K8=["collectionId","parent"],Gl="clientMetadata",W8="clientId",ug="bundles",Q8="bundleId",hg="namedQueries",Y8="name",kw="indexConfiguration",X8="indexId",Qv="collectionGroupIndex",J8="collectionGroup",eh="indexState",Z8=["indexId","uid"],rk="sequenceNumberIndex",e7=["uid","sequenceNumber"],th="indexEntries",t7=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],sk="documentKeyIndex",n7=["indexId","uid","orderedDocumentKey"],dg="documentOverlays",i7=["userId","collectionPath","documentId"],Yv="collectionPathOverlayIndex",r7=["userId","collectionPath","largestBatchId"],ak="collectionGroupOverlayIndex",s7=["userId","collectionGroup","largestBatchId"],Vw="globals",a7="name",ok=[Lh,vi,Fl,Ea,ql,Id,qa,Hl,Gl,Uh,jh,ug,hg],o7=[...ok,dg],lk=[Lh,vi,Fl,rp,ql,Id,qa,Hl,Gl,Uh,jh,ug,hg,dg],ck=lk,Ow=[...ck,kw,eh,th],l7=Ow,uk=[...Ow,Vw],c7=uk;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xv extends JD{constructor(e,n){super(),this.le=e,this.currentSequenceNumber=n}}function Pt(t,e){const n=Q(t);return Hi.O(n.le,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e1(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ia(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function hk(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ue{constructor(e,n){this.comparator=e,this.root=n||Bt.EMPTY}insert(e,n){return new Ue(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Bt.BLACK,null,null))}remove(e){return new Ue(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Bt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){const e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Tf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Tf(this.root,e,this.comparator,!1)}getReverseIterator(){return new Tf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Tf(this.root,e,this.comparator,!0)}}class Tf{constructor(e,n,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?i(e.key,n):1,n&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Bt{constructor(e,n,i,r,s){this.key=e,this.value=n,this.color=i??Bt.RED,this.left=r??Bt.EMPTY,this.right=s??Bt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,r,s){return new Bt(e??this.key,n??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this;const s=i(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,n,i),null):s===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Bt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return Bt.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Bt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Bt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw X(43730,{key:this.key,value:this.value});if(this.right.isRed())throw X(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw X(27949);return e+(this.isRed()?0:1)}}Bt.EMPTY=null,Bt.RED=!0,Bt.BLACK=!1;Bt.EMPTY=new class{constructor(){this.size=0}get key(){throw X(57766)}get value(){throw X(16141)}get color(){throw X(16727)}get left(){throw X(29726)}get right(){throw X(36894)}copy(e,n,i,r,s){return this}insert(e,n,i){return new Bt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pe{constructor(e){this.comparator=e,this.data=new Ue(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new t1(this.data.getIterator())}getIteratorFrom(e){return new t1(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof Pe)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=i.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Pe(this.comparator);return n.data=e,n}}class t1{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Do(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An{constructor(e){this.fields=e,e.sort(Xe.comparator)}static empty(){return new An([])}unionWith(e){let n=new Pe(Xe.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new An(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return zl(this.fields,e.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dk extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u7(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new dk("Invalid base64 string: "+s):s}}(e);return new lt(n)}static fromUint8Array(e){const n=function(r){let s="";for(let a=0;a<r.length;++a)s+=String.fromCharCode(r[a]);return s}(e);return new lt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ae(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}lt.EMPTY_BYTE_STRING=new lt("");const h7=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Dr(t){if(Z(!!t,39018),typeof t=="string"){let e=0;const n=h7.exec(t);if(Z(!!n,46558,{timestamp:t}),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Ye(t.seconds),nanos:Ye(t.nanos)}}function Ye(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function kr(t){return typeof t=="string"?lt.fromBase64String(t):lt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fk="server_timestamp",mk="__type__",pk="__previous_value__",gk="__local_write_time__";function fg(t){var n,i;return((i=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[mk])==null?void 0:i.stringValue)===fk}function mg(t){const e=t.mapValue.fields[pk];return fg(e)?mg(e):e}function zh(t){const e=Dr(t.mapValue.fields[gk].timestampValue);return new Ie(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d7{constructor(e,n,i,r,s,a,o,l,c,h){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=o,this.longPollingOptions=l,this.useFetchStreams=c,this.isUsingEmulator=h}}const Jv="(default)";class Fs{constructor(e,n){this.projectId=e,this.database=n||Jv}static empty(){return new Fs("","")}get isDefaultDatabase(){return this.database===Jv}isEqual(e){return e instanceof Fs&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mw="__type__",yk="__max__",_s={mapValue:{fields:{__type__:{stringValue:yk}}}},Lw="__vector__",$l="value",om={nullValue:"NULL_VALUE"};function qs(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?fg(t)?4:_k(t)?9007199254740991:pg(t)?10:11:X(28295,{value:t})}function Ji(t,e){if(t===e)return!0;const n=qs(t);if(n!==qs(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return zh(t).isEqual(zh(e));case 3:return function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const a=Dr(r.timestampValue),o=Dr(s.timestampValue);return a.seconds===o.seconds&&a.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,s){return kr(r.bytesValue).isEqual(kr(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,s){return Ye(r.geoPointValue.latitude)===Ye(s.geoPointValue.latitude)&&Ye(r.geoPointValue.longitude)===Ye(s.geoPointValue.longitude)}(t,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return Ye(r.integerValue)===Ye(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const a=Ye(r.doubleValue),o=Ye(s.doubleValue);return a===o?Mh(a)===Mh(o):isNaN(a)&&isNaN(o)}return!1}(t,e);case 9:return zl(t.arrayValue.values||[],e.arrayValue.values||[],Ji);case 10:case 11:return function(r,s){const a=r.mapValue.fields||{},o=s.mapValue.fields||{};if(e1(a)!==e1(o))return!1;for(const l in a)if(a.hasOwnProperty(l)&&(o[l]===void 0||!Ji(a[l],o[l])))return!1;return!0}(t,e);default:return X(52216,{left:t})}}function Bh(t,e){return(t.values||[]).find(n=>Ji(n,e))!==void 0}function Hs(t,e){if(t===e)return 0;const n=qs(t),i=qs(e);if(n!==i)return ae(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return ae(t.booleanValue,e.booleanValue);case 2:return function(s,a){const o=Ye(s.integerValue||s.doubleValue),l=Ye(a.integerValue||a.doubleValue);return o<l?-1:o>l?1:o===l?0:isNaN(o)?isNaN(l)?0:-1:1}(t,e);case 3:return n1(t.timestampValue,e.timestampValue);case 4:return n1(zh(t),zh(e));case 5:return $v(t.stringValue,e.stringValue);case 6:return function(s,a){const o=kr(s),l=kr(a);return o.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,a){const o=s.split("/"),l=a.split("/");for(let c=0;c<o.length&&c<l.length;c++){const h=ae(o[c],l[c]);if(h!==0)return h}return ae(o.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,a){const o=ae(Ye(s.latitude),Ye(a.latitude));return o!==0?o:ae(Ye(s.longitude),Ye(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return i1(t.arrayValue,e.arrayValue);case 10:return function(s,a){var f,p,w,E;const o=s.fields||{},l=a.fields||{},c=(f=o[$l])==null?void 0:f.arrayValue,h=(p=l[$l])==null?void 0:p.arrayValue,d=ae(((w=c==null?void 0:c.values)==null?void 0:w.length)||0,((E=h==null?void 0:h.values)==null?void 0:E.length)||0);return d!==0?d:i1(c,h)}(t.mapValue,e.mapValue);case 11:return function(s,a){if(s===_s.mapValue&&a===_s.mapValue)return 0;if(s===_s.mapValue)return 1;if(a===_s.mapValue)return-1;const o=s.fields||{},l=Object.keys(o),c=a.fields||{},h=Object.keys(c);l.sort(),h.sort();for(let d=0;d<l.length&&d<h.length;++d){const f=$v(l[d],h[d]);if(f!==0)return f;const p=Hs(o[l[d]],c[h[d]]);if(p!==0)return p}return ae(l.length,h.length)}(t.mapValue,e.mapValue);default:throw X(23264,{he:n})}}function n1(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ae(t,e);const n=Dr(t),i=Dr(e),r=ae(n.seconds,i.seconds);return r!==0?r:ae(n.nanos,i.nanos)}function i1(t,e){const n=t.values||[],i=e.values||[];for(let r=0;r<n.length&&r<i.length;++r){const s=Hs(n[r],i[r]);if(s)return s}return ae(n.length,i.length)}function Kl(t){return Zv(t)}function Zv(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const i=Dr(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return kr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return $.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",r=!0;for(const s of n.values||[])r?r=!1:i+=",",i+=Zv(s);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){const i=Object.keys(n.fields||{}).sort();let r="{",s=!0;for(const a of i)s?s=!1:r+=",",r+=`${a}:${Zv(n.fields[a])}`;return r+"}"}(t.mapValue):X(61005,{value:t})}function lm(t){switch(qs(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=mg(t);return e?16+lm(e):16;case 5:return 2*t.stringValue.length;case 6:return kr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((r,s)=>r+lm(s),0)}(t.arrayValue);case 10:case 11:return function(i){let r=0;return ia(i.fields,(s,a)=>{r+=s.length+lm(a)}),r}(t.mapValue);default:throw X(13486,{value:t})}}function eo(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function e0(t){return!!t&&"integerValue"in t}function Fh(t){return!!t&&"arrayValue"in t}function r1(t){return!!t&&"nullValue"in t}function s1(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function cm(t){return!!t&&"mapValue"in t}function pg(t){var n,i;return((i=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[Mw])==null?void 0:i.stringValue)===Lw}function nh(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return ia(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=nh(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=nh(t.arrayValue.values[n]);return e}return{...t}}function _k(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===yk}const vk={mapValue:{fields:{[Mw]:{stringValue:Lw},[$l]:{arrayValue:{}}}}};function f7(t){return"nullValue"in t?om:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?eo(Fs.empty(),$.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?pg(t)?vk:{mapValue:{}}:X(35942,{value:t})}function m7(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?eo(Fs.empty(),$.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?vk:"mapValue"in t?pg(t)?{mapValue:{}}:_s:X(61959,{value:t})}function a1(t,e){const n=Hs(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function o1(t,e){const n=Hs(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(e){this.value=e}static empty(){return new Gt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!cm(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=nh(n)}setAll(e){let n=Xe.emptyPath(),i={},r=[];e.forEach((a,o)=>{if(!n.isImmediateParentOf(o)){const l=this.getFieldsMap(n);this.applyChanges(l,i,r),i={},r=[],n=o.popLast()}a?i[o.lastSegment()]=nh(a):r.push(o.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,i,r)}delete(e){const n=this.field(e.popLast());cm(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Ji(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=n.mapValue.fields[e.get(i)];cm(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,i){ia(n,(r,s)=>e[r]=s);for(const r of i)delete e[r]}clone(){return new Gt(nh(this.value))}}function bk(t){const e=[];return ia(t.fields,(n,i)=>{const r=new Xe([n]);if(cm(i)){const s=bk(i.mapValue).fields;if(s.length===0)e.push(r);else for(const a of s)e.push(r.child(a))}else e.push(r)}),new An(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fe{constructor(e,n,i,r,s,a,o){this.key=e,this.documentType=n,this.version=i,this.readTime=r,this.createTime=s,this.data=a,this.documentState=o}static newInvalidDocument(e){return new Fe(e,0,te.min(),te.min(),te.min(),Gt.empty(),0)}static newFoundDocument(e,n,i,r){return new Fe(e,1,n,te.min(),i,r,0)}static newNoDocument(e,n){return new Fe(e,2,n,te.min(),te.min(),Gt.empty(),0)}static newUnknownDocument(e,n){return new Fe(e,3,n,te.min(),te.min(),Gt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(te.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Gt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Gt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=te.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Fe&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Fe(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gs{constructor(e,n){this.position=e,this.inclusive=n}}function l1(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){const s=e[r],a=t.position[r];if(s.field.isKeyField()?i=$.comparator($.fromName(a.referenceValue),n.key):i=Hs(a,n.data.field(s.field)),s.dir==="desc"&&(i*=-1),i!==0)break}return i}function c1(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Ji(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qh{constructor(e,n="asc"){this.field=e,this.dir=n}}function p7(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wk{}class _e extends wk{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new g7(e,n,i):n==="array-contains"?new v7(e,i):n==="in"?new xk(e,i):n==="not-in"?new b7(e,i):n==="array-contains-any"?new w7(e,i):new _e(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new y7(e,i):new _7(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Hs(n,this.value)):n!==null&&qs(this.value)===qs(n)&&this.matchesComparison(Hs(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return X(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ce extends wk{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Ce(e,n)}matches(e){return Wl(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Wl(t){return t.op==="and"}function t0(t){return t.op==="or"}function Uw(t){return Tk(t)&&Wl(t)}function Tk(t){for(const e of t.filters)if(e instanceof Ce)return!1;return!0}function n0(t){if(t instanceof _e)return t.field.canonicalString()+t.op.toString()+Kl(t.value);if(Uw(t))return t.filters.map(e=>n0(e)).join(",");{const e=t.filters.map(n=>n0(n)).join(",");return`${t.op}(${e})`}}function Ek(t,e){return t instanceof _e?function(i,r){return r instanceof _e&&i.op===r.op&&i.field.isEqual(r.field)&&Ji(i.value,r.value)}(t,e):t instanceof Ce?function(i,r){return r instanceof Ce&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((s,a,o)=>s&&Ek(a,r.filters[o]),!0):!1}(t,e):void X(19439)}function Ak(t,e){const n=t.filters.concat(e);return Ce.create(n,t.op)}function Sk(t){return t instanceof _e?function(n){return`${n.field.canonicalString()} ${n.op} ${Kl(n.value)}`}(t):t instanceof Ce?function(n){return n.op.toString()+" {"+n.getFilters().map(Sk).join(" ,")+"}"}(t):"Filter"}class g7 extends _e{constructor(e,n,i){super(e,n,i),this.key=$.fromName(i.referenceValue)}matches(e){const n=$.comparator(e.key,this.key);return this.matchesComparison(n)}}class y7 extends _e{constructor(e,n){super(e,"in",n),this.keys=Ik("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class _7 extends _e{constructor(e,n){super(e,"not-in",n),this.keys=Ik("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Ik(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(i=>$.fromName(i.referenceValue))}class v7 extends _e{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Fh(n)&&Bh(n.arrayValue,this.value)}}class xk extends _e{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Bh(this.value.arrayValue,n)}}class b7 extends _e{constructor(e,n){super(e,"not-in",n)}matches(e){if(Bh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Bh(this.value.arrayValue,n)}}class w7 extends _e{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Fh(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>Bh(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T7{constructor(e,n=null,i=[],r=[],s=null,a=null,o=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=a,this.endAt=o,this.Te=null}}function i0(t,e=null,n=[],i=[],r=null,s=null,a=null){return new T7(t,e,n,i,r,s,a)}function to(t){const e=Q(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>n0(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(s){return s.field.canonicalString()+s.dir}(i)).join(","),Sd(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>Kl(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>Kl(i)).join(",")),e.Te=n}return e.Te}function xd(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!p7(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Ek(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!c1(t.startAt,e.startAt)&&c1(t.endAt,e.endAt)}function ap(t){return $.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function op(t,e){return t.filters.filter(n=>n instanceof _e&&n.field.isEqual(e))}function u1(t,e,n){let i=om,r=!0;for(const s of op(t,e)){let a=om,o=!0;switch(s.op){case"<":case"<=":a=f7(s.value);break;case"==":case"in":case">=":a=s.value;break;case">":a=s.value,o=!1;break;case"!=":case"not-in":a=om}a1({value:i,inclusive:r},{value:a,inclusive:o})<0&&(i=a,r=o)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const a=n.position[s];a1({value:i,inclusive:r},{value:a,inclusive:n.inclusive})<0&&(i=a,r=n.inclusive);break}}return{value:i,inclusive:r}}function h1(t,e,n){let i=_s,r=!0;for(const s of op(t,e)){let a=_s,o=!0;switch(s.op){case">=":case">":a=m7(s.value),o=!1;break;case"==":case"in":case"<=":a=s.value;break;case"<":a=s.value,o=!1;break;case"!=":case"not-in":a=_s}o1({value:i,inclusive:r},{value:a,inclusive:o})>0&&(i=a,r=o)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const a=n.position[s];o1({value:i,inclusive:r},{value:a,inclusive:n.inclusive})>0&&(i=a,r=n.inclusive);break}}return{value:i,inclusive:r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zr{constructor(e,n=null,i=[],r=[],s=null,a="F",o=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=a,this.startAt=o,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function Rk(t,e,n,i,r,s,a,o){return new zr(t,e,n,i,r,s,a,o)}function Ac(t){return new zr(t)}function d1(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function jw(t){return t.collectionGroup!==null}function Tl(t){const e=Q(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const s of e.explicitOrderBy)e.Ie.push(s),n.add(s.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let o=new Pe(Xe.comparator);return a.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(o=o.add(c.field))})}),o})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new qh(s,i))}),n.has(Xe.keyField().canonicalString())||e.Ie.push(new qh(Xe.keyField(),i))}return e.Ie}function pn(t){const e=Q(t);return e.Ee||(e.Ee=E7(e,Tl(t))),e.Ee}function E7(t,e){if(t.limitType==="F")return i0(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{const s=r.dir==="desc"?"asc":"desc";return new qh(r.field,s)});const n=t.endAt?new Gs(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new Gs(t.startAt.position,t.startAt.inclusive):null;return i0(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function r0(t,e){const n=t.filters.concat([e]);return new zr(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function lp(t,e,n){return new zr(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Rd(t,e){return xd(pn(t),pn(e))&&t.limitType===e.limitType}function Ck(t){return`${to(pn(t))}|lt:${t.limitType}`}function Fo(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(r=>Sk(r)).join(", ")}]`),Sd(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(r=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(r)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(r=>Kl(r)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(r=>Kl(r)).join(",")),`Target(${i})`}(pn(t))}; limitType=${t.limitType})`}function Cd(t,e){return e.isFoundDocument()&&function(i,r){const s=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(s):$.isDocumentKey(i.path)?i.path.isEqual(s):i.path.isImmediateParentOf(s)}(t,e)&&function(i,r){for(const s of Tl(i))if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0}(t,e)&&function(i,r){for(const s of i.filters)if(!s.matches(r))return!1;return!0}(t,e)&&function(i,r){return!(i.startAt&&!function(a,o,l){const c=l1(a,o,l);return a.inclusive?c<=0:c<0}(i.startAt,Tl(i),r)||i.endAt&&!function(a,o,l){const c=l1(a,o,l);return a.inclusive?c>=0:c>0}(i.endAt,Tl(i),r))}(t,e)}function Pk(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Nk(t){return(e,n)=>{let i=!1;for(const r of Tl(t)){const s=A7(r,e,n);if(s!==0)return s;i=i||r.field.isKeyField()}return 0}}function A7(t,e,n){const i=t.field.isKeyField()?$.comparator(e.key,n.key):function(s,a,o){const l=a.data.field(s),c=o.data.field(s);return l!==null&&c!==null?Hs(l,c):X(42886)}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return X(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Br{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[r,s]of i)if(this.equalsFn(r,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){ia(this.inner,(n,i)=>{for(const[r,s]of i)e(r,s)})}isEmpty(){return hk(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S7=new Ue($.comparator);function Sn(){return S7}const Dk=new Ue($.comparator);function Su(...t){let e=Dk;for(const n of t)e=e.insert(n.key,n);return e}function kk(t){let e=Dk;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function Fi(){return ih()}function Vk(){return ih()}function ih(){return new Br(t=>t.toString(),(t,e)=>t.isEqual(e))}const I7=new Ue($.comparator),x7=new Pe($.comparator);function ce(...t){let e=x7;for(const n of t)e=e.add(n);return e}const R7=new Pe(ae);function zw(){return R7}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bw(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Mh(e)?"-0":e}}function Ok(t){return{integerValue:""+t}}function Mk(t,e){return ek(e)?Ok(e):Bw(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gg{constructor(){this._=void 0}}function C7(t,e,n){return t instanceof Ql?function(r,s){const a={fields:{[mk]:{stringValue:fk},[gk]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&fg(s)&&(s=mg(s)),s&&(a.fields[pk]=s),{mapValue:a}}(n,e):t instanceof no?Uk(t,e):t instanceof io?jk(t,e):function(r,s){const a=Lk(r,s),o=f1(a)+f1(r.Ae);return e0(a)&&e0(r.Ae)?Ok(o):Bw(r.serializer,o)}(t,e)}function P7(t,e,n){return t instanceof no?Uk(t,e):t instanceof io?jk(t,e):n}function Lk(t,e){return t instanceof Yl?function(i){return e0(i)||function(s){return!!s&&"doubleValue"in s}(i)}(e)?e:{integerValue:0}:null}class Ql extends gg{}class no extends gg{constructor(e){super(),this.elements=e}}function Uk(t,e){const n=zk(e);for(const i of t.elements)n.some(r=>Ji(r,i))||n.push(i);return{arrayValue:{values:n}}}class io extends gg{constructor(e){super(),this.elements=e}}function jk(t,e){let n=zk(e);for(const i of t.elements)n=n.filter(r=>!Ji(r,i));return{arrayValue:{values:n}}}class Yl extends gg{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function f1(t){return Ye(t.integerValue||t.doubleValue)}function zk(t){return Fh(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pd{constructor(e,n){this.field=e,this.transform=n}}function N7(t,e){return t.field.isEqual(e.field)&&function(i,r){return i instanceof no&&r instanceof no||i instanceof io&&r instanceof io?zl(i.elements,r.elements,Ji):i instanceof Yl&&r instanceof Yl?Ji(i.Ae,r.Ae):i instanceof Ql&&r instanceof Ql}(t.transform,e.transform)}class D7{constructor(e,n){this.version=e,this.transformResults=n}}class Je{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Je}static exists(e){return new Je(void 0,e)}static updateTime(e){return new Je(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function um(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class yg{}function Bk(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Ic(t.key,Je.none()):new Sc(t.key,t.data,Je.none());{const n=t.data,i=Gt.empty();let r=new Pe(Xe.comparator);for(let s of e.fields)if(!r.has(s)){let a=n.field(s);a===null&&s.length>1&&(s=s.popLast(),a=n.field(s)),a===null?i.delete(s):i.set(s,a),r=r.add(s)}return new Fr(t.key,i,new An(r.toArray()),Je.none())}}function k7(t,e,n){t instanceof Sc?function(r,s,a){const o=r.value.clone(),l=p1(r.fieldTransforms,s,a.transformResults);o.setAll(l),s.convertToFoundDocument(a.version,o).setHasCommittedMutations()}(t,e,n):t instanceof Fr?function(r,s,a){if(!um(r.precondition,s))return void s.convertToUnknownDocument(a.version);const o=p1(r.fieldTransforms,s,a.transformResults),l=s.data;l.setAll(Fk(r)),l.setAll(o),s.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(t,e,n):function(r,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function rh(t,e,n,i){return t instanceof Sc?function(s,a,o,l){if(!um(s.precondition,a))return o;const c=s.value.clone(),h=g1(s.fieldTransforms,l,a);return c.setAll(h),a.convertToFoundDocument(a.version,c).setHasLocalMutations(),null}(t,e,n,i):t instanceof Fr?function(s,a,o,l){if(!um(s.precondition,a))return o;const c=g1(s.fieldTransforms,l,a),h=a.data;return h.setAll(Fk(s)),h.setAll(c),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),o===null?null:o.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(t,e,n,i):function(s,a,o){return um(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):o}(t,e,n)}function V7(t,e){let n=null;for(const i of t.fieldTransforms){const r=e.data.field(i.field),s=Lk(i.transform,r||null);s!=null&&(n===null&&(n=Gt.empty()),n.set(i.field,s))}return n||null}function m1(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&zl(i,r,(s,a)=>N7(s,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Sc extends yg{constructor(e,n,i,r=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Fr extends yg{constructor(e,n,i,r,s=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function Fk(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}}),e}function p1(t,e,n){const i=new Map;Z(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let r=0;r<n.length;r++){const s=t[r],a=s.transform,o=e.data.field(s.field);i.set(s.field,P7(a,o,n[r]))}return i}function g1(t,e,n){const i=new Map;for(const r of t){const s=r.transform,a=n.data.field(r.field);i.set(r.field,C7(s,a,e))}return i}class Ic extends yg{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Fw extends yg{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qw{constructor(e,n,i,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const s=this.mutations[r];s.key.isEqual(e.key)&&k7(s,e,i[r])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=rh(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=rh(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=Vk();return this.mutations.forEach(r=>{const s=e.get(r.key),a=s.overlayedDocument;let o=this.applyToLocalView(a,s.mutatedFields);o=n.has(r.key)?null:o;const l=Bk(a,o);l!==null&&i.set(r.key,l),a.isValidDocument()||a.convertToNoDocument(te.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ce())}isEqual(e){return this.batchId===e.batchId&&zl(this.mutations,e.mutations,(n,i)=>m1(n,i))&&zl(this.baseMutations,e.baseMutations,(n,i)=>m1(n,i))}}class Hw{constructor(e,n,i,r){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(e,n,i){Z(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let r=function(){return I7}();const s=e.mutations;for(let a=0;a<s.length;a++)r=r.insert(s[a].key,i[a].version);return new Hw(e,n,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gw{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O7{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var yt,we;function qk(t){switch(t){case U.OK:return X(64938);case U.CANCELLED:case U.UNKNOWN:case U.DEADLINE_EXCEEDED:case U.RESOURCE_EXHAUSTED:case U.INTERNAL:case U.UNAVAILABLE:case U.UNAUTHENTICATED:return!1;case U.INVALID_ARGUMENT:case U.NOT_FOUND:case U.ALREADY_EXISTS:case U.PERMISSION_DENIED:case U.FAILED_PRECONDITION:case U.ABORTED:case U.OUT_OF_RANGE:case U.UNIMPLEMENTED:case U.DATA_LOSS:return!0;default:return X(15467,{code:t})}}function Hk(t){if(t===void 0)return ft("GRPC error has no .code"),U.UNKNOWN;switch(t){case yt.OK:return U.OK;case yt.CANCELLED:return U.CANCELLED;case yt.UNKNOWN:return U.UNKNOWN;case yt.DEADLINE_EXCEEDED:return U.DEADLINE_EXCEEDED;case yt.RESOURCE_EXHAUSTED:return U.RESOURCE_EXHAUSTED;case yt.INTERNAL:return U.INTERNAL;case yt.UNAVAILABLE:return U.UNAVAILABLE;case yt.UNAUTHENTICATED:return U.UNAUTHENTICATED;case yt.INVALID_ARGUMENT:return U.INVALID_ARGUMENT;case yt.NOT_FOUND:return U.NOT_FOUND;case yt.ALREADY_EXISTS:return U.ALREADY_EXISTS;case yt.PERMISSION_DENIED:return U.PERMISSION_DENIED;case yt.FAILED_PRECONDITION:return U.FAILED_PRECONDITION;case yt.ABORTED:return U.ABORTED;case yt.OUT_OF_RANGE:return U.OUT_OF_RANGE;case yt.UNIMPLEMENTED:return U.UNIMPLEMENTED;case yt.DATA_LOSS:return U.DATA_LOSS;default:return X(39323,{code:t})}}(we=yt||(yt={}))[we.OK=0]="OK",we[we.CANCELLED=1]="CANCELLED",we[we.UNKNOWN=2]="UNKNOWN",we[we.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",we[we.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",we[we.NOT_FOUND=5]="NOT_FOUND",we[we.ALREADY_EXISTS=6]="ALREADY_EXISTS",we[we.PERMISSION_DENIED=7]="PERMISSION_DENIED",we[we.UNAUTHENTICATED=16]="UNAUTHENTICATED",we[we.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",we[we.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",we[we.ABORTED=10]="ABORTED",we[we.OUT_OF_RANGE=11]="OUT_OF_RANGE",we[we.UNIMPLEMENTED=12]="UNIMPLEMENTED",we[we.INTERNAL=13]="INTERNAL",we[we.UNAVAILABLE=14]="UNAVAILABLE",we[we.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gk(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M7=new Ns([4294967295,4294967295],0);function y1(t){const e=Gk().encode(t),n=new LD;return n.update(e),new Uint8Array(n.digest())}function _1(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Ns([n,i],0),new Ns([r,s],0)]}class $w{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new Iu(`Invalid padding: ${n}`);if(i<0)throw new Iu(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Iu(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new Iu(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Ns.fromNumber(this.ge)}ye(e,n,i){let r=e.add(n.multiply(Ns.fromNumber(i)));return r.compare(M7)===1&&(r=new Ns([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=y1(e),[i,r]=_1(n);for(let s=0;s<this.hashCount;s++){const a=this.ye(i,r,s);if(!this.we(a))return!1}return!0}static create(e,n,i){const r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),a=new $w(s,r,n);return i.forEach(o=>a.insert(o)),a}insert(e){if(this.ge===0)return;const n=y1(e),[i,r]=_1(n);for(let s=0;s<this.hashCount;s++){const a=this.ye(i,r,s);this.Se(a)}}Se(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class Iu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nd{constructor(e,n,i,r,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const r=new Map;return r.set(e,Dd.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new Nd(te.min(),r,new Ue(ae),Sn(),ce())}}class Dd{constructor(e,n,i,r,s){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new Dd(i,n,ce(),ce(),ce())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hm{constructor(e,n,i,r){this.be=e,this.removedTargetIds=n,this.key=i,this.De=r}}class $k{constructor(e,n){this.targetId=e,this.Ce=n}}class Kk{constructor(e,n,i=lt.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=r}}class v1{constructor(){this.ve=0,this.Fe=b1(),this.Me=lt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ce(),n=ce(),i=ce();return this.Fe.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:X(38017,{changeType:s})}}),new Dd(this.Me,this.xe,e,n,i)}qe(){this.Oe=!1,this.Fe=b1()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Z(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class L7{constructor(e){this.Ge=e,this.ze=new Map,this.je=Sn(),this.Je=Ef(),this.He=Ef(),this.Ye=new Ue(ae)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const i=this.nt(n);switch(e.state){case 0:this.rt(n)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),i.Le(e.resumeToken));break;default:X(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((i,r)=>{this.rt(r)&&n(r)})}st(e){const n=e.targetId,i=e.Ce.count,r=this.ot(n);if(r){const s=r.target;if(ap(s))if(i===0){const a=new $(s.path);this.et(n,a,Fe.newNoDocument(a,te.min()))}else Z(i===1,20013,{expectedCount:i});else{const a=this._t(n);if(a!==i){const o=this.ut(e),l=o?this.ct(o,e,a):1;if(l!==0){this.it(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,c)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:s=0}=n;let a,o;try{a=kr(i).toUint8Array()}catch(l){if(l instanceof dk)return Xi("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{o=new $w(a,r,s)}catch(l){return Xi(l instanceof Iu?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return o.ge===0?null:o}ct(e,n,i){return n.Ce.count===i-this.Pt(e,n.targetId)?0:2}Pt(e,n){const i=this.Ge.getRemoteKeysForTarget(n);let r=0;return i.forEach(s=>{const a=this.Ge.ht(),o=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;e.mightContain(o)||(this.et(n,s,null),r++)}),r}Tt(e){const n=new Map;this.ze.forEach((s,a)=>{const o=this.ot(a);if(o){if(s.current&&ap(o.target)){const l=new $(o.target.path);this.It(l).has(a)||this.Et(a,l)||this.et(a,l,Fe.newNoDocument(l,e))}s.Be&&(n.set(a,s.ke()),s.qe())}});let i=ce();this.He.forEach((s,a)=>{let o=!0;a.forEachWhile(l=>{const c=this.ot(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)}),o&&(i=i.add(s))}),this.je.forEach((s,a)=>a.setReadTime(e));const r=new Nd(e,n,this.Ye,this.je,i);return this.je=Sn(),this.Je=Ef(),this.He=Ef(),this.Ye=new Ue(ae),r}Xe(e,n){if(!this.rt(e))return;const i=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,i),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,i){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,n)?r.Qe(n,1):r.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),i&&(this.je=this.je.insert(n,i))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new v1,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Pe(ae),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Pe(ae),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||q("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new v1),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Ef(){return new Ue($.comparator)}function b1(){return new Ue($.comparator)}const U7={asc:"ASCENDING",desc:"DESCENDING"},j7={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},z7={and:"AND",or:"OR"};class B7{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function s0(t,e){return t.useProto3Json||Sd(e)?e:{value:e}}function Xl(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Wk(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function F7(t,e){return Xl(t,e.toTimestamp())}function pt(t){return Z(!!t,49232),te.fromTimestamp(function(n){const i=Dr(n);return new Ie(i.seconds,i.nanos)}(t))}function Kw(t,e){return a0(t,e).canonicalString()}function a0(t,e){const n=function(r){return new ge(["projects",r.projectId,"databases",r.database])}(t).child("documents");return e===void 0?n:n.child(e)}function Qk(t){const e=ge.fromString(t);return Z(sV(e),10190,{key:e.toString()}),e}function Hh(t,e){return Kw(t.databaseId,e.path)}function Gi(t,e){const n=Qk(e);if(n.get(1)!==t.databaseId.projectId)throw new F(U.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new F(U.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new $(Jk(n))}function Yk(t,e){return Kw(t.databaseId,e)}function Xk(t){const e=Qk(t);return e.length===4?ge.emptyPath():Jk(e)}function o0(t){return new ge(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Jk(t){return Z(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function w1(t,e,n){return{name:Hh(t,e),fields:n.value.mapValue.fields}}function Zk(t,e,n){const i=Gi(t,e.name),r=pt(e.updateTime),s=e.createTime?pt(e.createTime):te.min(),a=new Gt({mapValue:{fields:e.fields}}),o=Fe.newFoundDocument(i,r,s,a);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function q7(t,e){return"found"in e?function(i,r){Z(!!r.found,43571),r.found.name,r.found.updateTime;const s=Gi(i,r.found.name),a=pt(r.found.updateTime),o=r.found.createTime?pt(r.found.createTime):te.min(),l=new Gt({mapValue:{fields:r.found.fields}});return Fe.newFoundDocument(s,a,o,l)}(t,e):"missing"in e?function(i,r){Z(!!r.missing,3894),Z(!!r.readTime,22933);const s=Gi(i,r.missing),a=pt(r.readTime);return Fe.newNoDocument(s,a)}(t,e):X(7234,{result:e})}function H7(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:X(39313,{state:c})}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],s=function(c,h){return c.useProto3Json?(Z(h===void 0||typeof h=="string",58123),lt.fromBase64String(h||"")):(Z(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),lt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,o=a&&function(c){const h=c.code===void 0?U.UNKNOWN:Hk(c.code);return new F(h,c.message||"")}(a);n=new Kk(i,r,s,o||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=Gi(t,i.document.name),s=pt(i.document.updateTime),a=i.document.createTime?pt(i.document.createTime):te.min(),o=new Gt({mapValue:{fields:i.document.fields}}),l=Fe.newFoundDocument(r,s,a,o),c=i.targetIds||[],h=i.removedTargetIds||[];n=new hm(c,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=Gi(t,i.document),s=i.readTime?pt(i.readTime):te.min(),a=Fe.newNoDocument(r,s),o=i.removedTargetIds||[];n=new hm([],o,a.key,a)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=Gi(t,i.document),s=i.removedTargetIds||[];n=new hm([],s,r,null)}else{if(!("filter"in e))return X(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:r=0,unchangedNames:s}=i,a=new O7(r,s),o=i.targetId;n=new $k(o,a)}}return n}function Gh(t,e){let n;if(e instanceof Sc)n={update:w1(t,e.key,e.value)};else if(e instanceof Ic)n={delete:Hh(t,e.key)};else if(e instanceof Fr)n={update:w1(t,e.key,e.data),updateMask:Y7(e.fieldMask)};else{if(!(e instanceof Fw))return X(16599,{Vt:e.type});n={verify:Hh(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(s,a){const o=a.transform;if(o instanceof Ql)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof no)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof io)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof Yl)return{fieldPath:a.field.canonicalString(),increment:o.Ae};throw X(20930,{transform:a.transform})}(0,i))),e.precondition.isNone||(n.currentDocument=function(r,s){return s.updateTime!==void 0?{updateTime:F7(r,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:X(27497)}(t,e.precondition)),n}function l0(t,e){const n=e.currentDocument?function(s){return s.updateTime!==void 0?Je.updateTime(pt(s.updateTime)):s.exists!==void 0?Je.exists(s.exists):Je.none()}(e.currentDocument):Je.none(),i=e.updateTransforms?e.updateTransforms.map(r=>function(a,o){let l=null;if("setToServerValue"in o)Z(o.setToServerValue==="REQUEST_TIME",16630,{proto:o}),l=new Ql;else if("appendMissingElements"in o){const h=o.appendMissingElements.values||[];l=new no(h)}else if("removeAllFromArray"in o){const h=o.removeAllFromArray.values||[];l=new io(h)}else"increment"in o?l=new Yl(a,o.increment):X(16584,{proto:o});const c=Xe.fromServerFormat(o.fieldPath);return new Pd(c,l)}(t,r)):[];if(e.update){e.update.name;const r=Gi(t,e.update.name),s=new Gt({mapValue:{fields:e.update.fields}});if(e.updateMask){const a=function(l){const c=l.fieldPaths||[];return new An(c.map(h=>Xe.fromServerFormat(h)))}(e.updateMask);return new Fr(r,s,a,n,i)}return new Sc(r,s,n,i)}if(e.delete){const r=Gi(t,e.delete);return new Ic(r,n)}if(e.verify){const r=Gi(t,e.verify);return new Fw(r,n)}return X(1463,{proto:e})}function G7(t,e){return t&&t.length>0?(Z(e!==void 0,14353),t.map(n=>function(r,s){let a=r.updateTime?pt(r.updateTime):pt(s);return a.isEqual(te.min())&&(a=pt(s)),new D7(a,r.transformResults||[])}(n,e))):[]}function eV(t,e){return{documents:[Yk(t,e.path)]}}function tV(t,e){const n={structuredQuery:{}},i=e.path;let r;e.collectionGroup!==null?(r=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=Yk(t,r);const s=function(c){if(c.length!==0)return rV(Ce.create(c,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const a=function(c){if(c.length!==0)return c.map(h=>function(f){return{field:qo(f.field),direction:K7(f.dir)}}(h))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const o=s0(t,e.limit);return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ft:n,parent:r}}function nV(t){let e=Xk(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){Z(i===1,65062);const h=n.from[0];h.allDescendants?r=h.collectionId:e=e.child(h.collectionId)}let s=[];n.where&&(s=function(d){const f=iV(d);return f instanceof Ce&&Uw(f)?f.getFilters():[f]}(n.where));let a=[];n.orderBy&&(a=function(d){return d.map(f=>function(w){return new qh(Ho(w.field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(w.direction))}(f))}(n.orderBy));let o=null;n.limit&&(o=function(d){let f;return f=typeof d=="object"?d.value:d,Sd(f)?null:f}(n.limit));let l=null;n.startAt&&(l=function(d){const f=!!d.before,p=d.values||[];return new Gs(p,f)}(n.startAt));let c=null;return n.endAt&&(c=function(d){const f=!d.before,p=d.values||[];return new Gs(p,f)}(n.endAt)),Rk(e,r,a,s,o,"F",l,c)}function $7(t,e){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return X(28987,{purpose:r})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function iV(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=Ho(n.unaryFilter.field);return _e.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=Ho(n.unaryFilter.field);return _e.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Ho(n.unaryFilter.field);return _e.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Ho(n.unaryFilter.field);return _e.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return X(61313);default:return X(60726)}}(t):t.fieldFilter!==void 0?function(n){return _e.create(Ho(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return X(58110);default:return X(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Ce.create(n.compositeFilter.filters.map(i=>iV(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return X(1026)}}(n.compositeFilter.op))}(t):X(30097,{filter:t})}function K7(t){return U7[t]}function W7(t){return j7[t]}function Q7(t){return z7[t]}function qo(t){return{fieldPath:t.canonicalString()}}function Ho(t){return Xe.fromServerFormat(t.fieldPath)}function rV(t){return t instanceof _e?function(n){if(n.op==="=="){if(s1(n.value))return{unaryFilter:{field:qo(n.field),op:"IS_NAN"}};if(r1(n.value))return{unaryFilter:{field:qo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(s1(n.value))return{unaryFilter:{field:qo(n.field),op:"IS_NOT_NAN"}};if(r1(n.value))return{unaryFilter:{field:qo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:qo(n.field),op:W7(n.op),value:n.value}}}(t):t instanceof Ce?function(n){const i=n.getFilters().map(r=>rV(r));return i.length===1?i[0]:{compositeFilter:{op:Q7(n.op),filters:i}}}(t):X(54877,{filter:t})}function Y7(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function sV(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr{constructor(e,n,i,r,s=te.min(),a=te.min(),o=lt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=o,this.expectedCount=l}withSequenceNumber(e){return new fr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new fr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new fr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new fr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aV{constructor(e){this.yt=e}}function X7(t,e){let n;if(e.document)n=Zk(t.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const i=$.fromSegments(e.noDocument.path),r=so(e.noDocument.readTime);n=Fe.newNoDocument(i,r),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return X(56709);{const i=$.fromSegments(e.unknownDocument.path),r=so(e.unknownDocument.version);n=Fe.newUnknownDocument(i,r)}}return e.readTime&&n.setReadTime(function(r){const s=new Ie(r[0],r[1]);return te.fromTimestamp(s)}(e.readTime)),n}function T1(t,e){const n=e.key,i={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:cp(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())i.document=function(s,a){return{name:Hh(s,a.key),fields:a.data.value.mapValue.fields,updateTime:Xl(s,a.version.toTimestamp()),createTime:Xl(s,a.createTime.toTimestamp())}}(t.yt,e);else if(e.isNoDocument())i.noDocument={path:n.path.toArray(),readTime:ro(e.version)};else{if(!e.isUnknownDocument())return X(57904,{document:e});i.unknownDocument={path:n.path.toArray(),version:ro(e.version)}}return i}function cp(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function ro(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function so(t){const e=new Ie(t.seconds,t.nanoseconds);return te.fromTimestamp(e)}function xa(t,e){const n=(e.baseMutations||[]).map(s=>l0(t.yt,s));for(let s=0;s<e.mutations.length-1;++s){const a=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const o=e.mutations[s+1];a.updateTransforms=o.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const i=e.mutations.map(s=>l0(t.yt,s)),r=Ie.fromMillis(e.localWriteTimeMs);return new qw(e.batchId,r,n,i)}function xu(t){const e=so(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?so(t.lastLimboFreeSnapshotVersion):te.min();let i;return i=function(s){return s.documents!==void 0}(t.query)?function(s){const a=s.documents.length;return Z(a===1,1966,{count:a}),pn(Ac(Xk(s.documents[0])))}(t.query):function(s){return pn(nV(s))}(t.query),new fr(i,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,lt.fromBase64String(t.resumeToken))}function oV(t,e){const n=ro(e.snapshotVersion),i=ro(e.lastLimboFreeSnapshotVersion);let r;r=ap(e.target)?eV(t.yt,e.target):tV(t.yt,e.target).ft;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:to(e.target),readTime:n,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:r}}function Ww(t){const e=nV({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?lp(e,e.limit,"L"):e}function o_(t,e){return new Gw(e.largestBatchId,l0(t.yt,e.overlayMutation))}function E1(t,e){const n=e.path.lastSegment();return[t,sn(e.path.popLast()),n]}function A1(t,e,n,i){return{indexId:t,uid:e,sequenceNumber:n,readTime:ro(i.readTime),documentKey:sn(i.documentKey.path),largestBatchId:i.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J7{getBundleMetadata(e,n){return S1(e).get(n).next(i=>{if(i)return function(s){return{id:s.bundleId,createTime:so(s.createTime),version:s.version}}(i)})}saveBundleMetadata(e,n){return S1(e).put(function(r){return{bundleId:r.id,createTime:ro(pt(r.createTime)),version:r.version}}(n))}getNamedQuery(e,n){return I1(e).get(n).next(i=>{if(i)return function(s){return{name:s.name,query:Ww(s.bundledQuery),readTime:so(s.readTime)}}(i)})}saveNamedQuery(e,n){return I1(e).put(function(r){return{name:r.name,readTime:ro(pt(r.readTime)),bundledQuery:r.bundledQuery}}(n))}}function S1(t){return Pt(t,ug)}function I1(t){return Pt(t,hg)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _g{constructor(e,n){this.serializer=e,this.userId=n}static wt(e,n){const i=n.uid||"";return new _g(e,i)}getOverlay(e,n){return cu(e).get(E1(this.userId,n)).next(i=>i?o_(this.serializer,i):null)}getOverlays(e,n){const i=Fi();return M.forEach(n,r=>this.getOverlay(e,r).next(s=>{s!==null&&i.set(r,s)})).next(()=>i)}saveOverlays(e,n,i){const r=[];return i.forEach((s,a)=>{const o=new Gw(n,a);r.push(this.St(e,o))}),M.waitFor(r)}removeOverlaysForBatchId(e,n,i){const r=new Set;n.forEach(a=>r.add(sn(a.getCollectionPath())));const s=[];return r.forEach(a=>{const o=IDBKeyRange.bound([this.userId,a,i],[this.userId,a,i+1],!1,!0);s.push(cu(e).Z(Yv,o))}),M.waitFor(s)}getOverlaysForCollection(e,n,i){const r=Fi(),s=sn(n),a=IDBKeyRange.bound([this.userId,s,i],[this.userId,s,Number.POSITIVE_INFINITY],!0);return cu(e).J(Yv,a).next(o=>{for(const l of o){const c=o_(this.serializer,l);r.set(c.getKey(),c)}return r})}getOverlaysForCollectionGroup(e,n,i,r){const s=Fi();let a;const o=IDBKeyRange.bound([this.userId,n,i],[this.userId,n,Number.POSITIVE_INFINITY],!0);return cu(e).ee({index:ak,range:o},(l,c,h)=>{const d=o_(this.serializer,c);s.size()<r||d.largestBatchId===a?(s.set(d.getKey(),d),a=d.largestBatchId):h.done()}).next(()=>s)}St(e,n){return cu(e).put(function(r,s,a){const[o,l,c]=E1(s,a.mutation.key);return{userId:s,collectionPath:l,documentId:c,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:Gh(r.yt,a.mutation)}}(this.serializer,this.userId,n))}}function cu(t){return Pt(t,dg)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z7{bt(e){return Pt(e,Vw)}getSessionToken(e){return this.bt(e).get("sessionToken").next(n=>{const i=n==null?void 0:n.value;return i?lt.fromUint8Array(i):lt.EMPTY_BYTE_STRING})}setSessionToken(e,n){return this.bt(e).put({name:"sessionToken",value:n.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ra{constructor(){}Dt(e,n){this.Ct(e,n),n.vt()}Ct(e,n){if("nullValue"in e)this.Ft(n,5);else if("booleanValue"in e)this.Ft(n,10),n.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(n,15),n.Mt(Ye(e.integerValue));else if("doubleValue"in e){const i=Ye(e.doubleValue);isNaN(i)?this.Ft(n,13):(this.Ft(n,15),Mh(i)?n.Mt(0):n.Mt(i))}else if("timestampValue"in e){let i=e.timestampValue;this.Ft(n,20),typeof i=="string"&&(i=Dr(i)),n.xt(`${i.seconds||""}`),n.Mt(i.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,n),this.Nt(n);else if("bytesValue"in e)this.Ft(n,30),n.Bt(kr(e.bytesValue)),this.Nt(n);else if("referenceValue"in e)this.Lt(e.referenceValue,n);else if("geoPointValue"in e){const i=e.geoPointValue;this.Ft(n,45),n.Mt(i.latitude||0),n.Mt(i.longitude||0)}else"mapValue"in e?_k(e)?this.Ft(n,Number.MAX_SAFE_INTEGER):pg(e)?this.kt(e.mapValue,n):(this.qt(e.mapValue,n),this.Nt(n)):"arrayValue"in e?(this.Qt(e.arrayValue,n),this.Nt(n)):X(19022,{$t:e})}Ot(e,n){this.Ft(n,25),this.Ut(e,n)}Ut(e,n){n.xt(e)}qt(e,n){const i=e.fields||{};this.Ft(n,55);for(const r of Object.keys(i))this.Ot(r,n),this.Ct(i[r],n)}kt(e,n){var a,o;const i=e.fields||{};this.Ft(n,53);const r=$l,s=((o=(a=i[r].arrayValue)==null?void 0:a.values)==null?void 0:o.length)||0;this.Ft(n,15),n.Mt(Ye(s)),this.Ot(r,n),this.Ct(i[r],n)}Qt(e,n){const i=e.values||[];this.Ft(n,50);for(const r of i)this.Ct(r,n)}Lt(e,n){this.Ft(n,37),$.fromName(e).path.forEach(i=>{this.Ft(n,60),this.Ut(i,n)})}Ft(e,n){e.Mt(n)}Nt(e){e.Mt(2)}}Ra.Kt=new Ra;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ko=255;function eH(t){if(t===0)return 8;let e=0;return t>>4||(e+=4,t<<=4),t>>6||(e+=2,t<<=2),t>>7||(e+=1),e}function x1(t){const e=64-function(i){let r=0;for(let s=0;s<8;++s){const a=eH(255&i[s]);if(r+=a,a!==8)break}return r}(t);return Math.ceil(e/8)}class tH{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const n=e[Symbol.iterator]();let i=n.next();for(;!i.done;)this.Gt(i.value),i=n.next();this.zt()}jt(e){const n=e[Symbol.iterator]();let i=n.next();for(;!i.done;)this.Jt(i.value),i=n.next();this.Ht()}Yt(e){for(const n of e){const i=n.charCodeAt(0);if(i<128)this.Gt(i);else if(i<2048)this.Gt(960|i>>>6),this.Gt(128|63&i);else if(n<"\uD800"||"\uDBFF"<n)this.Gt(480|i>>>12),this.Gt(128|63&i>>>6),this.Gt(128|63&i);else{const r=n.codePointAt(0);this.Gt(240|r>>>18),this.Gt(128|63&r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r)}}this.zt()}Zt(e){for(const n of e){const i=n.charCodeAt(0);if(i<128)this.Jt(i);else if(i<2048)this.Jt(960|i>>>6),this.Jt(128|63&i);else if(n<"\uD800"||"\uDBFF"<n)this.Jt(480|i>>>12),this.Jt(128|63&i>>>6),this.Jt(128|63&i);else{const r=n.codePointAt(0);this.Jt(240|r>>>18),this.Jt(128|63&r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r)}}this.Ht()}Xt(e){const n=this.en(e),i=x1(n);this.tn(1+i),this.buffer[this.position++]=255&i;for(let r=n.length-i;r<n.length;++r)this.buffer[this.position++]=255&n[r]}nn(e){const n=this.en(e),i=x1(n);this.tn(1+i),this.buffer[this.position++]=~(255&i);for(let r=n.length-i;r<n.length;++r)this.buffer[this.position++]=~(255&n[r])}rn(){this.sn(ko),this.sn(255)}_n(){this.an(ko),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const n=function(s){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,s,!1),new Uint8Array(a.buffer)}(e),i=!!(128&n[0]);n[0]^=i?255:128;for(let r=1;r<n.length;++r)n[r]^=i?255:0;return n}Gt(e){const n=255&e;n===0?(this.sn(0),this.sn(255)):n===ko?(this.sn(ko),this.sn(0)):this.sn(n)}Jt(e){const n=255&e;n===0?(this.an(0),this.an(255)):n===ko?(this.an(ko),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const n=e+this.position;if(n<=this.buffer.length)return;let i=2*this.buffer.length;i<n&&(i=n);const r=new Uint8Array(i);r.set(this.buffer),this.buffer=r}}class nH{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class iH{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class uu{constructor(){this.cn=new tH,this.ln=new nH(this.cn),this.hn=new iH(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ca{constructor(e,n,i,r){this.Tn=e,this.In=n,this.En=i,this.dn=r}An(){const e=this.dn.length,n=e===0||this.dn[e-1]===255?e+1:e,i=new Uint8Array(n);return i.set(this.dn,0),n!==e?i.set([0],this.dn.length):++i[i.length-1],new Ca(this.Tn,this.In,this.En,i)}Rn(e,n,i){return{indexId:this.Tn,uid:e,arrayValue:dm(this.En),directionalValue:dm(this.dn),orderedDocumentKey:dm(n),documentKey:i.path.toArray()}}Vn(e,n,i){const r=this.Rn(e,n,i);return[r.indexId,r.uid,r.arrayValue,r.directionalValue,r.orderedDocumentKey,r.documentKey]}}function es(t,e){let n=t.Tn-e.Tn;return n!==0?n:(n=R1(t.En,e.En),n!==0?n:(n=R1(t.dn,e.dn),n!==0?n:$.comparator(t.In,e.In)))}function R1(t,e){for(let n=0;n<t.length&&n<e.length;++n){const i=t[n]-e[n];if(i!==0)return i}return t.length-e.length}function dm(t){return AN()?function(n){let i="";for(let r=0;r<n.length;r++)i+=String.fromCharCode(n[r]);return i}(t):t}function C1(t){return typeof t!="string"?t:function(n){const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}(t)}class P1{constructor(e){this.mn=new Pe((n,i)=>Xe.comparator(n.field,i.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const n of e.filters){const i=n;i.isInequality()?this.mn=this.mn.add(i):this.gn.push(i)}}get pn(){return this.mn.size>1}yn(e){if(Z(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const n=Kv(e);if(n!==void 0&&!this.wn(n))return!1;const i=Ta(e);let r=new Set,s=0,a=0;for(;s<i.length&&this.wn(i[s]);++s)r=r.add(i[s].fieldPath.canonicalString());if(s===i.length)return!0;if(this.mn.size>0){const o=this.mn.getIterator().getNext();if(!r.has(o.field.canonicalString())){const l=i[s];if(!this.Sn(o,l)||!this.bn(this.fn[a++],l))return!1}++s}for(;s<i.length;++s){const o=i[s];if(a>=this.fn.length||!this.bn(this.fn[a++],o))return!1}return!0}Dn(){if(this.pn)return null;let e=new Pe(Xe.comparator);const n=[];for(const i of this.gn)if(!i.field.isKeyField())if(i.op==="array-contains"||i.op==="array-contains-any")n.push(new rm(i.field,2));else{if(e.has(i.field))continue;e=e.add(i.field),n.push(new rm(i.field,0))}for(const i of this.fn)i.field.isKeyField()||e.has(i.field)||(e=e.add(i.field),n.push(new rm(i.field,i.dir==="asc"?0:1)));return new np(np.UNKNOWN_ID,this.collectionId,n,Oh.empty())}wn(e){for(const n of this.gn)if(this.Sn(n,e))return!0;return!1}Sn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const i=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===i}bn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lV(t){var n,i;if(Z(t instanceof _e||t instanceof Ce,20012),t instanceof _e){if(t instanceof xk){const r=((i=(n=t.value.arrayValue)==null?void 0:n.values)==null?void 0:i.map(s=>_e.create(t.field,"==",s)))||[];return Ce.create(r,"or")}return t}const e=t.filters.map(r=>lV(r));return Ce.create(e,t.op)}function rH(t){if(t.getFilters().length===0)return[];const e=h0(lV(t));return Z(cV(e),7391),c0(e)||u0(e)?[e]:e.getFilters()}function c0(t){return t instanceof _e}function u0(t){return t instanceof Ce&&Uw(t)}function cV(t){return c0(t)||u0(t)||function(n){if(n instanceof Ce&&t0(n)){for(const i of n.getFilters())if(!c0(i)&&!u0(i))return!1;return!0}return!1}(t)}function h0(t){if(Z(t instanceof _e||t instanceof Ce,34018),t instanceof _e)return t;if(t.filters.length===1)return h0(t.filters[0]);const e=t.filters.map(i=>h0(i));let n=Ce.create(e,t.op);return n=up(n),cV(n)?n:(Z(n instanceof Ce,64498),Z(Wl(n),40251),Z(n.filters.length>1,57927),n.filters.reduce((i,r)=>Qw(i,r)))}function Qw(t,e){let n;return Z(t instanceof _e||t instanceof Ce,38388),Z(e instanceof _e||e instanceof Ce,25473),n=t instanceof _e?e instanceof _e?function(r,s){return Ce.create([r,s],"and")}(t,e):N1(t,e):e instanceof _e?N1(e,t):function(r,s){if(Z(r.filters.length>0&&s.filters.length>0,48005),Wl(r)&&Wl(s))return Ak(r,s.getFilters());const a=t0(r)?r:s,o=t0(r)?s:r,l=a.filters.map(c=>Qw(c,o));return Ce.create(l,"or")}(t,e),up(n)}function N1(t,e){if(Wl(e))return Ak(e,t.getFilters());{const n=e.filters.map(i=>Qw(t,i));return Ce.create(n,"or")}}function up(t){if(Z(t instanceof _e||t instanceof Ce,11850),t instanceof _e)return t;const e=t.getFilters();if(e.length===1)return up(e[0]);if(Tk(t))return t;const n=e.map(r=>up(r)),i=[];return n.forEach(r=>{r instanceof _e?i.push(r):r instanceof Ce&&(r.op===t.op?i.push(...r.filters):i.push(r))}),i.length===1?i[0]:Ce.create(i,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sH{constructor(){this.Cn=new Yw}addToCollectionParentIndex(e,n){return this.Cn.add(n),M.resolve()}getCollectionParents(e,n){return M.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return M.resolve()}deleteFieldIndex(e,n){return M.resolve()}deleteAllFieldIndexes(e){return M.resolve()}createTargetIndexes(e,n){return M.resolve()}getDocumentsMatchingTarget(e,n){return M.resolve(null)}getIndexType(e,n){return M.resolve(0)}getFieldIndexes(e,n){return M.resolve([])}getNextCollectionGroupToUpdate(e){return M.resolve(null)}getMinOffset(e,n){return M.resolve(Kn.min())}getMinOffsetFromCollectionGroup(e,n){return M.resolve(Kn.min())}updateCollectionGroup(e,n,i){return M.resolve()}updateIndexEntries(e,n){return M.resolve()}}class Yw{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n]||new Pe(ge.comparator),s=!r.has(i);return this.index[n]=r.add(i),s}has(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(e){return(this.index[e]||new Pe(ge.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D1="IndexedDbIndexManager",Af=new Uint8Array(0);class aH{constructor(e,n){this.databaseId=n,this.vn=new Yw,this.Fn=new Br(i=>to(i),(i,r)=>xd(i,r)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.vn.has(n)){const i=n.lastSegment(),r=n.popLast();e.addOnCommittedListener(()=>{this.vn.add(n)});const s={collectionId:i,parent:sn(r)};return k1(e).put(s)}return M.resolve()}getCollectionParents(e,n){const i=[],r=IDBKeyRange.bound([n,""],[GD(n),""],!1,!0);return k1(e).J(r).next(s=>{for(const a of s){if(a.collectionId!==n)break;i.push(Bi(a.parent))}return i})}addFieldIndex(e,n){const i=hu(e),r=function(o){return{indexId:o.indexId,collectionGroup:o.collectionGroup,fields:o.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])}}(n);delete r.indexId;const s=i.add(r);if(n.indexState){const a=Oo(e);return s.next(o=>{a.put(A1(o,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return s.next()}deleteFieldIndex(e,n){const i=hu(e),r=Oo(e),s=Vo(e);return i.delete(n.indexId).next(()=>r.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=hu(e),i=Vo(e),r=Oo(e);return n.Z().next(()=>i.Z()).next(()=>r.Z())}createTargetIndexes(e,n){return M.forEach(this.Mn(n),i=>this.getIndexType(e,i).next(r=>{if(r===0||r===1){const s=new P1(i).Dn();if(s!=null)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,n){const i=Vo(e);let r=!0;const s=new Map;return M.forEach(this.Mn(n),a=>this.xn(e,a).next(o=>{r&&(r=!!o),s.set(a,o)})).next(()=>{if(r){let a=ce();const o=[];return M.forEach(s,(l,c)=>{q(D1,`Using index ${function(_){return`id=${_.indexId}|cg=${_.collectionGroup}|f=${_.fields.map(S=>`${S.fieldPath}:${S.kind}`).join(",")}`}(l)} to execute ${to(n)}`);const h=function(_,S){const k=Kv(S);if(k===void 0)return null;for(const O of op(_,k.fieldPath))switch(O.op){case"array-contains-any":return O.value.arrayValue.values||[];case"array-contains":return[O.value]}return null}(c,l),d=function(_,S){const k=new Map;for(const O of Ta(S))for(const A of op(_,O.fieldPath))switch(A.op){case"==":case"in":k.set(O.fieldPath.canonicalString(),A.value);break;case"not-in":case"!=":return k.set(O.fieldPath.canonicalString(),A.value),Array.from(k.values())}return null}(c,l),f=function(_,S){const k=[];let O=!0;for(const A of Ta(S)){const T=A.kind===0?u1(_,A.fieldPath,_.startAt):h1(_,A.fieldPath,_.startAt);k.push(T.value),O&&(O=T.inclusive)}return new Gs(k,O)}(c,l),p=function(_,S){const k=[];let O=!0;for(const A of Ta(S)){const T=A.kind===0?h1(_,A.fieldPath,_.endAt):u1(_,A.fieldPath,_.endAt);k.push(T.value),O&&(O=T.inclusive)}return new Gs(k,O)}(c,l),w=this.On(l,c,f),E=this.On(l,c,p),R=this.Nn(l,c,d),b=this.Bn(l.indexId,h,w,f.inclusive,E,p.inclusive,R);return M.forEach(b,v=>i.Y(v,n.limit).next(_=>{_.forEach(S=>{const k=$.fromSegments(S.documentKey);a.has(k)||(a=a.add(k),o.push(k))})}))}).next(()=>o)}return M.resolve(null)})}Mn(e){let n=this.Fn.get(e);return n||(e.filters.length===0?n=[e]:n=rH(Ce.create(e.filters,"and")).map(i=>i0(e.path,e.collectionGroup,e.orderBy,i.getFilters(),e.limit,e.startAt,e.endAt)),this.Fn.set(e,n),n)}Bn(e,n,i,r,s,a,o){const l=(n!=null?n.length:1)*Math.max(i.length,s.length),c=l/(n!=null?n.length:1),h=[];for(let d=0;d<l;++d){const f=n?this.Ln(n[d/c]):Af,p=this.kn(e,f,i[d%c],r),w=this.qn(e,f,s[d%c],a),E=o.map(R=>this.kn(e,f,R,!0));h.push(...this.createRange(p,w,E))}return h}kn(e,n,i,r){const s=new Ca(e,$.empty(),n,i);return r?s:s.An()}qn(e,n,i,r){const s=new Ca(e,$.empty(),n,i);return r?s.An():s}xn(e,n){const i=new P1(n),r=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,r).next(s=>{let a=null;for(const o of s)i.yn(o)&&(!a||o.fields.length>a.fields.length)&&(a=o);return a})}getIndexType(e,n){let i=2;const r=this.Mn(n);return M.forEach(r,s=>this.xn(e,s).next(a=>{a?i!==0&&a.fields.length<function(l){let c=new Pe(Xe.comparator),h=!1;for(const d of l.filters)for(const f of d.getFlattenedFilters())f.field.isKeyField()||(f.op==="array-contains"||f.op==="array-contains-any"?h=!0:c=c.add(f.field));for(const d of l.orderBy)d.field.isKeyField()||(c=c.add(d.field));return c.size+(h?1:0)}(s)&&(i=1):i=0})).next(()=>function(a){return a.limit!==null}(n)&&r.length>1&&i===2?1:i)}Qn(e,n){const i=new uu;for(const r of Ta(e)){const s=n.data.field(r.fieldPath);if(s==null)return null;const a=i.Pn(r.kind);Ra.Kt.Dt(s,a)}return i.un()}Ln(e){const n=new uu;return Ra.Kt.Dt(e,n.Pn(0)),n.un()}$n(e,n){const i=new uu;return Ra.Kt.Dt(eo(this.databaseId,n),i.Pn(function(s){const a=Ta(s);return a.length===0?0:a[a.length-1].kind}(e))),i.un()}Nn(e,n,i){if(i===null)return[];let r=[];r.push(new uu);let s=0;for(const a of Ta(e)){const o=i[s++];for(const l of r)if(this.Un(n,a.fieldPath)&&Fh(o))r=this.Kn(r,a,o);else{const c=l.Pn(a.kind);Ra.Kt.Dt(o,c)}}return this.Wn(r)}On(e,n,i){return this.Nn(e,n,i.position)}Wn(e){const n=[];for(let i=0;i<e.length;++i)n[i]=e[i].un();return n}Kn(e,n,i){const r=[...e],s=[];for(const a of i.arrayValue.values||[])for(const o of r){const l=new uu;l.seed(o.un()),Ra.Kt.Dt(a,l.Pn(n.kind)),s.push(l)}return s}Un(e,n){return!!e.filters.find(i=>i instanceof _e&&i.field.isEqual(n)&&(i.op==="in"||i.op==="not-in"))}getFieldIndexes(e,n){const i=hu(e),r=Oo(e);return(n?i.J(Qv,IDBKeyRange.bound(n,n)):i.J()).next(s=>{const a=[];return M.forEach(s,o=>r.get([o.indexId,this.uid]).next(l=>{a.push(function(h,d){const f=d?new Oh(d.sequenceNumber,new Kn(so(d.readTime),new $(Bi(d.documentKey)),d.largestBatchId)):Oh.empty(),p=h.fields.map(([w,E])=>new rm(Xe.fromServerFormat(w),E));return new np(h.indexId,h.collectionGroup,p,f)}(o,l))})).next(()=>a)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((i,r)=>{const s=i.indexState.sequenceNumber-r.indexState.sequenceNumber;return s!==0?s:ae(i.collectionGroup,r.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,i){const r=hu(e),s=Oo(e);return this.Gn(e).next(a=>r.J(Qv,IDBKeyRange.bound(n,n)).next(o=>M.forEach(o,l=>s.put(A1(l.indexId,this.uid,a,i)))))}updateIndexEntries(e,n){const i=new Map;return M.forEach(n,(r,s)=>{const a=i.get(r.collectionGroup);return(a?M.resolve(a):this.getFieldIndexes(e,r.collectionGroup)).next(o=>(i.set(r.collectionGroup,o),M.forEach(o,l=>this.zn(e,r,l).next(c=>{const h=this.jn(s,l);return c.isEqual(h)?M.resolve():this.Jn(e,s,l,c,h)}))))})}Hn(e,n,i,r){return Vo(e).put(r.Rn(this.uid,this.$n(i,n.key),n.key))}Yn(e,n,i,r){return Vo(e).delete(r.Vn(this.uid,this.$n(i,n.key),n.key))}zn(e,n,i){const r=Vo(e);let s=new Pe(es);return r.ee({index:sk,range:IDBKeyRange.only([i.indexId,this.uid,dm(this.$n(i,n))])},(a,o)=>{s=s.add(new Ca(i.indexId,n,C1(o.arrayValue),C1(o.directionalValue)))}).next(()=>s)}jn(e,n){let i=new Pe(es);const r=this.Qn(n,e);if(r==null)return i;const s=Kv(n);if(s!=null){const a=e.data.field(s.fieldPath);if(Fh(a))for(const o of a.arrayValue.values||[])i=i.add(new Ca(n.indexId,e.key,this.Ln(o),r))}else i=i.add(new Ca(n.indexId,e.key,Af,r));return i}Jn(e,n,i,r,s){q(D1,"Updating index entries for document '%s'",n.key);const a=[];return function(l,c,h,d,f){const p=l.getIterator(),w=c.getIterator();let E=Do(p),R=Do(w);for(;E||R;){let b=!1,v=!1;if(E&&R){const _=h(E,R);_<0?v=!0:_>0&&(b=!0)}else E!=null?v=!0:b=!0;b?(d(R),R=Do(w)):v?(f(E),E=Do(p)):(E=Do(p),R=Do(w))}}(r,s,es,o=>{a.push(this.Hn(e,n,i,o))},o=>{a.push(this.Yn(e,n,i,o))}),M.waitFor(a)}Gn(e){let n=1;return Oo(e).ee({index:rk,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(i,r,s)=>{s.done(),n=r.sequenceNumber+1}).next(()=>n)}createRange(e,n,i){i=i.sort((a,o)=>es(a,o)).filter((a,o,l)=>!o||es(a,l[o-1])!==0);const r=[];r.push(e);for(const a of i){const o=es(a,e),l=es(a,n);if(o===0)r[0]=e.An();else if(o>0&&l<0)r.push(a),r.push(a.An());else if(l>0)break}r.push(n);const s=[];for(let a=0;a<r.length;a+=2){if(this.Zn(r[a],r[a+1]))return[];const o=r[a].Vn(this.uid,Af,$.empty()),l=r[a+1].Vn(this.uid,Af,$.empty());s.push(IDBKeyRange.bound(o,l))}return s}Zn(e,n){return es(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(V1)}getMinOffset(e,n){return M.mapArray(this.Mn(n),i=>this.xn(e,i).next(r=>r||X(44426))).next(V1)}}function k1(t){return Pt(t,jh)}function Vo(t){return Pt(t,th)}function hu(t){return Pt(t,kw)}function Oo(t){return Pt(t,eh)}function V1(t){Z(t.length!==0,28825);let e=t[0].indexState.offset,n=e.largestBatchId;for(let i=1;i<t.length;i++){const r=t[i].indexState.offset;Pw(r,e)<0&&(e=r),n<r.largestBatchId&&(n=r.largestBatchId)}return new Kn(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O1={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},uV=41943040;class Zt{static withCacheSize(e){return new Zt(e,Zt.DEFAULT_COLLECTION_PERCENTILE,Zt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hV(t,e,n){const i=t.store(vi),r=t.store(Fl),s=[],a=IDBKeyRange.only(n.batchId);let o=0;const l=i.ee({range:a},(h,d,f)=>(o++,f.delete()));s.push(l.next(()=>{Z(o===1,47070,{batchId:n.batchId})}));const c=[];for(const h of n.mutations){const d=tk(e,h.key.path,n.batchId);s.push(r.delete(d)),c.push(h.key)}return M.waitFor(s).next(()=>c)}function hp(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw X(14731);e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Zt.DEFAULT_COLLECTION_PERCENTILE=10,Zt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Zt.DEFAULT=new Zt(uV,Zt.DEFAULT_COLLECTION_PERCENTILE,Zt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Zt.DISABLED=new Zt(-1,0,0);class vg{constructor(e,n,i,r){this.userId=e,this.serializer=n,this.indexManager=i,this.referenceDelegate=r,this.Xn={}}static wt(e,n,i,r){Z(e.uid!=="",64387);const s=e.isAuthenticated()?e.uid:"";return new vg(s,n,i,r)}checkEmpty(e){let n=!0;const i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ts(e).ee({index:Da,range:i},(r,s,a)=>{n=!1,a.done()}).next(()=>n)}addMutationBatch(e,n,i,r){const s=Go(e),a=ts(e);return a.add({}).next(o=>{Z(typeof o=="number",49019);const l=new qw(o,n,i,r),c=function(p,w,E){const R=E.baseMutations.map(v=>Gh(p.yt,v)),b=E.mutations.map(v=>Gh(p.yt,v));return{userId:w,batchId:E.batchId,localWriteTimeMs:E.localWriteTime.toMillis(),baseMutations:R,mutations:b}}(this.serializer,this.userId,l),h=[];let d=new Pe((f,p)=>ae(f.canonicalString(),p.canonicalString()));for(const f of r){const p=tk(this.userId,f.key.path,o);d=d.add(f.key.path.popLast()),h.push(a.put(c)),h.push(s.put(p,z8))}return d.forEach(f=>{h.push(this.indexManager.addToCollectionParentIndex(e,f))}),e.addOnCommittedListener(()=>{this.Xn[o]=l.keys()}),M.waitFor(h).next(()=>l)})}lookupMutationBatch(e,n){return ts(e).get(n).next(i=>i?(Z(i.userId===this.userId,48,"Unexpected user for mutation batch",{userId:i.userId,batchId:n}),xa(this.serializer,i)):null)}er(e,n){return this.Xn[n]?M.resolve(this.Xn[n]):this.lookupMutationBatch(e,n).next(i=>{if(i){const r=i.keys();return this.Xn[n]=r,r}return null})}getNextMutationBatchAfterBatchId(e,n){const i=n+1,r=IDBKeyRange.lowerBound([this.userId,i]);let s=null;return ts(e).ee({index:Da,range:r},(a,o,l)=>{o.userId===this.userId&&(Z(o.batchId>=i,47524,{tr:i}),s=xa(this.serializer,o)),l.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let i=Ds;return ts(e).ee({index:Da,range:n,reverse:!0},(r,s,a)=>{i=s.batchId,a.done()}).next(()=>i)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,Ds],[this.userId,Number.POSITIVE_INFINITY]);return ts(e).J(Da,n).next(i=>i.map(r=>xa(this.serializer,r)))}getAllMutationBatchesAffectingDocumentKey(e,n){const i=sm(this.userId,n.path),r=IDBKeyRange.lowerBound(i),s=[];return Go(e).ee({range:r},(a,o,l)=>{const[c,h,d]=a,f=Bi(h);if(c===this.userId&&n.path.isEqual(f))return ts(e).get(d).next(p=>{if(!p)throw X(61480,{nr:a,batchId:d});Z(p.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:p.userId,batchId:d}),s.push(xa(this.serializer,p))});l.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new Pe(ae);const r=[];return n.forEach(s=>{const a=sm(this.userId,s.path),o=IDBKeyRange.lowerBound(a),l=Go(e).ee({range:o},(c,h,d)=>{const[f,p,w]=c,E=Bi(p);f===this.userId&&s.path.isEqual(E)?i=i.add(w):d.done()});r.push(l)}),M.waitFor(r).next(()=>this.rr(e,i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,r=i.length+1,s=sm(this.userId,i),a=IDBKeyRange.lowerBound(s);let o=new Pe(ae);return Go(e).ee({range:a},(l,c,h)=>{const[d,f,p]=l,w=Bi(f);d===this.userId&&i.isPrefixOf(w)?w.length===r&&(o=o.add(p)):h.done()}).next(()=>this.rr(e,o))}rr(e,n){const i=[],r=[];return n.forEach(s=>{r.push(ts(e).get(s).next(a=>{if(a===null)throw X(35274,{batchId:s});Z(a.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:a.userId,batchId:s}),i.push(xa(this.serializer,a))}))}),M.waitFor(r).next(()=>i)}removeMutationBatch(e,n){return hV(e.le,this.userId,n).next(i=>(e.addOnCommittedListener(()=>{this.ir(n.batchId)}),M.forEach(i,r=>this.referenceDelegate.markPotentiallyOrphaned(e,r))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return M.resolve();const i=IDBKeyRange.lowerBound(function(a){return[a]}(this.userId)),r=[];return Go(e).ee({range:i},(s,a,o)=>{if(s[0]===this.userId){const l=Bi(s[1]);r.push(l)}else o.done()}).next(()=>{Z(r.length===0,56720,{sr:r.map(s=>s.canonicalString())})})})}containsKey(e,n){return dV(e,this.userId,n)}_r(e){return fV(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:Ds,lastStreamToken:""})}}function dV(t,e,n){const i=sm(e,n.path),r=i[1],s=IDBKeyRange.lowerBound(i);let a=!1;return Go(t).ee({range:s,X:!0},(o,l,c)=>{const[h,d,f]=o;h===e&&d===r&&(a=!0),c.done()}).next(()=>a)}function ts(t){return Pt(t,vi)}function Go(t){return Pt(t,Fl)}function fV(t){return Pt(t,Lh)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ao{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new ao(0)}static cr(){return new ao(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oH{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.lr(e).next(n=>{const i=new ao(n.highestTargetId);return n.highestTargetId=i.next(),this.hr(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.lr(e).next(n=>te.fromTimestamp(new Ie(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.lr(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,i){return this.lr(e).next(r=>(r.highestListenSequenceNumber=n,i&&(r.lastRemoteSnapshotVersion=i.toTimestamp()),n>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=n),this.hr(e,r)))}addTargetData(e,n){return this.Pr(e,n).next(()=>this.lr(e).next(i=>(i.targetCount+=1,this.Tr(n,i),this.hr(e,i))))}updateTargetData(e,n){return this.Pr(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>Mo(e).delete(n.targetId)).next(()=>this.lr(e)).next(i=>(Z(i.targetCount>0,8065),i.targetCount-=1,this.hr(e,i)))}removeTargets(e,n,i){let r=0;const s=[];return Mo(e).ee((a,o)=>{const l=xu(o);l.sequenceNumber<=n&&i.get(l.targetId)===null&&(r++,s.push(this.removeTargetData(e,l)))}).next(()=>M.waitFor(s)).next(()=>r)}forEachTarget(e,n){return Mo(e).ee((i,r)=>{const s=xu(r);n(s)})}lr(e){return M1(e).get(sp).next(n=>(Z(n!==null,2888),n))}hr(e,n){return M1(e).put(sp,n)}Pr(e,n){return Mo(e).put(oV(this.serializer,n))}Tr(e,n){let i=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,i=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,i=!0),i}getTargetCount(e){return this.lr(e).next(n=>n.targetCount)}getTargetData(e,n){const i=to(n),r=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]);let s=null;return Mo(e).ee({range:r,index:ik},(a,o,l)=>{const c=xu(o);xd(n,c.target)&&(s=c,l.done())}).next(()=>s)}addMatchingKeys(e,n,i){const r=[],s=hs(e);return n.forEach(a=>{const o=sn(a.path);r.push(s.put({targetId:i,path:o})),r.push(this.referenceDelegate.addReference(e,i,a))}),M.waitFor(r)}removeMatchingKeys(e,n,i){const r=hs(e);return M.forEach(n,s=>{const a=sn(s.path);return M.waitFor([r.delete([i,a]),this.referenceDelegate.removeReference(e,i,s)])})}removeMatchingKeysForTargetId(e,n){const i=hs(e),r=IDBKeyRange.bound([n],[n+1],!1,!0);return i.delete(r)}getMatchingKeysForTargetId(e,n){const i=IDBKeyRange.bound([n],[n+1],!1,!0),r=hs(e);let s=ce();return r.ee({range:i,X:!0},(a,o,l)=>{const c=Bi(a[1]),h=new $(c);s=s.add(h)}).next(()=>s)}containsKey(e,n){const i=sn(n.path),r=IDBKeyRange.bound([i],[GD(i)],!1,!0);let s=0;return hs(e).ee({index:Dw,X:!0,range:r},([a,o],l,c)=>{a!==0&&(s++,c.done())}).next(()=>s>0)}At(e,n){return Mo(e).get(n).next(i=>i?xu(i):null)}}function Mo(t){return Pt(t,ql)}function M1(t){return Pt(t,qa)}function hs(t){return Pt(t,Hl)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L1="LruGarbageCollector",lH=1048576;function U1([t,e],[n,i]){const r=ae(t,n);return r===0?ae(e,i):r}class cH{constructor(e){this.Ir=e,this.buffer=new Pe(U1),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();U1(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class mV{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){q(L1,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){na(n)?q(L1,"Ignoring IndexedDB error during garbage collection: ",n):await ta(n)}await this.Vr(3e5)})}}class uH{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(i=>Math.floor(n/100*i))}nthSequenceNumber(e,n){if(n===0)return M.resolve(En.ce);const i=new cH(n);return this.mr.forEachTarget(e,r=>i.Ar(r.sequenceNumber)).next(()=>this.mr.pr(e,r=>i.Ar(r))).next(()=>i.maxValue)}removeTargets(e,n,i){return this.mr.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(q("LruGarbageCollector","Garbage collection skipped; disabled"),M.resolve(O1)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(q("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),O1):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let i,r,s,a,o,l,c;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(q("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),r=this.params.maximumSequenceNumbersToCollect):r=d,a=Date.now(),this.nthSequenceNumber(e,r))).next(d=>(i=d,o=Date.now(),this.removeTargets(e,i,n))).next(d=>(s=d,l=Date.now(),this.removeOrphanedDocuments(e,i))).next(d=>(c=Date.now(),Bo()<=me.DEBUG&&q("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-h}ms
	Determined least recently used ${r} in `+(o-a)+`ms
	Removed ${s} targets in `+(l-o)+`ms
	Removed ${d} documents in `+(c-l)+`ms
Total Duration: ${c-h}ms`),M.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:d})))}}function pV(t,e){return new uH(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hH{constructor(e,n){this.db=e,this.garbageCollector=pV(this,n)}gr(e){const n=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next(i=>n.next(r=>i+r))}wr(e){let n=0;return this.pr(e,i=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}pr(e,n){return this.Sr(e,(i,r)=>n(r))}addReference(e,n,i){return Sf(e,i)}removeReference(e,n,i){return Sf(e,i)}removeTargets(e,n,i){return this.db.getTargetCache().removeTargets(e,n,i)}markPotentiallyOrphaned(e,n){return Sf(e,n)}br(e,n){return function(r,s){let a=!1;return fV(r).te(o=>dV(r,o,s).next(l=>(l&&(a=!0),M.resolve(!l)))).next(()=>a)}(e,n)}removeOrphanedDocuments(e,n){const i=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let s=0;return this.Sr(e,(a,o)=>{if(o<=n){const l=this.br(e,a).next(c=>{if(!c)return s++,i.getEntry(e,a).next(()=>(i.removeEntry(a,te.min()),hs(e).delete(function(d){return[0,sn(d.path)]}(a))))});r.push(l)}}).next(()=>M.waitFor(r)).next(()=>i.apply(e)).next(()=>s)}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,i)}updateLimboDocument(e,n){return Sf(e,n)}Sr(e,n){const i=hs(e);let r,s=En.ce;return i.ee({index:Dw},([a,o],{path:l,sequenceNumber:c})=>{a===0?(s!==En.ce&&n(new $(Bi(r)),s),s=c,r=l):s=En.ce}).next(()=>{s!==En.ce&&n(new $(Bi(r)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Sf(t,e){return hs(t).put(function(i,r){return{targetId:0,path:sn(i.path),sequenceNumber:r}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gV{constructor(){this.changes=new Br(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Fe.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?M.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dH{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,i){return pa(e).put(i)}removeEntry(e,n,i){return pa(e).delete(function(s,a){const o=s.path.toArray();return[o.slice(0,o.length-2),o[o.length-2],cp(a),o[o.length-1]]}(n,i))}updateMetadata(e,n){return this.getMetadata(e).next(i=>(i.byteSize+=n,this.Dr(e,i)))}getEntry(e,n){let i=Fe.newInvalidDocument(n);return pa(e).ee({index:am,range:IDBKeyRange.only(du(n))},(r,s)=>{i=this.Cr(n,s)}).next(()=>i)}vr(e,n){let i={size:0,document:Fe.newInvalidDocument(n)};return pa(e).ee({index:am,range:IDBKeyRange.only(du(n))},(r,s)=>{i={document:this.Cr(n,s),size:hp(s)}}).next(()=>i)}getEntries(e,n){let i=Sn();return this.Fr(e,n,(r,s)=>{const a=this.Cr(r,s);i=i.insert(r,a)}).next(()=>i)}Mr(e,n){let i=Sn(),r=new Ue($.comparator);return this.Fr(e,n,(s,a)=>{const o=this.Cr(s,a);i=i.insert(s,o),r=r.insert(s,hp(a))}).next(()=>({documents:i,Or:r}))}Fr(e,n,i){if(n.isEmpty())return M.resolve();let r=new Pe(B1);n.forEach(l=>r=r.add(l));const s=IDBKeyRange.bound(du(r.first()),du(r.last())),a=r.getIterator();let o=a.getNext();return pa(e).ee({index:am,range:s},(l,c,h)=>{const d=$.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;o&&B1(o,d)<0;)i(o,null),o=a.getNext();o&&o.isEqual(d)&&(i(o,c),o=a.hasNext()?a.getNext():null),o?h.j(du(o)):h.done()}).next(()=>{for(;o;)i(o,null),o=a.hasNext()?a.getNext():null})}getDocumentsMatchingQuery(e,n,i,r,s){const a=n.path,o=[a.popLast().toArray(),a.lastSegment(),cp(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],l=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return pa(e).J(IDBKeyRange.bound(o,l,!0)).next(c=>{s==null||s.incrementDocumentReadCount(c.length);let h=Sn();for(const d of c){const f=this.Cr($.fromSegments(d.prefixPath.concat(d.collectionGroup,d.documentId)),d);f.isFoundDocument()&&(Cd(n,f)||r.has(f.key))&&(h=h.insert(f.key,f))}return h})}getAllFromCollectionGroup(e,n,i,r){let s=Sn();const a=z1(n,i),o=z1(n,Kn.max());return pa(e).ee({index:nk,range:IDBKeyRange.bound(a,o,!0)},(l,c,h)=>{const d=this.Cr($.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);s=s.insert(d.key,d),s.size===r&&h.done()}).next(()=>s)}newChangeBuffer(e){return new fH(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return j1(e).get(Wv).next(n=>(Z(!!n,20021),n))}Dr(e,n){return j1(e).put(Wv,n)}Cr(e,n){if(n){const i=X7(this.serializer,n);if(!(i.isNoDocument()&&i.version.isEqual(te.min())))return i}return Fe.newInvalidDocument(e)}}function yV(t){return new dH(t)}class fH extends gV{constructor(e,n){super(),this.Nr=e,this.trackRemovals=n,this.Br=new Br(i=>i.toString(),(i,r)=>i.isEqual(r))}applyChanges(e){const n=[];let i=0,r=new Pe((s,a)=>ae(s.canonicalString(),a.canonicalString()));return this.changes.forEach((s,a)=>{const o=this.Br.get(s);if(n.push(this.Nr.removeEntry(e,s,o.readTime)),a.isValidDocument()){const l=T1(this.Nr.serializer,a);r=r.add(s.path.popLast());const c=hp(l);i+=c-o.size,n.push(this.Nr.addEntry(e,s,l))}else if(i-=o.size,this.trackRemovals){const l=T1(this.Nr.serializer,a.convertToNoDocument(te.min()));n.push(this.Nr.addEntry(e,s,l))}}),r.forEach(s=>{n.push(this.Nr.indexManager.addToCollectionParentIndex(e,s))}),n.push(this.Nr.updateMetadata(e,i)),M.waitFor(n)}getFromCache(e,n){return this.Nr.vr(e,n).next(i=>(this.Br.set(n,{size:i.size,readTime:i.document.readTime}),i.document))}getAllFromCache(e,n){return this.Nr.Mr(e,n).next(({documents:i,Or:r})=>(r.forEach((s,a)=>{this.Br.set(s,{size:a,readTime:i.get(s).readTime})}),i))}}function j1(t){return Pt(t,Uh)}function pa(t){return Pt(t,rp)}function du(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function z1(t,e){const n=e.documentKey.path.toArray();return[t,cp(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function B1(t,e){const n=t.path.toArray(),i=e.path.toArray();let r=0;for(let s=0;s<n.length-2&&s<i.length-2;++s)if(r=ae(n[s],i[s]),r)return r;return r=ae(n.length,i.length),r||(r=ae(n[n.length-2],i[i.length-2]),r||ae(n[n.length-1],i[i.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mH{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _V{constructor(e,n,i,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(i!==null&&rh(i.mutation,r,An.empty(),Ie.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,ce()).next(()=>i))}getLocalViewOfDocuments(e,n,i=ce()){const r=Fi();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,i).next(s=>{let a=Su();return s.forEach((o,l)=>{a=a.insert(o,l.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const i=Fi();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,ce()))}populateOverlays(e,n,i){const r=[];return i.forEach(s=>{n.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(e,r).next(s=>{s.forEach((a,o)=>{n.set(a,o)})})}computeViews(e,n,i,r){let s=Sn();const a=ih(),o=function(){return ih()}();return n.forEach((l,c)=>{const h=i.get(c.key);r.has(c.key)&&(h===void 0||h.mutation instanceof Fr)?s=s.insert(c.key,c):h!==void 0?(a.set(c.key,h.mutation.getFieldMask()),rh(h.mutation,c,h.mutation.getFieldMask(),Ie.now())):a.set(c.key,An.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,h)=>a.set(c,h)),n.forEach((c,h)=>o.set(c,new mH(h,a.get(c)??null))),o))}recalculateAndSaveOverlays(e,n){const i=ih();let r=new Ue((a,o)=>a-o),s=ce();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const o of a)o.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let h=i.get(l)||An.empty();h=o.applyToLocalView(c,h),i.set(l,h);const d=(r.get(o.batchId)||ce()).add(l);r=r.insert(o.batchId,d)})}).next(()=>{const a=[],o=r.getReverseIterator();for(;o.hasNext();){const l=o.getNext(),c=l.key,h=l.value,d=Vk();h.forEach(f=>{if(!s.has(f)){const p=Bk(n.get(f),i.get(f));p!==null&&d.set(f,p),s=s.add(f)}}),a.push(this.documentOverlayCache.saveOverlays(e,c,d))}return M.waitFor(a)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,r){return function(a){return $.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):jw(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,r):this.getDocumentsMatchingCollectionQuery(e,n,i,r)}getNextDocuments(e,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,r).next(s=>{const a=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,r-s.size):M.resolve(Fi());let o=Bl,l=s;return a.next(c=>M.forEach(c,(h,d)=>(o<d.largestBatchId&&(o=d.largestBatchId),s.get(h)?M.resolve():this.remoteDocumentCache.getEntry(e,h).next(f=>{l=l.insert(h,f)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,ce())).next(h=>({batchId:o,changes:kk(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new $(n)).next(i=>{let r=Su();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,i,r){const s=n.collectionGroup;let a=Su();return this.indexManager.getCollectionParents(e,s).next(o=>M.forEach(o,l=>{const c=function(d,f){return new zr(f,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,i,r).next(h=>{h.forEach((d,f)=>{a=a.insert(d,f)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,i,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,s,r))).next(a=>{s.forEach((l,c)=>{const h=c.getKey();a.get(h)===null&&(a=a.insert(h,Fe.newInvalidDocument(h)))});let o=Su();return a.forEach((l,c)=>{const h=s.get(l);h!==void 0&&rh(h.mutation,c,An.empty(),Ie.now()),Cd(n,c)&&(o=o.insert(l,c))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pH{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return M.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:pt(r.createTime)}}(n)),M.resolve()}getNamedQuery(e,n){return M.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(r){return{name:r.name,query:Ww(r.bundledQuery),readTime:pt(r.readTime)}}(n)),M.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gH{constructor(){this.overlays=new Ue($.comparator),this.qr=new Map}getOverlay(e,n){return M.resolve(this.overlays.get(n))}getOverlays(e,n){const i=Fi();return M.forEach(n,r=>this.getOverlay(e,r).next(s=>{s!==null&&i.set(r,s)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((r,s)=>{this.St(e,n,s)}),M.resolve()}removeOverlaysForBatchId(e,n,i){const r=this.qr.get(i);return r!==void 0&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.qr.delete(i)),M.resolve()}getOverlaysForCollection(e,n,i){const r=Fi(),s=n.length+1,a=new $(n.child("")),o=this.overlays.getIteratorFrom(a);for(;o.hasNext();){const l=o.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>i&&r.set(l.getKey(),l)}return M.resolve(r)}getOverlaysForCollectionGroup(e,n,i,r){let s=new Ue((c,h)=>c-h);const a=this.overlays.getIterator();for(;a.hasNext();){const c=a.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>i){let h=s.get(c.largestBatchId);h===null&&(h=Fi(),s=s.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const o=Fi(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,h)=>o.set(c,h)),!(o.size()>=r)););return M.resolve(o)}St(e,n,i){const r=this.overlays.get(i.key);if(r!==null){const a=this.qr.get(r.largestBatchId).delete(i.key);this.qr.set(r.largestBatchId,a)}this.overlays=this.overlays.insert(i.key,new Gw(n,i));let s=this.qr.get(n);s===void 0&&(s=ce(),this.qr.set(n,s)),this.qr.set(n,s.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yH{constructor(){this.sessionToken=lt.EMPTY_BYTE_STRING}getSessionToken(e){return M.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,M.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xw{constructor(){this.Qr=new Pe(kt.$r),this.Ur=new Pe(kt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const i=new kt(e,n);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.Gr(new kt(e,n))}zr(e,n){e.forEach(i=>this.removeReference(i,n))}jr(e){const n=new $(new ge([])),i=new kt(n,e),r=new kt(n,e+1),s=[];return this.Ur.forEachInRange([i,r],a=>{this.Gr(a),s.push(a.key)}),s}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new $(new ge([])),i=new kt(n,e),r=new kt(n,e+1);let s=ce();return this.Ur.forEachInRange([i,r],a=>{s=s.add(a.key)}),s}containsKey(e){const n=new kt(e,0),i=this.Qr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class kt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return $.comparator(e.key,n.key)||ae(e.Yr,n.Yr)}static Kr(e,n){return ae(e.Yr,n.Yr)||$.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _H{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Pe(kt.$r)}checkEmpty(e){return M.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,r){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new qw(s,n,i,r);this.mutationQueue.push(a);for(const o of r)this.Zr=this.Zr.add(new kt(o.key,s)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return M.resolve(a)}lookupMutationBatch(e,n){return M.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,r=this.ei(i),s=r<0?0:r;return M.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return M.resolve(this.mutationQueue.length===0?Ds:this.tr-1)}getAllMutationBatches(e){return M.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new kt(n,0),r=new kt(n,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([i,r],a=>{const o=this.Xr(a.Yr);s.push(o)}),M.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new Pe(ae);return n.forEach(r=>{const s=new kt(r,0),a=new kt(r,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,a],o=>{i=i.add(o.Yr)})}),M.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,r=i.length+1;let s=i;$.isDocumentKey(s)||(s=s.child(""));const a=new kt(new $(s),0);let o=new Pe(ae);return this.Zr.forEachWhile(l=>{const c=l.key.path;return!!i.isPrefixOf(c)&&(c.length===r&&(o=o.add(l.Yr)),!0)},a),M.resolve(this.ti(o))}ti(e){const n=[];return e.forEach(i=>{const r=this.Xr(i);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){Z(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return M.forEach(n.mutations,r=>{const s=new kt(r.key,n.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Zr=i})}ir(e){}containsKey(e,n){const i=new kt(n,0),r=this.Zr.firstAfterOrEqual(i);return M.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,M.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vH{constructor(e){this.ri=e,this.docs=function(){return new Ue($.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,r=this.docs.get(i),s=r?r.size:0,a=this.ri(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return M.resolve(i?i.document.mutableCopy():Fe.newInvalidDocument(n))}getEntries(e,n){let i=Sn();return n.forEach(r=>{const s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():Fe.newInvalidDocument(r))}),M.resolve(i)}getDocumentsMatchingQuery(e,n,i,r){let s=Sn();const a=n.path,o=new $(a.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(o);for(;l.hasNext();){const{key:c,value:{document:h}}=l.getNext();if(!a.isPrefixOf(c.path))break;c.path.length>a.length+1||Pw(YD(h),i)<=0||(r.has(h.key)||Cd(n,h))&&(s=s.insert(h.key,h.mutableCopy()))}return M.resolve(s)}getAllFromCollectionGroup(e,n,i,r){X(9500)}ii(e,n){return M.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new bH(this)}getSize(e){return M.resolve(this.size)}}class bH extends gV{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?n.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(i)}),M.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wH{constructor(e){this.persistence=e,this.si=new Br(n=>to(n),xd),this.lastRemoteSnapshotVersion=te.min(),this.highestTargetId=0,this.oi=0,this._i=new Xw,this.targetCount=0,this.ai=ao.ur()}forEachTarget(e,n){return this.si.forEach((i,r)=>n(r)),M.resolve()}getLastRemoteSnapshotVersion(e){return M.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return M.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),M.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.oi&&(this.oi=n),M.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new ao(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,M.resolve()}updateTargetData(e,n){return this.Pr(n),M.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,M.resolve()}removeTargets(e,n,i){let r=0;const s=[];return this.si.forEach((a,o)=>{o.sequenceNumber<=n&&i.get(o.targetId)===null&&(this.si.delete(a),s.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)}),M.waitFor(s).next(()=>r)}getTargetCount(e){return M.resolve(this.targetCount)}getTargetData(e,n){const i=this.si.get(n)||null;return M.resolve(i)}addMatchingKeys(e,n,i){return this._i.Wr(n,i),M.resolve()}removeMatchingKeys(e,n,i){this._i.zr(n,i);const r=this.persistence.referenceDelegate,s=[];return r&&n.forEach(a=>{s.push(r.markPotentiallyOrphaned(e,a))}),M.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),M.resolve()}getMatchingKeysForTargetId(e,n){const i=this._i.Hr(n);return M.resolve(i)}containsKey(e,n){return M.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jw{constructor(e,n){this.ui={},this.overlays={},this.ci=new En(0),this.li=!1,this.li=!0,this.hi=new yH,this.referenceDelegate=e(this),this.Pi=new wH(this),this.indexManager=new sH,this.remoteDocumentCache=function(r){return new vH(r)}(i=>this.referenceDelegate.Ti(i)),this.serializer=new aV(n),this.Ii=new pH(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new gH,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.ui[e.toKey()];return i||(i=new _H(n,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,i){q("MemoryPersistence","Starting transaction:",e);const r=new TH(this.ci.next());return this.referenceDelegate.Ei(),i(r).next(s=>this.referenceDelegate.di(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Ai(e,n){return M.or(Object.values(this.ui).map(i=>()=>i.containsKey(e,n)))}}class TH extends JD{constructor(e){super(),this.currentSequenceNumber=e}}class bg{constructor(e){this.persistence=e,this.Ri=new Xw,this.Vi=null}static mi(e){return new bg(e)}get fi(){if(this.Vi)return this.Vi;throw X(60996)}addReference(e,n,i){return this.Ri.addReference(i,n),this.fi.delete(i.toString()),M.resolve()}removeReference(e,n,i){return this.Ri.removeReference(i,n),this.fi.add(i.toString()),M.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),M.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(r=>this.fi.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(s=>this.fi.add(s.toString()))}).next(()=>i.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return M.forEach(this.fi,i=>{const r=$.fromPath(i);return this.gi(e,r).next(s=>{s||n.removeEntry(r,te.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(i=>{i?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return M.or([()=>M.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class dp{constructor(e,n){this.persistence=e,this.pi=new Br(i=>sn(i.path),(i,r)=>i.isEqual(r)),this.garbageCollector=pV(this,n)}static mi(e,n){return new dp(e,n)}Ei(){}di(e){return M.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>n.next(r=>i+r))}wr(e){let n=0;return this.pr(e,i=>{n++}).next(()=>n)}pr(e,n){return M.forEach(this.pi,(i,r)=>this.br(e,i,r).next(s=>s?M.resolve():n(r)))}removeTargets(e,n,i){return this.persistence.getTargetCache().removeTargets(e,n,i)}removeOrphanedDocuments(e,n){let i=0;const r=this.persistence.getRemoteDocumentCache(),s=r.newChangeBuffer();return r.ii(e,a=>this.br(e,a,n).next(o=>{o||(i++,s.removeEntry(a,te.min()))})).next(()=>s.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),M.resolve()}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,n,i){return this.pi.set(i,e.currentSequenceNumber),M.resolve()}removeReference(e,n,i){return this.pi.set(i,e.currentSequenceNumber),M.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),M.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=lm(e.data.value)),n}br(e,n,i){return M.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const r=this.pi.get(n);return M.resolve(r!==void 0&&r>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EH{constructor(e){this.serializer=e}k(e,n,i,r){const s=new cg("createOrUpgrade",n);i<1&&r>=1&&(function(l){l.createObjectStore(Id)}(e),function(l){l.createObjectStore(Lh,{keyPath:j8}),l.createObjectStore(vi,{keyPath:JI,autoIncrement:!0}).createIndex(Da,ZI,{unique:!0}),l.createObjectStore(Fl)}(e),F1(e),function(l){l.createObjectStore(Ea)}(e));let a=M.resolve();return i<3&&r>=3&&(i!==0&&(function(l){l.deleteObjectStore(Hl),l.deleteObjectStore(ql),l.deleteObjectStore(qa)}(e),F1(e)),a=a.next(()=>function(l){const c=l.store(qa),h={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:te.min().toTimestamp(),targetCount:0};return c.put(sp,h)}(s))),i<4&&r>=4&&(i!==0&&(a=a.next(()=>function(l,c){return c.store(vi).J().next(d=>{l.deleteObjectStore(vi),l.createObjectStore(vi,{keyPath:JI,autoIncrement:!0}).createIndex(Da,ZI,{unique:!0});const f=c.store(vi),p=d.map(w=>f.put(w));return M.waitFor(p)})}(e,s))),a=a.next(()=>{(function(l){l.createObjectStore(Gl,{keyPath:W8})})(e)})),i<5&&r>=5&&(a=a.next(()=>this.yi(s))),i<6&&r>=6&&(a=a.next(()=>(function(l){l.createObjectStore(Uh)}(e),this.wi(s)))),i<7&&r>=7&&(a=a.next(()=>this.Si(s))),i<8&&r>=8&&(a=a.next(()=>this.bi(e,s))),i<9&&r>=9&&(a=a.next(()=>{(function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")})(e)})),i<10&&r>=10&&(a=a.next(()=>this.Di(s))),i<11&&r>=11&&(a=a.next(()=>{(function(l){l.createObjectStore(ug,{keyPath:Q8})})(e),function(l){l.createObjectStore(hg,{keyPath:Y8})}(e)})),i<12&&r>=12&&(a=a.next(()=>{(function(l){const c=l.createObjectStore(dg,{keyPath:i7});c.createIndex(Yv,r7,{unique:!1}),c.createIndex(ak,s7,{unique:!1})})(e)})),i<13&&r>=13&&(a=a.next(()=>function(l){const c=l.createObjectStore(rp,{keyPath:B8});c.createIndex(am,F8),c.createIndex(nk,q8)}(e)).next(()=>this.Ci(e,s)).next(()=>e.deleteObjectStore(Ea))),i<14&&r>=14&&(a=a.next(()=>this.Fi(e,s))),i<15&&r>=15&&(a=a.next(()=>function(l){l.createObjectStore(kw,{keyPath:X8,autoIncrement:!0}).createIndex(Qv,J8,{unique:!1}),l.createObjectStore(eh,{keyPath:Z8}).createIndex(rk,e7,{unique:!1}),l.createObjectStore(th,{keyPath:t7}).createIndex(sk,n7,{unique:!1})}(e))),i<16&&r>=16&&(a=a.next(()=>{n.objectStore(eh).clear()}).next(()=>{n.objectStore(th).clear()})),i<17&&r>=17&&(a=a.next(()=>{(function(l){l.createObjectStore(Vw,{keyPath:a7})})(e)})),i<18&&r>=18&&AN()&&(a=a.next(()=>{n.objectStore(eh).clear()}).next(()=>{n.objectStore(th).clear()})),a}wi(e){let n=0;return e.store(Ea).ee((i,r)=>{n+=hp(r)}).next(()=>{const i={byteSize:n};return e.store(Uh).put(Wv,i)})}yi(e){const n=e.store(Lh),i=e.store(vi);return n.J().next(r=>M.forEach(r,s=>{const a=IDBKeyRange.bound([s.userId,Ds],[s.userId,s.lastAcknowledgedBatchId]);return i.J(Da,a).next(o=>M.forEach(o,l=>{Z(l.userId===s.userId,18650,"Cannot process batch from unexpected user",{batchId:l.batchId});const c=xa(this.serializer,l);return hV(e,s.userId,c).next(()=>{})}))}))}Si(e){const n=e.store(Hl),i=e.store(Ea);return e.store(qa).get(sp).next(r=>{const s=[];return i.ee((a,o)=>{const l=new ge(a),c=function(d){return[0,sn(d)]}(l);s.push(n.get(c).next(h=>h?M.resolve():(d=>n.put({targetId:0,path:sn(d),sequenceNumber:r.highestListenSequenceNumber}))(l)))}).next(()=>M.waitFor(s))})}bi(e,n){e.createObjectStore(jh,{keyPath:K8});const i=n.store(jh),r=new Yw,s=a=>{if(r.add(a)){const o=a.lastSegment(),l=a.popLast();return i.put({collectionId:o,parent:sn(l)})}};return n.store(Ea).ee({X:!0},(a,o)=>{const l=new ge(a);return s(l.popLast())}).next(()=>n.store(Fl).ee({X:!0},([a,o,l],c)=>{const h=Bi(o);return s(h.popLast())}))}Di(e){const n=e.store(ql);return n.ee((i,r)=>{const s=xu(r),a=oV(this.serializer,s);return n.put(a)})}Ci(e,n){const i=n.store(Ea),r=[];return i.ee((s,a)=>{const o=n.store(rp),l=function(d){return d.document?new $(ge.fromString(d.document.name).popFirst(5)):d.noDocument?$.fromSegments(d.noDocument.path):d.unknownDocument?$.fromSegments(d.unknownDocument.path):X(36783)}(a).path.toArray(),c={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:a.readTime||[0,0],unknownDocument:a.unknownDocument,noDocument:a.noDocument,document:a.document,hasCommittedMutations:!!a.hasCommittedMutations};r.push(o.put(c))}).next(()=>M.waitFor(r))}Fi(e,n){const i=n.store(vi),r=yV(this.serializer),s=new Jw(bg.mi,this.serializer.yt);return i.J().next(a=>{const o=new Map;return a.forEach(l=>{let c=o.get(l.userId)??ce();xa(this.serializer,l).keys().forEach(h=>c=c.add(h)),o.set(l.userId,c)}),M.forEach(o,(l,c)=>{const h=new Ot(c),d=_g.wt(this.serializer,h),f=s.getIndexManager(h),p=vg.wt(h,this.serializer,f,s.referenceDelegate);return new _V(r,p,d,f).recalculateAndSaveOverlaysForDocumentKeys(new Xv(n,En.ce),l).next()})})}}function F1(t){t.createObjectStore(Hl,{keyPath:G8}).createIndex(Dw,$8,{unique:!0}),t.createObjectStore(ql,{keyPath:"targetId"}).createIndex(ik,H8,{unique:!0}),t.createObjectStore(qa)}const ns="IndexedDbPersistence",l_=18e5,c_=5e3,u_="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",vV="main";class Zw{constructor(e,n,i,r,s,a,o,l,c,h,d=18){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=i,this.Mi=s,this.window=a,this.document=o,this.xi=c,this.Oi=h,this.Ni=d,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=f=>Promise.resolve(),!Zw.v())throw new F(U.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new hH(this,r),this.$i=n+vV,this.serializer=new aV(l),this.Ui=new Hi(this.$i,this.Ni,new EH(this.serializer)),this.hi=new Z7,this.Pi=new oH(this.referenceDelegate,this.serializer),this.remoteDocumentCache=yV(this.serializer),this.Ii=new J7,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,h===!1&&ft(ns,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new F(U.FAILED_PRECONDITION,u_);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Pi.getHighestSequenceNumber(e))}).then(e=>{this.ci=new En(e,this.xi)}).then(()=>{this.li=!0}).catch(e=>(this.Ui&&this.Ui.close(),Promise.reject(e)))}Ji(e){return this.Qi=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget(async()=>{this.started&&await this.Wi()}))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>If(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Hi(e).next(n=>{n||(this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)))})}).next(()=>this.Yi(e)).next(n=>this.isPrimary&&!n?this.Zi(e).next(()=>!1):!!n&&this.Xi(e).next(()=>!0))).catch(e=>{if(na(e))return q(ns,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return q(ns,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable(()=>this.Qi(e)),this.isPrimary=e})}Hi(e){return fu(e).get(No).next(n=>M.resolve(this.es(n)))}ts(e){return If(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,l_)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const i=Pt(n,Gl);return i.J().next(r=>{const s=this.ss(r,l_),a=r.filter(o=>s.indexOf(o)===-1);return M.forEach(a,o=>i.delete(o.clientId)).next(()=>a)})}).catch(()=>[]);if(this.Ki)for(const n of e)this.Ki.removeItem(this._s(n.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Wi().then(()=>this.ns()).then(()=>this.ji()))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?M.resolve(!0):fu(e).get(No).next(n=>{if(n!==null&&this.rs(n.leaseTimestampMs,c_)&&!this.us(n.ownerId)){if(this.es(n)&&this.networkEnabled)return!0;if(!this.es(n)){if(!n.allowTabSynchronization)throw new F(U.FAILED_PRECONDITION,u_);return!1}}return!(!this.networkEnabled||!this.inForeground)||If(e).J().next(i=>this.ss(i,c_).find(r=>{if(this.clientId!==r.clientId){const s=!this.networkEnabled&&r.networkEnabled,a=!this.inForeground&&r.inForeground,o=this.networkEnabled===r.networkEnabled;if(s||a&&o)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&q(ns,`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[Id,Gl],e=>{const n=new Xv(e,En.ce);return this.Zi(n).next(()=>this.ts(n))}),this.Ui.close(),this.Ps()}ss(e,n){return e.filter(i=>this.rs(i.updateTimeMs,n)&&!this.us(i.clientId))}Ts(){return this.runTransaction("getActiveClients","readonly",e=>If(e).J().next(n=>this.ss(n,l_).map(i=>i.clientId)))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,n){return vg.wt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new aH(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return _g.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,n,i){q(ns,"Starting transaction:",e);const r=n==="readonly"?"readonly":"readwrite",s=function(l){return l===18?c7:l===17?uk:l===16?l7:l===15?Ow:l===14?ck:l===13?lk:l===12?o7:l===11?ok:void X(60245)}(this.Ni);let a;return this.Ui.runTransaction(e,r,s,o=>(a=new Xv(o,this.ci?this.ci.next():En.ce),n==="readwrite-primary"?this.Hi(a).next(l=>!!l||this.Yi(a)).next(l=>{if(!l)throw ft(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)),new F(U.FAILED_PRECONDITION,XD);return i(a)}).next(l=>this.Xi(a).next(()=>l)):this.Is(a).next(()=>i(a)))).then(o=>(a.raiseOnCommittedEvent(),o))}Is(e){return fu(e).get(No).next(n=>{if(n!==null&&this.rs(n.leaseTimestampMs,c_)&&!this.us(n.ownerId)&&!this.es(n)&&!(this.Oi||this.allowTabSynchronization&&n.allowTabSynchronization))throw new F(U.FAILED_PRECONDITION,u_)})}Xi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return fu(e).put(No,n)}static v(){return Hi.v()}Zi(e){const n=fu(e);return n.get(No).next(i=>this.es(i)?(q(ns,"Releasing primary lease."),n.delete(No)):M.resolve())}rs(e,n){const i=Date.now();return!(e<i-n)&&(!(e>i)||(ft(`Detected an update time that is in the future: ${e} > ${i}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi()))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){var e;typeof((e=this.window)==null?void 0:e.addEventListener)=="function"&&(this.Bi=()=>{this.cs();const n=/(?:Version|Mobile)\/1[456]/;EN()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){var n;try{const i=((n=this.Ki)==null?void 0:n.getItem(this._s(e)))!==null;return q(ns,`Client '${e}' ${i?"is":"is not"} zombied in LocalStorage`),i}catch(i){return ft(ns,"Failed to get zombied client id.",i),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){ft("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function fu(t){return Pt(t,Id)}function If(t){return Pt(t,Gl)}function eT(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tT{constructor(e,n,i,r){this.targetId=e,this.fromCache=n,this.Es=i,this.ds=r}static As(e,n){let i=ce(),r=ce();for(const s of n.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new tT(e,n.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AH{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bV{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return EN()?8:ZD(tt())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,i,r){const s={result:null};return this.ys(e,n).next(a=>{s.result=a}).next(()=>{if(!s.result)return this.ws(e,n,r,i).next(a=>{s.result=a})}).next(()=>{if(s.result)return;const a=new AH;return this.Ss(e,n,a).next(o=>{if(s.result=o,this.Vs)return this.bs(e,n,a,o.size)})}).next(()=>s.result)}bs(e,n,i,r){return i.documentReadCount<this.fs?(Bo()<=me.DEBUG&&q("QueryEngine","SDK will not create cache indexes for query:",Fo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),M.resolve()):(Bo()<=me.DEBUG&&q("QueryEngine","Query:",Fo(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.gs*r?(Bo()<=me.DEBUG&&q("QueryEngine","The SDK decides to create cache indexes for query:",Fo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,pn(n))):M.resolve())}ys(e,n){if(d1(n))return M.resolve(null);let i=pn(n);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=lp(n,null,"F"),i=pn(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(s=>{const a=ce(...s);return this.ps.getDocuments(e,a).next(o=>this.indexManager.getMinOffset(e,i).next(l=>{const c=this.Ds(n,o);return this.Cs(n,c,a,l.readTime)?this.ys(e,lp(n,null,"F")):this.vs(e,c,n,l)}))})))}ws(e,n,i,r){return d1(n)||r.isEqual(te.min())?M.resolve(null):this.ps.getDocuments(e,i).next(s=>{const a=this.Ds(n,s);return this.Cs(n,a,i,r)?M.resolve(null):(Bo()<=me.DEBUG&&q("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Fo(n)),this.vs(e,a,n,QD(r,Bl)).next(o=>o))})}Ds(e,n){let i=new Pe(Nk(e));return n.forEach((r,s)=>{Cd(e,s)&&(i=i.add(s))}),i}Cs(e,n,i,r){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Ss(e,n,i){return Bo()<=me.DEBUG&&q("QueryEngine","Using full collection scan to execute query:",Fo(n)),this.ps.getDocumentsMatchingQuery(e,n,Kn.min(),i)}vs(e,n,i,r){return this.ps.getDocumentsMatchingQuery(e,i,r).next(s=>(n.forEach(a=>{s=s.insert(a.key,a)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nT="LocalStore",SH=3e8;class IH{constructor(e,n,i,r){this.persistence=e,this.Fs=n,this.serializer=r,this.Ms=new Ue(ae),this.xs=new Br(s=>to(s),xd),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new _V(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function wV(t,e,n,i){return new IH(t,e,n,i)}async function TV(t,e){const n=Q(t);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,n.Bs(e),n.mutationQueue.getAllMutationBatches(i))).next(s=>{const a=[],o=[];let l=ce();for(const c of r){a.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}for(const c of s){o.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}return n.localDocuments.getDocuments(i,l).next(c=>({Ls:c,removedBatchIds:a,addedBatchIds:o}))})})}function xH(t,e){const n=Q(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=e.batch.keys(),s=n.Ns.newChangeBuffer({trackRemovals:!0});return function(o,l,c,h){const d=c.batch,f=d.keys();let p=M.resolve();return f.forEach(w=>{p=p.next(()=>h.getEntry(l,w)).next(E=>{const R=c.docVersions.get(w);Z(R!==null,48541),E.version.compareTo(R)<0&&(d.applyToRemoteDocument(E,c),E.isValidDocument()&&(E.setReadTime(c.commitVersion),h.addEntry(E)))})}),p.next(()=>o.mutationQueue.removeMutationBatch(l,d))}(n,i,e,s).next(()=>s.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(o){let l=ce();for(let c=0;c<o.mutationResults.length;++c)o.mutationResults[c].transformResults.length>0&&(l=l.add(o.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(i,r))})}function EV(t){const e=Q(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function RH(t,e){const n=Q(t),i=e.snapshotVersion;let r=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const a=n.Ns.newChangeBuffer({trackRemovals:!0});r=n.Ms;const o=[];e.targetChanges.forEach((h,d)=>{const f=r.get(d);if(!f)return;o.push(n.Pi.removeMatchingKeys(s,h.removedDocuments,d).next(()=>n.Pi.addMatchingKeys(s,h.addedDocuments,d)));let p=f.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(d)!==null?p=p.withResumeToken(lt.EMPTY_BYTE_STRING,te.min()).withLastLimboFreeSnapshotVersion(te.min()):h.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(h.resumeToken,i)),r=r.insert(d,p),function(E,R,b){return E.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-E.snapshotVersion.toMicroseconds()>=SH?!0:b.addedDocuments.size+b.modifiedDocuments.size+b.removedDocuments.size>0}(f,p,h)&&o.push(n.Pi.updateTargetData(s,p))});let l=Sn(),c=ce();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(s,h))}),o.push(AV(s,a,e.documentUpdates).next(h=>{l=h.ks,c=h.qs})),!i.isEqual(te.min())){const h=n.Pi.getLastRemoteSnapshotVersion(s).next(d=>n.Pi.setTargetsMetadata(s,s.currentSequenceNumber,i));o.push(h)}return M.waitFor(o).next(()=>a.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(n.Ms=r,s))}function AV(t,e,n){let i=ce(),r=ce();return n.forEach(s=>i=i.add(s)),e.getEntries(t,i).next(s=>{let a=Sn();return n.forEach((o,l)=>{const c=s.get(o);l.isFoundDocument()!==c.isFoundDocument()&&(r=r.add(o)),l.isNoDocument()&&l.version.isEqual(te.min())?(e.removeEntry(o,l.readTime),a=a.insert(o,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),a=a.insert(o,l)):q(nT,"Ignoring outdated watch update for ",o,". Current version:",c.version," Watch version:",l.version)}),{ks:a,qs:r}})}function CH(t,e){const n=Q(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=Ds),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function Jl(t,e){const n=Q(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return n.Pi.getTargetData(i,e).next(s=>s?(r=s,M.resolve(r)):n.Pi.allocateTargetId(i).next(a=>(r=new fr(e,a,"TargetPurposeListen",i.currentSequenceNumber),n.Pi.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=n.Ms.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(i.targetId,i),n.xs.set(e,i.targetId)),i})}async function Zl(t,e,n){const i=Q(t),r=i.Ms.get(e),s=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",s,a=>i.persistence.referenceDelegate.removeTarget(a,r))}catch(a){if(!na(a))throw a;q(nT,`Failed to update sequence numbers for target ${e}: ${a}`)}i.Ms=i.Ms.remove(e),i.xs.delete(r.target)}function fp(t,e,n){const i=Q(t);let r=te.min(),s=ce();return i.persistence.runTransaction("Execute query","readwrite",a=>function(l,c,h){const d=Q(l),f=d.xs.get(h);return f!==void 0?M.resolve(d.Ms.get(f)):d.Pi.getTargetData(c,h)}(i,a,pn(e)).next(o=>{if(o)return r=o.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(a,o.targetId).next(l=>{s=l})}).next(()=>i.Fs.getDocumentsMatchingQuery(a,e,n?r:te.min(),n?s:ce())).next(o=>(xV(i,Pk(e),o),{documents:o,Qs:s})))}function SV(t,e){const n=Q(t),i=Q(n.Pi),r=n.Ms.get(e);return r?Promise.resolve(r.target):n.persistence.runTransaction("Get target data","readonly",s=>i.At(s,e).next(a=>a?a.target:null))}function IV(t,e){const n=Q(t),i=n.Os.get(e)||te.min();return n.persistence.runTransaction("Get new document changes","readonly",r=>n.Ns.getAllFromCollectionGroup(r,e,QD(i,Bl),Number.MAX_SAFE_INTEGER)).then(r=>(xV(n,e,r),r))}function xV(t,e,n){let i=t.Os.get(e)||te.min();n.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),t.Os.set(e,i)}async function PH(t,e,n,i){const r=Q(t);let s=ce(),a=Sn();for(const c of n){const h=e.$s(c.metadata.name);c.document&&(s=s.add(h));const d=e.Us(c);d.setReadTime(e.Ks(c.metadata.readTime)),a=a.insert(h,d)}const o=r.Ns.newChangeBuffer({trackRemovals:!0}),l=await Jl(r,function(h){return pn(Ac(ge.fromString(`__bundle__/docs/${h}`)))}(i));return r.persistence.runTransaction("Apply bundle documents","readwrite",c=>AV(c,o,a).next(h=>(o.apply(c),h)).next(h=>r.Pi.removeMatchingKeysForTargetId(c,l.targetId).next(()=>r.Pi.addMatchingKeys(c,s,l.targetId)).next(()=>r.localDocuments.getLocalViewOfDocuments(c,h.ks,h.qs)).next(()=>h.ks)))}async function NH(t,e,n=ce()){const i=await Jl(t,pn(Ww(e.bundledQuery))),r=Q(t);return r.persistence.runTransaction("Save named query","readwrite",s=>{const a=pt(e.readTime);if(i.snapshotVersion.compareTo(a)>=0)return r.Ii.saveNamedQuery(s,e);const o=i.withResumeToken(lt.EMPTY_BYTE_STRING,a);return r.Ms=r.Ms.insert(o.targetId,o),r.Pi.updateTargetData(s,o).next(()=>r.Pi.removeMatchingKeysForTargetId(s,i.targetId)).next(()=>r.Pi.addMatchingKeys(s,n,i.targetId)).next(()=>r.Ii.saveNamedQuery(s,e))})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RV="firestore_clients";function q1(t,e){return`${RV}_${t}_${e}`}const CV="firestore_mutations";function H1(t,e,n){let i=`${CV}_${t}_${n}`;return e.isAuthenticated()&&(i+=`_${e.uid}`),i}const PV="firestore_targets";function h_(t,e){return`${PV}_${t}_${e}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ni="SharedClientState";class mp{constructor(e,n,i,r){this.user=e,this.batchId=n,this.state=i,this.error=r}static Ws(e,n,i){const r=JSON.parse(i);let s,a=typeof r=="object"&&["pending","acknowledged","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return a&&r.error&&(a=typeof r.error.message=="string"&&typeof r.error.code=="string",a&&(s=new F(r.error.code,r.error.message))),a?new mp(e,n,r.state,s):(ft(Ni,`Failed to parse mutation state for ID '${n}': ${i}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class sh{constructor(e,n,i){this.targetId=e,this.state=n,this.error=i}static Ws(e,n){const i=JSON.parse(n);let r,s=typeof i=="object"&&["not-current","current","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return s&&i.error&&(s=typeof i.error.message=="string"&&typeof i.error.code=="string",s&&(r=new F(i.error.code,i.error.message))),s?new sh(e,i.state,r):(ft(Ni,`Failed to parse target state for ID '${e}': ${n}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class pp{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Ws(e,n){const i=JSON.parse(n);let r=typeof i=="object"&&i.activeTargetIds instanceof Array,s=zw();for(let a=0;r&&a<i.activeTargetIds.length;++a)r=ek(i.activeTargetIds[a]),s=s.add(i.activeTargetIds[a]);return r?new pp(e,s):(ft(Ni,`Failed to parse client data for instance '${e}': ${n}`),null)}}class iT{constructor(e,n){this.clientId=e,this.onlineState=n}static Ws(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new iT(n.clientId,n.onlineState):(ft(Ni,`Failed to parse online state: ${e}`),null)}}class d0{constructor(){this.activeTargetIds=zw()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class d_{constructor(e,n,i,r,s){this.window=e,this.Mi=n,this.persistenceKey=i,this.Js=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Hs=this.Ys.bind(this),this.Zs=new Ue(ae),this.started=!1,this.Xs=[];const a=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.eo=q1(this.persistenceKey,this.Js),this.no=function(l){return`firestore_sequence_number_${l}`}(this.persistenceKey),this.Zs=this.Zs.insert(this.Js,new d0),this.ro=new RegExp(`^${RV}_${a}_([^_]*)$`),this.io=new RegExp(`^${CV}_${a}_(\\d+)(?:_(.*))?$`),this.so=new RegExp(`^${PV}_${a}_(\\d+)$`),this.oo=function(l){return`firestore_online_state_${l}`}(this.persistenceKey),this._o=function(l){return`firestore_bundle_loaded_v2_${l}`}(this.persistenceKey),this.window.addEventListener("storage",this.Hs)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Ts();for(const i of e){if(i===this.Js)continue;const r=this.getItem(q1(this.persistenceKey,i));if(r){const s=pp.Ws(i,r);s&&(this.Zs=this.Zs.insert(s.clientId,s))}}this.ao();const n=this.storage.getItem(this.oo);if(n){const i=this.uo(n);i&&this.co(i)}for(const i of this.Xs)this.Ys(i);this.Xs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.no,JSON.stringify(e))}getAllActiveQueryTargets(){return this.lo(this.Zs)}isActiveQueryTarget(e){let n=!1;return this.Zs.forEach((i,r)=>{r.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.ho(e,"pending")}updateMutationState(e,n,i){this.ho(e,n,i),this.Po(e)}addLocalQueryTarget(e,n=!0){let i="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(h_(this.persistenceKey,e));if(r){const s=sh.Ws(e,r);s&&(i=s.state)}}return n&&this.To.zs(e),this.ao(),i}removeLocalQueryTarget(e){this.To.js(e),this.ao()}isLocalQueryTarget(e){return this.To.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(h_(this.persistenceKey,e))}updateQueryState(e,n,i){this.Io(e,n,i)}handleUserChange(e,n,i){n.forEach(r=>{this.Po(r)}),this.currentUser=e,i.forEach(r=>{this.addPendingMutation(r)})}setOnlineState(e){this.Eo(e)}notifyBundleLoaded(e){this.Ao(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Hs),this.removeItem(this.eo),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return q(Ni,"READ",e,n),n}setItem(e,n){q(Ni,"SET",e,n),this.storage.setItem(e,n)}removeItem(e){q(Ni,"REMOVE",e),this.storage.removeItem(e)}Ys(e){const n=e;if(n.storageArea===this.storage){if(q(Ni,"EVENT",n.key,n.newValue),n.key===this.eo)return void ft("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Mi.enqueueRetryable(async()=>{if(this.started){if(n.key!==null){if(this.ro.test(n.key)){if(n.newValue==null){const i=this.Ro(n.key);return this.Vo(i,null)}{const i=this.mo(n.key,n.newValue);if(i)return this.Vo(i.clientId,i)}}else if(this.io.test(n.key)){if(n.newValue!==null){const i=this.fo(n.key,n.newValue);if(i)return this.po(i)}}else if(this.so.test(n.key)){if(n.newValue!==null){const i=this.yo(n.key,n.newValue);if(i)return this.wo(i)}}else if(n.key===this.oo){if(n.newValue!==null){const i=this.uo(n.newValue);if(i)return this.co(i)}}else if(n.key===this.no){const i=function(s){let a=En.ce;if(s!=null)try{const o=JSON.parse(s);Z(typeof o=="number",30636,{So:s}),a=o}catch(o){ft(Ni,"Failed to read sequence number from WebStorage",o)}return a}(n.newValue);i!==En.ce&&this.sequenceNumberHandler(i)}else if(n.key===this._o){const i=this.bo(n.newValue);await Promise.all(i.map(r=>this.syncEngine.Do(r)))}}}else this.Xs.push(n)})}}get To(){return this.Zs.get(this.Js)}ao(){this.setItem(this.eo,this.To.Gs())}ho(e,n,i){const r=new mp(this.currentUser,e,n,i),s=H1(this.persistenceKey,this.currentUser,e);this.setItem(s,r.Gs())}Po(e){const n=H1(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Eo(e){const n={clientId:this.Js,onlineState:e};this.storage.setItem(this.oo,JSON.stringify(n))}Io(e,n,i){const r=h_(this.persistenceKey,e),s=new sh(e,n,i);this.setItem(r,s.Gs())}Ao(e){const n=JSON.stringify(Array.from(e));this.setItem(this._o,n)}Ro(e){const n=this.ro.exec(e);return n?n[1]:null}mo(e,n){const i=this.Ro(e);return pp.Ws(i,n)}fo(e,n){const i=this.io.exec(e),r=Number(i[1]),s=i[2]!==void 0?i[2]:null;return mp.Ws(new Ot(s),r,n)}yo(e,n){const i=this.so.exec(e),r=Number(i[1]);return sh.Ws(r,n)}uo(e){return iT.Ws(e)}bo(e){return JSON.parse(e)}async po(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Co(e.batchId,e.state,e.error);q(Ni,`Ignoring mutation for non-active user ${e.user.uid}`)}wo(e){return this.syncEngine.vo(e.targetId,e.state,e.error)}Vo(e,n){const i=n?this.Zs.insert(e,n):this.Zs.remove(e),r=this.lo(this.Zs),s=this.lo(i),a=[],o=[];return s.forEach(l=>{r.has(l)||a.push(l)}),r.forEach(l=>{s.has(l)||o.push(l)}),this.syncEngine.Fo(a,o).then(()=>{this.Zs=i})}co(e){this.Zs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}lo(e){let n=zw();return e.forEach((i,r)=>{n=n.unionWith(r.activeTargetIds)}),n}}class NV{constructor(){this.Mo=new d0,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,i){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new d0,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DH{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G1="ConnectivityMonitor";class $1{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){q(G1,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){q(G1,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xf=null;function f0(){return xf===null?xf=function(){return 268435456+Math.round(2147483648*Math.random())}():xf++,"0x"+xf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f_="RestConnection",kH={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class VH{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${i}/databases/${r}`,this.Wo=this.databaseId.database===Jv?`project_id=${i}`:`project_id=${i}&database_id=${r}`}Go(e,n,i,r,s){const a=f0(),o=this.zo(e,n.toUriEncodedString());q(f_,`Sending RPC '${e}' ${a}:`,o,i);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,r,s);const{host:c}=new URL(o),h=Zs(c);return this.Jo(e,o,l,i,h).then(d=>(q(f_,`Received RPC '${e}' ${a}: `,d),d),d=>{throw Xi(f_,`RPC '${e}' ${a} failed with error: `,d,"url: ",o,"request:",i),d})}Ho(e,n,i,r,s,a){return this.Go(e,n,i,r,s)}jo(e,n,i){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ec}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((r,s)=>e[s]=r),i&&i.headers.forEach((r,s)=>e[s]=r)}zo(e,n){const i=kH[e];return`${this.Uo}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OH{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xt="WebChannelConnection";class MH extends VH{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,i,r,s){const a=f0();return new Promise((o,l)=>{const c=new UD;c.setWithCredentials(!0),c.listenOnce(jD.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case im.NO_ERROR:const d=c.getResponseJson();q(Xt,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(d)),o(d);break;case im.TIMEOUT:q(Xt,`RPC '${e}' ${a} timed out`),l(new F(U.DEADLINE_EXCEEDED,"Request time out"));break;case im.HTTP_ERROR:const f=c.getStatus();if(q(Xt,`RPC '${e}' ${a} failed with status:`,f,"response text:",c.getResponseText()),f>0){let p=c.getResponseJson();Array.isArray(p)&&(p=p[0]);const w=p==null?void 0:p.error;if(w&&w.status&&w.message){const E=function(b){const v=b.toLowerCase().replace(/_/g,"-");return Object.values(U).indexOf(v)>=0?v:U.UNKNOWN}(w.status);l(new F(E,w.message))}else l(new F(U.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new F(U.UNAVAILABLE,"Connection failed."));break;default:X(9055,{l_:e,streamId:a,h_:c.getLastErrorCode(),P_:c.getLastError()})}}finally{q(Xt,`RPC '${e}' ${a} completed.`)}});const h=JSON.stringify(r);q(Xt,`RPC '${e}' ${a} sending request:`,r),c.send(n,"POST",h,i,15)})}T_(e,n,i){const r=f0(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=FD(),o=BD(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,n,i),l.encodeInitMessageHeaders=!0;const h=s.join("");q(Xt,`Creating RPC '${e}' stream ${r}: ${h}`,l);const d=a.createWebChannel(h,l);this.I_(d);let f=!1,p=!1;const w=new OH({Yo:R=>{p?q(Xt,`Not sending because RPC '${e}' stream ${r} is closed:`,R):(f||(q(Xt,`Opening RPC '${e}' stream ${r} transport.`),d.open(),f=!0),q(Xt,`RPC '${e}' stream ${r} sending:`,R),d.send(R))},Zo:()=>d.close()}),E=(R,b,v)=>{R.listen(b,_=>{try{v(_)}catch(S){setTimeout(()=>{throw S},0)}})};return E(d,Au.EventType.OPEN,()=>{p||(q(Xt,`RPC '${e}' stream ${r} transport opened.`),w.o_())}),E(d,Au.EventType.CLOSE,()=>{p||(p=!0,q(Xt,`RPC '${e}' stream ${r} transport closed`),w.a_(),this.E_(d))}),E(d,Au.EventType.ERROR,R=>{p||(p=!0,Xi(Xt,`RPC '${e}' stream ${r} transport errored. Name:`,R.name,"Message:",R.message),w.a_(new F(U.UNAVAILABLE,"The operation could not be completed")))}),E(d,Au.EventType.MESSAGE,R=>{var b;if(!p){const v=R.data[0];Z(!!v,16349);const _=v,S=(_==null?void 0:_.error)||((b=_[0])==null?void 0:b.error);if(S){q(Xt,`RPC '${e}' stream ${r} received error:`,S);const k=S.status;let O=function(I){const P=yt[I];if(P!==void 0)return Hk(P)}(k),A=S.message;O===void 0&&(O=U.INTERNAL,A="Unknown error status: "+k+" with message "+S.message),p=!0,w.a_(new F(O,A)),d.close()}else q(Xt,`RPC '${e}' stream ${r} received:`,v),w.u_(v)}}),E(o,zD.STAT_EVENT,R=>{R.stat===Gv.PROXY?q(Xt,`RPC '${e}' stream ${r} detected buffering proxy`):R.stat===Gv.NOPROXY&&q(Xt,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{w.__()},0),w}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DV(){return typeof window<"u"?window:null}function fm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kd(t){return new B7(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rT{constructor(e,n,i=1e3,r=1.5,s=6e4){this.Mi=e,this.timerId=n,this.d_=i,this.A_=r,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),r=Math.max(0,n-i);r>0&&q("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K1="PersistentStream";class kV{constructor(e,n,i,r,s,a,o,l){this.Mi=e,this.S_=i,this.b_=r,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=o,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new rT(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===U.RESOURCE_EXHAUSTED?(ft(n.toString()),ft("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===U.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.D_===n&&this.G_(i,r)},i=>{e(()=>{const r=new F(U.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(r)})})}G_(e,n){const i=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{i(()=>this.listener.Xo())}),this.stream.t_(()=>{i(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(r=>{i(()=>this.z_(r))}),this.stream.onMessage(r=>{i(()=>++this.F_==1?this.J_(r):this.onNext(r))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return q(K1,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(q(K1,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class LH extends kV{constructor(e,n,i,r,s,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,a),this.serializer=s}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=H7(this.serializer,e),i=function(s){if(!("targetChange"in s))return te.min();const a=s.targetChange;return a.targetIds&&a.targetIds.length?te.min():a.readTime?pt(a.readTime):te.min()}(e);return this.listener.H_(n,i)}Y_(e){const n={};n.database=o0(this.serializer),n.addTarget=function(s,a){let o;const l=a.target;if(o=ap(l)?{documents:eV(s,l)}:{query:tV(s,l).ft},o.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){o.resumeToken=Wk(s,a.resumeToken);const c=s0(s,a.expectedCount);c!==null&&(o.expectedCount=c)}else if(a.snapshotVersion.compareTo(te.min())>0){o.readTime=Xl(s,a.snapshotVersion.toTimestamp());const c=s0(s,a.expectedCount);c!==null&&(o.expectedCount=c)}return o}(this.serializer,e);const i=$7(this.serializer,e);i&&(n.labels=i),this.q_(n)}Z_(e){const n={};n.database=o0(this.serializer),n.removeTarget=e,this.q_(n)}}class UH extends kV{constructor(e,n,i,r,s,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,a),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Z(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Z(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Z(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=G7(e.writeResults,e.commitTime),i=pt(e.commitTime);return this.listener.na(i,n)}ra(){const e={};e.database=o0(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(i=>Gh(this.serializer,i))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jH{}class zH extends jH{constructor(e,n,i,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new F(U.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,i,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Go(e,a0(n,i),r,s,a)).catch(s=>{throw s.name==="FirebaseError"?(s.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new F(U.UNKNOWN,s.toString())})}Ho(e,n,i,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,o])=>this.connection.Ho(e,a0(n,i),r,a,o,s)).catch(a=>{throw a.name==="FirebaseError"?(a.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new F(U.UNKNOWN,a.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class BH{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ft(n),this.aa=!1):q("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oo="RemoteStore";class FH{constructor(e,n,i,r,s){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo(a=>{i.enqueueAndForget(async()=>{ra(this)&&(q(oo,"Restarting streams for network reachability change."),await async function(l){const c=Q(l);c.Ea.add(4),await xc(c),c.Ra.set("Unknown"),c.Ea.delete(4),await Vd(c)}(this))})}),this.Ra=new BH(i,r)}}async function Vd(t){if(ra(t))for(const e of t.da)await e(!0)}async function xc(t){for(const e of t.da)await e(!1)}function wg(t,e){const n=Q(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),oT(n)?aT(n):Cc(n).O_()&&sT(n,e))}function ec(t,e){const n=Q(t),i=Cc(n);n.Ia.delete(e),i.O_()&&VV(n,e),n.Ia.size===0&&(i.O_()?i.L_():ra(n)&&n.Ra.set("Unknown"))}function sT(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(te.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Cc(t).Y_(e)}function VV(t,e){t.Va.Ue(e),Cc(t).Z_(e)}function aT(t){t.Va=new L7({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Cc(t).start(),t.Ra.ua()}function oT(t){return ra(t)&&!Cc(t).x_()&&t.Ia.size>0}function ra(t){return Q(t).Ea.size===0}function OV(t){t.Va=void 0}async function qH(t){t.Ra.set("Online")}async function HH(t){t.Ia.forEach((e,n)=>{sT(t,e)})}async function GH(t,e){OV(t),oT(t)?(t.Ra.ha(e),aT(t)):t.Ra.set("Unknown")}async function $H(t,e,n){if(t.Ra.set("Online"),e instanceof Kk&&e.state===2&&e.cause)try{await async function(r,s){const a=s.cause;for(const o of s.targetIds)r.Ia.has(o)&&(await r.remoteSyncer.rejectListen(o,a),r.Ia.delete(o),r.Va.removeTarget(o))}(t,e)}catch(i){q(oo,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await gp(t,i)}else if(e instanceof hm?t.Va.Ze(e):e instanceof $k?t.Va.st(e):t.Va.tt(e),!n.isEqual(te.min()))try{const i=await EV(t.localStore);n.compareTo(i)>=0&&await function(s,a){const o=s.Va.Tt(a);return o.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const h=s.Ia.get(c);h&&s.Ia.set(c,h.withResumeToken(l.resumeToken,a))}}),o.targetMismatches.forEach((l,c)=>{const h=s.Ia.get(l);if(!h)return;s.Ia.set(l,h.withResumeToken(lt.EMPTY_BYTE_STRING,h.snapshotVersion)),VV(s,l);const d=new fr(h.target,l,c,h.sequenceNumber);sT(s,d)}),s.remoteSyncer.applyRemoteEvent(o)}(t,n)}catch(i){q(oo,"Failed to raise snapshot:",i),await gp(t,i)}}async function gp(t,e,n){if(!na(e))throw e;t.Ea.add(1),await xc(t),t.Ra.set("Offline"),n||(n=()=>EV(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{q(oo,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Vd(t)})}function MV(t,e){return e().catch(n=>gp(t,n,e))}async function Rc(t){const e=Q(t),n=$s(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Ds;for(;KH(e);)try{const r=await CH(e.localStore,i);if(r===null){e.Ta.length===0&&n.L_();break}i=r.batchId,WH(e,r)}catch(r){await gp(e,r)}LV(e)&&UV(e)}function KH(t){return ra(t)&&t.Ta.length<10}function WH(t,e){t.Ta.push(e);const n=$s(t);n.O_()&&n.X_&&n.ea(e.mutations)}function LV(t){return ra(t)&&!$s(t).x_()&&t.Ta.length>0}function UV(t){$s(t).start()}async function QH(t){$s(t).ra()}async function YH(t){const e=$s(t);for(const n of t.Ta)e.ea(n.mutations)}async function XH(t,e,n){const i=t.Ta.shift(),r=Hw.from(i,e,n);await MV(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),await Rc(t)}async function JH(t,e){e&&$s(t).X_&&await async function(i,r){if(function(a){return qk(a)&&a!==U.ABORTED}(r.code)){const s=i.Ta.shift();$s(i).B_(),await MV(i,()=>i.remoteSyncer.rejectFailedWrite(s.batchId,r)),await Rc(i)}}(t,e),LV(t)&&UV(t)}async function W1(t,e){const n=Q(t);n.asyncQueue.verifyOperationInProgress(),q(oo,"RemoteStore received new credentials");const i=ra(n);n.Ea.add(3),await xc(n),i&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Vd(n)}async function m0(t,e){const n=Q(t);e?(n.Ea.delete(2),await Vd(n)):e||(n.Ea.add(2),await xc(n),n.Ra.set("Unknown"))}function Cc(t){return t.ma||(t.ma=function(n,i,r){const s=Q(n);return s.sa(),new LH(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(t.datastore,t.asyncQueue,{Xo:qH.bind(null,t),t_:HH.bind(null,t),r_:GH.bind(null,t),H_:$H.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),oT(t)?aT(t):t.Ra.set("Unknown")):(await t.ma.stop(),OV(t))})),t.ma}function $s(t){return t.fa||(t.fa=function(n,i,r){const s=Q(n);return s.sa(),new UH(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:QH.bind(null,t),r_:JH.bind(null,t),ta:YH.bind(null,t),na:XH.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await Rc(t)):(await t.fa.stop(),t.Ta.length>0&&(q(oo,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lT{constructor(e,n,i,r,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new Wt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,r,s){const a=Date.now()+i,o=new lT(e,n,a,r,s);return o.start(i),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new F(U.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Pc(t,e){if(ft("AsyncQueue",`${e}: ${t}`),na(t))return new F(U.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class El{static emptySet(e){return new El(e.comparator)}constructor(e){this.comparator=e?(n,i)=>e(n,i)||$.comparator(n.key,i.key):(n,i)=>$.comparator(n.key,i.key),this.keyedMap=Su(),this.sortedSet=new Ue(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof El)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new El;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q1{constructor(){this.ga=new Ue($.comparator)}track(e){const n=e.doc.key,i=this.ga.get(n);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(n,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(n):e.type===1&&i.type===2?this.ga=this.ga.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):X(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,i)=>{e.push(i)}),e}}class tc{constructor(e,n,i,r,s,a,o,l,c){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=o,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,i,r,s){const a=[];return n.forEach(o=>{a.push({type:0,doc:o})}),new tc(e,n,El.emptySet(n),a,i,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Rd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZH{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class eG{constructor(){this.queries=Y1(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,i){const r=Q(n),s=r.queries;r.queries=Y1(),s.forEach((a,o)=>{for(const l of o.Sa)l.onError(i)})})(this,new F(U.ABORTED,"Firestore shutting down"))}}function Y1(){return new Br(t=>Ck(t),Rd)}async function cT(t,e){const n=Q(t);let i=3;const r=e.query;let s=n.queries.get(r);s?!s.ba()&&e.Da()&&(i=2):(s=new ZH,i=e.Da()?0:1);try{switch(i){case 0:s.wa=await n.onListen(r,!0);break;case 1:s.wa=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(a){const o=Pc(a,`Initialization of query '${Fo(e.query)}' failed`);return void e.onError(o)}n.queries.set(r,s),s.Sa.push(e),e.va(n.onlineState),s.wa&&e.Fa(s.wa)&&hT(n)}async function uT(t,e){const n=Q(t),i=e.query;let r=3;const s=n.queries.get(i);if(s){const a=s.Sa.indexOf(e);a>=0&&(s.Sa.splice(a,1),s.Sa.length===0?r=e.Da()?0:1:!s.ba()&&e.Da()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function tG(t,e){const n=Q(t);let i=!1;for(const r of e){const s=r.query,a=n.queries.get(s);if(a){for(const o of a.Sa)o.Fa(r)&&(i=!0);a.wa=r}}i&&hT(n)}function nG(t,e,n){const i=Q(t),r=i.queries.get(e);if(r)for(const s of r.Sa)s.onError(n);i.queries.delete(e)}function hT(t){t.Ca.forEach(e=>{e.next()})}var p0,X1;(X1=p0||(p0={})).Ma="default",X1.Cache="cache";class dT{constructor(e,n,i){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)r.type!==3&&i.push(r);e=new tc(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const i=n!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=tc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==p0.Cache}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iG{constructor(e,n){this.Qa=e,this.byteLength=n}$a(){return"metadata"in this.Qa}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J1{constructor(e){this.serializer=e}$s(e){return Gi(this.serializer,e)}Us(e){return e.metadata.exists?Zk(this.serializer,e.document,!1):Fe.newNoDocument(this.$s(e.metadata.name),this.Ks(e.metadata.readTime))}Ks(e){return pt(e)}}class rG{constructor(e,n){this.Ua=e,this.serializer=n,this.Ka=[],this.Wa=[],this.collectionGroups=new Set,this.progress=jV(e)}get queries(){return this.Ka}get documents(){return this.Wa}Ga(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.Qa.namedQuery)this.Ka.push(e.Qa.namedQuery);else if(e.Qa.documentMetadata){this.Wa.push({metadata:e.Qa.documentMetadata}),e.Qa.documentMetadata.exists||++n;const i=ge.fromString(e.Qa.documentMetadata.name);this.collectionGroups.add(i.get(i.length-2))}else e.Qa.document&&(this.Wa[this.Wa.length-1].document=e.Qa.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,{...this.progress}):null}za(e){const n=new Map,i=new J1(this.serializer);for(const r of e)if(r.metadata.queries){const s=i.$s(r.metadata.name);for(const a of r.metadata.queries){const o=(n.get(a)||ce()).add(s);n.set(a,o)}}return n}async ja(e){const n=await PH(e,new J1(this.serializer),this.Wa,this.Ua.id),i=this.za(this.documents);for(const r of this.Ka)await NH(e,r,i.get(r.name));return this.progress.taskState="Success",{progress:this.progress,Ja:this.collectionGroups,Ha:n}}}function jV(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zV{constructor(e){this.key=e}}class BV{constructor(e){this.key=e}}class FV{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ce(),this.mutatedKeys=ce(),this.eu=Nk(e),this.tu=new El(this.eu)}get nu(){return this.Ya}ru(e,n){const i=n?n.iu:new Q1,r=n?n.tu:this.tu;let s=n?n.mutatedKeys:this.mutatedKeys,a=r,o=!1;const l=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,c=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((h,d)=>{const f=r.get(h),p=Cd(this.query,d)?d:null,w=!!f&&this.mutatedKeys.has(f.key),E=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let R=!1;f&&p?f.data.isEqual(p.data)?w!==E&&(i.track({type:3,doc:p}),R=!0):this.su(f,p)||(i.track({type:2,doc:p}),R=!0,(l&&this.eu(p,l)>0||c&&this.eu(p,c)<0)&&(o=!0)):!f&&p?(i.track({type:0,doc:p}),R=!0):f&&!p&&(i.track({type:1,doc:f}),R=!0,(l||c)&&(o=!0)),R&&(p?(a=a.add(p),s=E?s.add(h):s.delete(h)):(a=a.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const h=this.query.limitType==="F"?a.last():a.first();a=a.delete(h.key),s=s.delete(h.key),i.track({type:1,doc:h})}return{tu:a,iu:i,Cs:o,mutatedKeys:s}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,r){const s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const a=e.iu.ya();a.sort((h,d)=>function(p,w){const E=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return X(20277,{Rt:R})}};return E(p)-E(w)}(h.type,d.type)||this.eu(h.doc,d.doc)),this.ou(i),r=r??!1;const o=n&&!r?this._u():[],l=this.Xa.size===0&&this.current&&!r?1:0,c=l!==this.Za;return this.Za=l,a.length!==0||c?{snapshot:new tc(this.query,e.tu,s,a,e.mutatedKeys,l===0,c,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:o}:{au:o}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Q1,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=ce(),this.tu.forEach(i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))});const n=[];return e.forEach(i=>{this.Xa.has(i)||n.push(new BV(i))}),this.Xa.forEach(i=>{e.has(i)||n.push(new zV(i))}),n}cu(e){this.Ya=e.Qs,this.Xa=ce();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return tc.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const sa="SyncEngine";class sG{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class aG{constructor(e){this.key=e,this.hu=!1}}class oG{constructor(e,n,i,r,s,a){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new Br(o=>Ck(o),Rd),this.Iu=new Map,this.Eu=new Set,this.du=new Ue($.comparator),this.Au=new Map,this.Ru=new Xw,this.Vu={},this.mu=new Map,this.fu=ao.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function lG(t,e,n=!0){const i=Tg(t);let r;const s=i.Tu.get(e);return s?(i.sharedClientState.addLocalQueryTarget(s.targetId),r=s.view.lu()):r=await qV(i,e,n,!0),r}async function cG(t,e){const n=Tg(t);await qV(n,e,!0,!1)}async function qV(t,e,n,i){const r=await Jl(t.localStore,pn(e)),s=r.targetId,a=t.sharedClientState.addLocalQueryTarget(s,n);let o;return i&&(o=await fT(t,e,s,a==="current",r.resumeToken)),t.isPrimaryClient&&n&&wg(t.remoteStore,r),o}async function fT(t,e,n,i,r){t.pu=(d,f,p)=>async function(E,R,b,v){let _=R.view.ru(b);_.Cs&&(_=await fp(E.localStore,R.query,!1).then(({documents:A})=>R.view.ru(A,_)));const S=v&&v.targetChanges.get(R.targetId),k=v&&v.targetMismatches.get(R.targetId)!=null,O=R.view.applyChanges(_,E.isPrimaryClient,S,k);return g0(E,R.targetId,O.au),O.snapshot}(t,d,f,p);const s=await fp(t.localStore,e,!0),a=new FV(e,s.Qs),o=a.ru(s.documents),l=Dd.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",r),c=a.applyChanges(o,t.isPrimaryClient,l);g0(t,n,c.au);const h=new sG(e,n,a);return t.Tu.set(e,h),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),c.snapshot}async function uG(t,e,n){const i=Q(t),r=i.Tu.get(e),s=i.Iu.get(r.targetId);if(s.length>1)return i.Iu.set(r.targetId,s.filter(a=>!Rd(a,e))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await Zl(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),n&&ec(i.remoteStore,r.targetId),nc(i,r.targetId)}).catch(ta)):(nc(i,r.targetId),await Zl(i.localStore,r.targetId,!0))}async function hG(t,e){const n=Q(t),i=n.Tu.get(e),r=n.Iu.get(i.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),ec(n.remoteStore,i.targetId))}async function dG(t,e,n){const i=yT(t);try{const r=await function(a,o){const l=Q(a),c=Ie.now(),h=o.reduce((p,w)=>p.add(w.key),ce());let d,f;return l.persistence.runTransaction("Locally write mutations","readwrite",p=>{let w=Sn(),E=ce();return l.Ns.getEntries(p,h).next(R=>{w=R,w.forEach((b,v)=>{v.isValidDocument()||(E=E.add(b))})}).next(()=>l.localDocuments.getOverlayedDocuments(p,w)).next(R=>{d=R;const b=[];for(const v of o){const _=V7(v,d.get(v.key).overlayedDocument);_!=null&&b.push(new Fr(v.key,_,bk(_.value.mapValue),Je.exists(!0)))}return l.mutationQueue.addMutationBatch(p,c,b,o)}).next(R=>{f=R;const b=R.applyToLocalDocumentSet(d,E);return l.documentOverlayCache.saveOverlays(p,R.batchId,b)})}).then(()=>({batchId:f.batchId,changes:kk(d)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(a,o,l){let c=a.Vu[a.currentUser.toKey()];c||(c=new Ue(ae)),c=c.insert(o,l),a.Vu[a.currentUser.toKey()]=c}(i,r.batchId,n),await qr(i,r.changes),await Rc(i.remoteStore)}catch(r){const s=Pc(r,"Failed to persist write");n.reject(s)}}async function HV(t,e){const n=Q(t);try{const i=await RH(n.localStore,e);e.targetChanges.forEach((r,s)=>{const a=n.Au.get(s);a&&(Z(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?a.hu=!0:r.modifiedDocuments.size>0?Z(a.hu,14607):r.removedDocuments.size>0&&(Z(a.hu,42227),a.hu=!1))}),await qr(n,i,e)}catch(i){await ta(i)}}function Z1(t,e,n){const i=Q(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const r=[];i.Tu.forEach((s,a)=>{const o=a.view.va(e);o.snapshot&&r.push(o.snapshot)}),function(a,o){const l=Q(a);l.onlineState=o;let c=!1;l.queries.forEach((h,d)=>{for(const f of d.Sa)f.va(o)&&(c=!0)}),c&&hT(l)}(i.eventManager,e),r.length&&i.Pu.H_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function fG(t,e,n){const i=Q(t);i.sharedClientState.updateQueryState(e,"rejected",n);const r=i.Au.get(e),s=r&&r.key;if(s){let a=new Ue($.comparator);a=a.insert(s,Fe.newNoDocument(s,te.min()));const o=ce().add(s),l=new Nd(te.min(),new Map,new Ue(ae),a,o);await HV(i,l),i.du=i.du.remove(s),i.Au.delete(e),gT(i)}else await Zl(i.localStore,e,!1).then(()=>nc(i,e,n)).catch(ta)}async function mG(t,e){const n=Q(t),i=e.batch.batchId;try{const r=await xH(n.localStore,e);pT(n,i,null),mT(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await qr(n,r)}catch(r){await ta(r)}}async function pG(t,e,n){const i=Q(t);try{const r=await function(a,o){const l=Q(a);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let h;return l.mutationQueue.lookupMutationBatch(c,o).next(d=>(Z(d!==null,37113),h=d.keys(),l.mutationQueue.removeMutationBatch(c,d))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,h,o)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,h)).next(()=>l.localDocuments.getDocuments(c,h))})}(i.localStore,e);pT(i,e,n),mT(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await qr(i,r)}catch(r){await ta(r)}}async function gG(t,e){const n=Q(t);ra(n.remoteStore)||q(sa,"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const i=await function(a){const o=Q(a);return o.persistence.runTransaction("Get highest unacknowledged batch id","readonly",l=>o.mutationQueue.getHighestUnacknowledgedBatchId(l))}(n.localStore);if(i===Ds)return void e.resolve();const r=n.mu.get(i)||[];r.push(e),n.mu.set(i,r)}catch(i){const r=Pc(i,"Initialization of waitForPendingWrites() operation failed");e.reject(r)}}function mT(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function pT(t,e,n){const i=Q(t);let r=i.Vu[i.currentUser.toKey()];if(r){const s=r.get(e);s&&(n?s.reject(n):s.resolve(),r=r.remove(e)),i.Vu[i.currentUser.toKey()]=r}}function nc(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Iu.get(e))t.Tu.delete(i),n&&t.Pu.yu(i,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(i=>{t.Ru.containsKey(i)||GV(t,i)})}function GV(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(ec(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),gT(t))}function g0(t,e,n){for(const i of n)i instanceof zV?(t.Ru.addReference(i.key,e),yG(t,i)):i instanceof BV?(q(sa,"Document no longer in limbo: "+i.key),t.Ru.removeReference(i.key,e),t.Ru.containsKey(i.key)||GV(t,i.key)):X(19791,{wu:i})}function yG(t,e){const n=e.key,i=n.path.canonicalString();t.du.get(n)||t.Eu.has(i)||(q(sa,"New document in limbo: "+n),t.Eu.add(i),gT(t))}function gT(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new $(ge.fromString(e)),i=t.fu.next();t.Au.set(i,new aG(n)),t.du=t.du.insert(n,i),wg(t.remoteStore,new fr(pn(Ac(n.path)),i,"TargetPurposeLimboResolution",En.ce))}}async function qr(t,e,n){const i=Q(t),r=[],s=[],a=[];i.Tu.isEmpty()||(i.Tu.forEach((o,l)=>{a.push(i.pu(l,e,n).then(c=>{var h;if((c||n)&&i.isPrimaryClient){const d=c?!c.fromCache:(h=n==null?void 0:n.targetChanges.get(l.targetId))==null?void 0:h.current;i.sharedClientState.updateQueryState(l.targetId,d?"current":"not-current")}if(c){r.push(c);const d=tT.As(l.targetId,c);s.push(d)}}))}),await Promise.all(a),i.Pu.H_(r),await async function(l,c){const h=Q(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>M.forEach(c,f=>M.forEach(f.Es,p=>h.persistence.referenceDelegate.addReference(d,f.targetId,p)).next(()=>M.forEach(f.ds,p=>h.persistence.referenceDelegate.removeReference(d,f.targetId,p)))))}catch(d){if(!na(d))throw d;q(nT,"Failed to update sequence numbers: "+d)}for(const d of c){const f=d.targetId;if(!d.fromCache){const p=h.Ms.get(f),w=p.snapshotVersion,E=p.withLastLimboFreeSnapshotVersion(w);h.Ms=h.Ms.insert(f,E)}}}(i.localStore,s))}async function _G(t,e){const n=Q(t);if(!n.currentUser.isEqual(e)){q(sa,"User change. New user:",e.toKey());const i=await TV(n.localStore,e);n.currentUser=e,function(s,a){s.mu.forEach(o=>{o.forEach(l=>{l.reject(new F(U.CANCELLED,a))})}),s.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await qr(n,i.Ls)}}function vG(t,e){const n=Q(t),i=n.Au.get(e);if(i&&i.hu)return ce().add(i.key);{let r=ce();const s=n.Iu.get(e);if(!s)return r;for(const a of s){const o=n.Tu.get(a);r=r.unionWith(o.view.nu)}return r}}async function bG(t,e){const n=Q(t),i=await fp(n.localStore,e.query,!0),r=e.view.cu(i);return n.isPrimaryClient&&g0(n,e.targetId,r.au),r}async function wG(t,e){const n=Q(t);return IV(n.localStore,e).then(i=>qr(n,i))}async function TG(t,e,n,i){const r=Q(t),s=await function(o,l){const c=Q(o),h=Q(c.mutationQueue);return c.persistence.runTransaction("Lookup mutation documents","readonly",d=>h.er(d,l).next(f=>f?c.localDocuments.getDocuments(d,f):M.resolve(null)))}(r.localStore,e);s!==null?(n==="pending"?await Rc(r.remoteStore):n==="acknowledged"||n==="rejected"?(pT(r,e,i||null),mT(r,e),function(o,l){Q(Q(o).mutationQueue).ir(l)}(r.localStore,e)):X(6720,"Unknown batchState",{Su:n}),await qr(r,s)):q(sa,"Cannot apply mutation batch with id: "+e)}async function EG(t,e){const n=Q(t);if(Tg(n),yT(n),e===!0&&n.gu!==!0){const i=n.sharedClientState.getAllActiveQueryTargets(),r=await ex(n,i.toArray());n.gu=!0,await m0(n.remoteStore,!0);for(const s of r)wg(n.remoteStore,s)}else if(e===!1&&n.gu!==!1){const i=[];let r=Promise.resolve();n.Iu.forEach((s,a)=>{n.sharedClientState.isLocalQueryTarget(a)?i.push(a):r=r.then(()=>(nc(n,a),Zl(n.localStore,a,!0))),ec(n.remoteStore,a)}),await r,await ex(n,i),function(a){const o=Q(a);o.Au.forEach((l,c)=>{ec(o.remoteStore,c)}),o.Ru.Jr(),o.Au=new Map,o.du=new Ue($.comparator)}(n),n.gu=!1,await m0(n.remoteStore,!1)}}async function ex(t,e,n){const i=Q(t),r=[],s=[];for(const a of e){let o;const l=i.Iu.get(a);if(l&&l.length!==0){o=await Jl(i.localStore,pn(l[0]));for(const c of l){const h=i.Tu.get(c),d=await bG(i,h);d.snapshot&&s.push(d.snapshot)}}else{const c=await SV(i.localStore,a);o=await Jl(i.localStore,c),await fT(i,$V(c),a,!1,o.resumeToken)}r.push(o)}return i.Pu.H_(s),r}function $V(t){return Rk(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function AG(t){return function(n){return Q(Q(n).persistence).Ts()}(Q(t).localStore)}async function SG(t,e,n,i){const r=Q(t);if(r.gu)return void q(sa,"Ignoring unexpected query state notification.");const s=r.Iu.get(e);if(s&&s.length>0)switch(n){case"current":case"not-current":{const a=await IV(r.localStore,Pk(s[0])),o=Nd.createSynthesizedRemoteEventForCurrentChange(e,n==="current",lt.EMPTY_BYTE_STRING);await qr(r,a,o);break}case"rejected":await Zl(r.localStore,e,!0),nc(r,e,i);break;default:X(64155,n)}}async function IG(t,e,n){const i=Tg(t);if(i.gu){for(const r of e){if(i.Iu.has(r)&&i.sharedClientState.isActiveQueryTarget(r)){q(sa,"Adding an already active target "+r);continue}const s=await SV(i.localStore,r),a=await Jl(i.localStore,s);await fT(i,$V(s),a.targetId,!1,a.resumeToken),wg(i.remoteStore,a)}for(const r of n)i.Iu.has(r)&&await Zl(i.localStore,r,!1).then(()=>{ec(i.remoteStore,r),nc(i,r)}).catch(ta)}}function Tg(t){const e=Q(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=HV.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=vG.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=fG.bind(null,e),e.Pu.H_=tG.bind(null,e.eventManager),e.Pu.yu=nG.bind(null,e.eventManager),e}function yT(t){const e=Q(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=mG.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=pG.bind(null,e),e}function xG(t,e,n){const i=Q(t);(async function(s,a,o){try{const l=await a.getMetadata();if(await function(p,w){const E=Q(p),R=pt(w.createTime);return E.persistence.runTransaction("hasNewerBundle","readonly",b=>E.Ii.getBundleMetadata(b,w.id)).then(b=>!!b&&b.createTime.compareTo(R)>=0)}(s.localStore,l))return await a.close(),o._completeWith(function(p){return{taskState:"Success",documentsLoaded:p.totalDocuments,bytesLoaded:p.totalBytes,totalDocuments:p.totalDocuments,totalBytes:p.totalBytes}}(l)),Promise.resolve(new Set);o._updateProgress(jV(l));const c=new rG(l,a.serializer);let h=await a.bu();for(;h;){const f=await c.Ga(h);f&&o._updateProgress(f),h=await a.bu()}const d=await c.ja(s.localStore);return await qr(s,d.Ha,void 0),await function(p,w){const E=Q(p);return E.persistence.runTransaction("Save bundle","readwrite",R=>E.Ii.saveBundleMetadata(R,w))}(s.localStore,l),o._completeWith(d.progress),Promise.resolve(d.Ja)}catch(l){return Xi(sa,`Loading bundle failed with ${l}`),o._failWith(l),Promise.resolve(new Set)}})(i,e,n).then(r=>{i.sharedClientState.notifyBundleLoaded(r)})}class $h{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=kd(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return wV(this.persistence,new bV,e.initialUser,this.serializer)}Cu(e){return new Jw(bg.mi,this.serializer)}Du(e){return new NV}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}$h.provider={build:()=>new $h};class RG extends $h{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Z(this.persistence.referenceDelegate instanceof dp,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new mV(i,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Zt.withCacheSize(this.cacheSizeBytes):Zt.DEFAULT;return new Jw(i=>dp.mi(i,n),this.serializer)}}class KV extends $h{constructor(e,n,i){super(),this.xu=e,this.cacheSizeBytes=n,this.forceOwnership=i,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await yT(this.xu.syncEngine),await Rc(this.xu.remoteStore),await this.persistence.Ji(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}vu(e){return wV(this.persistence,new bV,e.initialUser,this.serializer)}Fu(e,n){const i=this.persistence.referenceDelegate.garbageCollector;return new mV(i,e.asyncQueue,n)}Mu(e,n){const i=new L8(n,this.persistence);return new M8(e.asyncQueue,i)}Cu(e){const n=eT(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),i=this.cacheSizeBytes!==void 0?Zt.withCacheSize(this.cacheSizeBytes):Zt.DEFAULT;return new Zw(this.synchronizeTabs,n,e.clientId,i,e.asyncQueue,DV(),fm(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new NV}}class CG extends KV{constructor(e,n){super(e,n,!1),this.xu=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.xu.syncEngine;this.sharedClientState instanceof d_&&(this.sharedClientState.syncEngine={Co:TG.bind(null,n),vo:SG.bind(null,n),Fo:IG.bind(null,n),Ts:AG.bind(null,n),Do:wG.bind(null,n)},await this.sharedClientState.start()),await this.persistence.Ji(async i=>{await EG(this.xu.syncEngine,i),this.gcScheduler&&(i&&!this.gcScheduler.started?this.gcScheduler.start():i||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(i&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():i||this.indexBackfillerScheduler.stop())})}Du(e){const n=DV();if(!d_.v(n))throw new F(U.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const i=eT(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new d_(n,e.asyncQueue,i,e.clientId,e.initialUser)}}class Kh{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Z1(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=_G.bind(null,this.syncEngine),await m0(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new eG}()}createDatastore(e){const n=kd(e.databaseInfo.databaseId),i=function(s){return new MH(s)}(e.databaseInfo);return function(s,a,o,l){return new zH(s,a,o,l)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,r,s,a,o){return new FH(i,r,s,a,o)}(this.localStore,this.datastore,e.asyncQueue,n=>Z1(this.syncEngine,n,0),function(){return $1.v()?new $1:new DH}())}createSyncEngine(e,n){return function(r,s,a,o,l,c,h){const d=new oG(r,s,a,o,l,c);return h&&(d.gu=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(r){const s=Q(r);q(oo,"RemoteStore shutting down."),s.Ea.add(5),await xc(s),s.Aa.shutdown(),s.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Kh.provider={build:()=>new Kh};function tx(t,e=10240){let n=0;return{async read(){if(n<t.byteLength){const i={value:t.slice(n,n+e),done:!1};return n+=e,i}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eg{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ft("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PG{constructor(e,n){this.Bu=e,this.serializer=n,this.metadata=new Wt,this.buffer=new Uint8Array,this.Lu=function(){return new TextDecoder("utf-8")}(),this.ku().then(i=>{i&&i.$a()?this.metadata.resolve(i.Qa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(i==null?void 0:i.Qa)}`))},i=>this.metadata.reject(i))}close(){return this.Bu.cancel()}async getMetadata(){return this.metadata.promise}async bu(){return await this.getMetadata(),this.ku()}async ku(){const e=await this.qu();if(e===null)return null;const n=this.Lu.decode(e),i=Number(n);isNaN(i)&&this.Qu(`length string (${n}) is not valid number`);const r=await this.$u(i);return new iG(JSON.parse(r),e.length+i)}Uu(){return this.buffer.findIndex(e=>e===123)}async qu(){for(;this.Uu()<0&&!await this.Ku(););if(this.buffer.length===0)return null;const e=this.Uu();e<0&&this.Qu("Reached the end of bundle when a length string is expected.");const n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n}async $u(e){for(;this.buffer.length<e;)await this.Ku()&&this.Qu("Reached the end of bundle when more is expected.");const n=this.Lu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n}Qu(e){throw this.Bu.cancel(),new Error(`Invalid bundle format: ${e}`)}async Ku(){const e=await this.Bu.read();if(!e.done){const n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NG{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new F(U.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await async function(r,s){const a=Q(r),o={documents:s.map(d=>Hh(a.serializer,d))},l=await a.Ho("BatchGetDocuments",a.serializer.databaseId,ge.emptyPath(),o,s.length),c=new Map;l.forEach(d=>{const f=q7(a.serializer,d);c.set(f.key.toString(),f)});const h=[];return s.forEach(d=>{const f=c.get(d.toString());Z(!!f,55234,{key:d}),h.push(f)}),h}(this.datastore,e);return n.forEach(i=>this.recordVersion(i)),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(i){this.lastTransactionError=i}this.writtenDocs.add(e.toString())}delete(e){this.write(new Ic(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,i)=>{const r=$.fromPath(i);this.mutations.push(new Fw(r,this.precondition(r)))}),await async function(i,r){const s=Q(i),a={writes:r.map(o=>Gh(s.serializer,o))};await s.Go("Commit",s.serializer.databaseId,ge.emptyPath(),a)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw X(50498,{Gu:e.constructor.name});n=te.min()}const i=this.readVersions.get(e.key.toString());if(i){if(!n.isEqual(i))throw new F(U.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(te.min())?Je.exists(!1):Je.updateTime(n):Je.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(te.min()))throw new F(U.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Je.updateTime(n)}return Je.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DG{constructor(e,n,i,r,s){this.asyncQueue=e,this.datastore=n,this.options=i,this.updateFunction=r,this.deferred=s,this.zu=i.maxAttempts,this.M_=new rT(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_(async()=>{const e=new NG(this.datastore),n=this.Hu(e);n&&n.then(i=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(i)}).catch(r=>{this.Yu(r)}))}).catch(i=>{this.Yu(i)})})}Hu(e){try{const n=this.updateFunction(e);return!Sd(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Yu(e){this.zu>0&&this.Zu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget(()=>(this.Ju(),Promise.resolve()))):this.deferred.reject(e)}Zu(e){if((e==null?void 0:e.name)==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!qk(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ks="FirestoreClient";class kG{constructor(e,n,i,r,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=Ot.UNAUTHENTICATED,this.clientId=Rw.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(i,async a=>{q(Ks,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(i,a=>(q(Ks,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Wt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=Pc(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function m_(t,e){t.asyncQueue.verifyOperationInProgress(),q(Ks,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(async r=>{i.isEqual(r)||(await TV(e.localStore,r),i=r)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function nx(t,e){t.asyncQueue.verifyOperationInProgress();const n=await _T(t);q(Ks,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(i=>W1(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,r)=>W1(e.remoteStore,r)),t._onlineComponents=e}async function _T(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){q(Ks,"Using user provided OfflineComponentProvider");try{await m_(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(r){return r.name==="FirebaseError"?r.code===U.FAILED_PRECONDITION||r.code===U.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(n))throw n;Xi("Error using user provided cache. Falling back to memory cache: "+n),await m_(t,new $h)}}else q(Ks,"Using default OfflineComponentProvider"),await m_(t,new RG(void 0));return t._offlineComponents}async function Ag(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(q(Ks,"Using user provided OnlineComponentProvider"),await nx(t,t._uninitializedComponentsProvider._online)):(q(Ks,"Using default OnlineComponentProvider"),await nx(t,new Kh))),t._onlineComponents}function WV(t){return _T(t).then(e=>e.persistence)}function vT(t){return _T(t).then(e=>e.localStore)}function QV(t){return Ag(t).then(e=>e.remoteStore)}function bT(t){return Ag(t).then(e=>e.syncEngine)}function VG(t){return Ag(t).then(e=>e.datastore)}async function ic(t){const e=await Ag(t),n=e.eventManager;return n.onListen=lG.bind(null,e.syncEngine),n.onUnlisten=uG.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=cG.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=hG.bind(null,e.syncEngine),n}function OG(t){return t.asyncQueue.enqueue(async()=>{const e=await WV(t),n=await QV(t);return e.setNetworkEnabled(!0),function(r){const s=Q(r);return s.Ea.delete(0),Vd(s)}(n)})}function MG(t){return t.asyncQueue.enqueue(async()=>{const e=await WV(t),n=await QV(t);return e.setNetworkEnabled(!1),async function(r){const s=Q(r);s.Ea.add(0),await xc(s),s.Ra.set("Offline")}(n)})}function LG(t,e){const n=new Wt;return t.asyncQueue.enqueueAndForget(async()=>async function(r,s,a){try{const o=await function(c,h){const d=Q(c);return d.persistence.runTransaction("read document","readonly",f=>d.localDocuments.getDocument(f,h))}(r,s);o.isFoundDocument()?a.resolve(o):o.isNoDocument()?a.resolve(null):a.reject(new F(U.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(o){const l=Pc(o,`Failed to get document '${s} from cache`);a.reject(l)}}(await vT(t),e,n)),n.promise}function YV(t,e,n={}){const i=new Wt;return t.asyncQueue.enqueueAndForget(async()=>function(s,a,o,l,c){const h=new Eg({next:f=>{h.Nu(),a.enqueueAndForget(()=>uT(s,d));const p=f.docs.has(o);!p&&f.fromCache?c.reject(new F(U.UNAVAILABLE,"Failed to get document because the client is offline.")):p&&f.fromCache&&l&&l.source==="server"?c.reject(new F(U.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(f)},error:f=>c.reject(f)}),d=new dT(Ac(o.path),h,{includeMetadataChanges:!0,qa:!0});return cT(s,d)}(await ic(t),t.asyncQueue,e,n,i)),i.promise}function UG(t,e){const n=new Wt;return t.asyncQueue.enqueueAndForget(async()=>async function(r,s,a){try{const o=await fp(r,s,!0),l=new FV(s,o.Qs),c=l.ru(o.documents),h=l.applyChanges(c,!1);a.resolve(h.snapshot)}catch(o){const l=Pc(o,`Failed to execute query '${s} against cache`);a.reject(l)}}(await vT(t),e,n)),n.promise}function XV(t,e,n={}){const i=new Wt;return t.asyncQueue.enqueueAndForget(async()=>function(s,a,o,l,c){const h=new Eg({next:f=>{h.Nu(),a.enqueueAndForget(()=>uT(s,d)),f.fromCache&&l.source==="server"?c.reject(new F(U.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(f)},error:f=>c.reject(f)}),d=new dT(o,h,{includeMetadataChanges:!0,qa:!0});return cT(s,d)}(await ic(t),t.asyncQueue,e,n,i)),i.promise}function jG(t,e){const n=new Eg(e);return t.asyncQueue.enqueueAndForget(async()=>function(r,s){Q(r).Ca.add(s),s.next()}(await ic(t),n)),()=>{n.Nu(),t.asyncQueue.enqueueAndForget(async()=>function(r,s){Q(r).Ca.delete(s)}(await ic(t),n))}}function zG(t,e,n,i){const r=function(a,o){let l;return l=typeof a=="string"?Gk().encode(a):a,function(h,d){return new PG(h,d)}(function(h,d){if(h instanceof Uint8Array)return tx(h,d);if(h instanceof ArrayBuffer)return tx(new Uint8Array(h),d);if(h instanceof ReadableStream)return h.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(l),o)}(n,kd(e));t.asyncQueue.enqueueAndForget(async()=>{xG(await bT(t),r,i)})}function BG(t,e){return t.asyncQueue.enqueue(async()=>function(i,r){const s=Q(i);return s.persistence.runTransaction("Get named query","readonly",a=>s.Ii.getNamedQuery(a,r))}(await vT(t),e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JV(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ix=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZV="firestore.googleapis.com",rx=!0;class sx{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new F(U.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=ZV,this.ssl=rx}else this.host=e.host,this.ssl=e.ssl??rx;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=uV;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<lH)throw new F(U.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}$D("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=JV(e.experimentalLongPollingOptions??{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new F(U.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new F(U.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new F(U.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Od{constructor(e,n,i,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new sx({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new F(U.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new F(U.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new sx(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new A8;switch(i.type){case"firstParty":return new R8(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new F(U.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=ix.get(n);i&&(q("ComponentProvider","Removing Datastore"),ix.delete(n),i.terminate())}(this),Promise.resolve()}}function FG(t,e,n,i={}){var c;t=Te(t,Od);const r=Zs(e),s=t._getSettings(),a={...s,emulatorOptions:t._getEmulatorOptions()},o=`${e}:${n}`;r&&(Zb(`https://${o}`),ew("Firestore",!0)),s.host!==ZV&&s.host!==o&&Xi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l={...s,host:o,ssl:r,emulatorOptions:i};if(!Us(l,a)&&(t._setSettings(l),i.mockUserToken)){let h,d;if(typeof i.mockUserToken=="string")h=i.mockUserToken,d=Ot.MOCK_USER;else{h=vN(i.mockUserToken,(c=t._app)==null?void 0:c.options.projectId);const f=i.mockUserToken.sub||i.mockUserToken.user_id;if(!f)throw new F(U.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new Ot(f)}t._authCredentials=new S8(new HD(h,d))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gn=class eO{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new eO(this.firestore,e,this._query)}},Le=class Ru{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ks(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ru(this.firestore,e,this._key)}toJSON(){return{type:Ru._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,i){if(Ad(n,Ru._jsonSchema))return new Ru(e,i||null,new $(ge.fromString(n.referencePath)))}};Le._jsonSchemaVersion="firestore/documentReference/1.0",Le._jsonSchema={type:Et("string",Le._jsonSchemaVersion),referencePath:Et("string")};let ks=class tO extends gn{constructor(e,n,i){super(e,n,Ac(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Le(this.firestore,null,new $(e))}withConverter(e){return new tO(this.firestore,e,this._path)}};function nO(t,e,...n){if(t=ee(t),Cw("collection","path",e),t instanceof Od){const i=ge.fromString(e,...n);return KI(i),new ks(t,null,i)}{if(!(t instanceof Le||t instanceof ks))throw new F(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(ge.fromString(e,...n));return KI(i),new ks(t.firestore,null,i)}}function qG(t,e){if(t=Te(t,Od),Cw("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new F(U.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new gn(t,null,function(i){return new zr(ge.emptyPath(),i)}(e))}function yp(t,e,...n){if(t=ee(t),arguments.length===1&&(e=Rw.newId()),Cw("doc","path",e),t instanceof Od){const i=ge.fromString(e,...n);return $I(i),new Le(t,null,new $(i))}{if(!(t instanceof Le||t instanceof ks))throw new F(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(ge.fromString(e,...n));return $I(i),new Le(t.firestore,t instanceof ks?t.converter:null,new $(i))}}function iO(t,e){return t=ee(t),e=ee(e),(t instanceof Le||t instanceof ks)&&(e instanceof Le||e instanceof ks)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function rO(t,e){return t=ee(t),e=ee(e),t instanceof gn&&e instanceof gn&&t.firestore===e.firestore&&Rd(t._query,e._query)&&t.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ax="AsyncQueue";class ox{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new rT(this,"async_queue_retry"),this._c=()=>{const i=fm();i&&q(ax,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const n=fm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=fm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new Wt;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!na(e))throw e;q(ax,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(i=>{throw this.nc=i,this.rc=!1,ft("INTERNAL UNHANDLED ERROR: ",lx(i)),i}).then(i=>(this.rc=!1,i))));return this.ac=n,n}enqueueAfterDelay(e,n,i){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const r=lT.createAndSchedule(this,e,n,i,s=>this.hc(s));return this.tc.push(r),r}uc(){this.nc&&X(47125,{Pc:lx(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function lx(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y0(t){return function(n,i){if(typeof n!="object"||n===null)return!1;const r=n;for(const s of i)if(s in r&&typeof r[s]=="function")return!0;return!1}(t,["next","error","complete"])}class HG{constructor(){this._progressObserver={},this._taskCompletionResolver=new Wt,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,i){this._progressObserver={next:e,error:n,complete:i}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GG=-1;let gt=class extends Od{constructor(e,n,i,r){super(e,n,i,r),this.type="firestore",this._queue=new ox,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new ox(e),this._firestoreClient=void 0,await e}}};function an(t){if(t._terminated)throw new F(U.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||sO(t),t._firestoreClient}function sO(t){var i,r,s;const e=t._freezeSettings(),n=function(o,l,c,h){return new d7(o,l,c,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,JV(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(t._databaseId,((i=t._app)==null?void 0:i.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(r=e.localCache)!=null&&r._offlineComponentProvider&&((s=e.localCache)!=null&&s._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new kG(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(o){const l=o==null?void 0:o._online.build();return{_offline:o==null?void 0:o._offline.build(l),_online:l}}(t._componentsProvider))}function $G(t,e){Xi("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings();return aO(t,Kh.provider,{build:i=>new KV(i,n.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}async function KG(t){Xi("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=t._freezeSettings();aO(t,Kh.provider,{build:n=>new CG(n,e.cacheSizeBytes)})}function aO(t,e,n){if((t=Te(t,gt))._firestoreClient||t._terminated)throw new F(U.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new F(U.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:n},sO(t)}function WG(t){if(t._initialized&&!t._terminated)throw new F(U.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Wt;return t._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(i){if(!Hi.v())return Promise.resolve();const r=i+vV;await Hi.delete(r)}(eT(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}}),e.promise}function QG(t){return function(n){const i=new Wt;return n.asyncQueue.enqueueAndForget(async()=>gG(await bT(n),i)),i.promise}(an(t=Te(t,gt)))}function YG(t){return OG(an(t=Te(t,gt)))}function XG(t){return MG(an(t=Te(t,gt)))}function JG(t,e){const n=an(t=Te(t,gt)),i=new HG;return zG(n,t._databaseId,e,i),i}function ZG(t,e){return BG(an(t=Te(t,gt)),e).then(n=>n?new gn(t,null,n.query):null)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e){this._byteString=e}static fromBase64String(e){try{return new en(lt.fromBase64String(e))}catch(n){throw new F(U.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new en(lt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:en._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Ad(e,en._jsonSchema))return en.fromBase64String(e.bytes)}}en._jsonSchemaVersion="firestore/bytes/1.0",en._jsonSchema={type:Et("string",en._jsonSchemaVersion),bytes:Et("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ws=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new F(U.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Xe(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vo=class{constructor(e){this._methodName=e}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wi{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new F(U.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new F(U.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ae(this._lat,e._lat)||ae(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:wi._jsonSchemaVersion}}static fromJSON(e){if(Ad(e,wi._jsonSchema))return new wi(e.latitude,e.longitude)}}wi._jsonSchemaVersion="firestore/geoPoint/1.0",wi._jsonSchema={type:Et("string",wi._jsonSchemaVersion),latitude:Et("number"),longitude:Et("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $i{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,r){if(i.length!==r.length)return!1;for(let s=0;s<i.length;++s)if(i[s]!==r[s])return!1;return!0}(this._values,e._values)}toJSON(){return{type:$i._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Ad(e,$i._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new $i(e.vectorValues);throw new F(U.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}$i._jsonSchemaVersion="firestore/vectorValue/1.0",$i._jsonSchema={type:Et("string",$i._jsonSchemaVersion),vectorValues:Et("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e$=/^__.*__$/;class t${constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new Fr(e,this.data,this.fieldMask,n,this.fieldTransforms):new Sc(e,this.data,n,this.fieldTransforms)}}class oO{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new Fr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function lO(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw X(40011,{Ac:t})}}class Sg{constructor(e,n,i,r,s,a){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Sg({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var r;const n=(r=this.path)==null?void 0:r.child(e),i=this.Vc({path:n,fc:!1});return i.gc(e),i}yc(e){var r;const n=(r=this.path)==null?void 0:r.child(e),i=this.Vc({path:n,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return _p(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(lO(this.Ac)&&e$.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class n${constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||kd(e)}Cc(e,n,i,r=!1){return new Sg({Ac:e,methodName:n,Dc:i,path:Xe.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function bo(t){const e=t._freezeSettings(),n=kd(t._databaseId);return new n$(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Ig(t,e,n,i,r,s={}){const a=t.Cc(s.merge||s.mergeFields?2:0,e,n,r);xT("Data must be an object, but it was:",a,i);const o=hO(i,a);let l,c;if(s.merge)l=new An(a.fieldMask),c=a.fieldTransforms;else if(s.mergeFields){const h=[];for(const d of s.mergeFields){const f=_0(e,d,n);if(!a.contains(f))throw new F(U.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);fO(h,f)||h.push(f)}l=new An(h),c=a.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,c=a.fieldTransforms;return new t$(new Gt(o),l,c)}class Md extends vo{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Md}}function cO(t,e,n){return new Sg({Ac:3,Dc:e.settings.Dc,methodName:t._methodName,fc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class wT extends vo{_toFieldTransform(e){return new Pd(e.path,new Ql)}isEqual(e){return e instanceof wT}}class TT extends vo{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=cO(this,e,!0),i=this.vc.map(s=>wo(s,n)),r=new no(i);return new Pd(e.path,r)}isEqual(e){return e instanceof TT&&Us(this.vc,e.vc)}}class ET extends vo{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=cO(this,e,!0),i=this.vc.map(s=>wo(s,n)),r=new io(i);return new Pd(e.path,r)}isEqual(e){return e instanceof ET&&Us(this.vc,e.vc)}}class AT extends vo{constructor(e,n){super(e),this.Fc=n}_toFieldTransform(e){const n=new Yl(e.serializer,Mk(e.serializer,this.Fc));return new Pd(e.path,n)}isEqual(e){return e instanceof AT&&this.Fc===e.Fc}}function ST(t,e,n,i){const r=t.Cc(1,e,n);xT("Data must be an object, but it was:",r,i);const s=[],a=Gt.empty();ia(i,(l,c)=>{const h=RT(e,l,n);c=ee(c);const d=r.yc(h);if(c instanceof Md)s.push(h);else{const f=wo(c,d);f!=null&&(s.push(h),a.set(h,f))}});const o=new An(s);return new oO(a,o,r.fieldTransforms)}function IT(t,e,n,i,r,s){const a=t.Cc(1,e,n),o=[_0(e,i,n)],l=[r];if(s.length%2!=0)throw new F(U.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<s.length;f+=2)o.push(_0(e,s[f])),l.push(s[f+1]);const c=[],h=Gt.empty();for(let f=o.length-1;f>=0;--f)if(!fO(c,o[f])){const p=o[f];let w=l[f];w=ee(w);const E=a.yc(p);if(w instanceof Md)c.push(p);else{const R=wo(w,E);R!=null&&(c.push(p),h.set(p,R))}}const d=new An(c);return new oO(h,d,a.fieldTransforms)}function uO(t,e,n,i=!1){return wo(n,t.Cc(i?4:3,e))}function wo(t,e){if(dO(t=ee(t)))return xT("Unsupported field value:",e,t),hO(t,e);if(t instanceof vo)return function(i,r){if(!lO(r.Ac))throw r.Sc(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Sc(`${i._methodName}() is not currently supported inside arrays`);const s=i._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(i,r){const s=[];let a=0;for(const o of i){let l=wo(o,r.wc(a));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),a++}return{arrayValue:{values:s}}}(t,e)}return function(i,r){if((i=ee(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return Mk(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const s=Ie.fromDate(i);return{timestampValue:Xl(r.serializer,s)}}if(i instanceof Ie){const s=new Ie(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Xl(r.serializer,s)}}if(i instanceof wi)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof en)return{bytesValue:Wk(r.serializer,i._byteString)};if(i instanceof Le){const s=r.databaseId,a=i.firestore._databaseId;if(!a.isEqual(s))throw r.Sc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Kw(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof $i)return function(a,o){return{mapValue:{fields:{[Mw]:{stringValue:Lw},[$l]:{arrayValue:{values:a.toArray().map(c=>{if(typeof c!="number")throw o.Sc("VectorValues must only contain numeric values.");return Bw(o.serializer,c)})}}}}}}(i,r);throw r.Sc(`Unsupported field value: ${lg(i)}`)}(t,e)}function hO(t,e){const n={};return hk(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ia(t,(i,r)=>{const s=wo(r,e.mc(i));s!=null&&(n[i]=s)}),{mapValue:{fields:n}}}function dO(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ie||t instanceof wi||t instanceof en||t instanceof Le||t instanceof vo||t instanceof $i)}function xT(t,e,n){if(!dO(n)||!KD(n)){const i=lg(n);throw i==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+i)}}function _0(t,e,n){if((e=ee(e))instanceof Ws)return e._internalPath;if(typeof e=="string")return RT(t,e);throw _p("Field path arguments must be of type string or ",t,!1,void 0,n)}const i$=new RegExp("[~\\*/\\[\\]]");function RT(t,e,n){if(e.search(i$)>=0)throw _p(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Ws(...e.split("."))._internalPath}catch{throw _p(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function _p(t,e,n,i,r){const s=i&&!i.isEmpty(),a=r!==void 0;let o=`Function ${e}() called with invalid data`;n&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(s||a)&&(l+=" (found",s&&(l+=` in field ${i}`),a&&(l+=` in document ${r}`),l+=")"),new F(U.INVALID_ARGUMENT,o+t+l)}function fO(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wh{constructor(e,n,i,r,s){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Le(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new r$(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(xg("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class r$ extends Wh{data(){return super.data()}}function xg(t,e){return typeof e=="string"?RT(t,e):e instanceof Ws?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mO(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new F(U.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class CT{}class Ld extends CT{}function is(t,e,...n){let i=[];e instanceof CT&&i.push(e),i=i.concat(n),function(s){const a=s.filter(l=>l instanceof PT).length,o=s.filter(l=>l instanceof Rg).length;if(a>1||a>0&&o>0)throw new F(U.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const r of i)t=r._apply(t);return t}class Rg extends Ld{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new Rg(e,n,i)}_apply(e){const n=this._parse(e);return gO(e._query,n),new gn(e.firestore,e.converter,r0(e._query,n))}_parse(e){const n=bo(e.firestore);return function(s,a,o,l,c,h,d){let f;if(c.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new F(U.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){ux(d,h);const w=[];for(const E of d)w.push(cx(l,s,E));f={arrayValue:{values:w}}}else f=cx(l,s,d)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||ux(d,h),f=uO(o,a,d,h==="in"||h==="not-in");return _e.create(c,h,f)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function s$(t,e,n){const i=e,r=xg("where",t);return Rg._create(r,i,n)}class PT extends CT{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new PT(e,n)}_parse(e){const n=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return n.length===1?n[0]:Ce.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(r,s){let a=r;const o=s.getFlattenedFilters();for(const l of o)gO(a,l),a=r0(a,l)}(e._query,n),new gn(e.firestore,e.converter,r0(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class NT extends Ld{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new NT(e,n)}_apply(e){const n=function(r,s,a){if(r.startAt!==null)throw new F(U.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new F(U.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new qh(s,a)}(e._query,this._field,this._direction);return new gn(e.firestore,e.converter,function(r,s){const a=r.explicitOrderBy.concat([s]);return new zr(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,n))}}function a$(t,e="asc"){const n=e,i=xg("orderBy",t);return NT._create(i,n)}class Cg extends Ld{constructor(e,n,i){super(),this.type=e,this._limit=n,this._limitType=i}static _create(e,n,i){return new Cg(e,n,i)}_apply(e){return new gn(e.firestore,e.converter,lp(e._query,this._limit,this._limitType))}}function o$(t){return WD("limit",t),Cg._create("limit",t,"F")}function l$(t){return WD("limitToLast",t),Cg._create("limitToLast",t,"L")}class Pg extends Ld{constructor(e,n,i){super(),this.type=e,this._docOrFields=n,this._inclusive=i}static _create(e,n,i){return new Pg(e,n,i)}_apply(e){const n=pO(e,this.type,this._docOrFields,this._inclusive);return new gn(e.firestore,e.converter,function(r,s){return new zr(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,s,r.endAt)}(e._query,n))}}function c$(...t){return Pg._create("startAt",t,!0)}function u$(...t){return Pg._create("startAfter",t,!1)}class Ng extends Ld{constructor(e,n,i){super(),this.type=e,this._docOrFields=n,this._inclusive=i}static _create(e,n,i){return new Ng(e,n,i)}_apply(e){const n=pO(e,this.type,this._docOrFields,this._inclusive);return new gn(e.firestore,e.converter,function(r,s){return new zr(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,s)}(e._query,n))}}function h$(...t){return Ng._create("endBefore",t,!1)}function d$(...t){return Ng._create("endAt",t,!0)}function pO(t,e,n,i){if(n[0]=ee(n[0]),n[0]instanceof Wh)return function(s,a,o,l,c){if(!l)throw new F(U.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${o}().`);const h=[];for(const d of Tl(s))if(d.field.isKeyField())h.push(eo(a,l.key));else{const f=l.data.field(d.field);if(fg(f))throw new F(U.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+d.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(f===null){const p=d.field.canonicalString();throw new F(U.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${p}' (used as the orderBy) does not exist.`)}h.push(f)}return new Gs(h,c)}(t._query,t.firestore._databaseId,e,n[0]._document,i);{const r=bo(t.firestore);return function(a,o,l,c,h,d){const f=a.explicitOrderBy;if(h.length>f.length)throw new F(U.INVALID_ARGUMENT,`Too many arguments provided to ${c}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const p=[];for(let w=0;w<h.length;w++){const E=h[w];if(f[w].field.isKeyField()){if(typeof E!="string")throw new F(U.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${c}(), but got a ${typeof E}`);if(!jw(a)&&E.indexOf("/")!==-1)throw new F(U.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${c}() must be a plain document ID, but '${E}' contains a slash.`);const R=a.path.child(ge.fromString(E));if(!$.isDocumentKey(R))throw new F(U.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${c}() must result in a valid document path, but '${R}' is not because it contains an odd number of segments.`);const b=new $(R);p.push(eo(o,b))}else{const R=uO(l,c,E);p.push(R)}}return new Gs(p,d)}(t._query,t.firestore._databaseId,r,e,n,i)}}function cx(t,e,n){if(typeof(n=ee(n))=="string"){if(n==="")throw new F(U.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!jw(e)&&n.indexOf("/")!==-1)throw new F(U.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(ge.fromString(n));if(!$.isDocumentKey(i))throw new F(U.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return eo(t,new $(i))}if(n instanceof Le)return eo(t,n._key);throw new F(U.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${lg(n)}.`)}function ux(t,e){if(!Array.isArray(t)||t.length===0)throw new F(U.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function gO(t,e){const n=function(r,s){for(const a of r)for(const o of a.getFlattenedFilters())if(s.indexOf(o.op)>=0)return o.op;return null}(t.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new F(U.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new F(U.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class DT{convertValue(e,n="none"){switch(qs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ye(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(kr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw X(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return ia(e,(r,s)=>{i[r]=this.convertValue(s,n)}),i}convertVectorValue(e){var i,r,s;const n=(s=(r=(i=e.fields)==null?void 0:i[$l].arrayValue)==null?void 0:r.values)==null?void 0:s.map(a=>Ye(a.doubleValue));return new $i(n)}convertGeoPoint(e){return new wi(Ye(e.latitude),Ye(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":const i=mg(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(zh(e));default:return null}}convertTimestamp(e){const n=Dr(e);return new Ie(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=ge.fromString(e);Z(sV(i),9688,{name:e});const r=new Fs(i.get(1),i.get(3)),s=new $(i.popFirst(5));return r.isEqual(n)||ft(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dg(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}class f$ extends DT{constructor(e){super(),this.firestore=e}convertBytes(e){return new en(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Le(this.firestore,null,n)}}class ka{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}let ci=class yO extends Wh{constructor(e,n,i,r,s,a){super(e,n,i,r,a),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new ah(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(xg("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new F(U.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=yO._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}};ci._jsonSchemaVersion="firestore/documentSnapshot/1.0",ci._jsonSchema={type:Et("string",ci._jsonSchemaVersion),bundleSource:Et("string","DocumentSnapshot"),bundleName:Et("string"),bundle:Et("string")};let ah=class extends ci{data(e={}){return super.data(e)}},Ti=class _O{constructor(e,n,i,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new ka(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new ah(this._firestore,this._userDataWriter,i.key,i,new ka(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new F(U.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(o=>{const l=new ah(r._firestore,r._userDataWriter,o.doc.key,o.doc,new ka(r._snapshot.mutatedKeys.has(o.doc.key),r._snapshot.fromCache),r.query.converter);return o.doc,{type:"added",doc:l,oldIndex:-1,newIndex:a++}})}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(o=>s||o.type!==3).map(o=>{const l=new ah(r._firestore,r._userDataWriter,o.doc.key,o.doc,new ka(r._snapshot.mutatedKeys.has(o.doc.key),r._snapshot.fromCache),r.query.converter);let c=-1,h=-1;return o.type!==0&&(c=a.indexOf(o.doc.key),a=a.delete(o.doc.key)),o.type!==1&&(a=a.add(o.doc),h=a.indexOf(o.doc.key)),{type:m$(o.type),doc:l,oldIndex:c,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new F(U.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=_O._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Rw.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],r=[];return this.docs.forEach(s=>{s._document!==null&&(n.push(s._document),i.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),r.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function m$(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return X(61501,{type:t})}}function vO(t,e){return t instanceof ci&&e instanceof ci?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Ti&&e instanceof Ti&&t._firestore===e._firestore&&rO(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p$(t){t=Te(t,Le);const e=Te(t.firestore,gt);return YV(an(e),t._key).then(n=>kT(e,t,n))}Ti._jsonSchemaVersion="firestore/querySnapshot/1.0",Ti._jsonSchema={type:Et("string",Ti._jsonSchemaVersion),bundleSource:Et("string","QuerySnapshot"),bundleName:Et("string"),bundle:Et("string")};class To extends DT{constructor(e){super(),this.firestore=e}convertBytes(e){return new en(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Le(this.firestore,null,n)}}function g$(t){t=Te(t,Le);const e=Te(t.firestore,gt),n=an(e),i=new To(e);return LG(n,t._key).then(r=>new ci(e,i,t._key,r,new ka(r!==null&&r.hasLocalMutations,!0),t.converter))}function y$(t){t=Te(t,Le);const e=Te(t.firestore,gt);return YV(an(e),t._key,{source:"server"}).then(n=>kT(e,t,n))}function _$(t){t=Te(t,gn);const e=Te(t.firestore,gt),n=an(e),i=new To(e);return mO(t._query),XV(n,t._query).then(r=>new Ti(e,i,t,r))}function v$(t){t=Te(t,gn);const e=Te(t.firestore,gt),n=an(e),i=new To(e);return UG(n,t._query).then(r=>new Ti(e,i,t,r))}function b$(t){t=Te(t,gn);const e=Te(t.firestore,gt),n=an(e),i=new To(e);return XV(n,t._query,{source:"server"}).then(r=>new Ti(e,i,t,r))}function hx(t,e,n){t=Te(t,Le);const i=Te(t.firestore,gt),r=Dg(t.converter,e,n);return Ud(i,[Ig(bo(i),"setDoc",t._key,r,t.converter!==null,n).toMutation(t._key,Je.none())])}function dx(t,e,n,...i){t=Te(t,Le);const r=Te(t.firestore,gt),s=bo(r);let a;return a=typeof(e=ee(e))=="string"||e instanceof Ws?IT(s,"updateDoc",t._key,e,n,i):ST(s,"updateDoc",t._key,e),Ud(r,[a.toMutation(t._key,Je.exists(!0))])}function w$(t){return Ud(Te(t.firestore,gt),[new Ic(t._key,Je.none())])}function T$(t,e){const n=Te(t.firestore,gt),i=yp(t),r=Dg(t.converter,e);return Ud(n,[Ig(bo(t.firestore),"addDoc",i._key,r,t.converter!==null,{}).toMutation(i._key,Je.exists(!1))]).then(()=>i)}function bO(t,...e){var l,c,h;t=ee(t);let n={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||y0(e[i])||(n=e[i++]);const r={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(y0(e[i])){const d=e[i];e[i]=(l=d.next)==null?void 0:l.bind(d),e[i+1]=(c=d.error)==null?void 0:c.bind(d),e[i+2]=(h=d.complete)==null?void 0:h.bind(d)}let s,a,o;if(t instanceof Le)a=Te(t.firestore,gt),o=Ac(t._key.path),s={next:d=>{e[i]&&e[i](kT(a,t,d))},error:e[i+1],complete:e[i+2]};else{const d=Te(t,gn);a=Te(d.firestore,gt),o=d._query;const f=new To(a);s={next:p=>{e[i]&&e[i](new Ti(a,f,d,p))},error:e[i+1],complete:e[i+2]},mO(t._query)}return function(f,p,w,E){const R=new Eg(E),b=new dT(p,R,w);return f.asyncQueue.enqueueAndForget(async()=>cT(await ic(f),b)),()=>{R.Nu(),f.asyncQueue.enqueueAndForget(async()=>uT(await ic(f),b))}}(an(a),o,r,s)}function E$(t,e){return jG(an(t=Te(t,gt)),y0(e)?e:{next:e})}function Ud(t,e){return function(i,r){const s=new Wt;return i.asyncQueue.enqueueAndForget(async()=>dG(await bT(i),r,s)),s.promise}(an(t),e)}function kT(t,e,n){const i=n.docs.get(e._key),r=new To(t);return new ci(t,r,e._key,i,new ka(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A$={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let S$=class{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=bo(e)}set(e,n,i){this._verifyNotCommitted();const r=vs(e,this._firestore),s=Dg(r.converter,n,i),a=Ig(this._dataReader,"WriteBatch.set",r._key,s,r.converter!==null,i);return this._mutations.push(a.toMutation(r._key,Je.none())),this}update(e,n,i,...r){this._verifyNotCommitted();const s=vs(e,this._firestore);let a;return a=typeof(n=ee(n))=="string"||n instanceof Ws?IT(this._dataReader,"WriteBatch.update",s._key,n,i,r):ST(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(a.toMutation(s._key,Je.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=vs(e,this._firestore);return this._mutations=this._mutations.concat(new Ic(n._key,Je.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new F(U.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function vs(t,e){if((t=ee(t)).firestore!==e)throw new F(U.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I${constructor(e,n){this._firestore=e,this._transaction=n,this._dataReader=bo(e)}get(e){const n=vs(e,this._firestore),i=new f$(this._firestore);return this._transaction.lookup([n._key]).then(r=>{if(!r||r.length!==1)return X(24041);const s=r[0];if(s.isFoundDocument())return new Wh(this._firestore,i,s.key,s,n.converter);if(s.isNoDocument())return new Wh(this._firestore,i,n._key,null,n.converter);throw X(18433,{doc:s})})}set(e,n,i){const r=vs(e,this._firestore),s=Dg(r.converter,n,i),a=Ig(this._dataReader,"Transaction.set",r._key,s,r.converter!==null,i);return this._transaction.set(r._key,a),this}update(e,n,i,...r){const s=vs(e,this._firestore);let a;return a=typeof(n=ee(n))=="string"||n instanceof Ws?IT(this._dataReader,"Transaction.update",s._key,n,i,r):ST(this._dataReader,"Transaction.update",s._key,n),this._transaction.update(s._key,a),this}delete(e){const n=vs(e,this._firestore);return this._transaction.delete(n._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let x$=class extends I${constructor(e,n){super(e,n),this._firestore=e}get(e){const n=vs(e,this._firestore),i=new To(this._firestore);return super.get(e).then(r=>new ci(this._firestore,i,n._key,r._document,new ka(!1,!1),n.converter))}};function R$(t,e,n){t=Te(t,gt);const i={...A$,...n};return function(s){if(s.maxAttempts<1)throw new F(U.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function(s,a,o){const l=new Wt;return s.asyncQueue.enqueueAndForget(async()=>{const c=await VG(s);new DG(s.asyncQueue,c,o,a,l).ju()}),l.promise}(an(t),r=>e(new x$(t,r)),i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C$(){return new Md("deleteField")}function P$(){return new wT("serverTimestamp")}function N$(...t){return new TT("arrayUnion",t)}function D$(...t){return new ET("arrayRemove",t)}function k$(t){return new AT("increment",t)}(function(e,n=!0){(function(r){Ec=r})(Lr),Pr(new hi("firestore",(i,{instanceIdentifier:r,options:s})=>{const a=i.getProvider("app").getImmediate(),o=new gt(new I8(i.getProvider("auth-internal")),new C8(a,i.getProvider("app-check-internal")),function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new F(U.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Fs(c.options.projectId,h)}(a,r),a);return s={useFetchStreams:n,...s},o._setSettings(s),o},"PUBLIC").setMultipleInstances(!0)),qn(FI,qI,e),qn(FI,qI,"esm2020")})();const V$="@firebase/firestore-compat",O$="0.4.2";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VT(t,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new F("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fx(){if(typeof Uint8Array>"u")throw new F("unimplemented","Uint8Arrays are not available in this environment.")}function mx(){if(!u7())throw new F("unimplemented","Blobs are unavailable in Firestore in this environment.")}let wO=class v0{constructor(e){this._delegate=e}static fromBase64String(e){return mx(),new v0(en.fromBase64String(e))}static fromUint8Array(e){return fx(),new v0(en.fromUint8Array(e))}toBase64(){return mx(),this._delegate.toBase64()}toUint8Array(){return fx(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b0(t){return M$(t,["next","error","complete"])}function M$(t,e){if(typeof t!="object"||t===null)return!1;const n=t;for(const i of e)if(i in n&&typeof n[i]=="function")return!0;return!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L${enableIndexedDbPersistence(e,n){return $G(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return KG(e._delegate)}clearIndexedDbPersistence(e){return WG(e._delegate)}}class TO{constructor(e,n,i){this._delegate=n,this._persistenceProvider=i,this.INTERNAL={delete:()=>this.terminate()},e instanceof Fs||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&Xi("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e={...n,...e},delete e.merge),this._delegate._setSettings(e)}useEmulator(e,n,i={}){FG(this._delegate,e,n,i)}enableNetwork(){return YG(this._delegate)}disableNetwork(){return XG(this._delegate)}enablePersistence(e){let n=!1,i=!1;return e&&(n=!!e.synchronizeTabs,i=!!e.experimentalForceOwningTab,$D("synchronizeTabs",n,"experimentalForceOwningTab",i)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,i)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return QG(this._delegate)}onSnapshotsInSync(e){return E$(this._delegate,e)}get app(){if(!this._appCompat)throw new F("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new rc(this,nO(this._delegate,e))}catch(n){throw dn(n,"collection()","Firestore.collection()")}}doc(e){try{return new si(this,yp(this._delegate,e))}catch(n){throw dn(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new hn(this,qG(this._delegate,e))}catch(n){throw dn(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return R$(this._delegate,n=>e(new EO(this,n)))}batch(){return an(this._delegate),new AO(new S$(this._delegate,e=>Ud(this._delegate,e)))}loadBundle(e){return JG(this._delegate,e)}namedQuery(e){return ZG(this._delegate,e).then(n=>n?new hn(this,n):null)}}class kg extends DT{constructor(e){super(),this.firestore=e}convertBytes(e){return new wO(new en(e))}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return si.forKey(n,this.firestore,null)}}function U$(t){T8(t)}class EO{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new kg(e)}get(e){const n=Va(e);return this._delegate.get(n).then(i=>new Qh(this._firestore,new ci(this._firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,n.converter)))}set(e,n,i){const r=Va(e);return i?(VT("Transaction.set",i),this._delegate.set(r,n,i)):this._delegate.set(r,n),this}update(e,n,i,...r){const s=Va(e);return arguments.length===2?this._delegate.update(s,n):this._delegate.update(s,n,i,...r),this}delete(e){const n=Va(e);return this._delegate.delete(n),this}}class AO{constructor(e){this._delegate=e}set(e,n,i){const r=Va(e);return i?(VT("WriteBatch.set",i),this._delegate.set(r,n,i)):this._delegate.set(r,n),this}update(e,n,i,...r){const s=Va(e);return arguments.length===2?this._delegate.update(s,n):this._delegate.update(s,n,i,...r),this}delete(e){const n=Va(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}}class lo{constructor(e,n,i){this._firestore=e,this._userDataWriter=n,this._delegate=i}fromFirestore(e,n){const i=new ah(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Yh(this._firestore,i),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){const i=lo.INSTANCES;let r=i.get(e);r||(r=new WeakMap,i.set(e,r));let s=r.get(n);return s||(s=new lo(e,new kg(e),n),r.set(n,s)),s}}lo.INSTANCES=new WeakMap;class si{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new kg(e)}static forPath(e,n,i){if(e.length%2!==0)throw new F("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new si(n,new Le(n._delegate,i,new $(e)))}static forKey(e,n,i){return new si(n,new Le(n._delegate,i,e))}get id(){return this._delegate.id}get parent(){return new rc(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new rc(this.firestore,nO(this._delegate,e))}catch(n){throw dn(n,"collection()","DocumentReference.collection()")}}isEqual(e){return e=ee(e),e instanceof Le?iO(this._delegate,e):!1}set(e,n){n=VT("DocumentReference.set",n);try{return n?hx(this._delegate,e,n):hx(this._delegate,e)}catch(i){throw dn(i,"setDoc()","DocumentReference.set()")}}update(e,n,...i){try{return arguments.length===1?dx(this._delegate,e):dx(this._delegate,e,n,...i)}catch(r){throw dn(r,"updateDoc()","DocumentReference.update()")}}delete(){return w$(this._delegate)}onSnapshot(...e){const n=SO(e),i=IO(e,r=>new Qh(this.firestore,new ci(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)));return bO(this._delegate,n,i)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=g$(this._delegate):(e==null?void 0:e.source)==="server"?n=y$(this._delegate):n=p$(this._delegate),n.then(i=>new Qh(this.firestore,new ci(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)))}withConverter(e){return new si(this.firestore,e?this._delegate.withConverter(lo.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function dn(t,e,n){return t.message=t.message.replace(e,n),t}function SO(t){for(const e of t)if(typeof e=="object"&&!b0(e))return e;return{}}function IO(t,e){var i,r;let n;return b0(t[0])?n=t[0]:b0(t[1])?n=t[1]:typeof t[0]=="function"?n={next:t[0],error:t[1],complete:t[2]}:n={next:t[1],error:t[2],complete:t[3]},{next:s=>{n.next&&n.next(e(s))},error:(i=n.error)==null?void 0:i.bind(n),complete:(r=n.complete)==null?void 0:r.bind(n)}}class Qh{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new si(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return vO(this._delegate,e._delegate)}}class Yh extends Qh{data(e){const n=this._delegate.data(e);return this._delegate._converter||E8(n!==void 0,"Document in a QueryDocumentSnapshot should exist"),n}}class hn{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new kg(e)}where(e,n,i){try{return new hn(this.firestore,is(this._delegate,s$(e,n,i)))}catch(r){throw dn(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new hn(this.firestore,is(this._delegate,a$(e,n)))}catch(i){throw dn(i,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new hn(this.firestore,is(this._delegate,o$(e)))}catch(n){throw dn(n,"limit()","Query.limit()")}}limitToLast(e){try{return new hn(this.firestore,is(this._delegate,l$(e)))}catch(n){throw dn(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new hn(this.firestore,is(this._delegate,c$(...e)))}catch(n){throw dn(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new hn(this.firestore,is(this._delegate,u$(...e)))}catch(n){throw dn(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new hn(this.firestore,is(this._delegate,h$(...e)))}catch(n){throw dn(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new hn(this.firestore,is(this._delegate,d$(...e)))}catch(n){throw dn(n,"endAt()","Query.endAt()")}}isEqual(e){return rO(this._delegate,e._delegate)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=v$(this._delegate):(e==null?void 0:e.source)==="server"?n=b$(this._delegate):n=_$(this._delegate),n.then(i=>new w0(this.firestore,new Ti(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)))}onSnapshot(...e){const n=SO(e),i=IO(e,r=>new w0(this.firestore,new Ti(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)));return bO(this._delegate,n,i)}withConverter(e){return new hn(this.firestore,e?this._delegate.withConverter(lo.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class j${constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new Yh(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class w0{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new hn(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Yh(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new j$(this._firestore,n))}forEach(e,n){this._delegate.forEach(i=>{e.call(n,new Yh(this._firestore,i))})}isEqual(e){return vO(this._delegate,e._delegate)}}class rc extends hn{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new si(this.firestore,e):null}doc(e){try{return e===void 0?new si(this.firestore,yp(this._delegate)):new si(this.firestore,yp(this._delegate,e))}catch(n){throw dn(n,"doc()","CollectionReference.doc()")}}add(e){return T$(this._delegate,e).then(n=>new si(this.firestore,n))}isEqual(e){return iO(this._delegate,e._delegate)}withConverter(e){return new rc(this.firestore,e?this._delegate.withConverter(lo.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Va(t){return Te(t,Le)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OT{constructor(...e){this._delegate=new Ws(...e)}static documentId(){return new OT(Xe.keyField().canonicalString())}isEqual(e){return e=ee(e),e instanceof Ws?this._delegate._internalPath.isEqual(e._internalPath):!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pa{static serverTimestamp(){const e=P$();return e._methodName="FieldValue.serverTimestamp",new Pa(e)}static delete(){const e=C$();return e._methodName="FieldValue.delete",new Pa(e)}static arrayUnion(...e){const n=N$(...e);return n._methodName="FieldValue.arrayUnion",new Pa(n)}static arrayRemove(...e){const n=D$(...e);return n._methodName="FieldValue.arrayRemove",new Pa(n)}static increment(e){const n=k$(e);return n._methodName="FieldValue.increment",new Pa(n)}constructor(e){this._delegate=e}isEqual(e){return this._delegate.isEqual(e._delegate)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z$={Firestore:TO,GeoPoint:wi,Timestamp:Ie,Blob:wO,Transaction:EO,WriteBatch:AO,DocumentReference:si,DocumentSnapshot:Qh,Query:hn,QueryDocumentSnapshot:Yh,QuerySnapshot:w0,CollectionReference:rc,FieldPath:OT,FieldValue:Pa,setLogLevel:U$,CACHE_SIZE_UNLIMITED:GG};function B$(t,e){t.INTERNAL.registerComponent(new hi("firestore-compat",n=>{const i=n.getProvider("app-compat").getImmediate(),r=n.getProvider("firestore").getImmediate();return e(i,r)},"PUBLIC").setServiceProps({...z$}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F$(t){B$(t,(e,n)=>new TO(e,n,new L$)),t.registerVersion(V$,O$)}F$(Ht);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xO="firebasestorage.googleapis.com",RO="storageBucket",q$=2*60*1e3,H$=10*60*1e3,G$=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class it extends rn{constructor(e,n,i=0){super(p_(e),`Firebase Storage: ${n} (${p_(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,it.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return p_(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Ke;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Ke||(Ke={}));function p_(t){return"storage/"+t}function MT(){const t="An unknown error occurred, please check the error payload for server response.";return new it(Ke.UNKNOWN,t)}function $$(t){return new it(Ke.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function K$(t){return new it(Ke.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function W$(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new it(Ke.UNAUTHENTICATED,t)}function Q$(){return new it(Ke.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function Y$(t){return new it(Ke.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function CO(){return new it(Ke.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function PO(){return new it(Ke.CANCELED,"User canceled the upload/download.")}function X$(t){return new it(Ke.INVALID_URL,"Invalid URL '"+t+"'.")}function J$(t){return new it(Ke.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function Z$(){return new it(Ke.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+RO+"' property when initializing the app?")}function NO(){return new it(Ke.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function eK(){return new it(Ke.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function tK(){return new it(Ke.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function nK(t){return new it(Ke.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Al(t){return new it(Ke.INVALID_ARGUMENT,t)}function DO(){return new it(Ke.APP_DELETED,"The Firebase app was deleted.")}function kO(t){return new it(Ke.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function oh(t,e){return new it(Ke.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function mu(t){throw new it(Ke.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let i;try{i=tn.makeFromUrl(e,n)}catch{return new tn(e,"")}if(i.path==="")return i;throw J$(e)}static makeFromUrl(e,n){let i=null;const r="([A-Za-z0-9.\\-_]+)";function s(S){S.path.charAt(S.path.length-1)==="/"&&(S.path_=S.path_.slice(0,-1))}const a="(/(.*))?$",o=new RegExp("^gs://"+r+a,"i"),l={bucket:1,path:3};function c(S){S.path_=decodeURIComponent(S.path)}const h="v[A-Za-z0-9_]+",d=n.replace(/[.]/g,"\\."),f="(/([^?#]*).*)?$",p=new RegExp(`^https?://${d}/${h}/b/${r}/o${f}`,"i"),w={bucket:1,path:3},E=n===xO?"(?:storage.googleapis.com|storage.cloud.google.com)":n,R="([^?#]*)",b=new RegExp(`^https?://${E}/${r}/${R}`,"i"),_=[{regex:o,indices:l,postModify:s},{regex:p,indices:w,postModify:c},{regex:b,indices:{bucket:1,path:2},postModify:c}];for(let S=0;S<_.length;S++){const k=_[S],O=k.regex.exec(e);if(O){const A=O[k.indices.bucket];let T=O[k.indices.path];T||(T=""),i=new tn(A,T),k.postModify(i);break}}if(i==null)throw X$(e);return i}}class iK{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rK(t,e,n){let i=1,r=null,s=null,a=!1,o=0;function l(){return o===2}let c=!1;function h(...R){c||(c=!0,e.apply(null,R))}function d(R){r=setTimeout(()=>{r=null,t(p,l())},R)}function f(){s&&clearTimeout(s)}function p(R,...b){if(c){f();return}if(R){f(),h.call(null,R,...b);return}if(l()||a){f(),h.call(null,R,...b);return}i<64&&(i*=2);let _;o===1?(o=2,_=0):_=(i+Math.random())*1e3,d(_)}let w=!1;function E(R){w||(w=!0,f(),!c&&(r!==null?(R||(o=2),clearTimeout(r),d(0)):R||(o=1)))}return d(0),s=setTimeout(()=>{a=!0,E(!0)},n),E}function sK(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aK(t){return t!==void 0}function oK(t){return typeof t=="function"}function lK(t){return typeof t=="object"&&!Array.isArray(t)}function Vg(t){return typeof t=="string"||t instanceof String}function px(t){return LT()&&t instanceof Blob}function LT(){return typeof Blob<"u"}function T0(t,e,n,i){if(i<e)throw Al(`Invalid value for '${t}'. Expected ${e} or greater.`);if(i>n)throw Al(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aa(t,e,n){let i=e;return n==null&&(i=`https://${e}`),`${n}://${i}/v0${t}`}function VO(t){const e=encodeURIComponent;let n="?";for(const i in t)if(t.hasOwnProperty(i)){const r=e(i)+"="+e(t[i]);n=n+r+"&"}return n=n.slice(0,-1),n}var Ha;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Ha||(Ha={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OO(t,e){const n=t>=500&&t<600,r=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||r||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cK{constructor(e,n,i,r,s,a,o,l,c,h,d,f=!0,p=!1){this.url_=e,this.method_=n,this.headers_=i,this.body_=r,this.successCodes_=s,this.additionalRetryCodes_=a,this.callback_=o,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=h,this.connectionFactory_=d,this.retry=f,this.isUsingEmulator=p,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((w,E)=>{this.resolve_=w,this.reject_=E,this.start_()})}start_(){const e=(i,r)=>{if(r){i(!1,new Rf(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const a=o=>{const l=o.loaded,c=o.lengthComputable?o.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&s.addUploadProgressListener(a),s.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(a),this.pendingConnection_=null;const o=s.getErrorCode()===Ha.NO_ERROR,l=s.getStatus();if(!o||OO(l,this.additionalRetryCodes_)&&this.retry){const h=s.getErrorCode()===Ha.ABORT;i(!1,new Rf(!1,null,h));return}const c=this.successCodes_.indexOf(l)!==-1;i(!0,new Rf(c,s))})},n=(i,r)=>{const s=this.resolve_,a=this.reject_,o=r.connection;if(r.wasSuccessCode)try{const l=this.callback_(o,o.getResponse());aK(l)?s(l):s()}catch(l){a(l)}else if(o!==null){const l=MT();l.serverResponse=o.getErrorText(),this.errorCallback_?a(this.errorCallback_(o,l)):a(l)}else if(r.canceled){const l=this.appDelete_?DO():PO();a(l)}else{const l=CO();a(l)}};this.canceled_?n(!1,new Rf(!1,null,!0)):this.backoffId_=rK(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&sK(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Rf{constructor(e,n,i){this.wasSuccessCode=e,this.connection=n,this.canceled=!!i}}function uK(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function hK(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function dK(t,e){e&&(t["X-Firebase-GMPID"]=e)}function fK(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function mK(t,e,n,i,r,s,a=!0,o=!1){const l=VO(t.urlParams),c=t.url+l,h=Object.assign({},t.headers);return dK(h,e),uK(h,n),hK(h,s),fK(h,i),new cK(c,t.method,h,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,r,a,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pK(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function gK(...t){const e=pK();if(e!==void 0){const n=new e;for(let i=0;i<t.length;i++)n.append(t[i]);return n.getBlob()}else{if(LT())return new Blob(t);throw new it(Ke.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function yK(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _K(t){if(typeof atob>"u")throw nK("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ai={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class g_{constructor(e,n){this.data=e,this.contentType=n||null}}function MO(t,e){switch(t){case ai.RAW:return new g_(LO(e));case ai.BASE64:case ai.BASE64URL:return new g_(UO(t,e));case ai.DATA_URL:return new g_(bK(e),wK(e))}throw MT()}function LO(t){const e=[];for(let n=0;n<t.length;n++){let i=t.charCodeAt(n);if(i<=127)e.push(i);else if(i<=2047)e.push(192|i>>6,128|i&63);else if((i&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const s=i,a=t.charCodeAt(++n);i=65536|(s&1023)<<10|a&1023,e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63)}else(i&64512)===56320?e.push(239,191,189):e.push(224|i>>12,128|i>>6&63,128|i&63)}return new Uint8Array(e)}function vK(t){let e;try{e=decodeURIComponent(t)}catch{throw oh(ai.DATA_URL,"Malformed data URL.")}return LO(e)}function UO(t,e){switch(t){case ai.BASE64:{const r=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(r||s)throw oh(t,"Invalid character '"+(r?"-":"_")+"' found: is it base64url encoded?");break}case ai.BASE64URL:{const r=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(r||s)throw oh(t,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=_K(e)}catch(r){throw r.message.includes("polyfill")?r:oh(t,"Invalid character found")}const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}class jO{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw oh(ai.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=n[1]||null;i!=null&&(this.base64=TK(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=e.substring(e.indexOf(",")+1)}}function bK(t){const e=new jO(t);return e.base64?UO(ai.BASE64,e.rest):vK(e.rest)}function wK(t){return new jO(t).contentType}function TK(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lr{constructor(e,n){let i=0,r="";px(e)?(this.data_=e,i=e.size,r=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),i=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),i=e.length),this.size_=i,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,n){if(px(this.data_)){const i=this.data_,r=yK(i,e,n);return r===null?null:new lr(r)}else{const i=new Uint8Array(this.data_.buffer,e,n-e);return new lr(i,!0)}}static getBlob(...e){if(LT()){const n=e.map(i=>i instanceof lr?i.data_:i);return new lr(gK.apply(null,n))}else{const n=e.map(a=>Vg(a)?MO(ai.RAW,a).data:a.data_);let i=0;n.forEach(a=>{i+=a.byteLength});const r=new Uint8Array(i);let s=0;return n.forEach(a=>{for(let o=0;o<a.length;o++)r[s++]=a[o]}),new lr(r,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UT(t){let e;try{e=JSON.parse(t)}catch{return null}return lK(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EK(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function AK(t,e){const n=e.split("/").filter(i=>i.length>0).join("/");return t.length===0?n:t+"/"+n}function zO(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SK(t,e){return e}class cn{constructor(e,n,i,r){this.server=e,this.local=n||e,this.writable=!!i,this.xform=r||SK}}let Cf=null;function IK(t){return!Vg(t)||t.length<2?t:zO(t)}function Og(){if(Cf)return Cf;const t=[];t.push(new cn("bucket")),t.push(new cn("generation")),t.push(new cn("metageneration")),t.push(new cn("name","fullPath",!0));function e(s,a){return IK(a)}const n=new cn("name");n.xform=e,t.push(n);function i(s,a){return a!==void 0?Number(a):a}const r=new cn("size");return r.xform=i,t.push(r),t.push(new cn("timeCreated")),t.push(new cn("updated")),t.push(new cn("md5Hash",null,!0)),t.push(new cn("cacheControl",null,!0)),t.push(new cn("contentDisposition",null,!0)),t.push(new cn("contentEncoding",null,!0)),t.push(new cn("contentLanguage",null,!0)),t.push(new cn("contentType",null,!0)),t.push(new cn("metadata","customMetadata",!0)),Cf=t,Cf}function xK(t,e){function n(){const i=t.bucket,r=t.fullPath,s=new tn(i,r);return e._makeStorageReference(s)}Object.defineProperty(t,"ref",{get:n})}function RK(t,e,n){const i={};i.type="file";const r=n.length;for(let s=0;s<r;s++){const a=n[s];i[a.local]=a.xform(i,e[a.server])}return xK(i,t),i}function BO(t,e,n){const i=UT(e);return i===null?null:RK(t,i,n)}function CK(t,e,n,i){const r=UT(e);if(r===null||!Vg(r.downloadTokens))return null;const s=r.downloadTokens;if(s.length===0)return null;const a=encodeURIComponent;return s.split(",").map(c=>{const h=t.bucket,d=t.fullPath,f="/b/"+a(h)+"/o/"+a(d),p=aa(f,n,i),w=VO({alt:"media",token:c});return p+w})[0]}function jT(t,e){const n={},i=e.length;for(let r=0;r<i;r++){const s=e[r];s.writable&&(n[s.server]=t[s.local])}return JSON.stringify(n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gx="prefixes",yx="items";function PK(t,e,n){const i={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[gx])for(const r of n[gx]){const s=r.replace(/\/$/,""),a=t._makeStorageReference(new tn(e,s));i.prefixes.push(a)}if(n[yx])for(const r of n[yx]){const s=t._makeStorageReference(new tn(e,r.name));i.items.push(s)}return i}function NK(t,e,n){const i=UT(n);return i===null?null:PK(t,e,i)}class Hr{constructor(e,n,i,r){this.url=e,this.method=n,this.handler=i,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ki(t){if(!t)throw MT()}function Mg(t,e){function n(i,r){const s=BO(t,r,e);return Ki(s!==null),s}return n}function DK(t,e){function n(i,r){const s=NK(t,e,r);return Ki(s!==null),s}return n}function kK(t,e){function n(i,r){const s=BO(t,r,e);return Ki(s!==null),CK(s,r,t.host,t._protocol)}return n}function Nc(t){function e(n,i){let r;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?r=Q$():r=W$():n.getStatus()===402?r=K$(t.bucket):n.getStatus()===403?r=Y$(t.path):r=i,r.status=n.getStatus(),r.serverResponse=i.serverResponse,r}return e}function Lg(t){const e=Nc(t);function n(i,r){let s=e(i,r);return i.getStatus()===404&&(s=$$(t.path)),s.serverResponse=r.serverResponse,s}return n}function FO(t,e,n){const i=e.fullServerUrl(),r=aa(i,t.host,t._protocol),s="GET",a=t.maxOperationRetryTime,o=new Hr(r,s,Mg(t,n),a);return o.errorHandler=Lg(e),o}function VK(t,e,n,i,r){const s={};e.isRoot?s.prefix="":s.prefix=e.path+"/",n.length>0&&(s.delimiter=n),i&&(s.pageToken=i),r&&(s.maxResults=r);const a=e.bucketOnlyServerUrl(),o=aa(a,t.host,t._protocol),l="GET",c=t.maxOperationRetryTime,h=new Hr(o,l,DK(t,e.bucket),c);return h.urlParams=s,h.errorHandler=Nc(e),h}function OK(t,e,n){const i=e.fullServerUrl(),r=aa(i,t.host,t._protocol),s="GET",a=t.maxOperationRetryTime,o=new Hr(r,s,kK(t,n),a);return o.errorHandler=Lg(e),o}function MK(t,e,n,i){const r=e.fullServerUrl(),s=aa(r,t.host,t._protocol),a="PATCH",o=jT(n,i),l={"Content-Type":"application/json; charset=utf-8"},c=t.maxOperationRetryTime,h=new Hr(s,a,Mg(t,i),c);return h.headers=l,h.body=o,h.errorHandler=Lg(e),h}function LK(t,e){const n=e.fullServerUrl(),i=aa(n,t.host,t._protocol),r="DELETE",s=t.maxOperationRetryTime;function a(l,c){}const o=new Hr(i,r,a,s);return o.successCodes=[200,204],o.errorHandler=Lg(e),o}function UK(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function qO(t,e,n){const i=Object.assign({},n);return i.fullPath=t.path,i.size=e.size(),i.contentType||(i.contentType=UK(null,e)),i}function jK(t,e,n,i,r){const s=e.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"};function o(){let _="";for(let S=0;S<2;S++)_=_+Math.random().toString().slice(2);return _}const l=o();a["Content-Type"]="multipart/related; boundary="+l;const c=qO(e,i,r),h=jT(c,n),d="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+h+`\r
--`+l+`\r
Content-Type: `+c.contentType+`\r
\r
`,f=`\r
--`+l+"--",p=lr.getBlob(d,i,f);if(p===null)throw NO();const w={name:c.fullPath},E=aa(s,t.host,t._protocol),R="POST",b=t.maxUploadRetryTime,v=new Hr(E,R,Mg(t,n),b);return v.urlParams=w,v.headers=a,v.body=p.uploadData(),v.errorHandler=Nc(e),v}class vp{constructor(e,n,i,r){this.current=e,this.total=n,this.finalized=!!i,this.metadata=r||null}}function zT(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch{Ki(!1)}return Ki(!!n&&(e||["active"]).indexOf(n)!==-1),n}function zK(t,e,n,i,r){const s=e.bucketOnlyServerUrl(),a=qO(e,i,r),o={name:a.fullPath},l=aa(s,t.host,t._protocol),c="POST",h={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${i.size()}`,"X-Goog-Upload-Header-Content-Type":a.contentType,"Content-Type":"application/json; charset=utf-8"},d=jT(a,n),f=t.maxUploadRetryTime;function p(E){zT(E);let R;try{R=E.getResponseHeader("X-Goog-Upload-URL")}catch{Ki(!1)}return Ki(Vg(R)),R}const w=new Hr(l,c,p,f);return w.urlParams=o,w.headers=h,w.body=d,w.errorHandler=Nc(e),w}function BK(t,e,n,i){const r={"X-Goog-Upload-Command":"query"};function s(c){const h=zT(c,["active","final"]);let d=null;try{d=c.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Ki(!1)}d||Ki(!1);const f=Number(d);return Ki(!isNaN(f)),new vp(f,i.size(),h==="final")}const a="POST",o=t.maxUploadRetryTime,l=new Hr(n,a,s,o);return l.headers=r,l.errorHandler=Nc(e),l}const _x=256*1024;function FK(t,e,n,i,r,s,a,o){const l=new vp(0,0);if(a?(l.current=a.current,l.total=a.total):(l.current=0,l.total=i.size()),i.size()!==l.total)throw eK();const c=l.total-l.current;let h=c;r>0&&(h=Math.min(h,r));const d=l.current,f=d+h;let p="";h===0?p="finalize":c===h?p="upload, finalize":p="upload";const w={"X-Goog-Upload-Command":p,"X-Goog-Upload-Offset":`${l.current}`},E=i.slice(d,f);if(E===null)throw NO();function R(S,k){const O=zT(S,["active","final"]),A=l.current+h,T=i.size();let I;return O==="final"?I=Mg(e,s)(S,k):I=null,new vp(A,T,O==="final",I)}const b="POST",v=e.maxUploadRetryTime,_=new Hr(n,b,R,v);return _.headers=w,_.body=E.uploadData(),_.progressCallback=o||null,_.errorHandler=Nc(t),_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qK={STATE_CHANGED:"state_changed"},fn={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function y_(t){switch(t){case"running":case"pausing":case"canceling":return fn.RUNNING;case"paused":return fn.PAUSED;case"success":return fn.SUCCESS;case"canceled":return fn.CANCELED;case"error":return fn.ERROR;default:return fn.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HK{constructor(e,n,i){if(oK(e)||n!=null||i!=null)this.next=e,this.error=n??void 0,this.complete=i??void 0;else{const s=e;this.next=s.next,this.error=s.error,this.complete=s.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lo(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}class GK{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Ha.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Ha.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Ha.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,i,r,s){if(this.sent_)throw mu("cannot .send() more than once");if(Zs(e)&&i&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),s!==void 0)for(const a in s)s.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,s[a].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw mu("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw mu("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw mu("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw mu("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class $K extends GK{initXhr(){this.xhr_.responseType="text"}}function Mi(){return new $K}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HO{isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}constructor(e,n,i=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=i,this._mappings=Og(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=r=>{if(this._request=void 0,this._chunkMultiplier=1,r._codeEquals(Ke.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const s=this.isExponentialBackoffExpired();if(OO(r.status,[]))if(s)r=CO();else{this.sleepTime=Math.max(this.sleepTime*2,G$),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=r,this._transition("error")}},this._metadataErrorHandler=r=>{this._request=void 0,r._codeEquals(Ke.CANCELED)?this.completeTransitions_():(this._error=r,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((r,s)=>{this._resolve=r,this._reject=s,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,i])=>{switch(this._state){case"running":e(n,i);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,n)=>{const i=zK(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(i,Mi,e,n);this._request=r,r.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((n,i)=>{const r=BK(this._ref.storage,this._ref._location,e,this._blob),s=this._ref.storage._makeRequest(r,Mi,n,i);this._request=s,s.getPromise().then(a=>{a=a,this._request=void 0,this._updateProgress(a.current),this._needToFetchStatus=!1,a.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=_x*this._chunkMultiplier,n=new vp(this._transferred,this._blob.size()),i=this._uploadUrl;this._resolveToken((r,s)=>{let a;try{a=FK(this._ref._location,this._ref.storage,i,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(l){this._error=l,this._transition("error");return}const o=this._ref.storage._makeRequest(a,Mi,r,s,!1);this._request=o,o.getPromise().then(l=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(l.current),l.finalized?(this._metadata=l.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){_x*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{const i=FO(this._ref.storage,this._ref._location,this._mappings),r=this._ref.storage._makeRequest(i,Mi,e,n);this._request=r,r.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{const i=jK(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(i,Mi,e,n);this._request=r,r.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const n=this._state==="paused";this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=PO(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=y_(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,i,r){const s=new HK(n||void 0,i||void 0,r||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const n=this._observers.indexOf(e);n!==-1&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(y_(this._state)){case fn.SUCCESS:Lo(this._resolve.bind(null,this.snapshot))();break;case fn.CANCELED:case fn.ERROR:const n=this._reject;Lo(n.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(y_(this._state)){case fn.RUNNING:case fn.PAUSED:e.next&&Lo(e.next.bind(e,this.snapshot))();break;case fn.SUCCESS:e.complete&&Lo(e.complete.bind(e))();break;case fn.CANCELED:case fn.ERROR:e.error&&Lo(e.error.bind(e,this._error))();break;default:e.error&&Lo(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class co{constructor(e,n){this._service=e,n instanceof tn?this._location=n:this._location=tn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new co(e,n)}get root(){const e=new tn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return zO(this._location.path)}get storage(){return this._service}get parent(){const e=EK(this._location.path);if(e===null)return null;const n=new tn(this._location.bucket,e);return new co(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw kO(e)}}function KK(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new HO(t,new lr(e),n)}function WK(t){const e={prefixes:[],items:[]};return GO(t,e).then(()=>e)}async function GO(t,e,n){const r=await $O(t,{pageToken:n});e.prefixes.push(...r.prefixes),e.items.push(...r.items),r.nextPageToken!=null&&await GO(t,e,r.nextPageToken)}function $O(t,e){e!=null&&typeof e.maxResults=="number"&&T0("options.maxResults",1,1e3,e.maxResults);const n=e||{},i=VK(t.storage,t._location,"/",n.pageToken,n.maxResults);return t.storage.makeRequestWithTokens(i,Mi)}function QK(t){t._throwIfRoot("getMetadata");const e=FO(t.storage,t._location,Og());return t.storage.makeRequestWithTokens(e,Mi)}function YK(t,e){t._throwIfRoot("updateMetadata");const n=MK(t.storage,t._location,e,Og());return t.storage.makeRequestWithTokens(n,Mi)}function XK(t){t._throwIfRoot("getDownloadURL");const e=OK(t.storage,t._location,Og());return t.storage.makeRequestWithTokens(e,Mi).then(n=>{if(n===null)throw tK();return n})}function JK(t){t._throwIfRoot("deleteObject");const e=LK(t.storage,t._location);return t.storage.makeRequestWithTokens(e,Mi)}function KO(t,e){const n=AK(t._location.path,e),i=new tn(t._location.bucket,n);return new co(t.storage,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZK(t){return/^[A-Za-z]+:\/\//.test(t)}function eW(t,e){return new co(t,e)}function WO(t,e){if(t instanceof BT){const n=t;if(n._bucket==null)throw Z$();const i=new co(n,n._bucket);return e!=null?WO(i,e):i}else return e!==void 0?KO(t,e):t}function tW(t,e){if(e&&ZK(e)){if(t instanceof BT)return eW(t,e);throw Al("To use ref(service, url), the first argument must be a Storage instance.")}else return WO(t,e)}function vx(t,e){const n=e==null?void 0:e[RO];return n==null?null:tn.makeFromBucketSpec(n,t)}function nW(t,e,n,i={}){t.host=`${e}:${n}`;const r=Zs(e);r&&(Zb(`https://${t.host}/b`),ew("Storage",!0)),t._isUsingEmulator=!0,t._protocol=r?"https":"http";const{mockUserToken:s}=i;s&&(t._overrideAuthToken=typeof s=="string"?s:vN(s,t.app.options.projectId))}class BT{constructor(e,n,i,r,s,a=!1){this.app=e,this._authProvider=n,this._appCheckProvider=i,this._url=r,this._firebaseVersion=s,this._isUsingEmulator=a,this._bucket=null,this._host=xO,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=q$,this._maxUploadRetryTime=H$,this._requests=new Set,r!=null?this._bucket=tn.makeFromBucketSpec(r,this._host):this._bucket=vx(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=tn.makeFromBucketSpec(this._url,e):this._bucket=vx(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){T0("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){T0("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(qe(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new co(this,e)}_makeRequest(e,n,i,r,s=!0){if(this._deleted)return new iK(DO());{const a=mK(e,this._appId,i,r,n,this._firebaseVersion,s,this._isUsingEmulator);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}async makeRequestWithTokens(e,n){const[i,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,i,r).getPromise()}}const bx="@firebase/storage",wx="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iW="storage";function rW(t,e,n){return t=ee(t),KK(t,e,n)}function sW(t){return t=ee(t),QK(t)}function aW(t,e){return t=ee(t),YK(t,e)}function oW(t,e){return t=ee(t),$O(t,e)}function lW(t){return t=ee(t),WK(t)}function cW(t){return t=ee(t),XK(t)}function uW(t){return t=ee(t),JK(t)}function Tx(t,e){return t=ee(t),tW(t,e)}function hW(t,e){return KO(t,e)}function dW(t,e,n,i={}){nW(t,e,n,i)}function fW(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),r=t.getProvider("app-check-internal");return new BT(n,i,r,e,Lr)}function mW(){Pr(new hi(iW,fW,"PUBLIC").setMultipleInstances(!0)),qn(bx,wx,""),qn(bx,wx,"esm2020")}mW();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pf{constructor(e,n,i){this._delegate=e,this.task=n,this.ref=i}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ex{constructor(e,n){this._delegate=e,this._ref=n,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new Pf(this._delegate.snapshot,this,this._ref)}then(e,n){return this._delegate.then(i=>{if(e)return e(new Pf(i,this,this._ref))},n)}on(e,n,i,r){let s;return n&&(typeof n=="function"?s=a=>n(new Pf(a,this,this._ref)):s={next:n.next?a=>n.next(new Pf(a,this,this._ref)):void 0,complete:n.complete||void 0,error:n.error||void 0}),this._delegate.on(e,s,i||void 0,r||void 0)}}class Ax{constructor(e,n){this._delegate=e,this._service=n}get prefixes(){return this._delegate.prefixes.map(e=>new br(e,this._service))}get items(){return this._delegate.items.map(e=>new br(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *  http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br{constructor(e,n){this._delegate=e,this.storage=n}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const n=hW(this._delegate,e);return new br(n,this.storage)}get root(){return new br(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return e==null?null:new br(e,this.storage)}put(e,n){return this._throwIfRoot("put"),new Ex(rW(this._delegate,e,n),this)}putString(e,n=ai.RAW,i){this._throwIfRoot("putString");const r=MO(n,e),s={...i};return s.contentType==null&&r.contentType!=null&&(s.contentType=r.contentType),new Ex(new HO(this._delegate,new lr(r.data,!0),s),this)}listAll(){return lW(this._delegate).then(e=>new Ax(e,this.storage))}list(e){return oW(this._delegate,e||void 0).then(n=>new Ax(n,this.storage))}getMetadata(){return sW(this._delegate)}updateMetadata(e){return aW(this._delegate,e)}getDownloadURL(){return cW(this._delegate)}delete(){return this._throwIfRoot("delete"),uW(this._delegate)}_throwIfRoot(e){if(this._delegate._location.path==="")throw kO(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QO{constructor(e,n){this.app=e,this._delegate=n}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(Sx(e))throw Al("ref() expected a child path but got a URL, use refFromURL instead.");return new br(Tx(this._delegate,e),this)}refFromURL(e){if(!Sx(e))throw Al("refFromURL() expected a full URL but got a child path, use ref() instead.");try{tn.makeFromUrl(e,this._delegate.host)}catch{throw Al("refFromUrl() expected a valid full URL but got an invalid one.")}return new br(Tx(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,n,i={}){dW(this._delegate,e,n,i)}}function Sx(t){return/^[A-Za-z]+:\/\//.test(t)}const pW="@firebase/storage-compat",gW="0.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yW="storage-compat";function _W(t,{instanceIdentifier:e}){const n=t.getProvider("app-compat").getImmediate(),i=t.getProvider("storage").getImmediate({identifier:e});return new QO(n,i)}function vW(t){const e={TaskState:fn,TaskEvent:qK,StringFormat:ai,Storage:QO,Reference:br};t.INTERNAL.registerComponent(new hi(yW,_W,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),t.registerVersion(pW,gW)}vW(Ht);const bW={apiKey:"AIzaSyDzEay5fGB-2r5_V9UXOO8cOv-nJdHwDRg",authDomain:"rush-coffee.firebaseapp.com",projectId:"rush-coffee",storageBucket:"rush-coffee.appspot.com",messagingSenderId:"423413538635",appId:"1:423413538635:web:ded0369f50c3a9086bd2ce"};Ht.apps.length||Ht.initializeApp(bW);const Ci=Ht.auth(),Qe=Ht.firestore(),uee=Ht.storage(),YO=x.createContext(void 0),oa=()=>{const t=x.useContext(YO);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t},__=async t=>{var r,s,a;const e=Qe.collection("users").doc(t),n=await e.get();if(!n.exists){console.log(`Creating missing Firestore profile for user: ${t}`);const o=Ci.currentUser;if(!o)throw new Error("User not authenticated");const l=((r=o.displayName)==null?void 0:r.split(" "))||["User",""],c=l[0],h=l.slice(1).join(" ")||"",d={email:o.email||"",displayName:o.displayName||`${c} ${h}`,firstName:c,lastName:h,phone:o.phoneNumber||"",photoURL:o.photoURL||void 0,createdAt:new Date,role:"customer",totalOrders:0,totalSpent:0,currentPoints:0,lifetimePoints:0,loyaltyPoints:0,tier:"bronze",rewardsHistory:[],preferences:{notifications:{push:!0,emailUpdates:!0,marketing:!1},theme:"auto",privacy:{shareUsageData:!0,personalizedRecs:!0}},cart:[]};await e.set(d);const p=(await e.get()).data();return{uid:t,email:p.email,displayName:p.displayName,firstName:p.firstName||"User",lastName:p.lastName||"",phone:p.phone||"",photoURL:p.photoURL,createdAt:((s=p.createdAt)==null?void 0:s.toDate())||new Date,role:p.role,totalOrders:p.totalOrders??0,totalSpent:p.totalSpent??0,currentPoints:p.currentPoints??0,lifetimePoints:p.lifetimePoints??0,loyaltyPoints:p.loyaltyPoints??0,tier:p.tier||"bronze",rewardsHistory:(p.rewardsHistory||[]).map(w=>({...w,date:w.date&&typeof w.date.toDate=="function"?w.date.toDate():w.date})).sort((w,E)=>{const R=w.date instanceof Date?w.date:new Date(w.date);return(E.date instanceof Date?E.date:new Date(E.date)).getTime()-R.getTime()}),preferences:p.preferences||{notifications:{push:!0,emailUpdates:!0,marketing:!1},theme:"auto",privacy:{shareUsageData:!0,personalizedRecs:!0}}}}const i=n.data();return{uid:t,email:i.email,displayName:i.displayName||`${i.firstName} ${i.lastName}`,firstName:i.firstName||"User",lastName:i.lastName||"",phone:i.phone||"",photoURL:i.photoURL,createdAt:((a=i.createdAt)==null?void 0:a.toDate())||new Date,role:i.role,totalOrders:i.totalOrders??0,totalSpent:i.totalSpent??0,currentPoints:i.currentPoints??0,lifetimePoints:i.lifetimePoints??0,loyaltyPoints:i.loyaltyPoints??0,tier:i.tier||"bronze",rewardsHistory:(i.rewardsHistory||[]).map(o=>({...o,date:o.date&&typeof o.date.toDate=="function"?o.date.toDate():o.date})).sort((o,l)=>{const c=o.date instanceof Date?o.date:new Date(o.date);return(l.date instanceof Date?l.date:new Date(l.date)).getTime()-c.getTime()}),preferences:i.preferences||{notifications:{push:!0,emailUpdates:!0,marketing:!1},theme:"auto",privacy:{shareUsageData:!0,personalizedRecs:!0}}}},wW=({children:t})=>{const[e,n]=x.useState(null),[i,r]=x.useState(!0);x.useEffect(()=>{let b;const v=Ci.onAuthStateChanged(async _=>{b&&b(),_?b=Qe.collection("users").doc(_.uid).onSnapshot(k=>{var O;if(k.exists){const A=k.data(),T={uid:_.uid,email:_.email,firstName:A.firstName||"User",lastName:A.lastName||"",phone:A.phone||"",photoURL:A.photoURL,createdAt:((O=A.createdAt)==null?void 0:O.toDate())||new Date,role:A.role,totalOrders:A.totalOrders??0,totalSpent:A.totalSpent??0,currentPoints:A.currentPoints??0,lifetimePoints:A.lifetimePoints??0,tier:A.tier||"bronze",rewardsHistory:(A.rewardsHistory||[]).map(I=>({...I,date:I.date&&typeof I.date.toDate=="function"?I.date.toDate():I.date})).sort((I,P)=>{const D=I.date instanceof Date?I.date:new Date(I.date);return(P.date instanceof Date?P.date:new Date(P.date)).getTime()-D.getTime()}),preferences:A.preferences||{notifications:{push:!0,emailUpdates:!0,marketing:!1},theme:"auto",privacy:{shareUsageData:!0,personalizedRecs:!0}}};n(T)}else{const A={uid:_.uid,email:_.email,firstName:"User",lastName:"",createdAt:new Date,role:"customer",totalOrders:0,totalSpent:0,currentPoints:0,lifetimePoints:0,tier:"bronze",rewardsHistory:[],preferences:{notifications:{push:!0,emailUpdates:!0,marketing:!1},theme:"auto",privacy:{shareUsageData:!0,personalizedRecs:!0}}};n(A)}r(!1)},k=>{console.error("Error listening to user document:",k),r(!1)}):(n(null),r(!1))});return()=>{v(),b&&b()}},[]);const R={currentUser:e,loading:i,register:async(b,v,_,S,k)=>{const A=(await Ci.createUserWithEmailAndPassword(b,v)).user,T={id:`rh-${Date.now()}`,type:"earned",points:25,description:"Welcome Bonus",date:new Date},I={firstName:_,lastName:S,phone:k||"",createdAt:new Date,role:"customer",totalOrders:0,totalSpent:0,currentPoints:25,lifetimePoints:25,tier:"bronze",rewardsHistory:[T],preferences:{notifications:{push:!0,emailUpdates:!0,marketing:!1},theme:"auto",privacy:{shareUsageData:!0,personalizedRecs:!0}},cart:[]};return await Qe.collection("users").doc(A.uid).set(I),__(A.uid)},login:async(b,v,_)=>{var k;if(b==="test@test.com"&&v==="123456"){const O="test-user-id";return sessionStorage.setItem(`dev_verification_code_${O}`,"123456"),sessionStorage.setItem("requires2FA","true"),{needsVerification:!0,userId:O,email:b,role:"customer"}}const S=_?Ht.auth.Auth.Persistence.LOCAL:Ht.auth.Auth.Persistence.SESSION;await Ci.setPersistence(S),sessionStorage.setItem("requires2FA","true");try{const A=(await Ci.signInWithEmailAndPassword(b,v)).user.uid,T=Math.floor(1e5+Math.random()*9e5).toString(),I=new Date(Date.now()+10*60*1e3);try{await Qe.collection("emailVerifications").doc(A).set({code:T,email:b,createdAt:new Date,expiresAt:I,verified:!1})}catch{sessionStorage.setItem(`dev_verification_code_${A}`,T)}console.log(` Verification code for ${b}: ${T}`);let P;try{P=(k=(await Qe.collection("users").doc(A).get()).data())==null?void 0:k.role}catch{P="customer"}return{needsVerification:!0,userId:A,email:b,role:P}}catch(O){throw sessionStorage.removeItem("requires2FA"),O}},logout:async()=>{await Ci.signOut()},sendPasswordReset:async b=>{await Ci.sendPasswordResetEmail(b)},signInWithGoogle:async()=>{var k;const b=new Ht.auth.GoogleAuthProvider;b.setCustomParameters({prompt:"select_account"});const v=await Ci.signInWithPopup(b),_=v.user,S=v.additionalUserInfo;if(S!=null&&S.isNewUser){const O=((k=_.displayName)==null?void 0:k.split(" "))||["New","User"],A=O[0],T=O.slice(1).join(" ")||"",I={id:`rh-${Date.now()}`,type:"earned",points:25,description:"Welcome Bonus",date:new Date},P={firstName:A,lastName:T,photoURL:_.photoURL||void 0,createdAt:new Date,role:"customer",totalOrders:0,totalSpent:0,currentPoints:25,lifetimePoints:25,tier:"bronze",rewardsHistory:[I],preferences:{notifications:{push:!0,emailUpdates:!0,marketing:!1},theme:"auto",privacy:{shareUsageData:!0,personalizedRecs:!0}},cart:[]};await Qe.collection("users").doc(_.uid).set(P)}return __(_.uid)},signInWithFacebook:async()=>{var k;const b=new Ht.auth.FacebookAuthProvider,v=await Ci.signInWithPopup(b),_=v.user,S=v.additionalUserInfo;if(S!=null&&S.isNewUser){const O=((k=_.displayName)==null?void 0:k.split(" "))||["New","User"],A=O[0],T=O.slice(1).join(" ")||"",I={id:`rh-${Date.now()}`,type:"earned",points:25,description:"Welcome Bonus",date:new Date},P={firstName:A,lastName:T,photoURL:_.photoURL||void 0,createdAt:new Date,role:"customer",totalOrders:0,totalSpent:0,currentPoints:25,lifetimePoints:25,tier:"bronze",rewardsHistory:[I],preferences:{notifications:{push:!0,emailUpdates:!0,marketing:!1},theme:"auto",privacy:{shareUsageData:!0,personalizedRecs:!0}},cart:[]};await Qe.collection("users").doc(_.uid).set(P)}return __(_.uid)},updateUserProfile:async b=>{e&&await Qe.collection("users").doc(e.uid).update(b)},updateUserPhoto:async b=>{e&&await Qe.collection("users").doc(e.uid).update({photoURL:b})},sendEmailVerificationCode:async(b,v)=>{const _=Math.floor(1e5+Math.random()*9e5).toString(),S=new Date(Date.now()+10*60*1e3);try{await Qe.collection("emailVerifications").doc(b).set({code:_,email:v,createdAt:new Date,expiresAt:S})}catch{sessionStorage.setItem(`dev_verification_code_${b}`,_)}console.log(` Verification code for ${v}: ${_}`)},verifyEmailCode:async(b,v)=>{try{const S=Qe.collection("emailVerifications").doc(b),k=await S.get();if(k.exists){const O=k.data();if(O){const A=new Date,T=O.expiresAt.toDate();if(A>T)return!1;if(O.code===v)return await S.update({verified:!0}),!0}}}catch{}return sessionStorage.getItem(`dev_verification_code_${b}`)===v},updateUserPassword:async(b,v)=>{const _=Ci.currentUser;if(!_||!_.email)throw new Error("No user logged in");const S=Ht.auth.EmailAuthProvider.credential(_.email,b);await _.reauthenticateWithCredential(S),await _.updatePassword(v)}};return g.jsx(YO.Provider,{value:R,children:!i&&t})},he=t=>`/RushCoffee-Capstone/${t}`,Nf=[{id:"cb-01",name:"Spanish Latte",description:"A creamy and sweet latte with a Spanish twist, featuring condensed milk for a rich flavor.",category:"Coffee Based",sizes:[{name:"Grande",size:"16oz",price:59},{name:"Venti",size:"22oz",price:69}],imageUrl:he("coffee-based/spanish-latte.png"),available:!0,stock:99,popular:!0,displayOrder:1,recipe:[{ingredientId:"espresso-shot",quantity:2},{ingredientId:"milk",quantity:150},{ingredientId:"condensed-milk",quantity:30}]},{id:"cb-02",name:"Rush Coffee Blend",description:"Our signature house blend, perfectly balanced for a smooth and satisfying coffee experience.",category:"Coffee Based",sizes:[{name:"Grande",size:"16oz",price:69},{name:"Venti",size:"22oz",price:89}],imageUrl:he("coffee-based/rush-coffee-blend.png"),available:!0,stock:99,popular:!0,displayOrder:2,recipe:[{ingredientId:"coffee-beans",quantity:18},{ingredientId:"hot-water",quantity:200}]},{id:"cb-03",name:"Caramel Chocolate Mocha",description:"A decadent mix of rich chocolate, espresso, and creamy caramel for the ultimate treat.",category:"Coffee Based",sizes:[{name:"Grande",size:"16oz",price:59},{name:"Venti",size:"22oz",price:69}],imageUrl:he("coffee-based/caramel-chocolate-mocha.jpg"),available:!0,stock:99,popular:!0,displayOrder:3,recipe:[{ingredientId:"espresso-shot",quantity:2},{ingredientId:"milk",quantity:150},{ingredientId:"chocolate-sauce",quantity:20},{ingredientId:"caramel-sauce",quantity:15}]},{id:"cb-04",name:"Dark Chocolate Mocha",description:"A bold and intense mocha experience with premium dark chocolate and strong espresso.",category:"Coffee Based",sizes:[{name:"Grande",size:"16oz",price:59},{name:"Venti",size:"22oz",price:69}],imageUrl:he("coffee-based/dark-chocolate-mocha.jpg"),available:!0,stock:99,displayOrder:4,recipe:[{ingredientId:"espresso-shot",quantity:2},{ingredientId:"milk",quantity:150},{ingredientId:"chocolate-sauce",quantity:25}]},{id:"cb-05",name:"Mocha Latte",description:"A classic blend of smooth espresso, rich chocolate sauce, and steamed milk.",category:"Coffee Based",sizes:[{name:"Grande",size:"16oz",price:59},{name:"Venti",size:"22oz",price:69}],imageUrl:he("coffee-based/mocha-latte.jpg"),available:!0,stock:99,displayOrder:5,recipe:[{ingredientId:"espresso-shot",quantity:2},{ingredientId:"milk",quantity:180},{ingredientId:"chocolate-sauce",quantity:20}]},{id:"cb-06",name:"Americano",description:"Bold espresso shots topped with hot water to create a light layer of crema.",category:"Coffee Based",sizes:[{name:"Grande",size:"16oz",price:59},{name:"Venti",size:"22oz",price:69}],imageUrl:he("coffee-based/americano.jpg"),available:!0,stock:99,displayOrder:6,recipe:[{ingredientId:"espresso-shot",quantity:2},{ingredientId:"hot-water",quantity:220}]},{id:"cb-07",name:"Biscoff Latte",description:"An indulgent latte infused with the irresistible flavor of caramelized Biscoff cookies.",category:"Coffee Based",sizes:[{name:"Grande",size:"16oz",price:99},{name:"Venti",size:"22oz",price:199}],imageUrl:he("coffee-based/biscoff-latte.jpg"),available:!0,stock:99,displayOrder:7,recipe:[{ingredientId:"espresso-shot",quantity:2},{ingredientId:"milk",quantity:170},{ingredientId:"biscoff-spread",quantity:30}]},{id:"cb-08",name:"Reeses Latte",description:"The perfect combination of peanut butter, chocolate, and espresso. A candy lover's dream.",category:"Coffee Based",sizes:[{name:"Grande",size:"16oz",price:79},{name:"Venti",size:"22oz",price:99}],imageUrl:he("coffee-based/reeses-latte.jpg"),available:!0,stock:99,displayOrder:8,recipe:[{ingredientId:"espresso-shot",quantity:2},{ingredientId:"milk",quantity:160},{ingredientId:"chocolate-sauce",quantity:15},{ingredientId:"peanut-butter",quantity:20}]},{id:"cb-09",name:"Brown Sugar Latte",description:"A comforting latte sweetened with rich, molasses-like brown sugar syrup.",category:"Coffee Based",sizes:[{name:"Grande",size:"16oz",price:59},{name:"Venti",size:"22oz",price:79}],imageUrl:he("coffee-based/brown-sugar-latte.jpg"),available:!0,stock:99,displayOrder:9,recipe:[{ingredientId:"espresso-shot",quantity:2},{ingredientId:"milk",quantity:180},{ingredientId:"brown-sugar-syrup",quantity:25}]},{id:"cb-10",name:"Iced Latte",description:"A simple classic. Chilled espresso with cold milk served over ice.",category:"Coffee Based",sizes:[{name:"Grande",size:"16oz",price:69},{name:"Venti",size:"22oz",price:69}],imageUrl:he("coffee-based/iced-latte.jpg"),available:!0,stock:99,displayOrder:10,recipe:[{ingredientId:"espresso-shot",quantity:2},{ingredientId:"milk",quantity:180},{ingredientId:"ice-cubes",quantity:100}]},{id:"cb-11",name:"Orange Latte",description:"A unique and refreshing latte with a zesty hint of natural orange flavor.",category:"Coffee Based",sizes:[{name:"Grande",size:"16oz",price:79},{name:"Venti",size:"22oz",price:89}],imageUrl:he("coffee-based/orange-latte.jpg"),available:!0,stock:99,displayOrder:11,recipe:[{ingredientId:"espresso-shot",quantity:2},{ingredientId:"milk",quantity:170},{ingredientId:"orange-syrup",quantity:20}]},{id:"cb-12",name:"Coffee Jelly",description:"A delightful iced coffee drink with chewy, coffee-flavored jelly cubes.",category:"Coffee Based",sizes:[{name:"Grande",size:"16oz",price:89},{name:"Venti",size:"22oz",price:99}],imageUrl:he("coffee-based/coffee-jelly.jpg"),available:!0,stock:99,displayOrder:12,recipe:[{ingredientId:"espresso-shot",quantity:2},{ingredientId:"milk",quantity:150},{ingredientId:"coffee-jelly",quantity:80},{ingredientId:"ice-cubes",quantity:80}]},{id:"nc-01",name:"Red Velvet",description:"A sweet and creamy drink inspired by the classic red velvet cake, with hints of cocoa and vanilla.",category:"Non-Coffee Based",sizes:[{name:"Grande",size:"16oz",price:89},{name:"Venti",size:"22oz",price:109}],imageUrl:he("non-coffee/red-velvet.jpg"),available:!0,stock:99,displayOrder:13,recipe:[{ingredientId:"milk",quantity:200},{ingredientId:"red-velvet-powder",quantity:25},{ingredientId:"chocolate-sauce",quantity:10},{ingredientId:"vanilla-syrup",quantity:15}]},{id:"nc-02",name:"Red Velvet Matcha Latte",description:"A beautiful and delicious blend of earthy matcha and sweet red velvet flavors.",category:"Non-Coffee Based",sizes:[{name:"Grande",size:"16oz",price:89},{name:"Venti",size:"22oz",price:109}],imageUrl:he("non-coffee/red-velvet-matcha-latte.jpg"),available:!0,stock:99,displayOrder:14,recipe:[{ingredientId:"milk",quantity:180},{ingredientId:"matcha-powder",quantity:5},{ingredientId:"red-velvet-powder",quantity:15},{ingredientId:"vanilla-syrup",quantity:10}]},{id:"nc-03",name:"Milky Choco",description:"A rich and comforting chocolate drink made with high-quality cocoa and fresh milk.",category:"Non-Coffee Based",sizes:[{name:"Grande",size:"16oz",price:89},{name:"Venti",size:"22oz",price:109}],imageUrl:he("non-coffee/milky-choco.jpg"),available:!0,stock:99,displayOrder:15,recipe:[{ingredientId:"milk",quantity:220},{ingredientId:"chocolate-sauce",quantity:30}]},{id:"nc-04",name:"Strawberry Milk",description:"A refreshing and creamy drink made with real strawberries and fresh milk.",category:"Non-Coffee Based",sizes:[{name:"Grande",size:"16oz",price:89},{name:"Venti",size:"22oz",price:109}],imageUrl:he("non-coffee/strawberry-milk.jpg"),available:!0,stock:99,displayOrder:16,recipe:[{ingredientId:"milk",quantity:200},{ingredientId:"strawberry-puree",quantity:50}]},{id:"nc-05",name:"Biscoff Milky",description:"A non-coffee treat blending the sweet, caramelized taste of Biscoff with creamy milk.",category:"Non-Coffee Based",sizes:[{name:"Grande",size:"16oz",price:89},{name:"Venti",size:"22oz",price:109}],imageUrl:he("non-coffee/biscoff-milky.jpg"),available:!0,stock:99,displayOrder:17,recipe:[{ingredientId:"milk",quantity:200},{ingredientId:"biscoff-spread",quantity:35}]},{id:"nc-06",name:"Oreo Latte",description:"A fun and delicious drink packed with the classic cookies and cream flavor of Oreos.",category:"Non-Coffee Based",sizes:[{name:"Grande",size:"16oz",price:89},{name:"Venti",size:"22oz",price:109}],imageUrl:he("non-coffee/oreo-latte.jpg"),available:!0,stock:99,displayOrder:18,recipe:[{ingredientId:"milk",quantity:180},{ingredientId:"oreo-crumbs",quantity:40},{ingredientId:"chocolate-sauce",quantity:15}]},{id:"ms-01",name:"Matcha Latte",description:"Premium Japanese matcha green tea with steamed milk, a perfect balance of earthy and creamy.",category:"Matcha Series",sizes:[{name:"Grande",size:"16oz",price:69},{name:"Venti",size:"22oz",price:89}],imageUrl:he("matcha-series/matcha-latte.jpg"),available:!0,stock:99,popular:!0,displayOrder:19,recipe:[{ingredientId:"matcha-powder",quantity:5},{ingredientId:"milk",quantity:200}]},{id:"ms-02",name:"Strawberry Matcha",description:"A delightful pairing of sweet strawberry puree and high-quality matcha green tea.",category:"Matcha Series",sizes:[{name:"Grande",size:"16oz",price:99},{name:"Venti",size:"22oz",price:109}],imageUrl:he("matcha-series/strawberry-matcha.jpg"),available:!0,stock:99,displayOrder:20,recipe:[{ingredientId:"matcha-powder",quantity:5},{ingredientId:"milk",quantity:180},{ingredientId:"strawberry-puree",quantity:40}]},{id:"ms-03",name:"Matcha Cream Cheese",description:"Earthy matcha topped with a rich, savory, and slightly sweet cream cheese foam.",category:"Matcha Series",sizes:[{name:"Grande",size:"16oz",price:99},{name:"Venti",size:"22oz",price:109}],imageUrl:he("matcha-series/matcha-cream-cheese.jpg"),available:!0,stock:99,displayOrder:21,recipe:[{ingredientId:"matcha-powder",quantity:5},{ingredientId:"milk",quantity:180},{ingredientId:"cream-cheese",quantity:30}]},{id:"ms-04",name:"Matcha Oreo",description:"A creative blend of matcha and crushed Oreo cookies for a unique texture and flavor.",category:"Matcha Series",sizes:[{name:"Grande",size:"16oz",price:79},{name:"Venti",size:"22oz",price:99}],imageUrl:he("matcha-series/matcha-oreo.jpg"),available:!0,stock:99,displayOrder:22,recipe:[{ingredientId:"matcha-powder",quantity:5},{ingredientId:"milk",quantity:180},{ingredientId:"oreo-crumbs",quantity:35}]},{id:"rf-01",name:"Flamangooverload Shake",description:"An explosive mix of flamingo and mango for an overload of fruity goodness.",category:"Refreshments",sizes:[{name:"Grande",size:"16oz",price:69},{name:"Venti",size:"22oz",price:79}],imageUrl:he("refreshments/flamangooverload.jpg"),available:!0,stock:99,displayOrder:23,recipe:[{ingredientId:"mango-puree",quantity:100},{ingredientId:"strawberry-puree",quantity:50},{ingredientId:"ice-cubes",quantity:120},{ingredientId:"milk",quantity:80}]},{id:"rf-02",name:"Mangoberry Shake",description:"A delightful blend of sweet mangoes and tangy berries, perfectly refreshing.",category:"Refreshments",sizes:[{name:"Grande",size:"16oz",price:79},{name:"Venti",size:"22oz",price:99}],imageUrl:he("refreshments/mangoberry.jpg"),available:!0,stock:99,displayOrder:24,recipe:[{ingredientId:"mango-puree",quantity:80},{ingredientId:"mixed-berries",quantity:50},{ingredientId:"ice-cubes",quantity:120},{ingredientId:"milk",quantity:80}]},{id:"rf-03",name:"Mango Caramel Shake",description:"Creamy mango shake drizzled with rich, buttery caramel sauce.",category:"Refreshments",sizes:[{name:"Grande",size:"16oz",price:79},{name:"Venti",size:"22oz",price:99}],imageUrl:he("refreshments/mango-caramel.jpg"),available:!0,stock:99,displayOrder:25,recipe:[{ingredientId:"mango-puree",quantity:100},{ingredientId:"caramel-sauce",quantity:20},{ingredientId:"ice-cubes",quantity:120},{ingredientId:"milk",quantity:80}]},{id:"rf-04",name:"Blueberry Shake",description:"A classic fruit shake made with sweet and juicy blueberries.",category:"Refreshments",sizes:[{name:"Grande",size:"16oz",price:79},{name:"Venti",size:"22oz",price:99}],imageUrl:he("refreshments/blueberry-shake.jpg"),available:!0,stock:99,displayOrder:26,recipe:[{ingredientId:"blueberry-puree",quantity:100},{ingredientId:"ice-cubes",quantity:120},{ingredientId:"milk",quantity:100}]},{id:"rf-05",name:"Strawberry Shake",description:"A creamy and delicious shake made with ripe, sweet strawberries.",category:"Refreshments",sizes:[{name:"Grande",size:"16oz",price:79},{name:"Venti",size:"22oz",price:99}],imageUrl:he("refreshments/strawberry-shake.jpg"),available:!0,stock:99,displayOrder:27,recipe:[{ingredientId:"strawberry-puree",quantity:100},{ingredientId:"ice-cubes",quantity:120},{ingredientId:"milk",quantity:100}]},{id:"rf-06",name:"Green Apple Shake",description:"A tart and refreshing shake with the crisp taste of green apples.",category:"Refreshments",sizes:[{name:"Grande",size:"16oz",price:79},{name:"Venti",size:"22oz",price:99}],imageUrl:he("refreshments/green-apple-shake.jpg"),available:!0,stock:99,displayOrder:28,recipe:[{ingredientId:"green-apple-puree",quantity:100},{ingredientId:"ice-cubes",quantity:120},{ingredientId:"milk",quantity:100}]},{id:"rf-07",name:"Blueberry Soda Pop",description:"Fizzy and fun, this soda pop is bursting with sweet blueberry flavor.",category:"Refreshments",sizes:[{name:"Grande",size:"16oz",price:69},{name:"Venti",size:"22oz",price:79}],imageUrl:he("refreshments/blueberry-soda.jpg"),available:!0,stock:99,displayOrder:29,recipe:[{ingredientId:"blueberry-puree",quantity:60},{ingredientId:"soda-water",quantity:200},{ingredientId:"ice-cubes",quantity:100}]},{id:"rf-08",name:"Strawberry Soda Pop",description:"A refreshing soda pop with the sweet taste of summer strawberries.",category:"Refreshments",sizes:[{name:"Grande",size:"16oz",price:69},{name:"Venti",size:"22oz",price:79}],imageUrl:he("refreshments/strawberry-soda.jpg"),available:!0,stock:99,displayOrder:30,recipe:[{ingredientId:"strawberry-puree",quantity:60},{ingredientId:"soda-water",quantity:200},{ingredientId:"ice-cubes",quantity:100}]},{id:"rf-09",name:"Green Apple Soda Pop",description:"A crisp and bubbly soda with a tangy green apple twist.",category:"Refreshments",sizes:[{name:"Grande",size:"16oz",price:69},{name:"Venti",size:"22oz",price:79}],imageUrl:he("refreshments/green-apple-soda.jpg"),available:!0,stock:99,displayOrder:31,recipe:[{ingredientId:"green-apple-puree",quantity:60},{ingredientId:"soda-water",quantity:200},{ingredientId:"ice-cubes",quantity:100}]},{id:"rf-10",name:"Lemon Soda Pop",description:"A zesty and invigorating soda pop with a classic lemon flavor.",category:"Refreshments",sizes:[{name:"Grande",size:"16oz",price:69},{name:"Venti",size:"22oz",price:79}],imageUrl:he("refreshments/lemon-soda.jpg"),available:!0,stock:99,displayOrder:32,recipe:[{ingredientId:"lemon-juice",quantity:60},{ingredientId:"soda-water",quantity:200},{ingredientId:"ice-cubes",quantity:100}]},{id:"rf-11",name:"Lychee Soda Pop",description:"An exotic and fragrant soda pop with the sweet, floral taste of lychee.",category:"Refreshments",sizes:[{name:"Grande",size:"16oz",price:69},{name:"Venti",size:"22oz",price:79}],imageUrl:he("refreshments/lychee-soda.jpg"),available:!0,stock:99,displayOrder:33,recipe:[{ingredientId:"lychee-syrup",quantity:60},{ingredientId:"soda-water",quantity:200},{ingredientId:"ice-cubes",quantity:100}]},{id:"rf-12",name:"Mango Soda Pop",description:"A tropical and bubbly soda bursting with sweet mango flavor.",category:"Refreshments",sizes:[{name:"Grande",size:"16oz",price:69},{name:"Venti",size:"22oz",price:79}],imageUrl:he("refreshments/mango-soda.jpg"),available:!0,stock:99,displayOrder:34,recipe:[{ingredientId:"mango-puree",quantity:60},{ingredientId:"soda-water",quantity:200},{ingredientId:"ice-cubes",quantity:100}]},{id:"ml-01",name:"Breaded Bacon",description:"Crispy breaded bacon served with creamy white sauce and golden fries.",category:"Meals",sizes:[{name:"Ala Carte",size:"w/ Fries",price:119},{name:"Combo Meal",size:"w/ Fries & Drink",price:139}],imageUrl:he("menu/ala-carte-breaded-bacon-with-white-sauce and fries.jpg"),comboImageUrl:he("menu/combo-meals-breaded-bacon-with-white-sauce,-fries-and-a-drink.jpg"),available:!0,stock:99,popular:!0,displayOrder:35,recipe:[{ingredientId:"bacon-strips",quantity:.15},{ingredientId:"bread-crumbs",quantity:50},{ingredientId:"french-fries",quantity:.15},{ingredientId:"white-sauce",quantity:30},{ingredientId:"cooking-oil",quantity:100},{ingredientId:"takeout-pack",quantity:1}]},{id:"ml-02",name:"Breaded Porkchop",description:"A juicy breaded porkchop fried to perfection, served with white sauce and fries.",category:"Meals",sizes:[{name:"Ala Carte",size:"w/ Fries",price:129},{name:"Combo Meal",size:"w/ Fries & Drink",price:149}],imageUrl:he("menu/ala-carte-breaded-porkchop-with-white-sauce-and-fries.jpg"),comboImageUrl:he("menu/combo-meals-breaded-porkchop-with-white-sauce-and-fries-w-drink.jpg"),available:!0,stock:99,popular:!0,displayOrder:36,recipe:[{ingredientId:"porkchop",quantity:.2},{ingredientId:"bread-crumbs",quantity:60},{ingredientId:"french-fries",quantity:.15},{ingredientId:"white-sauce",quantity:30},{ingredientId:"cooking-oil",quantity:120},{ingredientId:"takeout-pack",quantity:1}]},{id:"ml-03",name:"Breaded Chicken",description:"Tender breaded chicken fillet with a side of fries and our signature white sauce.",category:"Meals",sizes:[{name:"Ala Carte",size:"w/ Fries",price:119},{name:"Combo Meal",size:"w/ Fries & Drink",price:139}],imageUrl:he("menu/ala-carte-chicken-with-white-sauce-and-fries.jpg"),comboImageUrl:he("menu/combo-meals-breaded-chicken-with-white-sauce,-fries-and-a-drink.jpg"),available:!0,stock:99,displayOrder:37,recipe:[{ingredientId:"chicken-fillet",quantity:.2},{ingredientId:"bread-crumbs",quantity:55},{ingredientId:"french-fries",quantity:.15},{ingredientId:"white-sauce",quantity:30},{ingredientId:"cooking-oil",quantity:110},{ingredientId:"takeout-pack",quantity:1}]}],XO=x.createContext(void 0),TW=()=>{const t=x.useContext(XO);if(!t)throw new Error("useProduct must be used within a ProductProvider");return t},EW=({children:t})=>{const[e,n]=x.useState([]),[i,r]=x.useState(!0),[s,a]=x.useState(null),o=x.useCallback(async()=>{r(!0),a(null);try{const f=Qe.collection("products"),p=f.orderBy("displayOrder","asc"),w=await p.get();if(w.empty){console.log("Products collection is empty. Seeding products with specific IDs...");const v=Qe.batch();Nf.forEach(k=>{const{id:O,...A}=k,T=f.doc(O);v.set(T,A)}),await v.commit(),console.log(`Successfully seeded ${Nf.length} products to Firestore!`);const S=(await p.get()).docs.map(k=>({id:k.id,...k.data()}));n(S);return}const E=w.docs.map(v=>({id:v.id,...v.data()}));n(E);const R=Qe.batch();let b=!1;Nf.forEach(v=>{const _=E.find(S=>S.id===v.id);if(_){const S=JSON.stringify(_.recipe||[]),k=JSON.stringify(v.recipe||[]);if(S!==k){const O=f.doc(v.id);R.update(O,{recipe:v.recipe}),b=!0,console.log(`Syncing recipe for ${v.name}`)}}}),b&&(await R.commit(),console.log(" Recipes synced from code to Firestore"))}catch(f){f.code==="permission-denied"?console.info("Firestore permission denied. This is expected if security rules are not yet configured or if you are offline. Falling back to mock data for demonstration."):console.warn("Error fetching products from Firestore. Falling back to mock data.",f),n(Nf),a(null)}finally{r(!1)}},[]);x.useEffect(()=>{o()},[o]);const d={products:e,isLoading:i,error:s,addProduct:async f=>{try{await Qe.collection("products").add(f),await o()}catch(p){throw console.error("Error adding product: ",p),new Error("Failed to add product.")}},updateProduct:async(f,p)=>{try{await Qe.collection("products").doc(f).update(p),await o()}catch(w){throw console.error("Error updating product: ",w),new Error("Failed to update product.")}},deleteProduct:async f=>{try{await Qe.collection("products").doc(f).delete(),await o()}catch(p){throw console.error("Error deleting product: ",p),new Error("Failed to delete product.")}}};return g.jsx(XO.Provider,{value:d,children:t})},JO=x.createContext(void 0),ZO=()=>{const t=x.useContext(JO);if(t===void 0)throw new Error("useCart must be used within a CartProvider");return t},AW=({children:t})=>{const[e,n]=x.useState([]),[i,r]=x.useState(!1),[s,a]=x.useState(null),[o,l]=x.useState(!0),[c,h]=x.useState([]),{currentUser:d}=oa(),{products:f,isLoading:p}=TW();x.useEffect(()=>{if(s){const N=setTimeout(()=>a(null),4e3);return()=>clearTimeout(N)}},[s]);const w=x.useCallback(N=>{a(N)},[]);x.useEffect(()=>{d?(async()=>{var H;if(!(!d||p)){l(!0);try{const z=await Qe.collection("users").doc(d.uid).get();if(z.exists){const J=(((H=z.data())==null?void 0:H.cart)||[]).map(ne=>{const W=f.find(St=>St.id===ne.productId);if(!W)return null;const de=W.sizes.find(St=>St.name===ne.sizeName);if(!de)return null;const Nt=ne.customizations?JSON.stringify(ne.customizations):"";return{id:`${W.id}-${de.name}-${Nt}`,product:W,selectedSize:de,quantity:ne.quantity,customizations:ne.customizations}}).filter(ne=>ne!==null);n(J)}}catch(ie){console.error("Error fetching cart from Firestore:",ie),w("Couldn't load your cart.")}finally{l(!1)}}})():(n([]),l(!1))},[d,f,p,w]);const E=x.useCallback(async N=>{if(d)try{const H=Qe.collection("users").doc(d.uid),ie=N.map(z=>{const Y={};return z.customizations&&(z.customizations.sugarLevel!==void 0&&(Y.sugarLevel=z.customizations.sugarLevel),z.customizations.iceLevel!==void 0&&(Y.iceLevel=z.customizations.iceLevel),z.customizations.toppings!==void 0&&(Y.toppings=z.customizations.toppings)),{productId:z.product.id,sizeName:z.selectedSize.name,quantity:z.quantity,...Object.keys(Y).length>0&&{customizations:Y}}});await H.set({cart:ie},{merge:!0})}catch(H){console.error("Error updating Firestore cart:",H),w("Error saving your cart.")}},[d,w]),R=x.useMemo(()=>e.reduce((N,H)=>N+H.quantity,0),[e]),b=()=>r(!0),v=()=>r(!1),_=(N,H,ie,z=1)=>{const Y=ie?JSON.stringify(ie):"",J=`${N.id}-${H.name}-${Y}`;let ne;e.find(de=>de.id===J)?ne=e.map(de=>de.id===J?{...de,quantity:Math.min(de.quantity+z,N.stock)}:de):ne=[...e,{id:J,product:N,selectedSize:H,quantity:Math.min(z,N.stock),customizations:ie}],n(ne),E(ne),w(`${N.name} (${H.name}) added to cart!`),b()},S=N=>{if(!N||N.length===0)return;let H=[...e],ie=0;N.forEach(z=>{const Y=z.customizations?JSON.stringify(z.customizations):"",J=`${z.product.id}-${z.selectedSize.name}-${Y}`,ne=H.findIndex(W=>W.id===J);if(ne>-1){const W=H[ne],de=W.quantity+z.quantity;H[ne]={...W,quantity:Math.min(de,z.product.stock)}}else H.push({id:J,product:z.product,selectedSize:z.selectedSize,quantity:Math.min(z.quantity,z.product.stock),customizations:z.customizations});ie+=z.quantity}),n(H),E(H),w(`${ie} item(s) added to your cart!`),b()},k=(N,H)=>{let ie;H<1?ie=e.filter(z=>z.id!==N):ie=e.map(z=>z.id===N?{...z,quantity:Math.min(H,z.product.stock)}:z),n(ie),E(ie)},O=N=>{const H=e.find(z=>z.id===N),ie=e.filter(z=>z.id!==N);n(ie),E(ie),H&&w(`${H.product.name} (${H.selectedSize.name}) removed from cart.`)},A=(N,H,ie,z,Y=1)=>{const J=e.filter(At=>At.id!==N),ne=z?JSON.stringify(z):"",W=`${H.id}-${ie.name}-${ne}`,de=J.find(At=>At.id===W);let Nt;de?Nt=J.map(At=>At.id===W?{...At,quantity:Math.min(At.quantity+Y,H.stock)}:At):Nt=[...J,{id:W,product:H,selectedSize:ie,quantity:Math.min(Y,H.stock),customizations:z}],n(Nt),E(Nt),w(`${H.name} (${ie.name}) updated!`)},T=()=>{n([]),h([]),E([])},I=N=>{h(H=>H.includes(N)?H.filter(ie=>ie!==N):[...H,N])},P=()=>{h(e.map(N=>N.id))},D=()=>{h([])};x.useEffect(()=>{const N=e.map(H=>H.id);h(H=>{const ie=H.filter(Y=>N.includes(Y)),z=N.filter(Y=>!H.includes(Y));return[...ie,...z]})},[e]);const V={cartItems:e,isCartOpen:i,toastMessage:s,totalCartItems:R,isCartLoading:o,selectedItemIds:c,addToCart:_,addMultipleToCart:S,updateQuantity:k,updateCartItem:A,removeFromCart:O,openCart:b,closeCart:v,showToast:w,toggleItemSelection:I,selectAllItems:P,deselectAllItems:D,clearCart:T};return g.jsx(JO.Provider,{value:V,children:t})},Vr=({className:t,...e})=>g.jsxs("svg",{viewBox:"0 0 241 175",xmlns:"http://www.w3.org/2000/svg",className:t,fill:"currentColor",...e,children:[g.jsx("path",{d:"M153.092 78.5C178.275 50.84 210.393 19.4076 222.5 17.5C234.607 15.5924 239.5 30 239.5 30C239.5 30 244.137 46.596 236.388 72.8253C228.64 99.0547 199 128.5 199 128.5C199 128.5 177.5 152.5 147.5 167C147.5 167 114.686 183.001 104.889 169.159C95.0912 155.316 127.909 106.16 153.092 78.5Z"}),g.jsx("path",{d:"M8.99445 86.0801C8.99445 86.0801 -16.2682 31.1886 17.8826 14.4198C33.7618 9.56756 76 55.675 76 64.5C76 70 63.7899 86.337 59 101.5C54.887 114.52 55.557 134.266 52.0896 135.774C48.0468 137.533 37.3644 137.835 8.99445 86.0801Z"}),g.jsx("path",{d:"M47 12.5C41.0274 7.52362 41.5502 -7.59339e-06 52.5 0C63.4498 7.5934e-06 69.3348 2.24286 82.0884 7.45282C95.3718 12.8792 105.888 16.4103 109.463 23.875C111.5 32.5 107.979 33.026 103.5 38.5C99.0205 43.9741 96 44.1666 91 43.5C83.5342 42.5047 52.9726 17.4764 47 12.5Z"}),g.jsx("path",{d:"M200.048 20.8891C212.988 11.4339 207.491 2.52815 200.048 2.97405C192.604 3.41995 127.379 9.72972 89.5542 67.6673C85.4261 73.9905 72.4385 95.2439 69.1452 112.455C65.6022 130.971 65.8681 149.097 73.6272 157.74C81.0528 166.012 88.1891 164.145 92.2823 156.482C96.4277 148.721 97.4982 135.065 100.004 127.882C104.983 113.605 104.907 116.382 109.393 106.379C114.278 95.4879 120.938 86.2377 126.993 78.4363C154.543 42.9442 190.775 27.6646 200.048 20.8891Z"})]}),SW=({children:t,className:e="",hover:n=!1,variant:i="default",padding:r="md",clickable:s=!1,onClick:a})=>{const o="rounded-2xl transition-all duration-300 ease-out",l={default:"border border-gray-100 bg-white/80 backdrop-blur-sm shadow-lg",elevated:"bg-white shadow-xl border-0",outlined:"border-2 border-primary-200 bg-white",glass:"bg-white/70 backdrop-blur-md border border-white/20 shadow-xl"},c={none:"",sm:"p-4",md:"p-6",lg:"p-8"},h=n?"hover:shadow-2xl hover:-translate-y-1 hover:scale-[1.02]":"",d=s?"cursor-pointer active:scale-[0.98]":"";return g.jsx("div",{className:`${o} ${l[i]} ${c[r]} ${h} ${d} ${e}`,onClick:s?a:void 0,role:s?"button":void 0,tabIndex:s?0:void 0,children:t})},FT=({isOpen:t,onClose:e,title:n,children:i,footer:r,size:s="md",hideHeader:a=!1,hideCloseButton:o=!1,className:l=""})=>{const[c,h]=x.useState(!1);if(x.useEffect(()=>{const f=p=>{p.key==="Escape"&&e()};return document.addEventListener("keydown",f),()=>document.removeEventListener("keydown",f)},[e]),x.useEffect(()=>{window.getComputedStyle(document.body).overflow;const f=document.getElementById("admin-main-content");return t?(document.body.style.overflow="hidden",f&&(window.getComputedStyle(f).overflow,f.style.overflow="hidden")):(document.body.style.overflow="",f&&(f.style.overflow="")),()=>{document.body.style.overflow="",f&&(f.style.overflow="")}},[t]),x.useEffect(()=>{if(t){h(!0);const f=setTimeout(()=>{h(!1)},1e3);return()=>clearTimeout(f)}},[t,s,i]),!t)return null;const d={sm:"max-w-sm",md:"max-w-md",lg:"max-w-lg",xl:"max-w-2xl"};return typeof document<"u"?lC.createPortal(g.jsx("div",{className:"fixed inset-0 z-[120] flex items-center justify-center bg-black/60 p-4 backdrop-blur-sm animate-fade-in",role:"dialog","aria-modal":"true","aria-labelledby":n?"modal-title":void 0,onClick:e,children:g.jsx("div",{className:`relative w-full transform transition-all ${d[s]} ${l} max-h-[90vh] flex flex-col animate-scale-in`,onClick:f=>f.stopPropagation(),children:g.jsxs(SW,{variant:"elevated",className:"rounded-3xl p-0 shadow-2xl flex flex-col max-h-full overflow-hidden bg-white",children:[!o&&g.jsx("button",{onClick:e,className:"absolute right-6 top-6 z-10 rounded-full p-2 text-gray-400 transition-all hover:bg-gray-100 hover:text-gray-600 active:scale-95","aria-label":"Close modal",children:g.jsx(gd,{className:"h-6 w-6"})}),!a&&n&&g.jsx("div",{className:"px-8 pt-8 pb-2 flex-shrink-0",children:g.jsx("h3",{id:"modal-title",className:"text-2xl font-bold text-gray-900",children:n})}),g.jsx("div",{className:`${a&&!n?"p-6 pb-10":"px-6 py-6 pb-10"} overflow-y-auto custom-scrollbar ${c?"scrollbar-flash":""} flex-1`,children:i}),r&&g.jsx("div",{className:"flex justify-end gap-3 px-6 pb-2 pt-2 flex-shrink-0",children:r})]})})}),document.body):null},IW=()=>g.jsxs("svg",{className:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[g.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),g.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),g.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l3.66-2.84z",fill:"#FBBC05"}),g.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),xW=()=>g.jsx("svg",{className:"h-5 w-5",viewBox:"0 0 24 24",fill:"#1877F2",xmlns:"http://www.w3.org/2000/svg",children:g.jsx("path",{d:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"})}),RW=({onForgotPassword:t,onRegister:e,onSuccess:n,onVerificationNeeded:i})=>{const[r,s]=x.useState(""),[a,o]=x.useState(""),[l,c]=x.useState(!1),[h,d]=x.useState(!1),[f,p]=x.useState(!1),[w,E]=x.useState(!1),[R,b]=x.useState(!1),[v,_]=x.useState(null),{login:S,signInWithGoogle:k,signInWithFacebook:O}=oa(),A=async P=>{if(P.preventDefault(),!r||!a){_("Please fill in all fields");return}p(!0),_(null),console.log(" LoginForm submitting:",{email:r,password:a,rememberMe:l});try{const D=await S(r,a,l),V=["sa@gmail.com","admin@rushcoffee.com","test@gmail.com","danirie@gmail.com","de@gmail.com","admin@rushcoffee.ph"];D.needsVerification&&D.userId&&!V.includes(r)?i(r,D.userId,D.role):n(D.role)}catch(D){console.error("Login error:",D),D.code==="auth/invalid-credential"||D.code==="auth/user-not-found"||D.code==="auth/wrong-password"?_("Incorrect email or password."):_("Failed to login. Please try again.")}finally{p(!1)}},T=async()=>{E(!0),_(null);try{const P=await k();n(P.role)}catch(P){console.error("Google Sign-In Error:",P),P.code==="auth/popup-closed-by-user"?_("Sign-in cancelled."):P.code==="auth/popup-blocked"?_("Pop-up blocked. Please allow pop-ups for this site."):P.code==="auth/operation-not-allowed"?_("Google Sign-In is not enabled in Firebase Console."):_(P.message||"Failed to sign in with Google")}finally{E(!1)}},I=async()=>{b(!0),_(null);try{const P=await O();n(P.role)}catch(P){console.error("Facebook Sign-In Error:",P),P.code==="auth/popup-closed-by-user"?_("Sign-in cancelled."):P.code==="auth/popup-blocked"?_("Pop-up blocked. Please allow pop-ups for this site."):P.code==="auth/operation-not-allowed"?_("Facebook Sign-In is not enabled in Firebase Console."):P.code==="auth/account-exists-with-different-credential"?_("An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address."):_(P.message||"Failed to sign in with Facebook")}finally{b(!1)}};return g.jsxs("div",{className:"w-full max-w-md mx-auto",children:[g.jsxs("div",{className:"text-center mb-8",children:[g.jsx(Vr,{className:"mx-auto h-16 w-16 text-primary-600 mb-4"}),g.jsx("h2",{className:"font-display text-4xl font-bold text-gray-900",children:"Rush Coffee"})]}),g.jsxs("form",{onSubmit:A,className:"space-y-4",children:[v&&g.jsxs("div",{className:"flex items-start gap-2 rounded-lg bg-red-50 p-3 text-sm text-red-800 border border-red-200",children:[g.jsx(Kb,{className:"h-5 w-5 flex-shrink-0"}),g.jsx("span",{children:v})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email address"}),g.jsxs("div",{className:"relative",children:[g.jsx(Wp,{className:"absolute left-4 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),g.jsx("input",{type:"email",value:r,onChange:P=>s(P.target.value),className:"w-full pl-12 pr-4 py-3.5 bg-primary-50 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 focus:bg-white transition-all placeholder:text-gray-400",placeholder:"name@example.com"})]})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),g.jsxs("div",{className:"relative",children:[g.jsx(Nv,{className:"absolute left-4 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),g.jsx("input",{type:h?"text":"password",value:a,onChange:P=>o(P.target.value),className:"w-full pl-12 pr-12 py-3.5 bg-primary-50 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 focus:bg-white transition-all placeholder:text-gray-400",placeholder:"Enter your password"}),g.jsx("button",{type:"button",onClick:()=>d(!h),className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors",children:h?g.jsx(fN,{className:"h-5 w-5"}):g.jsx(mN,{className:"h-5 w-5"})})]})]}),g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("label",{className:"flex items-center cursor-pointer",children:[g.jsx("input",{type:"checkbox",checked:l,onChange:P=>c(P.target.checked),className:"w-4 h-4 rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),g.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Remember me"})]}),g.jsx("button",{type:"button",onClick:()=>t(r),className:"text-sm text-primary-600 hover:text-primary-700 font-medium transition-colors",children:"Forgot your password?"})]}),g.jsx("button",{type:"submit",disabled:f,className:"w-full bg-primary-600 hover:bg-primary-700 text-white font-semibold py-3.5 rounded-xl transition-all transform hover:scale-[1.02] active:scale-[0.98] disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none shadow-md hover:shadow-lg",children:f?g.jsxs("span",{className:"flex items-center justify-center gap-2",children:[g.jsx(_r,{className:"h-5 w-5 animate-spin"}),"Logging in..."]}):"Login"}),g.jsxs("div",{className:"relative my-6",children:[g.jsx("div",{className:"absolute inset-0 flex items-center",children:g.jsx("div",{className:"w-full border-t border-gray-200"})}),g.jsx("div",{className:"relative flex justify-center text-sm",children:g.jsx("span",{className:"px-4 bg-white text-gray-500",children:"Or continue with"})})]}),g.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[g.jsxs("button",{type:"button",onClick:T,disabled:w||R,className:"flex items-center justify-center gap-2 border-2 border-gray-200 hover:border-gray-300 hover:bg-gray-50 py-3.5 rounded-xl transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:[w?g.jsx(_r,{className:"h-5 w-5 animate-spin"}):g.jsx(IW,{}),g.jsx("span",{className:"font-semibold text-gray-700",children:"Google"})]}),g.jsxs("button",{type:"button",onClick:I,disabled:w||R,className:"flex items-center justify-center gap-2 border-2 border-gray-200 hover:border-gray-300 hover:bg-gray-50 py-3.5 rounded-xl transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:[R?g.jsx(_r,{className:"h-5 w-5 animate-spin"}):g.jsx(xW,{}),g.jsx("span",{className:"font-semibold text-gray-700",children:"Facebook"})]})]}),g.jsxs("p",{className:"text-center text-sm text-gray-600 mt-6",children:["Don't have an account?"," ",g.jsx("button",{type:"button",onClick:e,className:"text-primary-600 font-semibold hover:text-primary-700 transition-colors",children:"Sign up"})]})]})]})},CW=x.createContext(void 0),PW=()=>{const t=x.useContext(CW);return t||{executeRecaptcha:async()=>"mock-token"}},NW=({onLogin:t,onSuccess:e,onVerificationNeeded:n})=>{const[i,r]=x.useState({firstName:"",lastName:"",email:"",phone:"",password:"",confirmPassword:""}),[s,a]=x.useState(!1),[o,l]=x.useState(!1),[c,h]=x.useState(null),{register:d}=oa(),{executeRecaptcha:f}=PW(),p=async w=>{if(w.preventDefault(),h(null),i.password!==i.confirmPassword){h("Passwords don't match");return}if(!i.email.endsWith("@gmail.com")){h("Only @gmail.com addresses are allowed");return}l(!0);try{await f();const E=await d(i.email,i.password,i.firstName,i.lastName,i.phone);n(i.email,E.uid,E.role)}catch(E){h(E.message||"Failed to register")}finally{l(!1)}};return g.jsxs("div",{className:"w-full max-w-2xl mx-auto",children:[g.jsxs("div",{className:"text-center mb-6",children:[g.jsx(Vr,{className:"mx-auto h-16 w-16 text-primary-600 mb-4"}),g.jsx("h2",{className:"font-display text-4xl font-bold text-gray-900",children:"Join Rush Coffee"}),g.jsxs("p",{className:"mt-2 text-gray-600 flex items-center justify-center gap-1",children:["Start skipping the line today ",g.jsx("span",{children:""})]})]}),g.jsxs("form",{onSubmit:p,className:"space-y-4",children:[c&&g.jsxs("div",{className:"flex items-start gap-2 rounded-lg bg-red-50 p-3 text-sm text-red-800 border border-red-200",children:[g.jsx(Kb,{className:"h-5 w-5 flex-shrink-0"}),g.jsx("span",{children:c})]}),g.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"First Name"}),g.jsxs("div",{className:"relative",children:[g.jsx(kv,{className:"absolute left-4 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),g.jsx("input",{type:"text",required:!0,value:i.firstName,onChange:w=>r({...i,firstName:w.target.value}),className:"w-full pl-12 pr-4 py-3.5 bg-primary-50 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 focus:bg-white transition-all placeholder:text-gray-400",placeholder:"Enter first name"})]})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Last Name"}),g.jsxs("div",{className:"relative",children:[g.jsx(kv,{className:"absolute left-4 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),g.jsx("input",{type:"text",required:!0,value:i.lastName,onChange:w=>r({...i,lastName:w.target.value}),className:"w-full pl-12 pr-4 py-3.5 bg-primary-50 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 focus:bg-white transition-all placeholder:text-gray-400",placeholder:"Enter last name"})]})]})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email address"}),g.jsxs("div",{className:"relative",children:[g.jsx(Wp,{className:"absolute left-4 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),g.jsx("input",{type:"email",required:!0,value:i.email,onChange:w=>{const E=w.target.value;r({...i,email:E}),E&&!E.endsWith("@gmail.com")?h("Only @gmail.com addresses are allowed"):h(null)},className:"w-full pl-12 pr-4 py-3.5 bg-primary-50 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 focus:bg-white transition-all placeholder:text-gray-400",placeholder:"name@gmail.com"})]})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number (Optional)"}),g.jsxs("div",{className:"relative",children:[g.jsx(Wb,{className:"absolute left-4 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),g.jsx("input",{type:"tel",value:i.phone,onChange:w=>r({...i,phone:w.target.value}),className:"w-full pl-12 pr-4 py-3.5 bg-primary-50 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 focus:bg-white transition-all placeholder:text-gray-400",placeholder:"09xxxxxxxxx"})]})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),g.jsxs("div",{className:"relative",children:[g.jsx(Nv,{className:"absolute left-4 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),g.jsx("input",{type:s?"text":"password",required:!0,value:i.password,onChange:w=>r({...i,password:w.target.value}),className:"w-full pl-12 pr-12 py-3.5 bg-primary-50 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 focus:bg-white transition-all placeholder:text-gray-400",placeholder:"Create a password"}),g.jsx("button",{type:"button",onClick:()=>a(!s),className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors",children:s?g.jsx(fN,{className:"h-5 w-5"}):g.jsx(mN,{className:"h-5 w-5"})})]})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm Password"}),g.jsxs("div",{className:"relative",children:[g.jsx(Nv,{className:"absolute left-4 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),g.jsx("input",{type:s?"text":"password",required:!0,value:i.confirmPassword,onChange:w=>r({...i,confirmPassword:w.target.value}),className:"w-full pl-12 pr-4 py-3.5 bg-primary-50 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 focus:bg-white transition-all placeholder:text-gray-400",placeholder:"Confirm your password"})]})]}),g.jsx("button",{type:"submit",disabled:o,className:"w-full bg-primary-600 hover:bg-primary-700 text-white font-semibold py-3.5 rounded-xl transition-all transform hover:scale-[1.02] active:scale-[0.98] disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none shadow-md hover:shadow-lg",children:o?g.jsxs("span",{className:"flex items-center justify-center gap-2",children:[g.jsx(_r,{className:"h-5 w-5 animate-spin"}),"Creating account..."]}):"Create Account"}),g.jsxs("p",{className:"text-center text-sm text-gray-600 mt-6",children:["Already have an account?"," ",g.jsx("button",{type:"button",onClick:t,className:"text-primary-600 font-semibold hover:text-primary-700 transition-colors",children:"Login"})]})]})]})},DW=({onBack:t,initialEmail:e=""})=>{const[n,i]=x.useState(e),[r,s]=x.useState(!1),[a,o]=x.useState(null),[l,c]=x.useState(null),{sendPasswordReset:h}=oa(),d=async f=>{if(f.preventDefault(),!n){c("Email is required");return}s(!0),c(null),o(null),console.log("Attempting to send password reset email to:",n);try{await h(n),console.log("Password reset email sent successfully"),o("Password reset link sent! Please check your email.")}catch(p){console.error("Password reset error:",p),p.code==="auth/user-not-found"?c("No account found with this email address."):p.code==="auth/invalid-email"?c("Please enter a valid email address."):c(p.message||"Failed to send reset link")}finally{s(!1)}};return g.jsxs("form",{onSubmit:d,className:"space-y-4",children:[g.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Enter your email address and we'll send you a link to reset your password."}),l&&g.jsxs("div",{className:"flex items-start gap-2 rounded-lg bg-red-50 p-3 text-sm text-red-800",children:[g.jsx(Kb,{className:"h-5 w-5 flex-shrink-0"}),g.jsx("span",{children:l})]}),a&&g.jsxs("div",{className:"flex items-start gap-2 rounded-lg bg-green-50 p-3 text-sm text-green-800",children:[g.jsx(dN,{className:"h-5 w-5 flex-shrink-0"}),g.jsx("span",{children:a})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email address"}),g.jsxs("div",{className:"relative",children:[g.jsx(Wp,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),g.jsx("input",{type:"email",value:n,onChange:f=>i(f.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"admin@rushcoffee.ph"})]})]}),g.jsx("button",{type:"submit",disabled:r||!!a,className:"w-full bg-primary-600 hover:bg-primary-700 text-white font-semibold py-3 rounded-xl transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:r?g.jsxs("span",{className:"flex items-center justify-center gap-2",children:[g.jsx(_r,{className:"h-5 w-5 animate-spin"}),"Sending Link..."]}):a?"Link Sent":"Send Reset Link"}),g.jsxs("button",{type:"button",onClick:t,className:"w-full flex items-center justify-center gap-2 text-gray-600 hover:text-gray-900 font-medium py-2 transition-colors",children:[g.jsx(hN,{className:"h-4 w-4"}),"Back to Login"]})]})},kW=({isOpen:t,onClose:e,initialView:n="login",onVerificationNeeded:i,onAuthSuccess:r})=>{const[s,a]=ul.useState(n),[o,l]=ul.useState("");return ul.useEffect(()=>{t&&(a(n),l(""))},[t,n]),g.jsxs(FT,{isOpen:t,onClose:e,hideHeader:!0,size:s==="register"?"xl":"md",children:[s==="login"&&g.jsx(RW,{onForgotPassword:c=>{l(c),a("forgot-password")},onRegister:()=>a("register"),onSuccess:c=>r(c),onVerificationNeeded:(c,h,d)=>i==null?void 0:i(c,h,d)},"login"),s==="register"&&g.jsx(NW,{onLogin:()=>a("login"),onSuccess:()=>r(),onVerificationNeeded:(c,h,d)=>i==null?void 0:i(c,h,d)},"register"),s==="forgot-password"&&g.jsx(DW,{initialEmail:o,onBack:()=>a("login")},"forgot-password")]})},VW=({email:t,onVerify:e,onBack:n,onResend:i})=>{const[r,s]=x.useState(["","","","","",""]),[a,o]=x.useState(!1),[l,c]=x.useState(null),[h,d]=x.useState(30),f=x.useRef([]);x.useEffect(()=>{if(h>0){const v=setTimeout(()=>d(h-1),1e3);return()=>clearTimeout(v)}},[h]);const p=(v,_)=>{var k;if(_.length>1)return;const S=[...r];S[v]=_,s(S),_&&v<5&&((k=f.current[v+1])==null||k.focus())},w=(v,_)=>{var S;_.key==="Backspace"&&!r[v]&&v>0&&((S=f.current[v-1])==null||S.focus())},E=v=>{var k;v.preventDefault();const _=v.clipboardData.getData("text").slice(0,6).split(""),S=[...r];_.forEach((O,A)=>{A<6&&(S[A]=O)}),s(S),_.length===6&&((k=f.current[5])==null||k.focus())},R=async v=>{v.preventDefault();const _=r.join("");if(_.length!==6){c("Please enter the complete 6-digit code");return}o(!0),c(null);try{await e(_)}catch(S){c(S.message||"Verification failed"),o(!1)}},b=async()=>{h>0||(await i(),d(30))};return g.jsxs("form",{onSubmit:R,className:"space-y-8",children:[g.jsxs("div",{className:"text-center",children:[g.jsx(Vr,{className:"mx-auto h-16 w-16 text-coffee-600 mb-4"}),g.jsx("h2",{className:"font-display text-3xl font-bold text-gray-900 mb-2",children:"Verify Your Email"}),g.jsx("p",{className:"text-gray-600 mb-2",children:"We've sent a verification code to"}),g.jsx("p",{className:"text-lg font-bold text-coffee-700",children:t})]}),g.jsx("div",{className:"flex justify-center gap-3",children:r.map((v,_)=>g.jsx("input",{ref:S=>f.current[_]=S,type:"text",maxLength:1,value:v,onChange:S=>p(_,S.target.value),onKeyDown:S=>w(_,S),onPaste:E,className:"w-12 h-14 sm:w-14 sm:h-16 text-center text-2xl font-bold bg-coffee-50 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-coffee-500 focus:border-coffee-500 transition-all placeholder:text-gray-300",placeholder:""},_))}),l&&g.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm text-red-600 bg-red-50 p-3 rounded-lg border border-red-100",children:[g.jsx(Tj,{className:"h-4 w-4"}),g.jsx("span",{children:l})]}),g.jsx("button",{type:"submit",disabled:a||r.join("").length!==6,className:"w-full bg-coffee-600 hover:bg-coffee-700 text-white font-semibold py-4 rounded-xl transition-all transform hover:scale-[1.02] active:scale-[0.98] disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none shadow-md hover:shadow-lg",children:a?g.jsxs("span",{className:"flex items-center justify-center gap-2",children:[g.jsx(_r,{className:"h-5 w-5 animate-spin"}),"Verifying..."]}):"Verify Account"}),g.jsxs("div",{className:"flex items-center justify-between text-sm pt-2",children:[g.jsxs("button",{type:"button",onClick:n,className:"flex items-center gap-2 text-gray-500 hover:text-gray-900 font-medium transition-colors group",children:[g.jsx(hN,{className:"h-4 w-4 transition-transform group-hover:-translate-x-1"}),"Back to Login"]}),g.jsxs("button",{type:"button",onClick:b,disabled:h>0,className:`flex items-center gap-2 font-medium transition-colors ${h>0?"text-gray-400 cursor-not-allowed":"text-coffee-600 hover:text-coffee-700"}`,children:[g.jsx(_j,{className:`h-4 w-4 ${h>0?"animate-spin":""}`}),h>0?`Resend in ${h}s`:"Resend Code"]})]})]})},OW=({isOpen:t,onClose:e,email:n,userId:i,onSuccess:r,onBackToLogin:s,onResend:a})=>{const{verifyEmailCode:o}=oa(),l=async()=>{a?await a():(console.log("Resending code for user",i),await new Promise(h=>setTimeout(h,1e3)))},c=async h=>{if(!i)throw new Error("User ID is missing. Cannot verify.");if(await o(i,h))r();else throw new Error("Invalid verification code. Please check the console or try again.")};return g.jsx(FT,{isOpen:t,onClose:e,hideHeader:!0,size:"md",children:g.jsx(VW,{email:n,onVerify:c,onBack:s||e,onResend:l})})},MW=[{href:"/",label:"Home"},{href:"/about",label:"About"},{href:"/menu",label:"Menu"},{href:"/contact",label:"Contact"}],LW=[{href:"/menu",label:"Menu"},{href:"/queue",label:"Queue"},{href:"/rewards",label:"Rewards"}],Ix=[{href:"/profile",label:"My Profile",Icon:kv},{href:"/rewards",label:"My Rewards",Icon:nj},{href:"/about",label:"About",Icon:pN},{href:"/contact",label:"Contact",Icon:Wb}],UW=()=>{const[t,e]=x.useState(!1),[n,i]=x.useState(!1),r=x.useRef(null),[s,a]=x.useState(!1),[o,l]=x.useState("login"),[c,h]=x.useState(!1),[d,f]=x.useState(""),[p,w]=x.useState(""),{currentUser:E,logout:R}=oa(),{totalCartItems:b,openCart:v}=ZO(),_=_c(),S=fi(),[k]=P3(),O=S.pathname==="/auth/verify-email",A=sessionStorage.getItem("requires2FA")==="true",T=E&&!O&&!A&&!s&&S.pathname!=="/",I=T?LW:MW,P=()=>e(!1),D=W=>{l(W),a(!0),P()};x.useEffect(()=>{const W=k.get("auth");W==="login"?(l("login"),a(!0)):W==="register"&&(l("register"),a(!0))},[k]);const V=(W,de,Nt)=>{a(!1),f(W),w(de),h(!0)},N=W=>{a(!1),h(!1),sessionStorage.removeItem("requires2FA");const de=W||(E==null?void 0:E.role);_(de==="admin"?"/admin":de==="employee"?"/employee":"/menu")},H=()=>{h(!1),sessionStorage.removeItem("requires2FA"),R()},ie=()=>{h(!1),sessionStorage.removeItem("requires2FA"),R(),l("login"),a(!0)};x.useEffect(()=>{const W=de=>{r.current&&!r.current.contains(de.target)&&i(!1)};return document.addEventListener("mousedown",W),()=>document.removeEventListener("mousedown",W)},[]),x.useEffect(()=>{const W=()=>{window.innerWidth>=768&&e(!1)};return window.addEventListener("resize",W),()=>window.removeEventListener("resize",W)},[]),x.useEffect(()=>(t?document.body.style.overflow="hidden":document.body.style.overflow="auto",()=>{document.body.style.overflow="auto"}),[t]);const z=async()=>{await R(),P(),i(!1),_("/")},Y=()=>e(!t),J=(W=!1)=>{var St,mi;const de="rounded-full text-sm font-semibold transition-colors",Nt="block w-full text-center py-3 text-base",At="px-6 py-2";if(T&&E){const Ao=`${((St=E.firstName)==null?void 0:St.charAt(0))||""}${((mi=E.lastName)==null?void 0:mi.charAt(0))||""}`.toUpperCase();return g.jsxs("div",{className:`relative ${W?"w-full":""}`,ref:r,children:[g.jsx("button",{onClick:()=>i(!n),className:`flex items-center justify-center transition-colors focus:outline-none ${W?"w-full gap-3 rounded-xl border border-gray-200 p-3 hover:bg-gray-50":`h-10 w-10 rounded-full ${E.photoURL?"ring-2 ring-primary-100":"bg-primary-600 text-white hover:bg-primary-700"} shadow-sm overflow-hidden`}`,"aria-label":"User menu","aria-haspopup":"true","aria-expanded":n,children:W?g.jsxs(g.Fragment,{children:[g.jsx("div",{className:`flex h-10 w-10 items-center justify-center rounded-full ${E.photoURL?"":"bg-primary-600 text-white"} overflow-hidden`,children:E.photoURL?g.jsx("img",{src:E.photoURL,alt:"Profile",className:"h-full w-full object-cover"}):g.jsx("span",{className:"text-sm font-bold",children:Ao})}),g.jsxs("div",{className:"flex flex-col items-start",children:[g.jsxs("span",{className:"text-sm font-bold text-gray-900",children:[E.firstName," ",E.lastName]}),g.jsx("span",{className:"text-xs text-gray-500",children:E.email})]}),g.jsx($3,{className:`ml-auto h-4 w-4 text-gray-400 transition-transform ${n?"rotate-180":""}`})]}):E.photoURL?g.jsx("img",{src:E.photoURL,alt:"Profile",className:"h-full w-full object-cover"}):g.jsx("span",{className:"text-sm font-bold",children:Ao})}),n&&!W&&g.jsx("div",{className:"absolute right-0 mt-2 w-56 origin-top-right rounded-md bg-white shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none animate-fade-in-up",children:g.jsxs("div",{className:"py-1",role:"menu","aria-orientation":"vertical",children:[g.jsxs("div",{className:"px-4 py-3 border-b border-gray-100",children:[g.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[E.firstName," ",E.lastName]}),g.jsx("p",{className:"text-xs text-gray-500 truncate",children:E.email})]}),Ix.map(Gr=>g.jsxs(gi,{to:Gr.href,onClick:()=>i(!1),className:({isActive:Vc})=>`flex items-center gap-3 px-4 py-2 text-sm transition-colors hover:bg-gray-100 ${Vc?"text-primary-600 font-semibold":"text-gray-700"}`,role:"menuitem",children:[g.jsx(Gr.Icon,{className:"h-4 w-4"}),Gr.label]},Gr.label)),(E.role==="employee"||E.role==="admin")&&g.jsxs(g.Fragment,{children:[g.jsx("hr",{className:"my-1"}),g.jsxs(gi,{to:"/employee",onClick:()=>i(!1),className:"flex items-center gap-3 px-4 py-2 text-sm font-semibold text-blue-700 transition-colors hover:bg-blue-50",role:"menuitem",children:[g.jsx(vf,{className:"h-4 w-4"}),"Employee Portal"]})]}),E.role==="admin"&&g.jsxs(gi,{to:"/admin",onClick:()=>i(!1),className:"flex items-center gap-3 px-4 py-2 text-sm font-semibold text-yellow-700 transition-colors hover:bg-yellow-50",role:"menuitem",children:[g.jsx(vf,{className:"h-4 w-4"}),"Admin Dashboard"]}),g.jsx("hr",{className:"my-1"}),g.jsxs("button",{onClick:z,className:"flex w-full items-center gap-3 px-4 py-2 text-left text-sm text-red-600 transition-colors hover:bg-red-50",role:"menuitem",children:[g.jsx(sI,{className:"h-4 w-4"}),"Logout"]})]})})]})}return g.jsxs("div",{className:`flex items-center ${W?"flex-col space-y-3":"gap-4"}`,children:[g.jsx("button",{onClick:()=>D("login"),className:`${de} border border-primary-600 text-primary-600 hover:bg-primary-50 ${W?Nt:At}`,children:"Login"}),g.jsx("button",{onClick:()=>D("register"),className:`${de} bg-primary-600 text-white shadow-sm hover:bg-primary-700 ${W?Nt:At}`,children:"Sign Up"})]})},ne=()=>g.jsxs("button",{onClick:v,className:"relative rounded-full p-2 text-gray-700 transition hover:bg-gray-100","aria-label":`Open cart with ${b} items`,children:[g.jsx(Sj,{className:"h-6 w-6"}),b>0&&g.jsx("span",{className:"absolute -top-1 -right-1 flex h-5 w-5 items-center justify-center rounded-full bg-red-500 text-xs font-bold text-white","aria-hidden":"true",children:b})]});return g.jsxs(g.Fragment,{children:[g.jsx("header",{className:"sticky top-0 z-50 w-full border-b border-gray-200/80 bg-white/95 shadow-md backdrop-blur-sm",children:g.jsxs("div",{className:"container mx-auto flex h-16 items-center justify-between px-4 sm:h-20 sm:px-6 lg:px-8 md:grid md:grid-cols-3",children:[g.jsxs(gi,{to:E?"/menu":"/",className:"flex items-center gap-2 flex-shrink-0 md:justify-self-start",children:[g.jsx(Vr,{className:"h-7 w-7 text-primary-600 sm:h-8 sm:w-8"}),g.jsx("span",{className:"text-lg font-bold text-primary-600 whitespace-nowrap sm:text-2xl",children:"Rush Coffee"})]}),g.jsx("nav",{className:"hidden items-center justify-center space-x-8 md:flex md:justify-self-center",children:I.map(W=>g.jsx(gi,{to:W.href,className:({isActive:de})=>`relative text-sm font-normal uppercase transition-colors hover:text-primary-600 ${de?"text-primary-600":"text-gray-700"} after:absolute after:bottom-0 after:left-0 after:h-[1px] after:w-full after:origin-center after:transform after:bg-primary-600 after:transition-transform after:duration-300 ${de?"after:scale-x-100":"after:scale-x-0"} hover:after:scale-x-100`,children:W.label},W.label))}),g.jsxs("div",{className:"hidden items-center justify-end gap-4 md:flex md:justify-self-end",children:[J(),T&&g.jsx(ne,{})]}),g.jsxs("div",{className:"flex items-center justify-end gap-2 md:hidden",children:[T&&g.jsx(ne,{}),g.jsx("button",{onClick:Y,className:"rounded-md p-2 text-gray-700 transition hover:bg-gray-100","aria-label":"Toggle menu","aria-expanded":t,children:g.jsx(fj,{className:"h-6 w-6"})})]})]})}),g.jsxs("div",{className:`fixed inset-0 z-[60] md:hidden ${t?"pointer-events-auto":"pointer-events-none"}`,children:[g.jsx("div",{className:`absolute inset-0 bg-black/60 backdrop-blur-sm transition-opacity duration-300 ${t?"opacity-100":"opacity-0"}`,onClick:P,"aria-hidden":"true"}),g.jsxs("div",{className:`absolute top-0 right-0 h-full w-4/5 max-w-sm transform bg-white shadow-2xl transition-transform duration-300 ease-out ${t?"translate-x-0":"translate-x-full"}`,role:"dialog","aria-modal":"true","aria-labelledby":"mobile-menu-title",children:[g.jsxs("div",{className:"flex items-center justify-between border-b p-4",children:[g.jsxs(gi,{to:E?"/menu":"/",className:"flex items-center gap-2",onClick:P,children:[g.jsx(Vr,{className:"h-7 w-7 text-primary-600"}),g.jsx("span",{id:"mobile-menu-title",className:"text-xl font-bold text-primary-600",children:"Rush Coffee"})]}),g.jsx("button",{onClick:P,className:"rounded-full p-2 text-gray-500 transition hover:bg-gray-100 hover:text-gray-700","aria-label":"Close menu",children:g.jsx(gd,{className:"h-6 w-6"})})]}),g.jsxs("nav",{className:"flex flex-1 flex-col gap-2 overflow-y-auto p-4",children:[I.map(W=>g.jsx(gi,{to:W.href,onClick:P,className:({isActive:de})=>`rounded-xl px-4 py-3 text-lg font-medium transition-all ${de?"bg-primary-50 text-primary-700":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"}`,children:W.label},W.label)),T&&g.jsxs("div",{className:"mt-4 border-t pt-4",children:[g.jsx("p",{className:"mb-2 px-4 text-xs font-semibold uppercase tracking-wider text-gray-400",children:"Account"}),Ix.map(W=>g.jsxs(gi,{to:W.href,onClick:P,className:({isActive:de})=>`flex items-center gap-3 rounded-xl px-4 py-3 text-base font-medium transition-all ${de?"bg-primary-50 text-primary-700":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"}`,children:[g.jsx(W.Icon,{className:"h-5 w-5"}),W.label]},W.label)),(E.role==="employee"||E.role==="admin")&&g.jsxs(gi,{to:"/employee",onClick:P,className:({isActive:W})=>`flex items-center gap-3 rounded-xl px-4 py-3 text-base font-medium transition-all ${W?"bg-blue-50 text-blue-800":"text-blue-700 hover:bg-blue-50"}`,children:[g.jsx(vf,{className:"h-5 w-5"}),"Employee Portal"]}),E.role==="admin"&&g.jsxs(gi,{to:"/admin",onClick:P,className:({isActive:W})=>`flex items-center gap-3 rounded-xl px-4 py-3 text-base font-medium transition-all ${W?"bg-yellow-50 text-yellow-800":"text-yellow-700 hover:bg-yellow-50"}`,children:[g.jsx(vf,{className:"h-5 w-5"}),"Admin Dashboard"]})]})]}),g.jsx("div",{className:"border-t p-4",children:T?g.jsxs("button",{onClick:z,className:"flex w-full items-center justify-center gap-2 rounded-xl bg-red-50 px-6 py-3 text-base font-semibold text-red-600 transition-colors hover:bg-red-100",children:[g.jsx(sI,{className:"h-5 w-5"}),"Logout"]}):J(!0)})]})]}),g.jsx(kW,{isOpen:s,onClose:()=>a(!1),initialView:o,onVerificationNeeded:V,onAuthSuccess:N}),g.jsx(OW,{isOpen:c,onClose:H,email:d,userId:p,onSuccess:()=>N(),onBackToLogin:ie})]})},jW=()=>g.jsxs("footer",{className:"relative bg-[#401a00] text-primary-100",children:[g.jsx("div",{className:"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/cubes.png')] opacity-5"}),g.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/50 to-transparent"}),g.jsxs("div",{className:"container relative z-10 mx-auto grid grid-cols-2 gap-8 px-6 py-12 md:grid-cols-2 lg:grid-cols-4",children:[g.jsxs("div",{className:"col-span-2 space-y-4 md:col-span-1 lg:col-span-1",children:[g.jsxs(Xn,{to:"/",className:"flex items-center gap-2",children:[g.jsx(Vr,{className:"h-8 w-8 text-primary-500"}),g.jsx("span",{className:"font-display text-2xl font-bold text-white",children:"Rush Coffee"})]}),g.jsx("p",{className:"font-medium text-white",children:"Premium coffee, no waiting."}),g.jsx("p",{className:"text-sm leading-relaxed text-primary-200/80",children:"Join the digital queue and get your coffee fix faster than ever. Experience the future of coffee ordering."})]}),g.jsxs("div",{children:[g.jsx("h3",{className:"mb-6 font-display text-lg font-bold text-white",children:"Quick Links"}),g.jsxs("ul",{className:"space-y-3",children:[g.jsx("li",{children:g.jsx(Xn,{to:"/",className:"transition-colors hover:text-primary-400 hover:underline",children:"Home"})}),g.jsx("li",{children:g.jsx(Xn,{to:"/about",className:"transition-colors hover:text-primary-400 hover:underline",children:"About Us"})}),g.jsx("li",{children:g.jsx(Xn,{to:"/menu",className:"transition-colors hover:text-primary-400 hover:underline",children:"Menu"})}),g.jsx("li",{children:g.jsx(Xn,{to:"/faq",className:"transition-colors hover:text-primary-400 hover:underline",children:"FAQ"})}),g.jsx("li",{children:g.jsx(Xn,{to:"/contact",className:"transition-colors hover:text-primary-400 hover:underline",children:"Contact"})})]})]}),g.jsxs("div",{children:[g.jsx("h3",{className:"mb-6 font-display text-lg font-bold text-white",children:"Legal"}),g.jsxs("ul",{className:"space-y-3",children:[g.jsx("li",{children:g.jsx(Xn,{to:"/terms",className:"transition-colors hover:text-primary-400 hover:underline",children:"Terms of Service"})}),g.jsx("li",{children:g.jsx(Xn,{to:"/privacy",className:"transition-colors hover:text-primary-400 hover:underline",children:"Privacy Policy"})}),g.jsx("li",{children:g.jsx(Xn,{to:"/cookies",className:"transition-colors hover:text-primary-400 hover:underline",children:"Cookie Policy"})})]})]}),g.jsxs("div",{className:"col-span-2 md:col-span-1 lg:col-span-1",children:[g.jsx("h3",{className:"mb-6 font-display text-lg font-bold text-white",children:"Contact & Connect"}),g.jsx("address",{className:"not-italic",children:g.jsxs("ul",{className:"space-y-4",children:[g.jsxs("li",{className:"flex items-start gap-3",children:[g.jsx(hj,{className:"mt-1 h-5 w-5 flex-shrink-0 text-primary-500"}),g.jsx("span",{children:"11 Visayan Ave. St. Galas, Quezon City, Philippines"})]}),g.jsxs("li",{className:"flex items-center gap-3",children:[g.jsx(Wb,{className:"h-5 w-5 flex-shrink-0 text-primary-500"}),g.jsx("a",{href:"tel:09304641022",className:"transition-colors hover:text-white",children:"0930 464 1022"})]}),g.jsxs("li",{className:"flex items-center gap-3",children:[g.jsx(Wp,{className:"h-5 w-5 flex-shrink-0 text-primary-500"}),g.jsx("a",{href:"mailto:hello@rushcoffee.ph",className:"transition-colors hover:text-white",children:"hello@rushcoffee.ph"})]})]})}),g.jsxs("div",{className:"mt-8 flex gap-4",children:[g.jsx("a",{href:"https://www.facebook.com/profile.php?id=61551613276320",target:"_blank",rel:"noopener noreferrer","aria-label":"Facebook",className:"rounded-full bg-white/5 p-2 transition-colors hover:bg-primary-600 hover:text-white",children:g.jsx(ej,{className:"h-5 w-5"})}),g.jsx("a",{href:"https://www.instagram.com/Rush_Coffee2023/",target:"_blank",rel:"noopener noreferrer","aria-label":"Instagram",className:"rounded-full bg-white/5 p-2 transition-colors hover:bg-primary-600 hover:text-white",children:g.jsx(sj,{className:"h-5 w-5"})})]})]})]}),g.jsx("div",{className:"relative z-10 border-t border-white/10 bg-black/20",children:g.jsxs("div",{className:"container mx-auto flex flex-col items-center justify-between gap-4 px-6 py-6 text-center text-sm text-primary-300 sm:flex-row",children:[g.jsx("p",{children:" 2023 Rush Coffee. All rights reserved."}),g.jsxs("p",{className:"flex items-center gap-1",children:["Made with ",g.jsx("span",{className:"text-red-500",children:""})," and ",g.jsx("span",{className:"text-amber-500",children:""})]})]})})]}),eM=x.createContext(void 0),tM=()=>{const t=x.useContext(eM);if(t===void 0)throw new Error("useNotification must be used within a NotificationProvider");return t},zW=({children:t})=>{const[e,n]=x.useState({message:"",type:"info",isVisible:!1}),i=x.useCallback((a,o="info")=>{n({message:a,type:o,isVisible:!0}),setTimeout(()=>{n(l=>({...l,isVisible:!1}))},5e3)},[]),r=x.useCallback(()=>{n(a=>({...a,isVisible:!1}))},[]),s={notification:e,showNotification:i,hideNotification:r};return g.jsx(eM.Provider,{value:s,children:t})},qT=x.createContext({});function HT(t){const e=x.useRef(null);return e.current===null&&(e.current=t()),e.current}const Ug=x.createContext(null),GT=x.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class BW extends x.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const i=this.props.sizeRef.current;i.height=n.offsetHeight||0,i.width=n.offsetWidth||0,i.top=n.offsetTop,i.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function FW({children:t,isPresent:e}){const n=x.useId(),i=x.useRef(null),r=x.useRef({width:0,height:0,top:0,left:0}),{nonce:s}=x.useContext(GT);return x.useInsertionEffect(()=>{const{width:a,height:o,top:l,left:c}=r.current;if(e||!i.current||!a||!o)return;i.current.dataset.motionPopId=n;const h=document.createElement("style");return s&&(h.nonce=s),document.head.appendChild(h),h.sheet&&h.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${a}px !important;
            height: ${o}px !important;
            top: ${l}px !important;
            left: ${c}px !important;
          }
        `),()=>{document.head.removeChild(h)}},[e]),g.jsx(BW,{isPresent:e,childRef:i,sizeRef:r,children:x.cloneElement(t,{ref:i})})}const qW=({children:t,initial:e,isPresent:n,onExitComplete:i,custom:r,presenceAffectsLayout:s,mode:a})=>{const o=HT(HW),l=x.useId(),c=x.useCallback(d=>{o.set(d,!0);for(const f of o.values())if(!f)return;i&&i()},[o,i]),h=x.useMemo(()=>({id:l,initial:e,isPresent:n,custom:r,onExitComplete:c,register:d=>(o.set(d,!1),()=>o.delete(d))}),s?[Math.random(),c]:[n,c]);return x.useMemo(()=>{o.forEach((d,f)=>o.set(f,!1))},[n]),x.useEffect(()=>{!n&&!o.size&&i&&i()},[n]),a==="popLayout"&&(t=g.jsx(FW,{isPresent:n,children:t})),g.jsx(Ug.Provider,{value:h,children:t})};function HW(){return new Map}function nM(t=!0){const e=x.useContext(Ug);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:i,register:r}=e,s=x.useId();x.useEffect(()=>{t&&r(s)},[t]);const a=x.useCallback(()=>t&&i&&i(s),[s,i,t]);return!n&&i?[!1,a]:[!0]}const Df=t=>t.key||"";function xx(t){const e=[];return x.Children.forEach(t,n=>{x.isValidElement(n)&&e.push(n)}),e}const $T=typeof window<"u",iM=$T?x.useLayoutEffect:x.useEffect,GW=({children:t,custom:e,initial:n=!0,onExitComplete:i,presenceAffectsLayout:r=!0,mode:s="sync",propagate:a=!1})=>{const[o,l]=nM(a),c=x.useMemo(()=>xx(t),[t]),h=a&&!o?[]:c.map(Df),d=x.useRef(!0),f=x.useRef(c),p=HT(()=>new Map),[w,E]=x.useState(c),[R,b]=x.useState(c);iM(()=>{d.current=!1,f.current=c;for(let S=0;S<R.length;S++){const k=Df(R[S]);h.includes(k)?p.delete(k):p.get(k)!==!0&&p.set(k,!1)}},[R,h.length,h.join("-")]);const v=[];if(c!==w){let S=[...c];for(let k=0;k<R.length;k++){const O=R[k],A=Df(O);h.includes(A)||(S.splice(k,0,O),v.push(O))}s==="wait"&&v.length&&(S=v),b(xx(S)),E(c);return}const{forceRender:_}=x.useContext(qT);return g.jsx(g.Fragment,{children:R.map(S=>{const k=Df(S),O=a&&!o?!1:c===R||h.includes(k),A=()=>{if(p.has(k))p.set(k,!0);else return;let T=!0;p.forEach(I=>{I||(T=!1)}),T&&(_==null||_(),b(f.current),a&&(l==null||l()),i&&i())};return g.jsx(qW,{isPresent:O,initial:!d.current||n?void 0:!1,custom:O?void 0:e,presenceAffectsLayout:r,mode:s,onExitComplete:O?void 0:A,children:S},k)})})},Hn=t=>t;let rM=Hn;function KT(t){let e;return()=>(e===void 0&&(e=t()),e)}const sc=(t,e,n)=>{const i=e-t;return i===0?1:(n-t)/i},wr=t=>t*1e3,Tr=t=>t/1e3,$W={useManualTiming:!1};function KW(t){let e=new Set,n=new Set,i=!1,r=!1;const s=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1};function o(c){s.has(c)&&(l.schedule(c),t()),c(a)}const l={schedule:(c,h=!1,d=!1)=>{const p=d&&i?e:n;return h&&s.add(c),p.has(c)||p.add(c),c},cancel:c=>{n.delete(c),s.delete(c)},process:c=>{if(a=c,i){r=!0;return}i=!0,[e,n]=[n,e],e.forEach(o),e.clear(),i=!1,r&&(r=!1,l.process(c))}};return l}const kf=["read","resolveKeyframes","update","preRender","render","postRender"],WW=40;function sM(t,e){let n=!1,i=!0;const r={delta:0,timestamp:0,isProcessing:!1},s=()=>n=!0,a=kf.reduce((b,v)=>(b[v]=KW(s),b),{}),{read:o,resolveKeyframes:l,update:c,preRender:h,render:d,postRender:f}=a,p=()=>{const b=performance.now();n=!1,r.delta=i?1e3/60:Math.max(Math.min(b-r.timestamp,WW),1),r.timestamp=b,r.isProcessing=!0,o.process(r),l.process(r),c.process(r),h.process(r),d.process(r),f.process(r),r.isProcessing=!1,n&&e&&(i=!1,t(p))},w=()=>{n=!0,i=!0,r.isProcessing||t(p)};return{schedule:kf.reduce((b,v)=>{const _=a[v];return b[v]=(S,k=!1,O=!1)=>(n||w(),_.schedule(S,k,O)),b},{}),cancel:b=>{for(let v=0;v<kf.length;v++)a[kf[v]].cancel(b)},state:r,steps:a}}const{schedule:Ge,cancel:Qs,state:jt,steps:v_}=sM(typeof requestAnimationFrame<"u"?requestAnimationFrame:Hn,!0),aM=x.createContext({strict:!1}),Rx={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},ac={};for(const t in Rx)ac[t]={isEnabled:e=>Rx[t].some(n=>!!e[n])};function QW(t){for(const e in t)ac[e]={...ac[e],...t[e]}}const YW=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function bp(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||YW.has(t)}let oM=t=>!bp(t);function XW(t){t&&(oM=e=>e.startsWith("on")?!bp(e):t(e))}try{XW(require("@emotion/is-prop-valid").default)}catch{}function JW(t,e,n){const i={};for(const r in t)r==="values"&&typeof t.values=="object"||(oM(r)||n===!0&&bp(r)||!e&&!bp(r)||t.draggable&&r.startsWith("onDrag"))&&(i[r]=t[r]);return i}function ZW(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...i)=>t(...i);return new Proxy(n,{get:(i,r)=>r==="create"?t:(e.has(r)||e.set(r,t(r)),e.get(r))})}const jg=x.createContext({});function Xh(t){return typeof t=="string"||Array.isArray(t)}function zg(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const WT=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],QT=["initial",...WT];function Bg(t){return zg(t.animate)||QT.some(e=>Xh(t[e]))}function lM(t){return!!(Bg(t)||t.variants)}function eQ(t,e){if(Bg(t)){const{initial:n,animate:i}=t;return{initial:n===!1||Xh(n)?n:void 0,animate:Xh(i)?i:void 0}}return t.inherit!==!1?e:{}}function tQ(t){const{initial:e,animate:n}=eQ(t,x.useContext(jg));return x.useMemo(()=>({initial:e,animate:n}),[Cx(e),Cx(n)])}function Cx(t){return Array.isArray(t)?t.join(" "):t}const nQ=Symbol.for("motionComponentSymbol");function sl(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function iQ(t,e,n){return x.useCallback(i=>{i&&t.onMount&&t.onMount(i),e&&(i?e.mount(i):e.unmount()),n&&(typeof n=="function"?n(i):sl(n)&&(n.current=i))},[e])}const YT=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),rQ="framerAppearId",cM="data-"+YT(rQ),{schedule:XT}=sM(queueMicrotask,!1),uM=x.createContext({});function sQ(t,e,n,i,r){var s,a;const{visualElement:o}=x.useContext(jg),l=x.useContext(aM),c=x.useContext(Ug),h=x.useContext(GT).reducedMotion,d=x.useRef(null);i=i||l.renderer,!d.current&&i&&(d.current=i(t,{visualState:e,parent:o,props:n,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:h}));const f=d.current,p=x.useContext(uM);f&&!f.projection&&r&&(f.type==="html"||f.type==="svg")&&aQ(d.current,n,r,p);const w=x.useRef(!1);x.useInsertionEffect(()=>{f&&w.current&&f.update(n,c)});const E=n[cM],R=x.useRef(!!E&&!(!((s=window.MotionHandoffIsComplete)===null||s===void 0)&&s.call(window,E))&&((a=window.MotionHasOptimisedAnimation)===null||a===void 0?void 0:a.call(window,E)));return iM(()=>{f&&(w.current=!0,window.MotionIsMounted=!0,f.updateFeatures(),XT.render(f.render),R.current&&f.animationState&&f.animationState.animateChanges())}),x.useEffect(()=>{f&&(!R.current&&f.animationState&&f.animationState.animateChanges(),R.current&&(queueMicrotask(()=>{var b;(b=window.MotionHandoffMarkAsComplete)===null||b===void 0||b.call(window,E)}),R.current=!1))}),f}function aQ(t,e,n,i){const{layoutId:r,layout:s,drag:a,dragConstraints:o,layoutScroll:l,layoutRoot:c}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:hM(t.parent)),t.projection.setOptions({layoutId:r,layout:s,alwaysMeasureLayout:!!a||o&&sl(o),visualElement:t,animationType:typeof s=="string"?s:"both",initialPromotionConfig:i,layoutScroll:l,layoutRoot:c})}function hM(t){if(t)return t.options.allowProjection!==!1?t.projection:hM(t.parent)}function oQ({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:i,Component:r}){var s,a;t&&QW(t);function o(c,h){let d;const f={...x.useContext(GT),...c,layoutId:lQ(c)},{isStatic:p}=f,w=tQ(c),E=i(c,p);if(!p&&$T){cQ();const R=uQ(f);d=R.MeasureLayout,w.visualElement=sQ(r,E,f,e,R.ProjectionNode)}return g.jsxs(jg.Provider,{value:w,children:[d&&w.visualElement?g.jsx(d,{visualElement:w.visualElement,...f}):null,n(r,c,iQ(E,w.visualElement,h),E,p,w.visualElement)]})}o.displayName=`motion.${typeof r=="string"?r:`create(${(a=(s=r.displayName)!==null&&s!==void 0?s:r.name)!==null&&a!==void 0?a:""})`}`;const l=x.forwardRef(o);return l[nQ]=r,l}function lQ({layoutId:t}){const e=x.useContext(qT).id;return e&&t!==void 0?e+"-"+t:t}function cQ(t,e){x.useContext(aM).strict}function uQ(t){const{drag:e,layout:n}=ac;if(!e&&!n)return{};const i={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}const hQ=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function JT(t){return typeof t!="string"||t.includes("-")?!1:!!(hQ.indexOf(t)>-1||/[A-Z]/u.test(t))}function Px(t){const e=[{},{}];return t==null||t.values.forEach((n,i)=>{e[0][i]=n.get(),e[1][i]=n.getVelocity()}),e}function ZT(t,e,n,i){if(typeof e=="function"){const[r,s]=Px(i);e=e(n!==void 0?n:t.custom,r,s)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[r,s]=Px(i);e=e(n!==void 0?n:t.custom,r,s)}return e}const E0=t=>Array.isArray(t),dQ=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),fQ=t=>E0(t)?t[t.length-1]||0:t,nn=t=>!!(t&&t.getVelocity);function mm(t){const e=nn(t)?t.get():t;return dQ(e)?e.toValue():e}function mQ({scrapeMotionValuesFromProps:t,createRenderState:e,onUpdate:n},i,r,s){const a={latestValues:pQ(i,r,s,t),renderState:e()};return n&&(a.onMount=o=>n({props:i,current:o,...a}),a.onUpdate=o=>n(o)),a}const dM=t=>(e,n)=>{const i=x.useContext(jg),r=x.useContext(Ug),s=()=>mQ(t,e,i,r);return n?s():HT(s)};function pQ(t,e,n,i){const r={},s=i(t,{});for(const f in s)r[f]=mm(s[f]);let{initial:a,animate:o}=t;const l=Bg(t),c=lM(t);e&&c&&!l&&t.inherit!==!1&&(a===void 0&&(a=e.initial),o===void 0&&(o=e.animate));let h=n?n.initial===!1:!1;h=h||a===!1;const d=h?o:a;if(d&&typeof d!="boolean"&&!zg(d)){const f=Array.isArray(d)?d:[d];for(let p=0;p<f.length;p++){const w=ZT(t,f[p]);if(w){const{transitionEnd:E,transition:R,...b}=w;for(const v in b){let _=b[v];if(Array.isArray(_)){const S=h?_.length-1:0;_=_[S]}_!==null&&(r[v]=_)}for(const v in E)r[v]=E[v]}}}return r}const Dc=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Eo=new Set(Dc),fM=t=>e=>typeof e=="string"&&e.startsWith(t),mM=fM("--"),gQ=fM("var(--"),eE=t=>gQ(t)?yQ.test(t.split("/*")[0].trim()):!1,yQ=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,pM=(t,e)=>e&&typeof t=="number"?e.transform(t):t,Or=(t,e,n)=>n>e?e:n<t?t:n,kc={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Jh={...kc,transform:t=>Or(0,1,t)},Vf={...kc,default:1},jd=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),rs=jd("deg"),Wi=jd("%"),re=jd("px"),_Q=jd("vh"),vQ=jd("vw"),Nx={...Wi,parse:t=>Wi.parse(t)/100,transform:t=>Wi.transform(t*100)},bQ={borderWidth:re,borderTopWidth:re,borderRightWidth:re,borderBottomWidth:re,borderLeftWidth:re,borderRadius:re,radius:re,borderTopLeftRadius:re,borderTopRightRadius:re,borderBottomRightRadius:re,borderBottomLeftRadius:re,width:re,maxWidth:re,height:re,maxHeight:re,top:re,right:re,bottom:re,left:re,padding:re,paddingTop:re,paddingRight:re,paddingBottom:re,paddingLeft:re,margin:re,marginTop:re,marginRight:re,marginBottom:re,marginLeft:re,backgroundPositionX:re,backgroundPositionY:re},wQ={rotate:rs,rotateX:rs,rotateY:rs,rotateZ:rs,scale:Vf,scaleX:Vf,scaleY:Vf,scaleZ:Vf,skew:rs,skewX:rs,skewY:rs,distance:re,translateX:re,translateY:re,translateZ:re,x:re,y:re,z:re,perspective:re,transformPerspective:re,opacity:Jh,originX:Nx,originY:Nx,originZ:re},Dx={...kc,transform:Math.round},tE={...bQ,...wQ,zIndex:Dx,size:re,fillOpacity:Jh,strokeOpacity:Jh,numOctaves:Dx},TQ={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},EQ=Dc.length;function AQ(t,e,n){let i="",r=!0;for(let s=0;s<EQ;s++){const a=Dc[s],o=t[a];if(o===void 0)continue;let l=!0;if(typeof o=="number"?l=o===(a.startsWith("scale")?1:0):l=parseFloat(o)===0,!l||n){const c=pM(o,tE[a]);if(!l){r=!1;const h=TQ[a]||a;i+=`${h}(${c}) `}n&&(e[a]=c)}}return i=i.trim(),n?i=n(e,r?"":i):r&&(i="none"),i}function nE(t,e,n){const{style:i,vars:r,transformOrigin:s}=t;let a=!1,o=!1;for(const l in e){const c=e[l];if(Eo.has(l)){a=!0;continue}else if(mM(l)){r[l]=c;continue}else{const h=pM(c,tE[l]);l.startsWith("origin")?(o=!0,s[l]=h):i[l]=h}}if(e.transform||(a||n?i.transform=AQ(e,t.transform,n):i.transform&&(i.transform="none")),o){const{originX:l="50%",originY:c="50%",originZ:h=0}=s;i.transformOrigin=`${l} ${c} ${h}`}}const SQ={offset:"stroke-dashoffset",array:"stroke-dasharray"},IQ={offset:"strokeDashoffset",array:"strokeDasharray"};function xQ(t,e,n=1,i=0,r=!0){t.pathLength=1;const s=r?SQ:IQ;t[s.offset]=re.transform(-i);const a=re.transform(e),o=re.transform(n);t[s.array]=`${a} ${o}`}function kx(t,e,n){return typeof t=="string"?t:re.transform(e+n*t)}function RQ(t,e,n){const i=kx(e,t.x,t.width),r=kx(n,t.y,t.height);return`${i} ${r}`}function iE(t,{attrX:e,attrY:n,attrScale:i,originX:r,originY:s,pathLength:a,pathSpacing:o=1,pathOffset:l=0,...c},h,d){if(nE(t,c,d),h){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:f,style:p,dimensions:w}=t;f.transform&&(w&&(p.transform=f.transform),delete f.transform),w&&(r!==void 0||s!==void 0||p.transform)&&(p.transformOrigin=RQ(w,r!==void 0?r:.5,s!==void 0?s:.5)),e!==void 0&&(f.x=e),n!==void 0&&(f.y=n),i!==void 0&&(f.scale=i),a!==void 0&&xQ(f,a,o,l,!1)}const rE=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),gM=()=>({...rE(),attrs:{}}),sE=t=>typeof t=="string"&&t.toLowerCase()==="svg";function yM(t,{style:e,vars:n},i,r){Object.assign(t.style,e,r&&r.getProjectionStyles(i));for(const s in n)t.style.setProperty(s,n[s])}const _M=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function vM(t,e,n,i){yM(t,e,void 0,i);for(const r in e.attrs)t.setAttribute(_M.has(r)?r:YT(r),e.attrs[r])}const wp={};function CQ(t){Object.assign(wp,t)}function bM(t,{layout:e,layoutId:n}){return Eo.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!wp[t]||t==="opacity")}function aE(t,e,n){var i;const{style:r}=t,s={};for(const a in r)(nn(r[a])||e.style&&nn(e.style[a])||bM(a,t)||((i=n==null?void 0:n.getValue(a))===null||i===void 0?void 0:i.liveStyle)!==void 0)&&(s[a]=r[a]);return s}function wM(t,e,n){const i=aE(t,e,n);for(const r in t)if(nn(t[r])||nn(e[r])){const s=Dc.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;i[s]=t[r]}return i}function PQ(t,e){try{e.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}const Vx=["x","y","width","height","cx","cy","r"],NQ={useVisualState:dM({scrapeMotionValuesFromProps:wM,createRenderState:gM,onUpdate:({props:t,prevProps:e,current:n,renderState:i,latestValues:r})=>{if(!n)return;let s=!!t.drag;if(!s){for(const o in r)if(Eo.has(o)){s=!0;break}}if(!s)return;let a=!e;if(e)for(let o=0;o<Vx.length;o++){const l=Vx[o];t[l]!==e[l]&&(a=!0)}a&&Ge.read(()=>{PQ(n,i),Ge.render(()=>{iE(i,r,sE(n.tagName),t.transformTemplate),vM(n,i)})})}})},DQ={useVisualState:dM({scrapeMotionValuesFromProps:aE,createRenderState:rE})};function TM(t,e,n){for(const i in e)!nn(e[i])&&!bM(i,n)&&(t[i]=e[i])}function kQ({transformTemplate:t},e){return x.useMemo(()=>{const n=rE();return nE(n,e,t),Object.assign({},n.vars,n.style)},[e])}function VQ(t,e){const n=t.style||{},i={};return TM(i,n,t),Object.assign(i,kQ(t,e)),i}function OQ(t,e){const n={},i=VQ(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=i,n}function MQ(t,e,n,i){const r=x.useMemo(()=>{const s=gM();return iE(s,e,sE(i),t.transformTemplate),{...s.attrs,style:{...s.style}}},[e]);if(t.style){const s={};TM(s,t.style,t),r.style={...s,...r.style}}return r}function LQ(t=!1){return(n,i,r,{latestValues:s},a)=>{const l=(JT(n)?MQ:OQ)(i,s,a,n),c=JW(i,typeof n=="string",t),h=n!==x.Fragment?{...c,...l,ref:r}:{},{children:d}=i,f=x.useMemo(()=>nn(d)?d.get():d,[d]);return x.createElement(n,{...h,children:f})}}function UQ(t,e){return function(i,{forwardMotionProps:r}={forwardMotionProps:!1}){const a={...JT(i)?NQ:DQ,preloadedFeatures:t,useRender:LQ(r),createVisualElement:e,Component:i};return oQ(a)}}function EM(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let i=0;i<n;i++)if(e[i]!==t[i])return!1;return!0}function Fg(t,e,n){const i=t.getProps();return ZT(i,e,n!==void 0?n:i.custom,t)}const jQ=KT(()=>window.ScrollTimeline!==void 0);class zQ{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,n){for(let i=0;i<this.animations.length;i++)this.animations[i][e]=n}attachTimeline(e,n){const i=this.animations.map(r=>{if(jQ()&&r.attachTimeline)return r.attachTimeline(e);if(typeof n=="function")return n(r)});return()=>{i.forEach((r,s)=>{r&&r(),this.animations[s].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let n=0;n<this.animations.length;n++)e=Math.max(e,this.animations[n].duration);return e}runAll(e){this.animations.forEach(n=>n[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class BQ extends zQ{then(e,n){return Promise.all(this.animations).then(e).catch(n)}}function oE(t,e){return t?t[e]||t.default||t:void 0}const A0=2e4;function AM(t){let e=0;const n=50;let i=t.next(e);for(;!i.done&&e<A0;)e+=n,i=t.next(e);return e>=A0?1/0:e}function lE(t){return typeof t=="function"}function Ox(t,e){t.timeline=e,t.onfinish=null}const cE=t=>Array.isArray(t)&&typeof t[0]=="number",FQ={linearEasing:void 0};function qQ(t,e){const n=KT(t);return()=>{var i;return(i=FQ[e])!==null&&i!==void 0?i:n()}}const Tp=qQ(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),SM=(t,e,n=10)=>{let i="";const r=Math.max(Math.round(e/n),2);for(let s=0;s<r;s++)i+=t(sc(0,r-1,s))+", ";return`linear(${i.substring(0,i.length-2)})`};function IM(t){return!!(typeof t=="function"&&Tp()||!t||typeof t=="string"&&(t in S0||Tp())||cE(t)||Array.isArray(t)&&t.every(IM))}const Cu=([t,e,n,i])=>`cubic-bezier(${t}, ${e}, ${n}, ${i})`,S0={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Cu([0,.65,.55,1]),circOut:Cu([.55,0,1,.45]),backIn:Cu([.31,.01,.66,-.59]),backOut:Cu([.33,1.53,.69,.99])};function xM(t,e){if(t)return typeof t=="function"&&Tp()?SM(t,e):cE(t)?Cu(t):Array.isArray(t)?t.map(n=>xM(n,e)||S0.easeOut):S0[t]}const yi={x:!1,y:!1};function RM(){return yi.x||yi.y}function HQ(t,e,n){var i;if(t instanceof Element)return[t];if(typeof t=="string"){let r=document;const s=(i=void 0)!==null&&i!==void 0?i:r.querySelectorAll(t);return s?Array.from(s):[]}return Array.from(t)}function CM(t,e){const n=HQ(t),i=new AbortController,r={passive:!0,...e,signal:i.signal};return[n,r,()=>i.abort()]}function Mx(t){return e=>{e.pointerType==="touch"||RM()||t(e)}}function GQ(t,e,n={}){const[i,r,s]=CM(t,n),a=Mx(o=>{const{target:l}=o,c=e(o);if(typeof c!="function"||!l)return;const h=Mx(d=>{c(d),l.removeEventListener("pointerleave",h)});l.addEventListener("pointerleave",h,r)});return i.forEach(o=>{o.addEventListener("pointerenter",a,r)}),s}const PM=(t,e)=>e?t===e?!0:PM(t,e.parentElement):!1,uE=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,$Q=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function KQ(t){return $Q.has(t.tagName)||t.tabIndex!==-1}const Pu=new WeakSet;function Lx(t){return e=>{e.key==="Enter"&&t(e)}}function b_(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const WQ=(t,e)=>{const n=t.currentTarget;if(!n)return;const i=Lx(()=>{if(Pu.has(n))return;b_(n,"down");const r=Lx(()=>{b_(n,"up")}),s=()=>b_(n,"cancel");n.addEventListener("keyup",r,e),n.addEventListener("blur",s,e)});n.addEventListener("keydown",i,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",i),e)};function Ux(t){return uE(t)&&!RM()}function QQ(t,e,n={}){const[i,r,s]=CM(t,n),a=o=>{const l=o.currentTarget;if(!Ux(o)||Pu.has(l))return;Pu.add(l);const c=e(o),h=(p,w)=>{window.removeEventListener("pointerup",d),window.removeEventListener("pointercancel",f),!(!Ux(p)||!Pu.has(l))&&(Pu.delete(l),typeof c=="function"&&c(p,{success:w}))},d=p=>{h(p,n.useGlobalTarget||PM(l,p.target))},f=p=>{h(p,!1)};window.addEventListener("pointerup",d,r),window.addEventListener("pointercancel",f,r)};return i.forEach(o=>{!KQ(o)&&o.getAttribute("tabindex")===null&&(o.tabIndex=0),(n.useGlobalTarget?window:o).addEventListener("pointerdown",a,r),o.addEventListener("focus",c=>WQ(c,r),r)}),s}function YQ(t){return t==="x"||t==="y"?yi[t]?null:(yi[t]=!0,()=>{yi[t]=!1}):yi.x||yi.y?null:(yi.x=yi.y=!0,()=>{yi.x=yi.y=!1})}const NM=new Set(["width","height","top","left","right","bottom",...Dc]);let pm;function XQ(){pm=void 0}const Qi={now:()=>(pm===void 0&&Qi.set(jt.isProcessing||$W.useManualTiming?jt.timestamp:performance.now()),pm),set:t=>{pm=t,queueMicrotask(XQ)}};function hE(t,e){t.indexOf(e)===-1&&t.push(e)}function dE(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class fE{constructor(){this.subscriptions=[]}add(e){return hE(this.subscriptions,e),()=>dE(this.subscriptions,e)}notify(e,n,i){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](e,n,i);else for(let s=0;s<r;s++){const a=this.subscriptions[s];a&&a(e,n,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function DM(t,e){return e?t*(1e3/e):0}const jx=30,JQ=t=>!isNaN(parseFloat(t));class ZQ{constructor(e,n={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(i,r=!0)=>{const s=Qi.now();this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(i),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),r&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=Qi.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=JQ(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new fE);const i=this.events[e].add(n);return e==="change"?()=>{i(),Ge.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,i){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-i}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Qi.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>jx)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,jx);return DM(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Zh(t,e){return new ZQ(t,e)}function eY(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Zh(n))}function tY(t,e){const n=Fg(t,e);let{transitionEnd:i={},transition:r={},...s}=n||{};s={...s,...i};for(const a in s){const o=fQ(s[a]);eY(t,a,o)}}function nY(t){return!!(nn(t)&&t.add)}function I0(t,e){const n=t.getValue("willChange");if(nY(n))return n.add(e)}function kM(t){return t.props[cM]}const VM=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,iY=1e-7,rY=12;function sY(t,e,n,i,r){let s,a,o=0;do a=e+(n-e)/2,s=VM(a,i,r)-t,s>0?n=a:e=a;while(Math.abs(s)>iY&&++o<rY);return a}function zd(t,e,n,i){if(t===e&&n===i)return Hn;const r=s=>sY(s,0,1,t,n);return s=>s===0||s===1?s:VM(r(s),e,i)}const OM=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,MM=t=>e=>1-t(1-e),LM=zd(.33,1.53,.69,.99),mE=MM(LM),UM=OM(mE),jM=t=>(t*=2)<1?.5*mE(t):.5*(2-Math.pow(2,-10*(t-1))),pE=t=>1-Math.sin(Math.acos(t)),zM=MM(pE),BM=OM(pE),FM=t=>/^0[^.\s]+$/u.test(t);function aY(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||FM(t):!0}const lh=t=>Math.round(t*1e5)/1e5,gE=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function oY(t){return t==null}const lY=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,yE=(t,e)=>n=>!!(typeof n=="string"&&lY.test(n)&&n.startsWith(t)||e&&!oY(n)&&Object.prototype.hasOwnProperty.call(n,e)),qM=(t,e,n)=>i=>{if(typeof i!="string")return i;const[r,s,a,o]=i.match(gE);return{[t]:parseFloat(r),[e]:parseFloat(s),[n]:parseFloat(a),alpha:o!==void 0?parseFloat(o):1}},cY=t=>Or(0,255,t),w_={...kc,transform:t=>Math.round(cY(t))},Oa={test:yE("rgb","red"),parse:qM("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:i=1})=>"rgba("+w_.transform(t)+", "+w_.transform(e)+", "+w_.transform(n)+", "+lh(Jh.transform(i))+")"};function uY(t){let e="",n="",i="",r="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),i=t.substring(5,7),r=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),i=t.substring(3,4),r=t.substring(4,5),e+=e,n+=n,i+=i,r+=r),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(i,16),alpha:r?parseInt(r,16)/255:1}}const x0={test:yE("#"),parse:uY,transform:Oa.transform},al={test:yE("hsl","hue"),parse:qM("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:i=1})=>"hsla("+Math.round(t)+", "+Wi.transform(lh(e))+", "+Wi.transform(lh(n))+", "+lh(Jh.transform(i))+")"},Jt={test:t=>Oa.test(t)||x0.test(t)||al.test(t),parse:t=>Oa.test(t)?Oa.parse(t):al.test(t)?al.parse(t):x0.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Oa.transform(t):al.transform(t)},hY=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function dY(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(gE))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(hY))===null||n===void 0?void 0:n.length)||0)>0}const HM="number",GM="color",fY="var",mY="var(",zx="${}",pY=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function ed(t){const e=t.toString(),n=[],i={color:[],number:[],var:[]},r=[];let s=0;const o=e.replace(pY,l=>(Jt.test(l)?(i.color.push(s),r.push(GM),n.push(Jt.parse(l))):l.startsWith(mY)?(i.var.push(s),r.push(fY),n.push(l)):(i.number.push(s),r.push(HM),n.push(parseFloat(l))),++s,zx)).split(zx);return{values:n,split:o,indexes:i,types:r}}function $M(t){return ed(t).values}function KM(t){const{split:e,types:n}=ed(t),i=e.length;return r=>{let s="";for(let a=0;a<i;a++)if(s+=e[a],r[a]!==void 0){const o=n[a];o===HM?s+=lh(r[a]):o===GM?s+=Jt.transform(r[a]):s+=r[a]}return s}}const gY=t=>typeof t=="number"?0:t;function yY(t){const e=$M(t);return KM(t)(e.map(gY))}const Ys={test:dY,parse:$M,createTransformer:KM,getAnimatableNone:yY},_Y=new Set(["brightness","contrast","saturate","opacity"]);function vY(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[i]=n.match(gE)||[];if(!i)return t;const r=n.replace(i,"");let s=_Y.has(e)?1:0;return i!==n&&(s*=100),e+"("+s+r+")"}const bY=/\b([a-z-]*)\(.*?\)/gu,R0={...Ys,getAnimatableNone:t=>{const e=t.match(bY);return e?e.map(vY).join(" "):t}},wY={...tE,color:Jt,backgroundColor:Jt,outlineColor:Jt,fill:Jt,stroke:Jt,borderColor:Jt,borderTopColor:Jt,borderRightColor:Jt,borderBottomColor:Jt,borderLeftColor:Jt,filter:R0,WebkitFilter:R0},_E=t=>wY[t];function WM(t,e){let n=_E(t);return n!==R0&&(n=Ys),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const TY=new Set(["auto","none","0"]);function EY(t,e,n){let i=0,r;for(;i<t.length&&!r;){const s=t[i];typeof s=="string"&&!TY.has(s)&&ed(s).values.length&&(r=t[i]),i++}if(r&&n)for(const s of e)t[s]=WM(n,r)}const Bx=t=>t===kc||t===re,Fx=(t,e)=>parseFloat(t.split(", ")[e]),qx=(t,e)=>(n,{transform:i})=>{if(i==="none"||!i)return 0;const r=i.match(/^matrix3d\((.+)\)$/u);if(r)return Fx(r[1],e);{const s=i.match(/^matrix\((.+)\)$/u);return s?Fx(s[1],t):0}},AY=new Set(["x","y","z"]),SY=Dc.filter(t=>!AY.has(t));function IY(t){const e=[];return SY.forEach(n=>{const i=t.getValue(n);i!==void 0&&(e.push([n,i.get()]),i.set(n.startsWith("scale")?1:0))}),e}const oc={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:qx(4,13),y:qx(5,14)};oc.translateX=oc.x;oc.translateY=oc.y;const Ga=new Set;let C0=!1,P0=!1;function QM(){if(P0){const t=Array.from(Ga).filter(i=>i.needsMeasurement),e=new Set(t.map(i=>i.element)),n=new Map;e.forEach(i=>{const r=IY(i);r.length&&(n.set(i,r),i.render())}),t.forEach(i=>i.measureInitialState()),e.forEach(i=>{i.render();const r=n.get(i);r&&r.forEach(([s,a])=>{var o;(o=i.getValue(s))===null||o===void 0||o.set(a)})}),t.forEach(i=>i.measureEndState()),t.forEach(i=>{i.suspendedScrollY!==void 0&&window.scrollTo(0,i.suspendedScrollY)})}P0=!1,C0=!1,Ga.forEach(t=>t.complete()),Ga.clear()}function YM(){Ga.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(P0=!0)})}function xY(){YM(),QM()}class vE{constructor(e,n,i,r,s,a=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=i,this.motionValue=r,this.element=s,this.isAsync=a}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Ga.add(this),C0||(C0=!0,Ge.read(YM),Ge.resolveKeyframes(QM))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:i,motionValue:r}=this;for(let s=0;s<e.length;s++)if(e[s]===null)if(s===0){const a=r==null?void 0:r.get(),o=e[e.length-1];if(a!==void 0)e[0]=a;else if(i&&n){const l=i.readValue(n,o);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=o),r&&a===void 0&&r.set(e[0])}else e[s]=e[s-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Ga.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Ga.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const XM=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),RY=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function CY(t){const e=RY.exec(t);if(!e)return[,];const[,n,i,r]=e;return[`--${n??i}`,r]}function JM(t,e,n=1){const[i,r]=CY(t);if(!i)return;const s=window.getComputedStyle(e).getPropertyValue(i);if(s){const a=s.trim();return XM(a)?parseFloat(a):a}return eE(r)?JM(r,e,n+1):r}const ZM=t=>e=>e.test(t),PY={test:t=>t==="auto",parse:t=>t},eL=[kc,re,Wi,rs,vQ,_Q,PY],Hx=t=>eL.find(ZM(t));class tL extends vE{constructor(e,n,i,r,s){super(e,n,i,r,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:i}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let c=e[l];if(typeof c=="string"&&(c=c.trim(),eE(c))){const h=JM(c,n.current);h!==void 0&&(e[l]=h),l===e.length-1&&(this.finalKeyframe=c)}}if(this.resolveNoneKeyframes(),!NM.has(i)||e.length!==2)return;const[r,s]=e,a=Hx(r),o=Hx(s);if(a!==o)if(Bx(a)&&Bx(o))for(let l=0;l<e.length;l++){const c=e[l];typeof c=="string"&&(e[l]=parseFloat(c))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,i=[];for(let r=0;r<e.length;r++)aY(e[r])&&i.push(r);i.length&&EY(e,i,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:i}=this;if(!e||!e.current)return;i==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=oc[i](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const r=n[n.length-1];r!==void 0&&e.getValue(i,r).jump(r,!1)}measureEndState(){var e;const{element:n,name:i,unresolvedKeyframes:r}=this;if(!n||!n.current)return;const s=n.getValue(i);s&&s.jump(this.measuredOrigin,!1);const a=r.length-1,o=r[a];r[a]=oc[i](n.measureViewportBox(),window.getComputedStyle(n.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([l,c])=>{n.getValue(l).set(c)}),this.resolveNoneKeyframes()}}const Gx=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Ys.test(t)||t==="0")&&!t.startsWith("url("));function NY(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function DY(t,e,n,i){const r=t[0];if(r===null)return!1;if(e==="display"||e==="visibility")return!0;const s=t[t.length-1],a=Gx(r,e),o=Gx(s,e);return!a||!o?!1:NY(t)||(n==="spring"||lE(n))&&i}const kY=t=>t!==null;function qg(t,{repeat:e,repeatType:n="loop"},i){const r=t.filter(kY),s=e&&n!=="loop"&&e%2===1?0:r.length-1;return!s||i===void 0?r[s]:i}const VY=40;class nL{constructor({autoplay:e=!0,delay:n=0,type:i="keyframes",repeat:r=0,repeatDelay:s=0,repeatType:a="loop",...o}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=Qi.now(),this.options={autoplay:e,delay:n,type:i,repeat:r,repeatDelay:s,repeatType:a,...o},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>VY?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&xY(),this._resolved}onKeyframesResolved(e,n){this.resolvedAt=Qi.now(),this.hasAttemptedResolve=!0;const{name:i,type:r,velocity:s,delay:a,onComplete:o,onUpdate:l,isGenerator:c}=this.options;if(!c&&!DY(e,i,r,s))if(a)this.options.duration=0;else{l&&l(qg(e,this.options,n)),o&&o(),this.resolveFinishedPromise();return}const h=this.initPlayback(e,n);h!==!1&&(this._resolved={keyframes:e,finalKeyframe:n,...h},this.onPostResolved())}onPostResolved(){}then(e,n){return this.currentFinishedPromise.then(e,n)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const et=(t,e,n)=>t+(e-t)*n;function T_(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function OY({hue:t,saturation:e,lightness:n,alpha:i}){t/=360,e/=100,n/=100;let r=0,s=0,a=0;if(!e)r=s=a=n;else{const o=n<.5?n*(1+e):n+e-n*e,l=2*n-o;r=T_(l,o,t+1/3),s=T_(l,o,t),a=T_(l,o,t-1/3)}return{red:Math.round(r*255),green:Math.round(s*255),blue:Math.round(a*255),alpha:i}}function Ep(t,e){return n=>n>0?e:t}const E_=(t,e,n)=>{const i=t*t,r=n*(e*e-i)+i;return r<0?0:Math.sqrt(r)},MY=[x0,Oa,al],LY=t=>MY.find(e=>e.test(t));function $x(t){const e=LY(t);if(!e)return!1;let n=e.parse(t);return e===al&&(n=OY(n)),n}const Kx=(t,e)=>{const n=$x(t),i=$x(e);if(!n||!i)return Ep(t,e);const r={...n};return s=>(r.red=E_(n.red,i.red,s),r.green=E_(n.green,i.green,s),r.blue=E_(n.blue,i.blue,s),r.alpha=et(n.alpha,i.alpha,s),Oa.transform(r))},UY=(t,e)=>n=>e(t(n)),Bd=(...t)=>t.reduce(UY),N0=new Set(["none","hidden"]);function jY(t,e){return N0.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function zY(t,e){return n=>et(t,e,n)}function bE(t){return typeof t=="number"?zY:typeof t=="string"?eE(t)?Ep:Jt.test(t)?Kx:qY:Array.isArray(t)?iL:typeof t=="object"?Jt.test(t)?Kx:BY:Ep}function iL(t,e){const n=[...t],i=n.length,r=t.map((s,a)=>bE(s)(s,e[a]));return s=>{for(let a=0;a<i;a++)n[a]=r[a](s);return n}}function BY(t,e){const n={...t,...e},i={};for(const r in n)t[r]!==void 0&&e[r]!==void 0&&(i[r]=bE(t[r])(t[r],e[r]));return r=>{for(const s in i)n[s]=i[s](r);return n}}function FY(t,e){var n;const i=[],r={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const a=e.types[s],o=t.indexes[a][r[a]],l=(n=t.values[o])!==null&&n!==void 0?n:0;i[s]=l,r[a]++}return i}const qY=(t,e)=>{const n=Ys.createTransformer(e),i=ed(t),r=ed(e);return i.indexes.var.length===r.indexes.var.length&&i.indexes.color.length===r.indexes.color.length&&i.indexes.number.length>=r.indexes.number.length?N0.has(t)&&!r.values.length||N0.has(e)&&!i.values.length?jY(t,e):Bd(iL(FY(i,r),r.values),n):Ep(t,e)};function rL(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?et(t,e,n):bE(t)(t,e)}const HY=5;function sL(t,e,n){const i=Math.max(e-HY,0);return DM(n-t(i),e-i)}const at={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},A_=.001;function GY({duration:t=at.duration,bounce:e=at.bounce,velocity:n=at.velocity,mass:i=at.mass}){let r,s,a=1-e;a=Or(at.minDamping,at.maxDamping,a),t=Or(at.minDuration,at.maxDuration,Tr(t)),a<1?(r=c=>{const h=c*a,d=h*t,f=h-n,p=D0(c,a),w=Math.exp(-d);return A_-f/p*w},s=c=>{const d=c*a*t,f=d*n+n,p=Math.pow(a,2)*Math.pow(c,2)*t,w=Math.exp(-d),E=D0(Math.pow(c,2),a);return(-r(c)+A_>0?-1:1)*((f-p)*w)/E}):(r=c=>{const h=Math.exp(-c*t),d=(c-n)*t+1;return-A_+h*d},s=c=>{const h=Math.exp(-c*t),d=(n-c)*(t*t);return h*d});const o=5/t,l=KY(r,s,o);if(t=wr(t),isNaN(l))return{stiffness:at.stiffness,damping:at.damping,duration:t};{const c=Math.pow(l,2)*i;return{stiffness:c,damping:a*2*Math.sqrt(i*c),duration:t}}}const $Y=12;function KY(t,e,n){let i=n;for(let r=1;r<$Y;r++)i=i-t(i)/e(i);return i}function D0(t,e){return t*Math.sqrt(1-e*e)}const WY=["duration","bounce"],QY=["stiffness","damping","mass"];function Wx(t,e){return e.some(n=>t[n]!==void 0)}function YY(t){let e={velocity:at.velocity,stiffness:at.stiffness,damping:at.damping,mass:at.mass,isResolvedFromDuration:!1,...t};if(!Wx(t,QY)&&Wx(t,WY))if(t.visualDuration){const n=t.visualDuration,i=2*Math.PI/(n*1.2),r=i*i,s=2*Or(.05,1,1-(t.bounce||0))*Math.sqrt(r);e={...e,mass:at.mass,stiffness:r,damping:s}}else{const n=GY(t);e={...e,...n,mass:at.mass},e.isResolvedFromDuration=!0}return e}function aL(t=at.visualDuration,e=at.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:i,restDelta:r}=n;const s=n.keyframes[0],a=n.keyframes[n.keyframes.length-1],o={done:!1,value:s},{stiffness:l,damping:c,mass:h,duration:d,velocity:f,isResolvedFromDuration:p}=YY({...n,velocity:-Tr(n.velocity||0)}),w=f||0,E=c/(2*Math.sqrt(l*h)),R=a-s,b=Tr(Math.sqrt(l/h)),v=Math.abs(R)<5;i||(i=v?at.restSpeed.granular:at.restSpeed.default),r||(r=v?at.restDelta.granular:at.restDelta.default);let _;if(E<1){const k=D0(b,E);_=O=>{const A=Math.exp(-E*b*O);return a-A*((w+E*b*R)/k*Math.sin(k*O)+R*Math.cos(k*O))}}else if(E===1)_=k=>a-Math.exp(-b*k)*(R+(w+b*R)*k);else{const k=b*Math.sqrt(E*E-1);_=O=>{const A=Math.exp(-E*b*O),T=Math.min(k*O,300);return a-A*((w+E*b*R)*Math.sinh(T)+k*R*Math.cosh(T))/k}}const S={calculatedDuration:p&&d||null,next:k=>{const O=_(k);if(p)o.done=k>=d;else{let A=0;E<1&&(A=k===0?wr(w):sL(_,k,O));const T=Math.abs(A)<=i,I=Math.abs(a-O)<=r;o.done=T&&I}return o.value=o.done?a:O,o},toString:()=>{const k=Math.min(AM(S),A0),O=SM(A=>S.next(k*A).value,k,30);return k+"ms "+O}};return S}function Qx({keyframes:t,velocity:e=0,power:n=.8,timeConstant:i=325,bounceDamping:r=10,bounceStiffness:s=500,modifyTarget:a,min:o,max:l,restDelta:c=.5,restSpeed:h}){const d=t[0],f={done:!1,value:d},p=T=>o!==void 0&&T<o||l!==void 0&&T>l,w=T=>o===void 0?l:l===void 0||Math.abs(o-T)<Math.abs(l-T)?o:l;let E=n*e;const R=d+E,b=a===void 0?R:a(R);b!==R&&(E=b-d);const v=T=>-E*Math.exp(-T/i),_=T=>b+v(T),S=T=>{const I=v(T),P=_(T);f.done=Math.abs(I)<=c,f.value=f.done?b:P};let k,O;const A=T=>{p(f.value)&&(k=T,O=aL({keyframes:[f.value,w(f.value)],velocity:sL(_,T,f.value),damping:r,stiffness:s,restDelta:c,restSpeed:h}))};return A(0),{calculatedDuration:null,next:T=>{let I=!1;return!O&&k===void 0&&(I=!0,S(T),A(T)),k!==void 0&&T>=k?O.next(T-k):(!I&&S(T),f)}}}const XY=zd(.42,0,1,1),JY=zd(0,0,.58,1),oL=zd(.42,0,.58,1),ZY=t=>Array.isArray(t)&&typeof t[0]!="number",eX={linear:Hn,easeIn:XY,easeInOut:oL,easeOut:JY,circIn:pE,circInOut:BM,circOut:zM,backIn:mE,backInOut:UM,backOut:LM,anticipate:jM},Yx=t=>{if(cE(t)){rM(t.length===4);const[e,n,i,r]=t;return zd(e,n,i,r)}else if(typeof t=="string")return eX[t];return t};function tX(t,e,n){const i=[],r=n||rL,s=t.length-1;for(let a=0;a<s;a++){let o=r(t[a],t[a+1]);if(e){const l=Array.isArray(e)?e[a]||Hn:e;o=Bd(l,o)}i.push(o)}return i}function nX(t,e,{clamp:n=!0,ease:i,mixer:r}={}){const s=t.length;if(rM(s===e.length),s===1)return()=>e[0];if(s===2&&e[0]===e[1])return()=>e[1];const a=t[0]===t[1];t[0]>t[s-1]&&(t=[...t].reverse(),e=[...e].reverse());const o=tX(e,i,r),l=o.length,c=h=>{if(a&&h<t[0])return e[0];let d=0;if(l>1)for(;d<t.length-2&&!(h<t[d+1]);d++);const f=sc(t[d],t[d+1],h);return o[d](f)};return n?h=>c(Or(t[0],t[s-1],h)):c}function iX(t,e){const n=t[t.length-1];for(let i=1;i<=e;i++){const r=sc(0,e,i);t.push(et(n,1,r))}}function rX(t){const e=[0];return iX(e,t.length-1),e}function sX(t,e){return t.map(n=>n*e)}function aX(t,e){return t.map(()=>e||oL).splice(0,t.length-1)}function Ap({duration:t=300,keyframes:e,times:n,ease:i="easeInOut"}){const r=ZY(i)?i.map(Yx):Yx(i),s={done:!1,value:e[0]},a=sX(n&&n.length===e.length?n:rX(e),t),o=nX(a,e,{ease:Array.isArray(r)?r:aX(e,r)});return{calculatedDuration:t,next:l=>(s.value=o(l),s.done=l>=t,s)}}const oX=t=>{const e=({timestamp:n})=>t(n);return{start:()=>Ge.update(e,!0),stop:()=>Qs(e),now:()=>jt.isProcessing?jt.timestamp:Qi.now()}},lX={decay:Qx,inertia:Qx,tween:Ap,keyframes:Ap,spring:aL},cX=t=>t/100;class wE extends nL{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:l}=this.options;l&&l()};const{name:n,motionValue:i,element:r,keyframes:s}=this.options,a=(r==null?void 0:r.KeyframeResolver)||vE,o=(l,c)=>this.onKeyframesResolved(l,c);this.resolver=new a(s,o,n,i,r),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:n="keyframes",repeat:i=0,repeatDelay:r=0,repeatType:s,velocity:a=0}=this.options,o=lE(n)?n:lX[n]||Ap;let l,c;o!==Ap&&typeof e[0]!="number"&&(l=Bd(cX,rL(e[0],e[1])),e=[0,100]);const h=o({...this.options,keyframes:e});s==="mirror"&&(c=o({...this.options,keyframes:[...e].reverse(),velocity:-a})),h.calculatedDuration===null&&(h.calculatedDuration=AM(h));const{calculatedDuration:d}=h,f=d+r,p=f*(i+1)-r;return{generator:h,mirroredGenerator:c,mapPercentToKeyframes:l,calculatedDuration:d,resolvedDuration:f,totalDuration:p}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,n=!1){const{resolved:i}=this;if(!i){const{keyframes:T}=this.options;return{done:!0,value:T[T.length-1]}}const{finalKeyframe:r,generator:s,mirroredGenerator:a,mapPercentToKeyframes:o,keyframes:l,calculatedDuration:c,totalDuration:h,resolvedDuration:d}=i;if(this.startTime===null)return s.next(0);const{delay:f,repeat:p,repeatType:w,repeatDelay:E,onUpdate:R}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-h/this.speed,this.startTime)),n?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const b=this.currentTime-f*(this.speed>=0?1:-1),v=this.speed>=0?b<0:b>h;this.currentTime=Math.max(b,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=h);let _=this.currentTime,S=s;if(p){const T=Math.min(this.currentTime,h)/d;let I=Math.floor(T),P=T%1;!P&&T>=1&&(P=1),P===1&&I--,I=Math.min(I,p+1),!!(I%2)&&(w==="reverse"?(P=1-P,E&&(P-=E/d)):w==="mirror"&&(S=a)),_=Or(0,1,P)*d}const k=v?{done:!1,value:l[0]}:S.next(_);o&&(k.value=o(k.value));let{done:O}=k;!v&&c!==null&&(O=this.speed>=0?this.currentTime>=h:this.currentTime<=0);const A=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&O);return A&&r!==void 0&&(k.value=qg(l,this.options,r)),R&&R(k.value),A&&this.finish(),k}get duration(){const{resolved:e}=this;return e?Tr(e.calculatedDuration):0}get time(){return Tr(this.currentTime)}set time(e){e=wr(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=Tr(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=oX,onPlay:n,startTime:i}=this.options;this.driver||(this.driver=e(s=>this.tick(s))),n&&n();const r=this.driver.now();this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=r):this.startTime=i??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const uX=new Set(["opacity","clipPath","filter","transform"]);function hX(t,e,n,{delay:i=0,duration:r=300,repeat:s=0,repeatType:a="loop",ease:o="easeInOut",times:l}={}){const c={[e]:n};l&&(c.offset=l);const h=xM(o,r);return Array.isArray(h)&&(c.easing=h),t.animate(c,{delay:i,duration:r,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:s+1,direction:a==="reverse"?"alternate":"normal"})}const dX=KT(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),Sp=10,fX=2e4;function mX(t){return lE(t.type)||t.type==="spring"||!IM(t.ease)}function pX(t,e){const n=new wE({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let i={done:!1,value:t[0]};const r=[];let s=0;for(;!i.done&&s<fX;)i=n.sample(s),r.push(i.value),s+=Sp;return{times:void 0,keyframes:r,duration:s-Sp,ease:"linear"}}const lL={anticipate:jM,backInOut:UM,circInOut:BM};function gX(t){return t in lL}class Xx extends nL{constructor(e){super(e);const{name:n,motionValue:i,element:r,keyframes:s}=this.options;this.resolver=new tL(s,(a,o)=>this.onKeyframesResolved(a,o),n,i,r),this.resolver.scheduleResolve()}initPlayback(e,n){let{duration:i=300,times:r,ease:s,type:a,motionValue:o,name:l,startTime:c}=this.options;if(!o.owner||!o.owner.current)return!1;if(typeof s=="string"&&Tp()&&gX(s)&&(s=lL[s]),mX(this.options)){const{onComplete:d,onUpdate:f,motionValue:p,element:w,...E}=this.options,R=pX(e,E);e=R.keyframes,e.length===1&&(e[1]=e[0]),i=R.duration,r=R.times,s=R.ease,a="keyframes"}const h=hX(o.owner.current,l,e,{...this.options,duration:i,times:r,ease:s});return h.startTime=c??this.calcStartTime(),this.pendingTimeline?(Ox(h,this.pendingTimeline),this.pendingTimeline=void 0):h.onfinish=()=>{const{onComplete:d}=this.options;o.set(qg(e,this.options,n)),d&&d(),this.cancel(),this.resolveFinishedPromise()},{animation:h,duration:i,times:r,type:a,ease:s,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:n}=e;return Tr(n)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:n}=e;return Tr(n.currentTime||0)}set time(e){const{resolved:n}=this;if(!n)return;const{animation:i}=n;i.currentTime=wr(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:n}=e;return n.playbackRate}set speed(e){const{resolved:n}=this;if(!n)return;const{animation:i}=n;i.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:n}=e;return n.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:n}=e;return n.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:n}=this;if(!n)return Hn;const{animation:i}=n;Ox(i,e)}return Hn}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:n,keyframes:i,duration:r,type:s,ease:a,times:o}=e;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:c,onUpdate:h,onComplete:d,element:f,...p}=this.options,w=new wE({...p,keyframes:i,duration:r,type:s,ease:a,times:o,isGenerator:!0}),E=wr(this.time);c.setWithVelocity(w.sample(E-Sp).value,w.sample(E).value,Sp)}const{onStop:l}=this.options;l&&l(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:n,name:i,repeatDelay:r,repeatType:s,damping:a,type:o}=e;if(!n||!n.owner||!(n.owner.current instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:c}=n.owner.getProps();return dX()&&i&&uX.has(i)&&!l&&!c&&!r&&s!=="mirror"&&a!==0&&o!=="inertia"}}const yX={type:"spring",stiffness:500,damping:25,restSpeed:10},_X=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),vX={type:"keyframes",duration:.8},bX={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},wX=(t,{keyframes:e})=>e.length>2?vX:Eo.has(t)?t.startsWith("scale")?_X(e[1]):yX:bX;function TX({when:t,delay:e,delayChildren:n,staggerChildren:i,staggerDirection:r,repeat:s,repeatType:a,repeatDelay:o,from:l,elapsed:c,...h}){return!!Object.keys(h).length}const TE=(t,e,n,i={},r,s)=>a=>{const o=oE(i,t)||{},l=o.delay||i.delay||0;let{elapsed:c=0}=i;c=c-wr(l);let h={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...o,delay:-c,onUpdate:f=>{e.set(f),o.onUpdate&&o.onUpdate(f)},onComplete:()=>{a(),o.onComplete&&o.onComplete()},name:t,motionValue:e,element:s?void 0:r};TX(o)||(h={...h,...wX(t,h)}),h.duration&&(h.duration=wr(h.duration)),h.repeatDelay&&(h.repeatDelay=wr(h.repeatDelay)),h.from!==void 0&&(h.keyframes[0]=h.from);let d=!1;if((h.type===!1||h.duration===0&&!h.repeatDelay)&&(h.duration=0,h.delay===0&&(d=!0)),d&&!s&&e.get()!==void 0){const f=qg(h.keyframes,o);if(f!==void 0)return Ge.update(()=>{h.onUpdate(f),h.onComplete()}),new BQ([])}return!s&&Xx.supports(h)?new Xx(h):new wE(h)};function EX({protectedKeys:t,needsAnimating:e},n){const i=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,i}function cL(t,e,{delay:n=0,transitionOverride:i,type:r}={}){var s;let{transition:a=t.getDefaultTransition(),transitionEnd:o,...l}=e;i&&(a=i);const c=[],h=r&&t.animationState&&t.animationState.getState()[r];for(const d in l){const f=t.getValue(d,(s=t.latestValues[d])!==null&&s!==void 0?s:null),p=l[d];if(p===void 0||h&&EX(h,d))continue;const w={delay:n,...oE(a||{},d)};let E=!1;if(window.MotionHandoffAnimation){const b=kM(t);if(b){const v=window.MotionHandoffAnimation(b,d,Ge);v!==null&&(w.startTime=v,E=!0)}}I0(t,d),f.start(TE(d,f,p,t.shouldReduceMotion&&NM.has(d)?{type:!1}:w,t,E));const R=f.animation;R&&c.push(R)}return o&&Promise.all(c).then(()=>{Ge.update(()=>{o&&tY(t,o)})}),c}function k0(t,e,n={}){var i;const r=Fg(t,e,n.type==="exit"?(i=t.presenceContext)===null||i===void 0?void 0:i.custom:void 0);let{transition:s=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(s=n.transitionOverride);const a=r?()=>Promise.all(cL(t,r,n)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(c=0)=>{const{delayChildren:h=0,staggerChildren:d,staggerDirection:f}=s;return AX(t,e,h+c,d,f,n)}:()=>Promise.resolve(),{when:l}=s;if(l){const[c,h]=l==="beforeChildren"?[a,o]:[o,a];return c().then(()=>h())}else return Promise.all([a(),o(n.delay)])}function AX(t,e,n=0,i=0,r=1,s){const a=[],o=(t.variantChildren.size-1)*i,l=r===1?(c=0)=>c*i:(c=0)=>o-c*i;return Array.from(t.variantChildren).sort(SX).forEach((c,h)=>{c.notify("AnimationStart",e),a.push(k0(c,e,{...s,delay:n+l(h)}).then(()=>c.notify("AnimationComplete",e)))}),Promise.all(a)}function SX(t,e){return t.sortNodePosition(e)}function IX(t,e,n={}){t.notify("AnimationStart",e);let i;if(Array.isArray(e)){const r=e.map(s=>k0(t,s,n));i=Promise.all(r)}else if(typeof e=="string")i=k0(t,e,n);else{const r=typeof e=="function"?Fg(t,e,n.custom):e;i=Promise.all(cL(t,r,n))}return i.then(()=>{t.notify("AnimationComplete",e)})}const xX=QT.length;function uL(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?uL(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<xX;n++){const i=QT[n],r=t.props[i];(Xh(r)||r===!1)&&(e[i]=r)}return e}const RX=[...WT].reverse(),CX=WT.length;function PX(t){return e=>Promise.all(e.map(({animation:n,options:i})=>IX(t,n,i)))}function NX(t){let e=PX(t),n=Jx(),i=!0;const r=l=>(c,h)=>{var d;const f=Fg(t,h,l==="exit"?(d=t.presenceContext)===null||d===void 0?void 0:d.custom:void 0);if(f){const{transition:p,transitionEnd:w,...E}=f;c={...c,...E,...w}}return c};function s(l){e=l(t)}function a(l){const{props:c}=t,h=uL(t.parent)||{},d=[],f=new Set;let p={},w=1/0;for(let R=0;R<CX;R++){const b=RX[R],v=n[b],_=c[b]!==void 0?c[b]:h[b],S=Xh(_),k=b===l?v.isActive:null;k===!1&&(w=R);let O=_===h[b]&&_!==c[b]&&S;if(O&&i&&t.manuallyAnimateOnMount&&(O=!1),v.protectedKeys={...p},!v.isActive&&k===null||!_&&!v.prevProp||zg(_)||typeof _=="boolean")continue;const A=DX(v.prevProp,_);let T=A||b===l&&v.isActive&&!O&&S||R>w&&S,I=!1;const P=Array.isArray(_)?_:[_];let D=P.reduce(r(b),{});k===!1&&(D={});const{prevResolvedValues:V={}}=v,N={...V,...D},H=Y=>{T=!0,f.has(Y)&&(I=!0,f.delete(Y)),v.needsAnimating[Y]=!0;const J=t.getValue(Y);J&&(J.liveStyle=!1)};for(const Y in N){const J=D[Y],ne=V[Y];if(p.hasOwnProperty(Y))continue;let W=!1;E0(J)&&E0(ne)?W=!EM(J,ne):W=J!==ne,W?J!=null?H(Y):f.add(Y):J!==void 0&&f.has(Y)?H(Y):v.protectedKeys[Y]=!0}v.prevProp=_,v.prevResolvedValues=D,v.isActive&&(p={...p,...D}),i&&t.blockInitialAnimation&&(T=!1),T&&(!(O&&A)||I)&&d.push(...P.map(Y=>({animation:Y,options:{type:b}})))}if(f.size){const R={};f.forEach(b=>{const v=t.getBaseTarget(b),_=t.getValue(b);_&&(_.liveStyle=!0),R[b]=v??null}),d.push({animation:R})}let E=!!d.length;return i&&(c.initial===!1||c.initial===c.animate)&&!t.manuallyAnimateOnMount&&(E=!1),i=!1,E?e(d):Promise.resolve()}function o(l,c){var h;if(n[l].isActive===c)return Promise.resolve();(h=t.variantChildren)===null||h===void 0||h.forEach(f=>{var p;return(p=f.animationState)===null||p===void 0?void 0:p.setActive(l,c)}),n[l].isActive=c;const d=a(l);for(const f in n)n[f].protectedKeys={};return d}return{animateChanges:a,setActive:o,setAnimateFunction:s,getState:()=>n,reset:()=>{n=Jx(),i=!0}}}function DX(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!EM(e,t):!1}function ga(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Jx(){return{animate:ga(!0),whileInView:ga(),whileHover:ga(),whileTap:ga(),whileDrag:ga(),whileFocus:ga(),exit:ga()}}class la{constructor(e){this.isMounted=!1,this.node=e}update(){}}class kX extends la{constructor(e){super(e),e.animationState||(e.animationState=NX(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();zg(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let VX=0;class OX extends la{constructor(){super(...arguments),this.id=VX++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const r=this.node.animationState.setActive("exit",!e);n&&!e&&r.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const MX={animation:{Feature:kX},exit:{Feature:OX}};function td(t,e,n,i={passive:!0}){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n)}function Fd(t){return{point:{x:t.pageX,y:t.pageY}}}const LX=t=>e=>uE(e)&&t(e,Fd(e));function ch(t,e,n,i){return td(t,e,LX(n),i)}const Zx=(t,e)=>Math.abs(t-e);function UX(t,e){const n=Zx(t.x,e.x),i=Zx(t.y,e.y);return Math.sqrt(n**2+i**2)}class hL{constructor(e,n,{transformPagePoint:i,contextWindow:r,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const d=I_(this.lastMoveEventInfo,this.history),f=this.startEvent!==null,p=UX(d.offset,{x:0,y:0})>=3;if(!f&&!p)return;const{point:w}=d,{timestamp:E}=jt;this.history.push({...w,timestamp:E});const{onStart:R,onMove:b}=this.handlers;f||(R&&R(this.lastMoveEvent,d),this.startEvent=this.lastMoveEvent),b&&b(this.lastMoveEvent,d)},this.handlePointerMove=(d,f)=>{this.lastMoveEvent=d,this.lastMoveEventInfo=S_(f,this.transformPagePoint),Ge.update(this.updatePoint,!0)},this.handlePointerUp=(d,f)=>{this.end();const{onEnd:p,onSessionEnd:w,resumeAnimation:E}=this.handlers;if(this.dragSnapToOrigin&&E&&E(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const R=I_(d.type==="pointercancel"?this.lastMoveEventInfo:S_(f,this.transformPagePoint),this.history);this.startEvent&&p&&p(d,R),w&&w(d,R)},!uE(e))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=i,this.contextWindow=r||window;const a=Fd(e),o=S_(a,this.transformPagePoint),{point:l}=o,{timestamp:c}=jt;this.history=[{...l,timestamp:c}];const{onSessionStart:h}=n;h&&h(e,I_(o,this.history)),this.removeListeners=Bd(ch(this.contextWindow,"pointermove",this.handlePointerMove),ch(this.contextWindow,"pointerup",this.handlePointerUp),ch(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Qs(this.updatePoint)}}function S_(t,e){return e?{point:e(t.point)}:t}function eR(t,e){return{x:t.x-e.x,y:t.y-e.y}}function I_({point:t},e){return{point:t,delta:eR(t,dL(e)),offset:eR(t,jX(e)),velocity:zX(e,.1)}}function jX(t){return t[0]}function dL(t){return t[t.length-1]}function zX(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,i=null;const r=dL(t);for(;n>=0&&(i=t[n],!(r.timestamp-i.timestamp>wr(e)));)n--;if(!i)return{x:0,y:0};const s=Tr(r.timestamp-i.timestamp);if(s===0)return{x:0,y:0};const a={x:(r.x-i.x)/s,y:(r.y-i.y)/s};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}const fL=1e-4,BX=1-fL,FX=1+fL,mL=.01,qX=0-mL,HX=0+mL;function Wn(t){return t.max-t.min}function GX(t,e,n){return Math.abs(t-e)<=n}function tR(t,e,n,i=.5){t.origin=i,t.originPoint=et(e.min,e.max,t.origin),t.scale=Wn(n)/Wn(e),t.translate=et(n.min,n.max,t.origin)-t.originPoint,(t.scale>=BX&&t.scale<=FX||isNaN(t.scale))&&(t.scale=1),(t.translate>=qX&&t.translate<=HX||isNaN(t.translate))&&(t.translate=0)}function uh(t,e,n,i){tR(t.x,e.x,n.x,i?i.originX:void 0),tR(t.y,e.y,n.y,i?i.originY:void 0)}function nR(t,e,n){t.min=n.min+e.min,t.max=t.min+Wn(e)}function $X(t,e,n){nR(t.x,e.x,n.x),nR(t.y,e.y,n.y)}function iR(t,e,n){t.min=e.min-n.min,t.max=t.min+Wn(e)}function hh(t,e,n){iR(t.x,e.x,n.x),iR(t.y,e.y,n.y)}function KX(t,{min:e,max:n},i){return e!==void 0&&t<e?t=i?et(e,t,i.min):Math.max(t,e):n!==void 0&&t>n&&(t=i?et(n,t,i.max):Math.min(t,n)),t}function rR(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function WX(t,{top:e,left:n,bottom:i,right:r}){return{x:rR(t.x,n,r),y:rR(t.y,e,i)}}function sR(t,e){let n=e.min-t.min,i=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,i]=[i,n]),{min:n,max:i}}function QX(t,e){return{x:sR(t.x,e.x),y:sR(t.y,e.y)}}function YX(t,e){let n=.5;const i=Wn(t),r=Wn(e);return r>i?n=sc(e.min,e.max-i,t.min):i>r&&(n=sc(t.min,t.max-r,e.min)),Or(0,1,n)}function XX(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const V0=.35;function JX(t=V0){return t===!1?t=0:t===!0&&(t=V0),{x:aR(t,"left","right"),y:aR(t,"top","bottom")}}function aR(t,e,n){return{min:oR(t,e),max:oR(t,n)}}function oR(t,e){return typeof t=="number"?t:t[e]||0}const lR=()=>({translate:0,scale:1,origin:0,originPoint:0}),ol=()=>({x:lR(),y:lR()}),cR=()=>({min:0,max:0}),ht=()=>({x:cR(),y:cR()});function Yn(t){return[t("x"),t("y")]}function pL({top:t,left:e,right:n,bottom:i}){return{x:{min:e,max:n},y:{min:t,max:i}}}function ZX({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function eJ(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),i=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:i.y,right:i.x}}function x_(t){return t===void 0||t===1}function O0({scale:t,scaleX:e,scaleY:n}){return!x_(t)||!x_(e)||!x_(n)}function Aa(t){return O0(t)||gL(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function gL(t){return uR(t.x)||uR(t.y)}function uR(t){return t&&t!=="0%"}function Ip(t,e,n){const i=t-n,r=e*i;return n+r}function hR(t,e,n,i,r){return r!==void 0&&(t=Ip(t,r,i)),Ip(t,n,i)+e}function M0(t,e=0,n=1,i,r){t.min=hR(t.min,e,n,i,r),t.max=hR(t.max,e,n,i,r)}function yL(t,{x:e,y:n}){M0(t.x,e.translate,e.scale,e.originPoint),M0(t.y,n.translate,n.scale,n.originPoint)}const dR=.999999999999,fR=1.0000000000001;function tJ(t,e,n,i=!1){const r=n.length;if(!r)return;e.x=e.y=1;let s,a;for(let o=0;o<r;o++){s=n[o],a=s.projectionDelta;const{visualElement:l}=s.options;l&&l.props.style&&l.props.style.display==="contents"||(i&&s.options.layoutScroll&&s.scroll&&s!==s.root&&cl(t,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),a&&(e.x*=a.x.scale,e.y*=a.y.scale,yL(t,a)),i&&Aa(s.latestValues)&&cl(t,s.latestValues))}e.x<fR&&e.x>dR&&(e.x=1),e.y<fR&&e.y>dR&&(e.y=1)}function ll(t,e){t.min=t.min+e,t.max=t.max+e}function mR(t,e,n,i,r=.5){const s=et(t.min,t.max,r);M0(t,e,n,s,i)}function cl(t,e){mR(t.x,e.x,e.scaleX,e.scale,e.originX),mR(t.y,e.y,e.scaleY,e.scale,e.originY)}function _L(t,e){return pL(eJ(t.getBoundingClientRect(),e))}function nJ(t,e,n){const i=_L(t,n),{scroll:r}=e;return r&&(ll(i.x,r.offset.x),ll(i.y,r.offset.y)),i}const vL=({current:t})=>t?t.ownerDocument.defaultView:null,iJ=new WeakMap;class rJ{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=ht(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const r=h=>{const{dragSnapToOrigin:d}=this.getProps();d?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Fd(h).point)},s=(h,d)=>{const{drag:f,dragPropagation:p,onDragStart:w}=this.getProps();if(f&&!p&&(this.openDragLock&&this.openDragLock(),this.openDragLock=YQ(f),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Yn(R=>{let b=this.getAxisMotionValue(R).get()||0;if(Wi.test(b)){const{projection:v}=this.visualElement;if(v&&v.layout){const _=v.layout.layoutBox[R];_&&(b=Wn(_)*(parseFloat(b)/100))}}this.originPoint[R]=b}),w&&Ge.postRender(()=>w(h,d)),I0(this.visualElement,"transform");const{animationState:E}=this.visualElement;E&&E.setActive("whileDrag",!0)},a=(h,d)=>{const{dragPropagation:f,dragDirectionLock:p,onDirectionLock:w,onDrag:E}=this.getProps();if(!f&&!this.openDragLock)return;const{offset:R}=d;if(p&&this.currentDirection===null){this.currentDirection=sJ(R),this.currentDirection!==null&&w&&w(this.currentDirection);return}this.updateAxis("x",d.point,R),this.updateAxis("y",d.point,R),this.visualElement.render(),E&&E(h,d)},o=(h,d)=>this.stop(h,d),l=()=>Yn(h=>{var d;return this.getAnimationState(h)==="paused"&&((d=this.getAxisMotionValue(h).animation)===null||d===void 0?void 0:d.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new hL(e,{onSessionStart:r,onStart:s,onMove:a,onSessionEnd:o,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,contextWindow:vL(this.visualElement)})}stop(e,n){const i=this.isDragging;if(this.cancel(),!i)return;const{velocity:r}=n;this.startAnimation(r);const{onDragEnd:s}=this.getProps();s&&Ge.postRender(()=>s(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,i){const{drag:r}=this.getProps();if(!i||!Of(e,r,this.currentDirection))return;const s=this.getAxisMotionValue(e);let a=this.originPoint[e]+i[e];this.constraints&&this.constraints[e]&&(a=KX(a,this.constraints[e],this.elastic[e])),s.set(a)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:i}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,s=this.constraints;n&&sl(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&r?this.constraints=WX(r.layoutBox,n):this.constraints=!1,this.elastic=JX(i),s!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Yn(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=XX(r.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!sl(e))return!1;const i=e.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const s=nJ(i,r.root,this.visualElement.getTransformPagePoint());let a=QX(r.layout.layoutBox,s);if(n){const o=n(ZX(a));this.hasMutatedConstraints=!!o,o&&(a=pL(o))}return a}startAnimation(e){const{drag:n,dragMomentum:i,dragElastic:r,dragTransition:s,dragSnapToOrigin:a,onDragTransitionEnd:o}=this.getProps(),l=this.constraints||{},c=Yn(h=>{if(!Of(h,n,this.currentDirection))return;let d=l&&l[h]||{};a&&(d={min:0,max:0});const f=r?200:1e6,p=r?40:1e7,w={type:"inertia",velocity:i?e[h]:0,bounceStiffness:f,bounceDamping:p,timeConstant:750,restDelta:1,restSpeed:10,...s,...d};return this.startAxisValueAnimation(h,w)});return Promise.all(c).then(o)}startAxisValueAnimation(e,n){const i=this.getAxisMotionValue(e);return I0(this.visualElement,e),i.start(TE(e,i,0,n,this.visualElement,!1))}stopAnimation(){Yn(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Yn(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,i=this.visualElement.getProps(),r=i[n];return r||this.visualElement.getValue(e,(i.initial?i.initial[e]:void 0)||0)}snapToCursor(e){Yn(n=>{const{drag:i}=this.getProps();if(!Of(n,i,this.currentDirection))return;const{projection:r}=this.visualElement,s=this.getAxisMotionValue(n);if(r&&r.layout){const{min:a,max:o}=r.layout.layoutBox[n];s.set(e[n]-et(a,o,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:i}=this.visualElement;if(!sl(n)||!i||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};Yn(a=>{const o=this.getAxisMotionValue(a);if(o&&this.constraints!==!1){const l=o.get();r[a]=YX({min:l,max:l},this.constraints[a])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),Yn(a=>{if(!Of(a,e,null))return;const o=this.getAxisMotionValue(a),{min:l,max:c}=this.constraints[a];o.set(et(l,c,r[a]))})}addListeners(){if(!this.visualElement.current)return;iJ.set(this.visualElement,this);const e=this.visualElement.current,n=ch(e,"pointerdown",l=>{const{drag:c,dragListener:h=!0}=this.getProps();c&&h&&this.start(l)}),i=()=>{const{dragConstraints:l}=this.getProps();sl(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,s=r.addEventListener("measure",i);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),Ge.read(i);const a=td(window,"resize",()=>this.scalePositionWithinConstraints()),o=r.addEventListener("didUpdate",({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(Yn(h=>{const d=this.getAxisMotionValue(h);d&&(this.originPoint[h]+=l[h].translate,d.set(d.get()+l[h].translate))}),this.visualElement.render())});return()=>{a(),n(),s(),o&&o()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:i=!1,dragPropagation:r=!1,dragConstraints:s=!1,dragElastic:a=V0,dragMomentum:o=!0}=e;return{...e,drag:n,dragDirectionLock:i,dragPropagation:r,dragConstraints:s,dragElastic:a,dragMomentum:o}}}function Of(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function sJ(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class aJ extends la{constructor(e){super(e),this.removeGroupControls=Hn,this.removeListeners=Hn,this.controls=new rJ(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Hn}unmount(){this.removeGroupControls(),this.removeListeners()}}const pR=t=>(e,n)=>{t&&Ge.postRender(()=>t(e,n))};class oJ extends la{constructor(){super(...arguments),this.removePointerDownListener=Hn}onPointerDown(e){this.session=new hL(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:vL(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:i,onPanEnd:r}=this.node.getProps();return{onSessionStart:pR(e),onStart:pR(n),onMove:i,onEnd:(s,a)=>{delete this.session,r&&Ge.postRender(()=>r(s,a))}}}mount(){this.removePointerDownListener=ch(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const gm={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function gR(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const pu={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(re.test(t))t=parseFloat(t);else return t;const n=gR(t,e.target.x),i=gR(t,e.target.y);return`${n}% ${i}%`}},lJ={correct:(t,{treeScale:e,projectionDelta:n})=>{const i=t,r=Ys.parse(t);if(r.length>5)return i;const s=Ys.createTransformer(t),a=typeof r[0]!="number"?1:0,o=n.x.scale*e.x,l=n.y.scale*e.y;r[0+a]/=o,r[1+a]/=l;const c=et(o,l,.5);return typeof r[2+a]=="number"&&(r[2+a]/=c),typeof r[3+a]=="number"&&(r[3+a]/=c),s(r)}};class cJ extends x.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:i,layoutId:r}=this.props,{projection:s}=e;CQ(uJ),s&&(n.group&&n.group.add(s),i&&i.register&&r&&i.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),gm.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:i,drag:r,isPresent:s}=this.props,a=i.projection;return a&&(a.isPresent=s,r||e.layoutDependency!==n||n===void 0?a.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?a.promote():a.relegate()||Ge.postRender(()=>{const o=a.getStack();(!o||!o.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),XT.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:i}=this.props,{projection:r}=e;r&&(r.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(r),i&&i.deregister&&i.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function bL(t){const[e,n]=nM(),i=x.useContext(qT);return g.jsx(cJ,{...t,layoutGroup:i,switchLayoutGroup:x.useContext(uM),isPresent:e,safeToRemove:n})}const uJ={borderRadius:{...pu,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:pu,borderTopRightRadius:pu,borderBottomLeftRadius:pu,borderBottomRightRadius:pu,boxShadow:lJ};function hJ(t,e,n){const i=nn(t)?t:Zh(t);return i.start(TE("",i,e,n)),i.animation}function dJ(t){return t instanceof SVGElement&&t.tagName!=="svg"}const fJ=(t,e)=>t.depth-e.depth;class mJ{constructor(){this.children=[],this.isDirty=!1}add(e){hE(this.children,e),this.isDirty=!0}remove(e){dE(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(fJ),this.isDirty=!1,this.children.forEach(e)}}function pJ(t,e){const n=Qi.now(),i=({timestamp:r})=>{const s=r-n;s>=e&&(Qs(i),t(s-e))};return Ge.read(i,!0),()=>Qs(i)}const wL=["TopLeft","TopRight","BottomLeft","BottomRight"],gJ=wL.length,yR=t=>typeof t=="string"?parseFloat(t):t,_R=t=>typeof t=="number"||re.test(t);function yJ(t,e,n,i,r,s){r?(t.opacity=et(0,n.opacity!==void 0?n.opacity:1,_J(i)),t.opacityExit=et(e.opacity!==void 0?e.opacity:1,0,vJ(i))):s&&(t.opacity=et(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,i));for(let a=0;a<gJ;a++){const o=`border${wL[a]}Radius`;let l=vR(e,o),c=vR(n,o);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||_R(l)===_R(c)?(t[o]=Math.max(et(yR(l),yR(c),i),0),(Wi.test(c)||Wi.test(l))&&(t[o]+="%")):t[o]=c}(e.rotate||n.rotate)&&(t.rotate=et(e.rotate||0,n.rotate||0,i))}function vR(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const _J=TL(0,.5,zM),vJ=TL(.5,.95,Hn);function TL(t,e,n){return i=>i<t?0:i>e?1:n(sc(t,e,i))}function bR(t,e){t.min=e.min,t.max=e.max}function Qn(t,e){bR(t.x,e.x),bR(t.y,e.y)}function wR(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function TR(t,e,n,i,r){return t-=e,t=Ip(t,1/n,i),r!==void 0&&(t=Ip(t,1/r,i)),t}function bJ(t,e=0,n=1,i=.5,r,s=t,a=t){if(Wi.test(e)&&(e=parseFloat(e),e=et(a.min,a.max,e/100)-a.min),typeof e!="number")return;let o=et(s.min,s.max,i);t===s&&(o-=e),t.min=TR(t.min,e,n,o,r),t.max=TR(t.max,e,n,o,r)}function ER(t,e,[n,i,r],s,a){bJ(t,e[n],e[i],e[r],e.scale,s,a)}const wJ=["x","scaleX","originX"],TJ=["y","scaleY","originY"];function AR(t,e,n,i){ER(t.x,e,wJ,n?n.x:void 0,i?i.x:void 0),ER(t.y,e,TJ,n?n.y:void 0,i?i.y:void 0)}function SR(t){return t.translate===0&&t.scale===1}function EL(t){return SR(t.x)&&SR(t.y)}function IR(t,e){return t.min===e.min&&t.max===e.max}function EJ(t,e){return IR(t.x,e.x)&&IR(t.y,e.y)}function xR(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function AL(t,e){return xR(t.x,e.x)&&xR(t.y,e.y)}function RR(t){return Wn(t.x)/Wn(t.y)}function CR(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class AJ{constructor(){this.members=[]}add(e){hE(this.members,e),e.scheduleRender()}remove(e){if(dE(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(r=>e===r);if(n===0)return!1;let i;for(let r=n;r>=0;r--){const s=this.members[r];if(s.isPresent!==!1){i=s;break}}return i?(this.promote(i),!0):!1}promote(e,n){const i=this.lead;if(e!==i&&(this.prevLead=i,this.lead=e,e.show(),i)){i.instance&&i.scheduleRender(),e.scheduleRender(),e.resumeFrom=i,n&&(e.resumeFrom.preserveOpacity=!0),i.snapshot&&(e.snapshot=i.snapshot,e.snapshot.latestValues=i.animationValues||i.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;r===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:i}=e;n.onExitComplete&&n.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function SJ(t,e,n){let i="";const r=t.x.translate/e.x,s=t.y.translate/e.y,a=(n==null?void 0:n.z)||0;if((r||s||a)&&(i=`translate3d(${r}px, ${s}px, ${a}px) `),(e.x!==1||e.y!==1)&&(i+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:c,rotate:h,rotateX:d,rotateY:f,skewX:p,skewY:w}=n;c&&(i=`perspective(${c}px) ${i}`),h&&(i+=`rotate(${h}deg) `),d&&(i+=`rotateX(${d}deg) `),f&&(i+=`rotateY(${f}deg) `),p&&(i+=`skewX(${p}deg) `),w&&(i+=`skewY(${w}deg) `)}const o=t.x.scale*e.x,l=t.y.scale*e.y;return(o!==1||l!==1)&&(i+=`scale(${o}, ${l})`),i||"none"}const Sa={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},Nu=typeof window<"u"&&window.MotionDebug!==void 0,R_=["","X","Y","Z"],IJ={visibility:"hidden"},PR=1e3;let xJ=0;function C_(t,e,n,i){const{latestValues:r}=e;r[t]&&(n[t]=r[t],e.setStaticValue(t,0),i&&(i[t]=0))}function SL(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=kM(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:r,layoutId:s}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",Ge,!(r||s))}const{parent:i}=t;i&&!i.hasCheckedOptimisedAppear&&SL(i)}function IL({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:i,resetTransform:r}){return class{constructor(a={},o=e==null?void 0:e()){this.id=xJ++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Nu&&(Sa.totalNodes=Sa.resolvedTargetDeltas=Sa.recalculatedProjection=0),this.nodes.forEach(PJ),this.nodes.forEach(OJ),this.nodes.forEach(MJ),this.nodes.forEach(NJ),Nu&&window.MotionDebug.record(Sa)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=o?o.root||o:this,this.path=o?[...o.path,o]:[],this.parent=o,this.depth=o?o.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new mJ)}addEventListener(a,o){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new fE),this.eventHandlers.get(a).add(o)}notifyListeners(a,...o){const l=this.eventHandlers.get(a);l&&l.notify(...o)}hasListeners(a){return this.eventHandlers.has(a)}mount(a,o=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=dJ(a),this.instance=a;const{layoutId:l,layout:c,visualElement:h}=this.options;if(h&&!h.current&&h.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),o&&(c||l)&&(this.isLayoutDirty=!0),t){let d;const f=()=>this.root.updateBlockedByResize=!1;t(a,()=>{this.root.updateBlockedByResize=!0,d&&d(),d=pJ(f,250),gm.hasAnimatedSinceResize&&(gm.hasAnimatedSinceResize=!1,this.nodes.forEach(DR))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&h&&(l||c)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:f,hasRelativeTargetChanged:p,layout:w})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const E=this.options.transition||h.getDefaultTransition()||BJ,{onLayoutAnimationStart:R,onLayoutAnimationComplete:b}=h.getProps(),v=!this.targetLayout||!AL(this.targetLayout,w)||p,_=!f&&p;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||_||f&&(v||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(d,_);const S={...oE(E,"layout"),onPlay:R,onComplete:b};(h.shouldReduceMotion||this.options.layoutRoot)&&(S.delay=0,S.type=!1),this.startAnimation(S)}else f||DR(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=w})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Qs(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(LJ),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&SL(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let h=0;h<this.path.length;h++){const d=this.path[h];d.shouldResetTransform=!0,d.updateScroll("snapshot"),d.options.layoutRoot&&d.willUpdate(!1)}const{layoutId:o,layout:l}=this.options;if(o===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(NR);return}this.isUpdating||this.nodes.forEach(kJ),this.isUpdating=!1,this.nodes.forEach(VJ),this.nodes.forEach(RJ),this.nodes.forEach(CJ),this.clearAllSnapshots();const o=Qi.now();jt.delta=Or(0,1e3/60,o-jt.timestamp),jt.timestamp=o,jt.isProcessing=!0,v_.update.process(jt),v_.preRender.process(jt),v_.render.process(jt),jt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,XT.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(DJ),this.sharedNodes.forEach(UJ)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Ge.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Ge.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=ht(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:o}=this.options;o&&o.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let o=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(o=!1),o){const l=i(this.instance);this.scroll={animationId:this.root.animationId,phase:a,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!r)return;const a=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,o=this.projectionDelta&&!EL(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,h=c!==this.prevTransformTemplateValue;a&&(o||Aa(this.latestValues)||h)&&(r(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const o=this.measurePageBox();let l=this.removeElementScroll(o);return a&&(l=this.removeTransform(l)),FJ(l),{animationId:this.root.animationId,measuredBox:o,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var a;const{visualElement:o}=this.options;if(!o)return ht();const l=o.measureViewportBox();if(!(((a=this.scroll)===null||a===void 0?void 0:a.wasRoot)||this.path.some(qJ))){const{scroll:h}=this.root;h&&(ll(l.x,h.offset.x),ll(l.y,h.offset.y))}return l}removeElementScroll(a){var o;const l=ht();if(Qn(l,a),!((o=this.scroll)===null||o===void 0)&&o.wasRoot)return l;for(let c=0;c<this.path.length;c++){const h=this.path[c],{scroll:d,options:f}=h;h!==this.root&&d&&f.layoutScroll&&(d.wasRoot&&Qn(l,a),ll(l.x,d.offset.x),ll(l.y,d.offset.y))}return l}applyTransform(a,o=!1){const l=ht();Qn(l,a);for(let c=0;c<this.path.length;c++){const h=this.path[c];!o&&h.options.layoutScroll&&h.scroll&&h!==h.root&&cl(l,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),Aa(h.latestValues)&&cl(l,h.latestValues)}return Aa(this.latestValues)&&cl(l,this.latestValues),l}removeTransform(a){const o=ht();Qn(o,a);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!Aa(c.latestValues))continue;O0(c.latestValues)&&c.updateSnapshot();const h=ht(),d=c.measurePageBox();Qn(h,d),AR(o,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,h)}return Aa(this.latestValues)&&AR(o,this.latestValues),o}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==jt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var o;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(a||c&&this.isSharedProjectionDirty||this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:f}=this.options;if(!(!this.layout||!(d||f))){if(this.resolvedRelativeTargetAt=jt.timestamp,!this.targetDelta&&!this.relativeTarget){const p=this.getClosestProjectingParent();p&&p.layout&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ht(),this.relativeTargetOrigin=ht(),hh(this.relativeTargetOrigin,this.layout.layoutBox,p.layout.layoutBox),Qn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=ht(),this.targetWithTransforms=ht()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),$X(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Qn(this.target,this.layout.layoutBox),yL(this.target,this.targetDelta)):Qn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const p=this.getClosestProjectingParent();p&&!!p.resumingFrom==!!this.resumingFrom&&!p.options.layoutScroll&&p.target&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ht(),this.relativeTargetOrigin=ht(),hh(this.relativeTargetOrigin,this.target,p.target),Qn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Nu&&Sa.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||O0(this.parent.latestValues)||gL(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var a;const o=this.getLead(),l=!!this.resumingFrom||this!==o;let c=!0;if((this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===jt.timestamp&&(c=!1),c)return;const{layout:h,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(h||d))return;Qn(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,p=this.treeScale.y;tJ(this.layoutCorrected,this.treeScale,this.path,l),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=ht());const{target:w}=o;if(!w){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(wR(this.prevProjectionDelta.x,this.projectionDelta.x),wR(this.prevProjectionDelta.y,this.projectionDelta.y)),uh(this.projectionDelta,this.layoutCorrected,w,this.latestValues),(this.treeScale.x!==f||this.treeScale.y!==p||!CR(this.projectionDelta.x,this.prevProjectionDelta.x)||!CR(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",w)),Nu&&Sa.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){var o;if((o=this.options.visualElement)===null||o===void 0||o.scheduleRender(),a){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=ol(),this.projectionDelta=ol(),this.projectionDeltaWithTransform=ol()}setAnimationOrigin(a,o=!1){const l=this.snapshot,c=l?l.latestValues:{},h={...this.latestValues},d=ol();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!o;const f=ht(),p=l?l.source:void 0,w=this.layout?this.layout.source:void 0,E=p!==w,R=this.getStack(),b=!R||R.members.length<=1,v=!!(E&&!b&&this.options.crossfade===!0&&!this.path.some(zJ));this.animationProgress=0;let _;this.mixTargetDelta=S=>{const k=S/1e3;kR(d.x,a.x,k),kR(d.y,a.y,k),this.setTargetDelta(d),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(hh(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),jJ(this.relativeTarget,this.relativeTargetOrigin,f,k),_&&EJ(this.relativeTarget,_)&&(this.isProjectionDirty=!1),_||(_=ht()),Qn(_,this.relativeTarget)),E&&(this.animationValues=h,yJ(h,c,this.latestValues,k,v,b)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=k},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Qs(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Ge.update(()=>{gm.hasAnimatedSinceResize=!0,this.currentAnimation=hJ(0,PR,{...a,onUpdate:o=>{this.mixTargetDelta(o),a.onUpdate&&a.onUpdate(o)},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(PR),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:o,target:l,layout:c,latestValues:h}=a;if(!(!o||!l||!c)){if(this!==a&&this.layout&&c&&xL(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||ht();const d=Wn(this.layout.layoutBox.x);l.x.min=a.target.x.min,l.x.max=l.x.min+d;const f=Wn(this.layout.layoutBox.y);l.y.min=a.target.y.min,l.y.max=l.y.min+f}Qn(o,l),cl(o,h),uh(this.projectionDeltaWithTransform,this.layoutCorrected,o,h)}}registerSharedNode(a,o){this.sharedNodes.has(a)||this.sharedNodes.set(a,new AJ),this.sharedNodes.get(a).add(o);const c=o.options.initialPromotionConfig;o.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(o):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var a;const{layoutId:o}=this.options;return o?((a=this.getStack())===null||a===void 0?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:o}=this.options;return o?(a=this.getStack())===null||a===void 0?void 0:a.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:o,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),a&&(this.projectionDelta=void 0,this.needsReset=!0),o&&this.setOptions({transition:o})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetSkewAndRotation(){const{visualElement:a}=this.options;if(!a)return;let o=!1;const{latestValues:l}=a;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(o=!0),!o)return;const c={};l.z&&C_("z",a,c,this.animationValues);for(let h=0;h<R_.length;h++)C_(`rotate${R_[h]}`,a,c,this.animationValues),C_(`skew${R_[h]}`,a,c,this.animationValues);a.render();for(const h in c)a.setStaticValue(h,c[h]),this.animationValues&&(this.animationValues[h]=c[h]);a.scheduleRender()}getProjectionStyles(a){var o,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return IJ;const c={visibility:""},h=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=mm(a==null?void 0:a.pointerEvents)||"",c.transform=h?h(this.latestValues,""):"none",c;const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){const E={};return this.options.layoutId&&(E.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,E.pointerEvents=mm(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!Aa(this.latestValues)&&(E.transform=h?h({},""):"none",this.hasProjected=!1),E}const f=d.animationValues||d.latestValues;this.applyTransformsToTarget(),c.transform=SJ(this.projectionDeltaWithTransform,this.treeScale,f),h&&(c.transform=h(f,c.transform));const{x:p,y:w}=this.projectionDelta;c.transformOrigin=`${p.origin*100}% ${w.origin*100}% 0`,d.animationValues?c.opacity=d===this?(l=(o=f.opacity)!==null&&o!==void 0?o:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:c.opacity=d===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const E in wp){if(f[E]===void 0)continue;const{correct:R,applyTo:b}=wp[E],v=c.transform==="none"?f[E]:R(f[E],d);if(b){const _=b.length;for(let S=0;S<_;S++)c[b[S]]=v}else c[E]=v}return this.options.layoutId&&(c.pointerEvents=d===this?mm(a==null?void 0:a.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var o;return(o=a.currentAnimation)===null||o===void 0?void 0:o.stop()}),this.root.nodes.forEach(NR),this.root.sharedNodes.clear()}}}function RJ(t){t.updateLayout()}function CJ(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:i,measuredBox:r}=t.layout,{animationType:s}=t.options,a=n.source!==t.layout.source;s==="size"?Yn(d=>{const f=a?n.measuredBox[d]:n.layoutBox[d],p=Wn(f);f.min=i[d].min,f.max=f.min+p}):xL(s,n.layoutBox,i)&&Yn(d=>{const f=a?n.measuredBox[d]:n.layoutBox[d],p=Wn(i[d]);f.max=f.min+p,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[d].max=t.relativeTarget[d].min+p)});const o=ol();uh(o,i,n.layoutBox);const l=ol();a?uh(l,t.applyTransform(r,!0),n.measuredBox):uh(l,i,n.layoutBox);const c=!EL(o);let h=!1;if(!t.resumeFrom){const d=t.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:f,layout:p}=d;if(f&&p){const w=ht();hh(w,n.layoutBox,f.layoutBox);const E=ht();hh(E,i,p.layoutBox),AL(w,E)||(h=!0),d.options.layoutRoot&&(t.relativeTarget=E,t.relativeTargetOrigin=w,t.relativeParent=d)}}}t.notifyListeners("didUpdate",{layout:i,snapshot:n,delta:l,layoutDelta:o,hasLayoutChanged:c,hasRelativeTargetChanged:h})}else if(t.isLead()){const{onExitComplete:i}=t.options;i&&i()}t.options.transition=void 0}function PJ(t){Nu&&Sa.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function NJ(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function DJ(t){t.clearSnapshot()}function NR(t){t.clearMeasurements()}function kJ(t){t.isLayoutDirty=!1}function VJ(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function DR(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function OJ(t){t.resolveTargetDelta()}function MJ(t){t.calcProjection()}function LJ(t){t.resetSkewAndRotation()}function UJ(t){t.removeLeadSnapshot()}function kR(t,e,n){t.translate=et(e.translate,0,n),t.scale=et(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function VR(t,e,n,i){t.min=et(e.min,n.min,i),t.max=et(e.max,n.max,i)}function jJ(t,e,n,i){VR(t.x,e.x,n.x,i),VR(t.y,e.y,n.y,i)}function zJ(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const BJ={duration:.45,ease:[.4,0,.1,1]},OR=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),MR=OR("applewebkit/")&&!OR("chrome/")?Math.round:Hn;function LR(t){t.min=MR(t.min),t.max=MR(t.max)}function FJ(t){LR(t.x),LR(t.y)}function xL(t,e,n){return t==="position"||t==="preserve-aspect"&&!GX(RR(e),RR(n),.2)}function qJ(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const HJ=IL({attachResizeListener:(t,e)=>td(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),P_={current:void 0},RL=IL({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!P_.current){const t=new HJ({});t.mount(window),t.setOptions({layoutScroll:!0}),P_.current=t}return P_.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),GJ={pan:{Feature:oJ},drag:{Feature:aJ,ProjectionNode:RL,MeasureLayout:bL}};function UR(t,e,n){const{props:i}=t;t.animationState&&i.whileHover&&t.animationState.setActive("whileHover",n==="Start");const r="onHover"+n,s=i[r];s&&Ge.postRender(()=>s(e,Fd(e)))}class $J extends la{mount(){const{current:e}=this.node;e&&(this.unmount=GQ(e,n=>(UR(this.node,n,"Start"),i=>UR(this.node,i,"End"))))}unmount(){}}class KJ extends la{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Bd(td(this.node.current,"focus",()=>this.onFocus()),td(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function jR(t,e,n){const{props:i}=t;t.animationState&&i.whileTap&&t.animationState.setActive("whileTap",n==="Start");const r="onTap"+(n==="End"?"":n),s=i[r];s&&Ge.postRender(()=>s(e,Fd(e)))}class WJ extends la{mount(){const{current:e}=this.node;e&&(this.unmount=QQ(e,n=>(jR(this.node,n,"Start"),(i,{success:r})=>jR(this.node,i,r?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const L0=new WeakMap,N_=new WeakMap,QJ=t=>{const e=L0.get(t.target);e&&e(t)},YJ=t=>{t.forEach(QJ)};function XJ({root:t,...e}){const n=t||document;N_.has(n)||N_.set(n,{});const i=N_.get(n),r=JSON.stringify(e);return i[r]||(i[r]=new IntersectionObserver(YJ,{root:t,...e})),i[r]}function JJ(t,e,n){const i=XJ(e);return L0.set(t,n),i.observe(t),()=>{L0.delete(t),i.unobserve(t)}}const ZJ={some:0,all:1};class eZ extends la{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:i,amount:r="some",once:s}=e,a={root:n?n.current:void 0,rootMargin:i,threshold:typeof r=="number"?r:ZJ[r]},o=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,s&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:h,onViewportLeave:d}=this.node.getProps(),f=c?h:d;f&&f(l)};return JJ(this.node.current,a,o)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(tZ(e,n))&&this.startObserver()}unmount(){}}function tZ({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const nZ={inView:{Feature:eZ},tap:{Feature:WJ},focus:{Feature:KJ},hover:{Feature:$J}},iZ={layout:{ProjectionNode:RL,MeasureLayout:bL}},U0={current:null},CL={current:!1};function rZ(){if(CL.current=!0,!!$T)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>U0.current=t.matches;t.addListener(e),e()}else U0.current=!1}const sZ=[...eL,Jt,Ys],aZ=t=>sZ.find(ZM(t)),zR=new WeakMap;function oZ(t,e,n){for(const i in e){const r=e[i],s=n[i];if(nn(r))t.addValue(i,r);else if(nn(s))t.addValue(i,Zh(r,{owner:t}));else if(s!==r)if(t.hasValue(i)){const a=t.getValue(i);a.liveStyle===!0?a.jump(r):a.hasAnimated||a.set(r)}else{const a=t.getStaticValue(i);t.addValue(i,Zh(a!==void 0?a:r,{owner:t}))}}for(const i in n)e[i]===void 0&&t.removeValue(i);return e}const BR=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class lZ{scrapeMotionValuesFromProps(e,n,i){return{}}constructor({parent:e,props:n,presenceContext:i,reducedMotionConfig:r,blockInitialAnimation:s,visualState:a},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=vE,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const p=Qi.now();this.renderScheduledAt<p&&(this.renderScheduledAt=p,Ge.render(this.render,!1,!0))};const{latestValues:l,renderState:c,onUpdate:h}=a;this.onUpdate=h,this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=c,this.parent=e,this.props=n,this.presenceContext=i,this.depth=e?e.depth+1:0,this.reducedMotionConfig=r,this.options=o,this.blockInitialAnimation=!!s,this.isControllingVariants=Bg(n),this.isVariantNode=lM(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:d,...f}=this.scrapeMotionValuesFromProps(n,{},this);for(const p in f){const w=f[p];l[p]!==void 0&&nn(w)&&w.set(l[p],!1)}}mount(e){this.current=e,zR.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,i)=>this.bindToMotionValue(i,n)),CL.current||rZ(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:U0.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){zR.delete(this.current),this.projection&&this.projection.unmount(),Qs(this.notifyUpdate),Qs(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const i=Eo.has(e),r=n.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&Ge.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0)}),s=n.on("renderRequest",this.scheduleRender);let a;window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{r(),s(),a&&a(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in ac){const n=ac[e];if(!n)continue;const{isEnabled:i,Feature:r}=n;if(!this.features[e]&&r&&i(this.props)&&(this.features[e]=new r(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):ht()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let i=0;i<BR.length;i++){const r=BR[i];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const s="on"+r,a=e[s];a&&(this.propEventSubscriptions[r]=this.on(r,a))}this.prevMotionValues=oZ(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const i=this.values.get(e);n!==i&&(i&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let i=this.values.get(e);return i===void 0&&n!==void 0&&(i=Zh(n===null?void 0:n,{owner:this}),this.addValue(e,i)),i}readValue(e,n){var i;let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(i=this.getBaseTargetFromProps(this.props,e))!==null&&i!==void 0?i:this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(XM(r)||FM(r))?r=parseFloat(r):!aZ(r)&&Ys.test(n)&&(r=WM(e,n)),this.setBaseTarget(e,nn(r)?r.get():r)),nn(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:i}=this.props;let r;if(typeof i=="string"||typeof i=="object"){const a=ZT(this.props,i,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);a&&(r=a[e])}if(i&&r!==void 0)return r;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!nn(s)?s:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new fE),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class PL extends lZ{constructor(){super(...arguments),this.KeyframeResolver=tL}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:i}){delete n[e],delete i[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;nn(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function cZ(t){return window.getComputedStyle(t)}class uZ extends PL{constructor(){super(...arguments),this.type="html",this.renderInstance=yM}readValueFromInstance(e,n){if(Eo.has(n)){const i=_E(n);return i&&i.default||0}else{const i=cZ(e),r=(mM(n)?i.getPropertyValue(n):i[n])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(e,{transformPagePoint:n}){return _L(e,n)}build(e,n,i){nE(e,n,i.transformTemplate)}scrapeMotionValuesFromProps(e,n,i){return aE(e,n,i)}}class hZ extends PL{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=ht}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Eo.has(n)){const i=_E(n);return i&&i.default||0}return n=_M.has(n)?n:YT(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,i){return wM(e,n,i)}build(e,n,i){iE(e,n,this.isSVGTag,i.transformTemplate)}renderInstance(e,n,i,r){vM(e,n,i,r)}mount(e){this.isSVGTag=sE(e.tagName),super.mount(e)}}const dZ=(t,e)=>JT(t)?new hZ(e):new uZ(e,{allowProjection:t!==x.Fragment}),fZ=UQ({...MX,...nZ,...GJ,...iZ},dZ),mZ=ZW(fZ),pZ=()=>{const{notification:t,hideNotification:e}=tM(),n={success:g.jsx(dN,{className:"h-6 w-6 text-green-500"}),info:g.jsx(pN,{className:"h-6 w-6 text-blue-500"}),warning:g.jsx(Cj,{className:"h-6 w-6 text-amber-500"}),error:g.jsx(Y3,{className:"h-6 w-6 text-red-500"})},i={success:"bg-white border-green-100",info:"bg-white border-blue-100",warning:"bg-white border-amber-100",error:"bg-white border-red-100"};return g.jsx(GW,{children:t.isVisible&&g.jsxs(mZ.div,{initial:{opacity:0,y:-50},animate:{opacity:1,y:0},exit:{opacity:0,y:-50},transition:{type:"spring",stiffness:300,damping:30},className:`fixed top-6 left-0 right-0 z-[100] mx-auto flex w-[90%] max-w-md items-center gap-3 rounded-xl border p-4 shadow-xl ${i[t.type]}`,children:[g.jsx("div",{className:"flex-shrink-0",children:n[t.type]}),g.jsx("div",{className:"flex-1",children:g.jsx("p",{className:"font-medium text-gray-900",children:t.message})}),g.jsx("button",{onClick:e,className:"flex-shrink-0 rounded-full p-1 text-gray-400 hover:bg-gray-100 hover:text-gray-500",children:g.jsx(gd,{className:"h-4 w-4"})})]})})},NL=x.createContext(void 0),dee=()=>{const t=x.useContext(NL);if(t===void 0)throw new Error("useOrder must be used within an OrderProvider");return t},gZ=({children:t})=>{const[e,n]=x.useState(null),[i,r]=x.useState([]),[s,a]=x.useState(!0),{currentUser:o}=oa(),{showNotification:l}=tM(),c=x.useRef(void 0);x.useEffect(()=>{let f;return o?(a(!0),f=Qe.collection("orders").where("userId","==",o.uid).onSnapshot(E=>{const R=E.docs.map(v=>{var _;return{id:v.id,...v.data(),timestamp:((_=v.data().timestamp)==null?void 0:_.toDate())||new Date}});E.docChanges().forEach(v=>{if(v.type==="modified"){const _=v.doc.data();_.status==="cancelled"&&l(`Your order ${_.orderNumber} has been cancelled. Reason: ${_.cancellationReason||"No reason provided"}`,"error")}}),R.sort((v,_)=>_.timestamp.getTime()-v.timestamp.getTime()),r(R);const b=R.find(v=>v.status!=="completed"&&v.status!=="cancelled")||null;n(b),a(!1)},E=>{console.error("Error listening to order history:",E),a(!1)})):(r([]),n(null),a(!1)),()=>{f&&f()}},[o,l]),x.useEffect(()=>{const f=e==null?void 0:e.status,p=c.current;if(f==="ready"&&p!=="ready"){const w=e==null?void 0:e.orderItems.map(E=>E.productName).join(", ");l(`Your order for ${w} is ready!`,"success")}c.current=f},[e==null?void 0:e.status,e==null?void 0:e.orderItems,l]);const d={activeOrder:e,setActiveOrder:n,orderHistory:i,addOrderToHistory:async f=>{try{const p=await Qe.collection("orders").add({...f,timestamp:Ht.firestore.FieldValue.serverTimestamp()}),w={...f,id:p.id,timestamp:new Date};r(E=>[w,...E]),n(w)}catch(p){console.error("Error adding order to Firestore:",p)}},isHistoryLoading:s};return g.jsx(NL.Provider,{value:d,children:t})},yZ=({children:t,className:e="",variant:n="solid",color:i="primary",size:r="md"})=>{const s="inline-flex items-center gap-1.5 rounded-full font-medium",a={xs:"px-2 py-0.5 text-xs",sm:"px-2.5 py-1 text-xs",md:"px-3 py-1 text-sm",lg:"px-4 py-1.5 text-base"},o={primary:"bg-primary-100 text-primary-800",success:"bg-green-100 text-green-800",warning:"bg-amber-100 text-amber-800",error:"bg-red-100 text-red-800",info:"bg-blue-100 text-blue-800",gray:"bg-gray-100 text-gray-800"},l={primary:"border-2 border-primary-300 text-primary-700 bg-transparent",success:"border-2 border-green-300 text-green-700 bg-transparent",warning:"border-2 border-amber-300 text-amber-700 bg-transparent",error:"border-2 border-red-300 text-red-700 bg-transparent",info:"border-2 border-blue-300 text-blue-700 bg-transparent",gray:"border-2 border-gray-300 text-gray-700 bg-transparent"},c={primary:"bg-primary-500",success:"bg-green-500",warning:"bg-amber-500",error:"bg-red-500",info:"bg-blue-500",gray:"bg-gray-500"},h=n==="outline"?l[i]:o[i];return g.jsxs("span",{className:`${s} ${a[r]} ${h} ${e}`,children:[n==="dot"&&g.jsx("span",{className:`h-2 w-2 rounded-full ${c[i]} animate-pulse`}),t]})},DL=()=>{const[t,e]=x.useState([]),[n,i]=x.useState(!0),[r,s]=x.useState(null);return x.useEffect(()=>{(async()=>{try{i(!0);const l=await Qe.collection("ingredients").where("isTopping","==",!0).get(),c=[];l.forEach(h=>{const d=h.data();d.stock>0&&d.toppingPrice!==void 0&&d.portionSize!==void 0&&c.push({id:h.id,name:d.name,price:d.toppingPrice,stock:d.stock,portionSize:d.portionSize})}),c.sort((h,d)=>h.name.localeCompare(d.name)),e(c),s(null)}catch(o){console.error("Error fetching toppings:",o),s("Failed to load toppings"),e([{id:"pearls",name:"Pearls",price:10,stock:3e3,portionSize:30},{id:"pudding",name:"Pudding",price:15,stock:2e3,portionSize:40},{id:"grass-jelly",name:"Grass Jelly",price:15,stock:2500,portionSize:35}])}finally{i(!1)}})()},[]),{toppings:t,isLoading:n,error:r}},_Z=({cartItems:t,isOpen:e,onClose:n,onUpdateQuantity:i,onRemoveItem:r,onCheckout:s,onEditItem:a,selectedItemIds:o,onToggleItemSelection:l,onSelectAll:c,onDeselectAll:h})=>{const d=_c(),f=t.reduce((S,k)=>S+k.quantity,0),{toppings:p}=DL(),w=t.length>0&&o.length===t.length,E=o.length>0&&o.length<t.length,R=S=>S?S.reduce((k,O)=>{const A=p.find(T=>T.name===O);return k+((A==null?void 0:A.price)||0)},0):0,b=t.filter(S=>o.includes(S.id)).reduce((S,k)=>{var A;const O=R((A=k.customizations)==null?void 0:A.toppings);return S+(k.selectedSize.price+O)*k.quantity},0),v=()=>{n(),d("/menu")},_=()=>{w?h():c()};return g.jsxs(g.Fragment,{children:[g.jsx("div",{onClick:n,className:`fixed inset-0 z-40 bg-black/50 transition-opacity duration-300 ${e?"opacity-100":"opacity-0 pointer-events-none"}`,"aria-hidden":"true"}),g.jsx("aside",{className:`fixed top-0 right-0 z-50 h-full w-full transform bg-white shadow-2xl transition-transform duration-300 ease-in-out sm:w-96 md:w-[450px] ${e?"translate-x-0":"translate-x-full"}`,role:"dialog","aria-modal":"true","aria-labelledby":"cart-heading",children:g.jsxs("div",{className:"flex h-full flex-col",children:[g.jsxs("header",{className:"flex items-center justify-between border-b border-gray-200 p-6",children:[g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx("h2",{id:"cart-heading",className:"font-display text-xl font-bold text-coffee-900",children:"Your Order"}),f>0&&g.jsxs(yZ,{children:[f," ",f===1?"item":"items"]})]}),g.jsx("button",{onClick:n,className:"rounded-md p-2 text-gray-500 transition-colors hover:bg-gray-100 hover:text-gray-800","aria-label":"Close cart",children:g.jsx(gd,{className:"h-6 w-6"})})]}),t.length>0&&g.jsx("div",{className:"border-b border-gray-200 px-6 py-3 bg-gray-50/50 backdrop-blur-sm sticky top-0 z-10",children:g.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group select-none",children:[g.jsxs("div",{className:"relative flex items-center justify-center h-5 w-5",children:[g.jsx("input",{type:"checkbox",checked:w,onChange:_,className:"peer h-5 w-5 cursor-pointer appearance-none rounded-md border-2 border-gray-300 bg-white transition-all checked:border-primary-600 checked:bg-primary-600 hover:border-primary-500 focus:ring-2 focus:ring-primary-500/20"}),g.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none opacity-0 peer-checked:opacity-100 transition-opacity duration-200",children:E&&!w?g.jsx(Dv,{className:"h-3.5 w-3.5 text-white",strokeWidth:3}):g.jsx(rI,{className:"h-3.5 w-3.5 text-white",strokeWidth:3})})]}),g.jsx("span",{className:"text-sm font-semibold text-gray-700 group-hover:text-primary-700 transition-colors",children:w?"Deselect All":"Select All"}),o.length>0&&g.jsxs("span",{className:"ml-auto text-xs font-medium text-primary-600 bg-primary-50 px-2 py-1 rounded-full",children:[o.length," selected"]})]})}),t.length===0?g.jsxs("div",{className:"flex flex-1 flex-col items-center justify-center gap-4 p-6 text-center",children:[g.jsx(Vr,{className:"h-24 w-24 text-gray-300 opacity-50"}),g.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Your cart is empty"}),g.jsx("p",{className:"text-gray-500",children:"Looks like you haven't added anything yet."}),g.jsx("button",{onClick:v,className:"mt-4 rounded-full bg-primary-600 px-6 py-2 text-sm font-semibold text-white shadow-sm transition-colors hover:bg-primary-700",children:"Start Ordering"})]}):g.jsx("div",{className:"flex-1 overflow-y-auto px-6 py-4",children:g.jsx("ul",{className:"space-y-3",children:t.map(S=>{var D;const k=S.selectedSize.name==="Combo Meal",O=k?`${S.product.name} (${S.selectedSize.name})`:S.product.name,A=k&&S.product.comboImageUrl?S.product.comboImageUrl:S.product.imageUrl,T=R((D=S.customizations)==null?void 0:D.toppings),I=S.selectedSize.price+T,P=o.includes(S.id);return g.jsxs("li",{className:`relative flex gap-4 p-5 rounded-xl transition-all ${P?"bg-coffee-50 border-2 border-coffee-200":"bg-gray-50/50 border-2 border-transparent hover:border-gray-200"}`,children:[g.jsx("button",{onClick:()=>r(S.id),className:"absolute top-5 right-5 z-10 rounded-full p-2 text-gray-400 transition-all hover:bg-red-50 hover:text-red-600","aria-label":`Remove ${O} from cart`,children:g.jsx(xj,{className:"h-4 w-4"})}),g.jsxs("div",{className:"pt-1 relative flex items-center justify-center h-5 w-5",children:[g.jsx("input",{type:"checkbox",checked:P,onChange:()=>l(S.id),className:"peer h-5 w-5 cursor-pointer appearance-none rounded-md border-2 border-gray-300 bg-white transition-all checked:border-primary-600 checked:bg-primary-600 hover:border-primary-500 focus:ring-2 focus:ring-primary-500/20"}),g.jsx(rI,{className:"absolute h-3.5 w-3.5 text-white opacity-0 peer-checked:opacity-100 transition-opacity duration-200 pointer-events-none",strokeWidth:3})]}),g.jsx("button",{onClick:()=>a(S),className:"h-20 w-20 flex-shrink-0 overflow-hidden rounded-lg border border-gray-100 shadow-sm hover:border-primary-300 transition-colors cursor-pointer",children:g.jsx("img",{src:A,alt:O,className:"h-full w-full object-cover object-center"})}),g.jsxs("div",{className:"flex-1 min-w-0 flex flex-col",children:[g.jsxs("button",{onClick:()=>a(S),className:"text-left w-full hover:opacity-75 transition-opacity",children:[g.jsx("h4",{className:"font-bold text-gray-900 truncate text-base pr-8",children:O}),g.jsxs("div",{className:"mt-1.5 flex items-center justify-between",children:[g.jsx("span",{className:"inline-flex items-center rounded-md bg-white px-2.5 py-1 text-xs font-medium text-gray-700 ring-1 ring-inset ring-gray-200",children:S.selectedSize.name}),g.jsxs("span",{className:"text-sm font-medium text-gray-700",children:["",S.selectedSize.price.toFixed(2)]})]})]}),S.customizations&&g.jsxs("div",{className:"mt-2 space-y-1.5",children:[(S.customizations.sugarLevel||S.customizations.iceLevel)&&g.jsxs("div",{className:"flex flex-wrap gap-1.5",children:[S.customizations.sugarLevel&&g.jsxs("span",{className:"inline-flex items-center rounded-md bg-white px-2.5 py-1 text-xs font-medium text-gray-700 ring-1 ring-inset ring-gray-200",children:["Sugar: ",S.customizations.sugarLevel]}),S.customizations.iceLevel&&g.jsxs("span",{className:"inline-flex items-center rounded-md bg-white px-2.5 py-1 text-xs font-medium text-gray-700 ring-1 ring-inset ring-gray-200",children:["Ice: ",S.customizations.iceLevel]})]}),S.customizations.toppings&&S.customizations.toppings.length>0&&g.jsx("div",{className:"flex flex-col gap-1.5",children:S.customizations.toppings.map(V=>{const N=p.find(ie=>ie.name===V),H=(N==null?void 0:N.price)||0;return g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsx("span",{className:"inline-flex items-center rounded-md bg-white px-2.5 py-1 text-xs font-medium text-gray-700 ring-1 ring-inset ring-gray-200",children:V}),g.jsxs("span",{className:"text-xs font-medium text-gray-600",children:["+",H.toFixed(2)]})]},V)})})]}),g.jsxs("div",{className:"mt-auto pt-3 flex items-center justify-between",children:[g.jsxs("div",{className:"flex items-center rounded-full border border-gray-200 bg-white shadow-sm",children:[g.jsx("button",{onClick:()=>i(S.id,S.quantity-1),disabled:S.quantity===1,className:"flex h-8 w-8 items-center justify-center rounded-l-full text-gray-500 transition hover:bg-gray-50 hover:text-gray-700 disabled:cursor-not-allowed disabled:opacity-50","aria-label":`Decrease quantity of ${O}`,children:g.jsx(Dv,{className:"h-3.5 w-3.5"})}),g.jsx("span",{className:"w-8 text-center text-sm font-semibold text-gray-900","aria-live":"polite",children:S.quantity}),g.jsx("button",{onClick:()=>i(S.id,S.quantity+1),className:"flex h-8 w-8 items-center justify-center rounded-r-full text-gray-500 transition hover:bg-gray-50 hover:text-gray-700","aria-label":`Increase quantity of ${O}`,children:g.jsx(gN,{className:"h-3.5 w-3.5"})})]}),g.jsxs("p",{className:"font-bold text-lg text-gray-900",children:["",(I*S.quantity).toFixed(2)]})]})]})]},S.id)})})}),t.length>0&&g.jsxs("footer",{className:"mt-auto border-t border-gray-200 p-6 bg-gray-50/50",children:[g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsx("span",{className:"text-base font-medium text-gray-600",children:"Subtotal"}),g.jsxs("span",{className:"text-xl font-bold text-gray-900",children:["",b.toFixed(2)]})]}),o.length<t.length&&g.jsx("p",{className:"mt-1 text-xs text-amber-600",children:o.length===0?"Please select items to checkout":`${t.length-o.length} item(s) not selected`}),g.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Taxes and service fee calculated at checkout."}),g.jsx("div",{className:"mt-6",children:g.jsxs("button",{onClick:s,disabled:o.length===0,className:"flex w-full items-center justify-center gap-2 rounded-xl bg-primary-600 px-6 py-3.5 text-base font-bold text-white shadow-lg shadow-primary-600/20 transition-all hover:bg-primary-700 hover:shadow-xl hover:scale-[1.02] active:scale-[0.98] focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 disabled:cursor-not-allowed disabled:bg-gray-400 disabled:opacity-50 disabled:shadow-none disabled:scale-100",children:["Proceed to Checkout",g.jsx(q3,{className:"h-5 w-5"})]})})]})]})})]})},dh={sugarLevels:[{value:"0%",label:"No Sugar",sugarAmount:0,sugarIngredientId:"brown-sugar-syrup"},{value:"25%",label:"25% Sweet",sugarAmount:5,sugarIngredientId:"brown-sugar-syrup"},{value:"50%",label:"50% Sweet",sugarAmount:10,sugarIngredientId:"brown-sugar-syrup"},{value:"75%",label:"75% Sweet",sugarAmount:15,sugarIngredientId:"brown-sugar-syrup"},{value:"100%",label:"Regular (100%)",sugarAmount:20,sugarIngredientId:"brown-sugar-syrup"}],iceLevels:[{value:"None",label:"No Ice",iceAmount:0,iceIngredientId:"ice-cubes"},{value:"Less",label:"Less Ice",iceAmount:50,iceIngredientId:"ice-cubes"},{value:"Normal",label:"Normal Ice",iceAmount:100,iceIngredientId:"ice-cubes"},{value:"Extra",label:"Extra Ice",iceAmount:150,iceIngredientId:"ice-cubes"}]},vZ=async()=>{try{const t=Qe.collection("settings").doc("customizationOptions");(await t.get()).exists?console.log(" Customization options already exist in Firestore"):(console.log("Seeding customization options to Firestore..."),await t.set(dh),console.log(" Customization options seeded successfully"))}catch(t){throw console.error(" Error seeding customization options:",t),t}},bZ=async()=>{try{const t=Qe.collection("settings").doc("customizationOptions"),e=await t.get();return e.exists?e.data():(await vZ(),(await t.get()).data())}catch(t){return console.error("Error fetching customization options:",t),dh}},wZ=()=>{const[t,e]=x.useState(dh),[n,i]=x.useState(!0),[r,s]=x.useState(null);return x.useEffect(()=>{(async()=>{try{i(!0);const o=await bZ();o&&o.sugarLevels&&o.iceLevels?(e(o),s(null)):e(dh)}catch(o){console.error("Error fetching customization options:",o),s("Failed to load customization options"),e(dh)}finally{i(!1)}})()},[]),{options:t,isLoading:n,error:r}},TZ=({product:t,selectedSize:e,isOpen:n,onClose:i,onConfirm:r,onBuyNow:s,initialCustomizations:a,initialQuantity:o=1})=>{const[l,c]=x.useState("100%"),[h,d]=x.useState("Normal"),[f,p]=x.useState("None"),[w,E]=x.useState(1),[R,b]=x.useState(e),{toppings:v,isLoading:_}=DL(),{options:S,isLoading:k}=wZ();ul.useEffect(()=>{if(n){if(a){c(a.sugarLevel||"100%"),d(a.iceLevel||"Normal");const H=a.toppings&&a.toppings.length>0?a.toppings[0]:"None";p(H)}else c("100%"),d("Normal"),p("None");E(o),b(e)}},[n,a,o,e]);const O=()=>{const H=["Coffee Based","Non-Coffee Based","Matcha Series","Refreshments"].includes(t.category),ie={toppings:f!=="None"?[f]:[]};return H&&(ie.sugarLevel=l,ie.iceLevel=h),ie},A=()=>{r(O(),w,D/w,R),i()},T=[{id:"none",name:"None",price:0},...v.map(H=>({id:H.id,name:H.name,price:H.price}))],I=T.find(H=>H.name===f),P=(I==null?void 0:I.price)||0,D=(R.price+P)*w,V=_||k,N=g.jsxs("button",{onClick:A,disabled:V,className:"w-full flex items-center justify-between rounded-xl bg-primary-600 px-6 py-3 text-white font-bold shadow-lg hover:bg-primary-700 hover:shadow-xl hover:scale-[1.01] active:scale-[0.99] transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:[g.jsx("span",{children:"Add to Order"}),g.jsxs("span",{className:"text-lg tabular-nums",children:["",D.toFixed(2)]})]});return g.jsx(FT,{isOpen:n,onClose:i,hideHeader:!0,hideCloseButton:!0,footer:N,className:"sm:max-w-lg",children:g.jsxs("div",{children:[g.jsxs("div",{className:"-mx-6 -mt-6 mb-2",children:[g.jsxs("div",{className:"bg-[#F5F5F0] w-full h-96 flex items-center justify-center relative overflow-hidden",children:[g.jsx("button",{onClick:i,className:"absolute top-4 right-4 z-10 p-2 rounded-full bg-white/50 hover:bg-white/80 backdrop-blur-sm transition-colors text-gray-600 hover:text-gray-900",children:g.jsx(gd,{className:"h-5 w-5"})}),g.jsx("img",{src:t.imageUrl,alt:t.name,className:"h-full w-full object-cover object-center"})]}),g.jsxs("div",{className:"px-6 pt-4",children:[g.jsx("div",{className:"flex items-center justify-between mb-2",children:g.jsx("span",{className:"text-sm font-medium text-coffee-600 tracking-wide uppercase",children:t.category})}),g.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:t.name}),g.jsx("p",{className:"text-gray-500 leading-relaxed text-sm",children:t.description})]})]}),V?g.jsx("div",{className:"flex items-center justify-center py-12",children:g.jsx(_r,{className:"h-8 w-8 animate-spin text-coffee-600"})}):g.jsxs("div",{className:"space-y-1",children:[g.jsxs("div",{className:"py-4 border-b border-gray-100 -mx-6 px-6",children:[g.jsx("h4",{className:"mb-3 text-sm font-bold text-gray-900 uppercase tracking-wide flex items-center gap-2",children:"Size"}),g.jsx("div",{className:"flex flex-wrap gap-2",children:t.sizes.map(H=>g.jsx("button",{onClick:()=>b(H),className:`flex-1 min-w-[80px] rounded-lg py-2 text-sm font-semibold transition-all border ${R.name===H.name?"bg-primary-600 text-white border-primary-600 shadow-md":"bg-white text-gray-600 border-gray-200 hover:border-primary-300 hover:bg-primary-50"}`,children:H.name},H.name))})]}),["Coffee Based","Non-Coffee Based","Matcha Series","Refreshments"].includes(t.category)&&g.jsxs("div",{className:"py-4 border-b border-gray-100 -mx-6 px-6",children:[g.jsx("h4",{className:"mb-3 text-sm font-bold text-gray-900 uppercase tracking-wide flex items-center gap-2",children:"Sugar Level"}),g.jsx("div",{className:"flex flex-wrap gap-2",children:S.sugarLevels.map(H=>g.jsx("button",{onClick:()=>c(H.value),className:`flex-1 min-w-[60px] rounded-lg py-2 text-sm font-semibold transition-all border ${l===H.value?"bg-primary-600 text-white border-primary-600 shadow-md":"bg-white text-gray-600 border-gray-200 hover:border-primary-300 hover:bg-primary-50"}`,children:H.value},H.value))})]}),["Coffee Based","Non-Coffee Based","Matcha Series","Refreshments"].includes(t.category)&&g.jsxs("div",{className:"py-4 border-b border-gray-100 -mx-6 px-6",children:[g.jsx("h4",{className:"mb-3 text-sm font-bold text-gray-900 uppercase tracking-wide flex items-center gap-2",children:"Ice Level"}),g.jsx("div",{className:"flex flex-wrap gap-2",children:S.iceLevels.map(H=>g.jsx("button",{onClick:()=>d(H.value),className:`flex-1 min-w-[60px] rounded-lg py-2 text-sm font-semibold transition-all border ${h===H.value?"bg-primary-600 text-white border-primary-600 shadow-md":"bg-white text-gray-600 border-gray-200 hover:border-primary-300 hover:bg-primary-50"}`,children:H.value},H.value))})]}),g.jsxs("div",{className:"py-4 border-b border-gray-100 -mx-6 px-6",children:[g.jsxs("h4",{className:"mb-3 text-sm font-bold text-gray-900 uppercase tracking-wide flex items-center justify-between",children:[g.jsx("span",{children:"Toppings"}),g.jsx("span",{className:"text-xs font-normal text-gray-500 normal-case",children:"Select one"})]}),g.jsx("div",{className:"flex flex-wrap gap-2",children:T.map(H=>{const ie=f===H.name;return g.jsxs("button",{onClick:()=>p(H.name),className:`
                                                relative px-3 py-2 rounded-lg text-sm font-medium transition-all border flex items-center gap-2
                                                ${ie?"bg-primary-50 border-primary-600 text-primary-700 shadow-sm ring-1 ring-primary-600":"bg-white border-gray-200 text-gray-600 hover:border-primary-300 hover:bg-gray-50"}
                                            `,children:[g.jsx("span",{children:H.name}),H.price>0&&g.jsxs("span",{className:`text-xs font-bold ${ie?"text-primary-600":"text-gray-400"}`,children:["+",H.price]})]},H.id)})})]}),g.jsxs("div",{className:"flex items-center justify-between py-4 -mx-6 px-6",children:[g.jsx("span",{className:"font-bold text-gray-900",children:"Quantity"}),g.jsxs("div",{className:"flex items-center gap-3 bg-gray-50 rounded-lg p-1 border border-gray-200",children:[g.jsx("button",{onClick:()=>E(Math.max(1,w-1)),className:"h-8 w-8 rounded-md bg-white shadow-sm flex items-center justify-center text-gray-600 hover:text-coffee-600 disabled:opacity-50 transition-colors",disabled:w<=1,children:g.jsx(Dv,{className:"h-4 w-4"})}),g.jsx("span",{className:"w-8 text-center font-bold text-gray-900 tabular-nums",children:w}),g.jsx("button",{onClick:()=>E(w+1),className:"h-8 w-8 rounded-md bg-primary-600 shadow-sm flex items-center justify-center text-white hover:bg-primary-700 transition-colors",children:g.jsx(gN,{className:"h-4 w-4"})})]})]})]})]})})},EZ=()=>{const{pathname:t}=fi();return x.useEffect(()=>{window.scrollTo(0,0)},[t]),null},FR=({allowedRoles:t,redirectTo:e})=>{const{currentUser:n,loading:i}=oa(),r=fi();return i?g.jsx("div",{className:"flex h-screen w-full items-center justify-center bg-gray-50",children:g.jsx(_r,{className:"h-12 w-12 animate-spin text-primary-600"})}):n?!t||t.length===0?g.jsx(tI,{}):n.role&&t.includes(n.role)?g.jsx(tI,{}):g.jsx("div",{className:"flex min-h-screen flex-col items-center justify-center bg-gradient-to-br from-red-50 to-orange-50 px-4",children:g.jsxs("div",{className:"max-w-md text-center",children:[g.jsx("div",{className:"mx-auto mb-6 flex h-20 w-20 items-center justify-center rounded-full bg-red-100",children:g.jsx(bj,{className:"h-10 w-10 text-red-600"})}),g.jsx("h1",{className:"mb-3 font-display text-4xl font-bold text-gray-900",children:"Access Denied"}),g.jsx("p",{className:"mb-6 text-lg text-gray-600",children:"You don't have permission to access this page."}),g.jsxs("p",{className:"mb-8 text-sm text-gray-500",children:["Your role: ",g.jsx("span",{className:"font-semibold capitalize",children:n.role||"customer"}),g.jsx("br",{}),"Required role: ",g.jsx("span",{className:"font-semibold capitalize",children:t.join(" or ")})]}),g.jsx("button",{onClick:()=>window.history.back(),className:"rounded-lg bg-primary-600 px-6 py-3 font-semibold text-white transition-colors hover:bg-primary-700",children:"Go Back"})]})}):g.jsx(e3,{to:e||"/auth/login",state:{from:r},replace:!0})},AZ=()=>g.jsx("div",{className:"flex min-h-screen flex-col items-center justify-center bg-primary-50",children:g.jsxs("div",{className:"flex flex-col items-center gap-4 animate-pulse",children:[g.jsx(Vr,{className:"h-16 w-16 text-primary-600"}),g.jsxs("div",{className:"flex items-center gap-2 text-primary-800",children:[g.jsx(_r,{className:"h-6 w-6 animate-spin"}),g.jsx("span",{className:"font-medium",children:"Brewing your page..."})]})]})}),SZ=x.lazy(()=>ke(()=>import("./HomePage-BSJCX0uE.js"),__vite__mapDeps([0,1,2,3,4,5]))),IZ=x.lazy(()=>ke(()=>import("./LoginPage-PTlwgSVU.js"),[])),xZ=x.lazy(()=>ke(()=>import("./RegisterPage-CGMfkuMS.js"),[])),RZ=x.lazy(()=>ke(()=>import("./ForgotPasswordPage-CmX4GhxU.js"),__vite__mapDeps([6,7]))),CZ=x.lazy(()=>ke(()=>import("./MenuPage-C6jWVeeV.js"),__vite__mapDeps([8,9,10,11,12,13]))),PZ=x.lazy(()=>ke(()=>import("./CheckoutPage-CUkXkmr4.js"),__vite__mapDeps([14,1,3,15,16,17,18,19]))),NZ=x.lazy(()=>ke(()=>import("./QueuePage-B0DSZx7c.js"),__vite__mapDeps([20,1,21,5,18,2,9,22,17,23,24,10]))),DZ=x.lazy(()=>ke(()=>import("./RewardsPage-Dx36EKCj.js"),__vite__mapDeps([25,1,23,26,27,28,29,11,16,10]))),kZ=x.lazy(()=>ke(()=>import("./ProfilePage-ZaZ0Ktjg.js"),__vite__mapDeps([30,1,18,9,29,27,28,31,17,32,7,5,33,19,22,34,35,36]))),VZ=x.lazy(()=>ke(()=>import("./AboutPage-RXfybdNN.js"),__vite__mapDeps([37,1,18,38,4,2]))),OZ=x.lazy(()=>ke(()=>import("./ContactPage-BpQ0ogNa.js"),__vite__mapDeps([39,1,7,40,19,34]))),MZ=x.lazy(()=>ke(()=>import("./FAQPage-Yivoi05P.js"),__vite__mapDeps([41,1,12]))),LZ=x.lazy(()=>ke(()=>import("./TermsPage-BVZyIGqz.js"),__vite__mapDeps([42,43,4,44,23]))),UZ=x.lazy(()=>ke(()=>import("./PrivacyPolicyPage-DMXw8ncZ.js"),__vite__mapDeps([45,5,46]))),jZ=x.lazy(()=>ke(()=>import("./CookiePolicyPage-XK0bosDC.js"),__vite__mapDeps([47,35,38,48]))),zZ=x.lazy(()=>ke(()=>import("./AdminLayout-cQleChr4.js"),__vite__mapDeps([49,50,1,51,18,19,26,4,48,35]))),BZ=x.lazy(()=>ke(()=>import("./AdminDashboardPage-DXEHeQJY.js"),__vite__mapDeps([52,53,24,51,2,29,13,18,4,48,9,54,38]))),qR=x.lazy(()=>ke(()=>import("./AdminQueuePage-CWtX1AH9.js"),__vite__mapDeps([55,21,1,56,2,18,43]))),HR=x.lazy(()=>ke(()=>import("./AdminInventoryPage-CU4fQKq2.js"),__vite__mapDeps([57,31,1,29,51,10,12,58,18]))),FZ=x.lazy(()=>ke(()=>import("./AdminProductsPage-DpJhRUin.js"),__vite__mapDeps([59,1,31,51,9,12,58,18,36]))),qZ=x.lazy(()=>ke(()=>import("./AdminAnalyticsPage-DYqMYtmM.js"),__vite__mapDeps([60,53,24,51,2,29,13,19,9,22]))),HZ=x.lazy(()=>ke(()=>import("./AdminFeedbackPage-V4BWGt2A.js"),__vite__mapDeps([61,33,28,9,19,1,34,62]))),GZ=x.lazy(()=>ke(()=>import("./AdminSettingsPage-DkSZRvHN.js"),__vite__mapDeps([63,1,7,40,64,2,31]))),GR=x.lazy(()=>ke(()=>import("./AdminOrdersHistoryPage-C7X31--d.js"),__vite__mapDeps([65,2,51,44,43,12,29,32,64,15]))),$Z=x.lazy(()=>ke(()=>import("./AdminUsersPage-B4syeM3X.js"),__vite__mapDeps([66,4,12,62,24,13,29]))),KZ=x.lazy(()=>ke(()=>import("./EmployeeLayout-D5r9U2Z7.js"),__vite__mapDeps([67,50,1,51,26]))),WZ=x.lazy(()=>ke(()=>import("./POSDashboard-ML0Rbp9g.js"),__vite__mapDeps([68,38,24,18,54,51,2]))),QZ=x.lazy(()=>ke(()=>import("./POSPage-Ob7Tx5wO.js"),__vite__mapDeps([69,15,44,46,56,12]))),YZ=()=>g.jsxs("div",{className:"flex min-h-screen flex-col",children:[g.jsx(UW,{}),g.jsx("main",{className:"flex flex-1 items-center justify-center bg-gradient-to-br from-primary-50 to-coffee-50",children:g.jsxs("div",{className:"p-4 text-center",children:[g.jsx(Vr,{className:"mx-auto mb-4 h-16 w-16 text-gray-400 opacity-50"}),g.jsx("h1",{className:"mb-4 font-display text-4xl font-bold text-gray-900",children:"404 - Page Not Found"}),g.jsx("p",{className:"mb-8 text-gray-600",children:"This coffee blend doesn't exist on our menu. Maybe it got lost in the daily grind?"}),g.jsx(Xn,{to:"/",className:"font-medium text-primary-600 transition-colors hover:text-primary-700",children:" Back to Home"})]})}),g.jsx(jW,{})]}),XZ=()=>{const{isCartOpen:t,closeCart:e,cartItems:n,updateQuantity:i,updateCartItem:r,removeFromCart:s,toastMessage:a,selectedItemIds:o,toggleItemSelection:l,selectAllItems:c,deselectAllItems:h}=ZO(),d=_c(),[f,p]=x.useState(null),[w,E]=x.useState(!1),R=()=>{e(),d("/checkout")},b=_=>{p(_),E(!0)},v=(_,S,k,O)=>{f&&O&&(r(f.id,f.product,O,_,S),E(!1),p(null))};return g.jsxs(g.Fragment,{children:[g.jsx(EZ,{}),g.jsx(pZ,{}),g.jsx(x.Suspense,{fallback:g.jsx(AZ,{}),children:g.jsxs(n3,{children:[g.jsx(ve,{path:"/",element:g.jsx(SZ,{})}),g.jsx(ve,{path:"/about",element:g.jsx(VZ,{})}),g.jsx(ve,{path:"/menu",element:g.jsx(CZ,{})}),g.jsx(ve,{path:"/contact",element:g.jsx(OZ,{})}),g.jsx(ve,{path:"/auth/login",element:g.jsx(IZ,{})}),g.jsx(ve,{path:"/auth/register",element:g.jsx(xZ,{})}),g.jsx(ve,{path:"/auth/forgot-password",element:g.jsx(RZ,{})}),g.jsx(ve,{path:"/checkout",element:g.jsx(PZ,{})}),g.jsx(ve,{path:"/queue",element:g.jsx(NZ,{})}),g.jsx(ve,{path:"/rewards",element:g.jsx(DZ,{})}),g.jsx(ve,{path:"/profile",element:g.jsx(kZ,{})}),g.jsx(ve,{path:"/faq",element:g.jsx(MZ,{})}),g.jsx(ve,{path:"/terms",element:g.jsx(LZ,{})}),g.jsx(ve,{path:"/privacy",element:g.jsx(UZ,{})}),g.jsx(ve,{path:"/cookies",element:g.jsx(jZ,{})}),g.jsx(ve,{element:g.jsx(FR,{}),children:g.jsxs(ve,{path:"/admin",element:g.jsx(zZ,{}),children:[g.jsx(ve,{index:!0,element:g.jsx(BZ,{})}),g.jsx(ve,{path:"queue",element:g.jsx(qR,{})}),g.jsx(ve,{path:"history",element:g.jsx(GR,{})}),g.jsx(ve,{path:"users",element:g.jsx($Z,{})}),g.jsx(ve,{path:"inventory",element:g.jsx(HR,{})}),g.jsx(ve,{path:"products",element:g.jsx(FZ,{})}),g.jsx(ve,{path:"analytics",element:g.jsx(qZ,{})}),g.jsx(ve,{path:"feedback",element:g.jsx(HZ,{})}),g.jsx(ve,{path:"settings",element:g.jsx(GZ,{})})]})}),g.jsx(ve,{element:g.jsx(FR,{allowedRoles:["employee","admin"]}),children:g.jsxs(ve,{path:"/employee",element:g.jsx(KZ,{}),children:[g.jsx(ve,{index:!0,element:g.jsx(WZ,{})}),g.jsx(ve,{path:"pos",element:g.jsx(QZ,{})}),g.jsx(ve,{path:"queue",element:g.jsx(qR,{})}),g.jsx(ve,{path:"inventory",element:g.jsx(HR,{})}),g.jsx(ve,{path:"history",element:g.jsx(GR,{})})]})}),g.jsx(ve,{path:"*",element:g.jsx(YZ,{})})]})}),g.jsx(_Z,{isOpen:t,onClose:e,cartItems:n,onUpdateQuantity:i,onRemoveItem:s,onCheckout:R,onEditItem:b,selectedItemIds:o,onToggleItemSelection:l,onSelectAll:c,onDeselectAll:h}),f&&g.jsx(TZ,{product:f.product,selectedSize:f.selectedSize,isOpen:w,onClose:()=>{E(!1),p(null)},onConfirm:v,initialCustomizations:f.customizations,initialQuantity:f.quantity}),a&&g.jsx("div",{className:"fixed bottom-4 right-4 z-[100] animate-fade-in-up rounded-lg bg-gray-900 px-4 py-3 text-white shadow-lg",children:a})]})},JZ=()=>g.jsx(wW,{children:g.jsx(zW,{children:g.jsx(EW,{children:g.jsx(gZ,{children:g.jsx(AW,{children:g.jsx(I3,{children:g.jsx(XZ,{})})})})})})}),kL=document.getElementById("root");if(!kL)throw new Error("Could not find root element to mount to");const ZZ=aU.createRoot(kL);ZZ.render(g.jsx(ul.StrictMode,{children:g.jsx(JZ,{})}));export{hj as $,q3 as A,yZ as B,SW as C,GW as D,$3 as E,jW as F,nj as G,UW as H,fi as I,Nf as J,gN as K,Xn as L,fj as M,Nv as N,Dv as O,TZ as P,FT as Q,Vr as R,Sj as S,vf as T,kv as U,_j as V,xj as W,gd as X,Cj as Y,fN as Z,mN as _,nO as a,ej as a0,sj as a1,pN as a2,tI as a3,gi as a4,sI as a5,Y3 as a6,ul as a7,vZ as a8,uee as a9,$R as aa,eee as ab,a$ as ac,bO as ad,dh as ae,p$ as b,Se as c,Qe as d,yp as e,_c as f,_$ as g,Kb as h,dN as i,g as j,Wp as k,_r as l,TW as m,ZO as n,rI as o,mZ as p,is as q,x as r,dee as s,DL as t,oa as u,hN as v,s$ as w,Wb as x,Ht as y,lC as z};
